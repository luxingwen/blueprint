const TPL = `
<div></div>
<style>
.bue-render{-webkit-touch-callout:none;border:0;color:#fff;font-family:Roboto,sans-serif;font-size:13px;line-height:normal;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline;width:100%}.bue-render .frame{background-color:#a6a6a6;height:250px;overflow:hidden;position:relative}.bue-render .layer{height:100%;left:0;position:absolute;top:0;width:100%}.bue-render .reference{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAG1BMVEUVFRUWFhYkJCQlJSUzMzMmJiY0NDQxMTEyMjIQl+acAAAAXklEQVR4AWKAA0HyAAOTkrIxCDiHQkAqifSgMWDUgFEDRg1g7wCCFhcgcEsjB4wGIqCdOhYAAAAAGORvPYw9CXQ2AQCADwAAgA8AAIAPAACADwAAgA8AAIAPfgAAAASSCCi35k/7bwAAAABJRU5ErkJggg==) repeat 32768px 32768px;height:65536px;margin:-32768px 0 0 -32768px;position:absolute;width:65536px}.bue-render .canvas{height:100%;position:absolute;transform-origin:0 0 0;width:100%}.bue-render .multi-select{border:1px solid transparent;border-image-repeat:round;border-image-slice:6;border-image-source:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAW0lEQVR42u2VQQoAMQgD56e+LS91L7LYQw+rhYViPBkwiAYChqIMUrfjVsZAHkCkbsetDAK5VzfIAhWcErBY6zvqk6d07H3jz0ccgXHiOHGMdJ2RetHWC9dmvD+e8yPwCj5gxgAAAABJRU5ErkJggg==);border-image-width:6px;position:absolute}.bue-render .link{overflow:initial;position:absolute;z-index:4}.bue-render .frame-header{align-items:center;background-color:rgba(0,0,0,.5);display:flex;font-size:18px;height:40px;pointer-events:none;position:absolute;top:0;white-space:nowrap;width:100%}.bue-render .frame-header__buttons{border-right:1px solid #fff;color:#fff;display:flex;padding:0 5px;pointer-events:all}.bue-render .frame-header__buttons-fullscreen{cursor:pointer;padding:0 5px}.bue-render .frame-header__buttons-fullscreen:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAe0lEQVR42t2TwQnAIAxFs53O0Q1cyCk8uo54b7ynET4ltB4suVV4YIj/ozEhEWnKqbAyQFHoQTF5hqaRrFdfGPTXKSQY+6wcIC4MoslnaHgmBoKg0CYBmmGfkD4YJGju4lRz7R0iNGUGLn5g4C6i+xvdjeRuZfcwucf5AiDSUkJYHhoGAAAAAElFTkSuQmCC);padding-right:5px;vertical-align:middle}.bue-render .frame-header__buttons-fullscreen:hover{background-color:#c89307}.bue-render .frame-header__buttons-fullscreen--exit:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdklEQVR42t2TIQ7AMAhFe/6qKuR8bTU36AnaY+wCjGUIQsiy5LuRPNNPnqBQRMRDyqkMJWbDMvLvsanLUzMRTMv6m6BZEycCtqxFASmHsT8ItuunInmtRLAklhsOB2oiqEnfuAOIHwjgIcLfCC8Susr4McHnfAHzdlKqYXJTxwAAAABJRU5ErkJggg==)}.bue-render .frame-header__buttons-panel{cursor:pointer}.bue-render .frame-header__buttons-panel:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAApklEQVR42oWRMQ6CUBBE5xB02FLwC+5hFFs4ENacAbA0FCTcg4Qea+k4wbMAv58EYbqZnWRnZyULfDomJjpO2gIRX0TrQUCGkcitIZcIuRPMhgoY6XHR8wYekjizh4soHPokIaF2lFKEtAtpbKpmUVqMJDxeAFyt4QbAgDdTjwGA2Bpix4DZXRGK0olUk5KuQhbHZ/4tagSqvaoN2VL14bM23u3/1A9okEUmPlbeSQAAAABJRU5ErkJggg==);padding:0 5px;position:relative;top:2px}.bue-render .frame-header__buttons-panel:hover{background-color:#c89307}.bue-render .frame-header__buttons-reset{cursor:pointer;padding:0 5px}.bue-render .frame-header__buttons-reset:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAjElEQVR42oWQuw2AMAxELVFRsgIrZAPECkyAREWLkgEomIUVMgFDpKajon8UBCF+5tydnu5sizxETYchOY0Vd5kJgBl3AO6W0NJTkJ6GE13vAAsZDcM3UOIJagUBq1VUjGoCyw4JNROtdkMH9BpggEIET7kH34GEmVSEnICNe78/Chu3/izL8X/A+HQ3faBo29cKeDwAAAAASUVORK5CYII=);padding-right:5px;vertical-align:middle}.bue-render .frame-header__buttons-reset:hover{background-color:#c89307}.bue-render .frame-header__buttons-separator{position:relative;width:10px}.bue-render .frame-header__buttons-separator:before{border-left:1px solid #fff;bottom:0;content:"";left:4px;position:absolute;top:0}.bue-render .frame-header__breadcrumb{color:hsla(0,0%,100%,.65);flex-grow:1;overflow:hidden;padding:0 10px 0 5px;text-overflow:ellipsis}.bue-render .frame-header__breadcrumb-item{cursor:pointer;padding:0 5px;pointer-events:auto}.bue-render .frame-header__breadcrumb-item:hover{background-color:#c89307}.bue-render .frame-header__breadcrumb-separator{border:solid #fff;border-width:0 2px 2px 0;display:inline-block;margin-right:8px;padding:6px;transform:rotate(-45deg)}.bue-render .frame-header__current-zoom{color:hsla(0,0%,100%,.25);font-weight:700;padding-right:10px;transition:color 2s ease-out}.bue-render .frame-header__current-zoom.update{color:hsla(0,0%,100%,.65);transition:none}.bue-render .blueprint-type{bottom:16px;color:hsla(0,0%,100%,.15);font-size:55px;font-weight:700;pointer-events:none;position:absolute;right:16px;text-transform:uppercase}.bue-render .panel{background-color:rgba(0,0,0,.5);bottom:0;display:none;max-width:85%;min-width:225px;overflow:auto;position:absolute;resize:horizontal;top:40px;width:225px}.bue-render .panel__button{display:block;padding:5px}.bue-render .panel__infos{background-color:rgba(36,36,36,.75);border:1px solid rgba(0,0,0,.75);display:none;padding:5px}.bue-render .overlay{align-items:center;background-color:rgba(0,0,0,.3);display:flex;font-size:24px;height:100%;justify-content:center;pointer-events:none;position:relative;text-align:center}.bue-render .node-color.event{background-color:red}.bue-render .node-color.event.gradient{background:linear-gradient(90deg,rgba(255,0,0,.4) 0,rgba(255,0,0,.1))}.bue-render .node-color.function-call{background-color:#79c9ff}.bue-render .node-color.function-call.gradient{background:linear-gradient(90deg,rgba(121,201,255,.4) 0,rgba(121,201,255,.1))}.bue-render .node-color.pure-function-call{background-color:#aaeea0}.bue-render .node-color.pure-function-call.gradient{background:linear-gradient(90deg,rgba(170,238,160,.4) 0,rgba(170,238,160,.1))}.bue-render .node-color.parent-function-call{background-color:#ff7200}.bue-render .node-color.parent-function-call.gradient{background:linear-gradient(90deg,rgba(255,114,0,.4) 0,rgba(255,114,0,.1))}.bue-render .node-color.function-terminator{background-color:#c0f}.bue-render .node-color.function-terminator.gradient{background:linear-gradient(90deg,rgba(204,0,255,.4) 0,rgba(204,0,255,.1))}.bue-render .node-color.exec-branch{background-color:#fff}.bue-render .node-color.exec-branch.gradient{background:linear-gradient(90deg,hsla(0,0%,100%,.4) 0,hsla(0,0%,100%,.1))}.bue-render .node-color.exec-sequence{background-color:#e8aaaa}.bue-render .node-color.exec-sequence.gradient{background:linear-gradient(90deg,hsla(0,57%,79%,.4) 0,hsla(0,57%,79%,.1))}.bue-render .node-color.result{background-color:#ffd3aa}.bue-render .node-color.result.gradient{background:linear-gradient(90deg,rgba(255,211,170,.4) 0,rgba(255,211,170,.1))}.bue-render .node-color.default-comment{background-color:#fff}.bue-render .node-color.default-comment.gradient{background:linear-gradient(90deg,hsla(0,0%,100%,.4) 0,hsla(0,0%,100%,.1))}.bue-render .node-color.macro{background-color:#fff}.bue-render .node-color.macro.gradient{background:linear-gradient(90deg,hsla(0,0%,100%,.4) 0,hsla(0,0%,100%,.1))}.bue-render .node-color.material-graph-root{background-color:#ffdab4}.bue-render .node-color.material-graph-root.gradient{background:linear-gradient(90deg,rgba(255,218,180,.4) 0,rgba(255,218,180,.1))}.bue-render .node-color.material-constant{background-color:#907623}.bue-render .node-color.material-constant.gradient{background:linear-gradient(90deg,rgba(144,118,35,.4) 0,rgba(144,118,35,.1))}.bue-render .node-color.cast{background-color:#137479}.bue-render .node-color.cast.gradient{background:linear-gradient(90deg,rgba(19,116,121,.4) 0,rgba(19,116,121,.1))}.bue-render .node-color.switch{background-color:#ff0}.bue-render .node-color.switch.gradient{background:linear-gradient(90deg,rgba(255,255,0,.4) 0,rgba(255,255,0,.1))}.bue-render .node-color.timeline{background-color:#ffb100}.bue-render .node-color.timeline.gradient{background:linear-gradient(90deg,rgba(255,177,0,.4) 0,rgba(255,177,0,.1))}.bue-render .node-color.break-struct{background-color:#0059cc}.bue-render .node-color.break-struct.gradient{background:linear-gradient(90deg,rgba(0,89,204,.4) 0,rgba(0,89,204,.1))}.bue-render .node-color.pcg-execute-bp{background-color:#0059cc}.bue-render .node-color.pcg-execute-bp.gradient{background:linear-gradient(90deg,rgba(0,89,204,.4) 0,rgba(0,89,204,.1))}.bue-render .node-color.pcg-density{background-color:#79c9ff}.bue-render .node-color.pcg-density.gradient{background:linear-gradient(90deg,rgba(121,201,255,.4) 0,rgba(121,201,255,.1))}.bue-render .node-color.pcg-input{background-color:red}.bue-render .node-color.pcg-input.gradient{background:linear-gradient(90deg,rgba(255,0,0,.4) 0,rgba(255,0,0,.1))}.bue-render .node-color.pcg-attribute{background-color:#fff}.bue-render .node-color.pcg-attribute.gradient{background:linear-gradient(90deg,hsla(0,0%,100%,.4) 0,hsla(0,0%,100%,.1))}.bue-render .node-color.pcg-default{background-color:#000}.bue-render .node-color.pcg-default.gradient{background:linear-gradient(90deg,rgba(0,0,0,.4) 0,rgba(0,0,0,.1))}.bue-render .node-color.pcg-spatial{background-color:#c0f}.bue-render .node-color.pcg-spatial.gradient{background:linear-gradient(90deg,rgba(204,0,255,.6) 0,rgba(204,0,255,.1))}.bue-render .node-color.pcg-spawn{background-color:#197667}.bue-render .node-color.pcg-spawn.gradient{background:linear-gradient(90deg,#197667 0,rgba(25,118,103,.1))}.bue-render .node-color.pcg-params{background-color:#ff7200}.bue-render .node-color.pcg-params.gradient{background:linear-gradient(90deg,rgba(255,114,0,.4) 0,rgba(255,114,0,.1))}.bue-render .node-color.pcg-filter{background-color:#3e2d61}.bue-render .node-color.pcg-filter.gradient{background:linear-gradient(90deg,#3e2d61 0,rgba(62,45,97,.1))}.bue-render .node{background-color:hsla(0,0%,6%,.7);border:1px solid #000;border-radius:5px;box-shadow:0 5px 5px 1px rgba(0,0,0,.3);color:#fff;cursor:move;display:inline-block;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;white-space:nowrap;z-index:5}.bue-render .node.rounded{border-radius:15px}.bue-render .node .header{border-radius:5px 5px 0 0;line-height:22px;padding:1px 1px 1px 10px}.bue-render .node .header .name{margin-right:20px}.bue-render .node .header .name .subname{color:#889478;font-style:italic;font-weight:300}.bue-render .node .header .icon{display:inline-block;height:16px;position:absolute;top:3px;width:16px}.bue-render .node .header .icon.function-call:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxElEQVR4AZ3MJVREQQCFYayfg1uikqh4xN3JZDKW0Yb3jPeINtzdHdZ9Z2+46zbzwvd07p8ghJA2uCfG4BuewADvKuNxELDF9wM4kR1ng5OBIn6rgxLZwAjHxtB/8YZZUA3HDNxCgUqgFy7AxYABNqQDjKSAg4EOflcK1HHshDQtgRkGPvlNObDHwI7WwBcDU8oBjDLAyUCllkAzxxZIiRngoA/6A94XGVjmt7iBXzBDPhSCHfSQJhu4BAdH33AM+RHH5AG/KfjGRY2Y0QAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.pure-function-call:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxUlEQVR4AZ3MJVREQQCFYayfg1uikqh4xN3JZHogow2PVFx6RBvu7g7rvrM33HWbeeF7OvdPEEJIW/idG4JveAIDvKuMh0HAFt8P4ER2nA1OBor4rQ5KZAMDHBtD/8UbZkE1HDNwCwUqgV64ABcDBtiQDjCSAg4GOvhdKVDHsRPStAQmGPjkN+XAHgM7WgNfDIwpBzDKACcDlVoCzRxbICVmgIM+6A94n2Vgmd/iBn7BDPlQCHbQQ5ps4BIcHH3DMeRHHJMHtdT2LANcbFsAAAAASUVORK5CYII=)}.bue-render .node .header .icon.break-struct:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMklEQVR4AZWTA5BcSxSG583atm3btm3b9r7Ytm1bxdi2k1tr2zo5szb+qu+y+2uTAGBebNu2je/Lly+WP378WFJaWnpz3bp14pTv8xZYWVnr//79uxqGc/v2bbEFCRQVFbk+fvz4a7h+b1NTk9C8BRGhAczfv39/AJh9+/atOHXq1OkrV66IzFtw8MRtck1N1Z2nTx7tpbwLCgr+9////9NMEBi75qbbJ1z6ZRN3gbCOOUtYRp8hzEIOlJqHHim1jDxZ6ph844mB6/9yE+XDAkk1Dx/H3BeQcrwa0k7VQurpGkjG54SjlRCzvwwi95SA58qvYBpxpnpagWX4iWtOBR8h7kAFxB+qhNiD5RBNqbi3BMJ2ERC8/Q94bvgKFrlPYVoBn4RRnE7gFTBNfgFmqeNIfwHmmS/BPOslWC95A5YpV+ppaBmkSCSSIaI8YQ4k1Zw2yZjmdsqaL+6VN/+/U9lmRZ2y7YpaFdvlNco2y6pUbP7/wMYrk4UVs5EcxGeCQEnbmSwirS/AxMprT8/IFjkGeyQzK3dEVFTMChlpqbSRluno6BimLCPGBVmDrEBWDrNMgJ9vc3d3F3z48KFOUlLS7fjx41G7d++mm07gjCxDlo+D8l7k7e19pqurq6+2tra9v7+fuHfv3rQCMsKHCCNCiCAiQCaT+URERGIIgugETHV1dTkbGxvXgs5CcHCwC27h558/f27CQ9XEzMystCABhhuJpKGhWYrzsAbvEpTv/wA6y1RMxTJupwAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.make-struct:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACBklEQVR4AZXSA7BWbRAA4O9HNciuUbbtrm3btm3btm3btm1zPLm2vbZ25jnntQkAQKioqBAoLC4OXEgf1OKnrKzMHf8QEROrFZ+QyFhQVct5oAGePXt2pLy8PBkw/mCkFxQrHGgAJSWl/0tLS+1hORKzskUPNICjk9Ox2PhE9ZraurDBwf7yys5RygMNsN4HBg0lKumEPnKJuJF3HI4jn3i9Rz/z+40SCQSNkoiEj9LIpVW8YTC8ue0A1x4zs9No1IB86DQoRsyCQuQMyGFaOngSxH3HQMRrBFjMO+GTcNT0/Rd0/28ZgEQoLIVWuxUk/SZAKmASJPzHQWyho/cICHoMAZ/rALDYdQKxRiV8pFU4s2WAC1ffS77kSYJPcjXwWWEdpRogUqkFItVaIDNqABL5pPmbD8i3rGB5G7QONz9pfL1FZPjzDpH+1wfkZnMPKMxmH1KYzjwgN5l6SK7fcun6pwcbzkBcXPxQZ2en8MzMjHtzc2MeCxurOYFAEEeqiH8dPsSDmNGF1QFcXV3/KykpUYXl0NYzjMEGGsga2SxYTlsiC2SH6DZsISYmRhIwfvz48dPO0SUVG8ggueW/FJJAokgEsaFLqwMYGhp+BozIyMjq169fB3Jy8xRiAxr0z4I9HxIREdFlR0fH8HPnzrljBxUkhu4f6CViXERk6MRy/t/9DPAXmoNf4gvM5s4AAAAASUVORK5CYII=)}.bue-render .node .header .icon.make-array:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCElEQVR4AWM4duxY3P6DB+eb2tgykIMZjhw5MvU/ECxbtbpi7br1/vtOnA4nyQAjIyP2o0ePbgQZ8g8Itu47mEeSAQUFBSyHDx/u/Q8F63fsTCbJgP4JE3hXr11feur0mSX37989evz6Y3eQBMxAfGwQxmEyQiEDA0MtLjbMAJwYpAiE8bGxahxiXkhNTWW9fv164qtXr6ZevHh+Dz4vgDRheGHy5MnMhw4dKoZJVNbUryLZC6tWrUoHCf769et3T/+kzSR5ob6+3h6kefny5SfNzc3nh0dG7QdKegExIwgTTIkODg5S/f39S0VFRacCNRQBcQoQaxOblGFOlQBiFyDmh/KZiDUAAB5wcNBYHyBEAAAAAElFTkSuQmCC)}.bue-render .node .header .icon.make-map:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABpElEQVQ4y6WSv2sTYRjHP3c5bYMWrenRGITWQYgVIgRqnK5BnOrmIjoUBbMIcRAXQbg/QDBT5041WKcObmqJkIBVkRT0FLqpcE3cbEGS9v26nHCEHFb7hQfe5+Xh+f54X1qt1sJao7HEf8IxxpTKnnfzycqzLyOOE4znTo1eujj7dN8bisXiSLPZXJUkY4x5/qpxV5IlKScpK2lM0nFJk1Efr5OO53l7xphNAMuyrF7v1w4wCXyPOB4BF4C5oRampqfTYedH+Pbd+2V3Yvx0dmrmG6DYzC6wk+TAGnYp6SjgA33gJZAFzgB2fAxIO0nhRrK3gY+RpbOxBYrIx5IWHAa86LwOzABXBxQA2DYHRJKCHvA6srAJ/PzDOGjBrlQqh4IguNXpdBbb7Q8vYsmvA20gBLaAIFafgU/AhlMoFEy32z2Rz+fvuK7Lg4f+CvAYuB9TdB6YHybVrlare2EYbgP0+/3dTCaTlvR1wOaRxBB835+TpHq9/qZUKi1du35jLZVKXdnvV6ZcLudqtdqy67qLwD3gNnDuX18jC1wGjg2k/Vf8Bnx5wo6lIw7RAAAAAElFTkSuQmCC)}.bue-render .node .header .icon.event:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAo0lEQVR4AXXBTUpCUQAG0M/2FDxoVpMoG9REooFZ1qgSBSFRl9DW3jpqDUEnnncg159zUnPlMsd515nlMBN8ecIq+0x1msQd1ql5U/STxC0+s2WGH61Wkw33WKXwoTNMxQjzJC4U4+ywwPlJflP0squXwkjnIRXPmKbwim+tVpMNAyyy5VHRTxJ9zFMz1jlN3GCZfV6wdO3POocZ6kxynMZZKv+91JsD8SUcfAAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.exec-branch:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAA6UlEQVQoz2NgwArOtu5QxyqxX+1k5qPeh7P//f/1/krZOmEUyRU8dyb9RwEXW3qY4dJRnA/3/P//fN/hmCMmF8N+fX6weJ/lKlYk/Uf7/v8/3g9hZ3LvVEGzu0Pkz8+X5xoYsTpss90+u+P5//9vzcTuI4b/XyBO2uJErgKCViAc6cDEoMzgyODLEMoQxTCDoYbBn0EWxZs9pxlKGQIZrESsvCMY0oAKjRigYcnGYMCRseU17oBiYZBnCORev3EbnqAGAl2GOpOurpn7l59Y9+//l69z5xs7MqBGFwMjgyLEkbM3aK+AOBIARSWU16VenEYAAAAASUVORK5CYII=)}.bue-render .node .header .icon.macro:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADIUlEQVR4AXSRA5A2RxRFJ7Zt27bz21rbtm0bn22jNmvbtm3b+9ITc6rO+J7qvg97+6PT/4lftCQ5s3x0XJI7OKZtl+T4f//9ryAoXs6o61yEzPJxOKnro//7e03zmGPHLrvf/J8Cax/u835xPxldMQpzN3dO8ihtnIOsigmIp1dUWXrx9SxcUw2K6mfAPVwuePH1r2/9Q3DZIPAEQdBaJ8wc3swsnwLPcPnsBV1frSx0X1Q3C5Wt84Df51ZNQ037ApQ2zcElwyCHPwTPv/7VvVZu6SRZ3jioiiYghly++8n3+p9+fVz/By3TQPN4cm4ZLiqun4WssrEjr0gu8YerDo/9bQtuwQKWKGsU2KpeoEp64Pvzjud///biWz9e7+CVllJQOwPS3KGj78476P3RgW9cLssrOltBEfdsMNVDYBxAide1ik46edXD4K/9vPz29zeksyvacYmjP6/623NOd14xiX4AIwh6tpnKIWDKhyBF2AnGwcyTeOCjb7Sv/+dk7LzIIXgXXHXfPl3WORZJLO3GwtMrBpNZrZs06SBquxkt3Unn/0Zr78uxVRZMgBr1lFs5DencxhXs3U8vPP/eF1dejiRWTlBlg6Bnm6rCMOwmxHGEJ8ID8QniBrdgIVlRMA5kUetGGrtqOCA+o+kXMzruPH7RjktDgkRW6xGSCtC7txF2CGeEy733PxaayqrfEGaOwFen9RV33P3AS69/dPxxPPz8cy9/fMzEiVCfyu0CsrgfCMIecAiUZFp5CzX17Ain9WySQuNpdfO8jBE04qq9x555wwLlbkXcjMDsn3v5QzFB1A/J7E6IJtcBRTwA+GqIwh5EL+Als9XDwEBFUyV94BeXv3zfg09G4VkEdhvivq9+1M+1dKev3HH3Q4QvjxnSw1LLZ9P53UjaCoFxOUNapmGCsOTCVVzkFiwavPu+R46h3Lu/d/Ao4uclsbJxtgPpVJCfkwqm3py58g7Itv+iUio9QLECTT27LbEZnTe5uAUSQM5HSYlAwAXEoiA2GzsXh294+aGqjq3vCxvWfFJUtwiEyqsBsSUQi4NiBaQWAFVQthrhyarSAAAAAElFTkSuQmCC)}.bue-render .node .header .icon.event-custom:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAA0UlEQVR4AXXBz0rCAADA4R/UA4UQDCoPihX9uXSJ6GCK61SJi8Ll9gi9WISHnqKuwWJB2y/WIBnq99HkkYes562ViNUcq88O1YRlTqwE4Jma0uSNtX0AT9QpC0bqh3Nfi8CgbIMXakLNOyt9gO8wS8ppvgUO1AfArrURFK08Acg2AYzVDrathVDs/UT880ntAA6sXAKUsWl2/9kCh+qEmtfqu3Nfvnpvux644bkas+CVf/IugD31kSZHVrbBU3XGMkN15rGlKavZtzJmPQN3aPgF+BS+KvXYCsQAAAAASUVORK5CYII=)}.bue-render .node .header .icon.input-key:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADHElEQVR4AWKcNWs2Azs7u7ybp9duQNvkAANJEgXQ3xhbZ9u2bTNOzjZinW3btm2sPcjYVttd+3utl7yyEQ6HGVnVpNmzZv1wwP77nYB50mx1yo1apb7r7rvvGwmHjR9++OHrQbfzDKyARWHHHXeMBgKBHVmGBQIG8KJM+32+3RmGBs0wd9V0XUgmYhvZNsDue+0n/NH9dtUANAoMtjRMC0xCwLRxCMtSnTzBOsxqhmEqhokZCmAyGevgsOYKqtWaUOxNZ9mE8lM05W93uo1vfv0rRbMuYpoGJ44Hwu8z5rhCobCZzxU6sAbLzmAlb7/7/gnvvPvuO5Zlma1uX583Z3bjtNNO3R6rrN5wnP3up1/PL+Ry5olHHqRtcIBSsXjqPQ888B2FS231xtqsGf+Vzj7zjN1YGqBYay/446fv9oV1oNfM7L3PPrheBaaiCqKi2aqm27Kqg6hZMJpMTdgAzI033uRpNptHxOOx7ectWLRbsdFJ5ItlEct6vV63sSiTV4qVqlQqlRq59OLFW2y+2WaXXnrpVnvttefmxWpThCVL0lvxsmoquk26I548/9pbc2vNtjLmBH3u4uzg5dfeTPdGE23Ci/r/s+eX585bMFEMm4iyRrLl5hm0qqpgmpZGiA2MywWxeMIVDoXdwWDQFQgEXYlk0hWJRN2hUMCl6hqRFZmiGQoomgZBVoB+/PHHKZzNJ+kWSJoBuG/vVFLo/piH9mBo9Ycj0ukP7c6Qszu9gT0Yjc0xL4NmA0x5kTBHHH2stjhf+e/hB+//7K3XXkn//N3X/Y8//ji7aOEC2e1iAroswz///c///+8/AkVMSkXmLky/+eOvf9z931+/zwTnGh2RKLozejF658033/ynTQgx0J///Jf77Isvp07a4Zbb73gS2wRRhr3yyisYTOyHHoX6URFVff4ATWECxc/mpTSP10k7OGe2D0ZnoX+zK8pa6C+ojfJO3Ov3D56XKRiGrlO5QkEQxiMSSW3icbG01esPFmKbX1Fh2UvcENdce81uFMPuSWyCKyEDAOL8swQQ0Amxsi++8GIRkKWao+KEz2+NEQAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.flipflop:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAA30lEQVR4AZXBoU7DUABA0ZssoDBV+PEFy3NYhh6mjgSHmJh9mUIgKGKpboKa3Adg6tDlC8gLGlODIyGXdOxtFs7hH9yokT2DWpFZ2Kste1ZqIDP6a8yOyY4DO5OtesuWpRrJDGplVBu23NhbkFmpwbGaACzs3XBgsgMwqQGMaklmqUYAGzWCycSBrT1blmrrVK3IHKsNBZFHbuztbdTAJfecAUZ9m3HHnGvqj1cHHResmDAwfb+zZMExI5ZPL6rPNSsmDJzqumXOiMHp1Vq/PqkJ7JywYM4R2TkVD0z4qx9tmayOri2bGwAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.sequence:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABAElEQVR4AaXBvUqCYRzG4d//9dHXBgkE+1hqkloaHFqcmzqTzqJj6BQ6jiKipaZaElKKqEhLzY8SfD+eO9QcAoeg6+LfDEAhp2zh8GBFHXJASoqQbTomYqoMOSPAgDZGkU+gzpykPgsFzI1YyKkACAiVQ8gSftO5mmpKSvSguhqgY/XV07WOABwNcgSsknyNRytRAhflirxT+eSNPbrMSPEHZapMZAEjQ551Sg4I2IVxyD5dSrRos8ESnh6XeAdY4R68y9/t1MxdNSqFaFxb9gExjogZKdWgrWfdQPoet3LGD8fU4LabtUwn8+phaE+daJsaU8ZclTVmmky88MhffAPYR3LALeaIrAAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.cast:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAVElEQVR42s2QsQ3AMAgEPdqPxqhfs8SlCCh2pFhpIoXujxMCxvhpKRQboABm0qCRAhalQEkKplxCFjHGQOdSFCbJaUKeyjXBtx1c+uMVXtsv/vBtHbXUa0gw2w7CAAAAAElFTkSuQmCC)}.bue-render .node .header .icon.do_n:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAlUlEQVR4AaXBsQoBcQDA4d/VPyHD2Uxmi0iZTCalPJN7FavRC3gAq9XAYLIYdCJ+Mih0R/J9/ERNQHkSeDWWD9RElTwKJsrf7Lpx5Yg89p2qqUOIQMlzjEqBuyt77iSiChw4EwM7stlwpm5tkc2eC+d2AAJQ5035kk6IaXJiGYABcuEhQFqgRpGYIsuILBXaFFix5rsbWsFEQ+tzCUAAAAAASUVORK5CYII=)}.bue-render .node .header .icon.do_once:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAlElEQVR42mNgIAX8b/j/H7+C/wQUgJQQtOJ/AwErCFoCVmj6/9H/u/99cStw/L/q////3/97IRmMFXyHKfj7/x0Yvv3/Dizx5f97MP0YlxUa/zf9////2X99XAqs/5/+v/+/EYwvhw45LRhyGGoY4hl0IApSGVIYEuEwlSGVIZuhhaGHoYchHZc/eRhsGJwY5ImKYQD+WHEvPFQJQgAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.loop:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABDUlEQVR4Aa3BvSuEAQDA4d97dzHISSlRt3AdJfnKgJSPukFRNotBGZTFaDH6F/wJBqMyyqAYDEcmOp3oOKXuCJfi/emKdEUWz8N/ctArL5zmJ3Y45rhbatkpE06Y4otJd3z1W9kVy766YxKw1awVZZ8sWnHtogUrsrbihlpywXY73VZv7DFu0gVL6gbm1FUARzxyz34+uarmsKimAYxQxbRajJAHZgGCkGqzQD7GJuss3dedHhRrMl0v9U2FgbO20nVj9zDzwCZzicsTf3F5MpcIWIs3bzeM9kZajL7FDKLv0XcgDG/3j2ceHu8Clklxyi6PwBshATECIM4k3ZwH1DJEH3WEVIvwTIZD/vIB8XLEOPFRlsoAAAAASUVORK5CYII=)}.bue-render .node .header .icon.foreach:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABHElEQVR42pWPO0sCABRGDzVEDQYtgdFSki2SCLW0VIND6WJTQ0PS0lZLSLTY4JDg6NgPaHAonHOVJnFwMYWCCAqUCEQcTktkr6UDZ7n34z7gE5e9984kf2HYNde9VHtuOuuGC8NmyLJ9h/Q8tGffsiHAoM2P8psdVR/c90nVpkEsql33nHfRK/XRJQOG3LOrFrGtZgBc9dYbY5+rM2obO2ocwJEfh8fVzn8Cv14fBp4TzDBHhANO2CHEJHMEnxNqh0FDK1VOOVbOlHMlxhGnlaoOGpSuVV8vGGOaFLusMM5od/v1QrV0zVS+3lKF76rWW1N5yAYKtaI1IDzUF2u1YqBAFqJkyJH+PoEUaXJkiAJMECEObH0xSZwIE/AOYCnwUXtA5vgAAAAASUVORK5CYII=)}.bue-render .node .header .icon.gate:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABVElEQVR4AaVRM6CcQRD+5tf5LrZt27bbqIztKlXUF6+JbaeMbVSxzcPmP+3uZPP68C3GHmL8/pTdwDkR6306WDkvoTVJcnUczFIXVF77RVavdjpFqaqiVgBATvhfCvHPdpA8y7WiFIhEIE45opBLhmoxOyQ+bl65b79QPe0mVIfeUotdY0aLr84k9cFXuLipWsumXZduGzj8zrp+HzQkpzkYZnCGGE9OV+uXyZEddB14UNACzGQH8k6Qbk51AO0z/LfJ17ZW5FKN5uHKGkX96maoSdVEPmMMbN/CodWLNqD0bAs3XNZ0ulfhYyqUqpowKeCWXJ7U8djTl69D0vuuCsniV9WixdB25U1yjYVzHC6uMLlHNHAaMAgo/SYFcvAM/UCYFPdeHq565tXTJ7DIYku7Mi7jxlCNq17euv6WjN8EtMFXJEH4eTQsRBAGmQ+UlH1ZPwADYJqX7zDGbwAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.spawn-actor:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACoklEQVR4AY2SA5QcWxRF+9u2bdu2jdi2bdtuq6oGbWts27ZtnNw4jeCutYvv7EcegEtisVh+nzt37sdn3g0Gw00cx306bNiwKy9LYLVavystLS2kwO0ikeiZlpaWBD6f/xcAnlfjJUuWXr1169YPDhw4OHb37j3j6P3DPXv2vgxgoK6uLrGzs7OaZLFn2ruFFy5c9BvLcokmkxkWixWxsXEoKChESUlJ4cDAQDdOV1xc3DqJRHKtm2Ds2HETjEYT7HYHKEzYEBIagbz8QnR2dsGzaBqZMTEx406Gf/rpp3cDA1V9ZrMFBKKjY5CVnYuIqDjojDakZ+bgTPX09DRmZmaOJL6kkbxyUrBu3XqlwWCEXm+AzWZHbV09qFBSVglHcDjqGxqRkZ2PpLQsdHd317Ese63bGhw6dLiIRgCNRksjsCKP5t3S2o60zFy4QqMQGhkHldEOTmtFcnp2p91me8JNcPTosUaGYUESaHVGWO0uBIVFweoMhcEWDL09HHpnJAKMTgiU6tYZs+c94CbYunVboUQiBcNwCFBpoNIaodZboKH562yhCEopRHBWBVS2SGzafaT2yquuvs9NMHXqNPmRI0chEkuhYPzBBmjAqfTwUxupVxccaSWwZ5SBNYVi5MTpOTwe7ws3wTvvvPP2mjVruw8cPIKjAgmEMgZipT8krApiTguZ2g5RoBU7jioGHnr0cYYEf3odpBdeeGHCshWrsHPvIew5yMe+I2Ls58uwjy/HXgGDDXsFg2++/3E4hXcQr/o8iQ8+9NCmf4YM75q/bA1WbNyJVVv2YfH6nRg5ZW7b408/F0NBAfEbcaVPAdV1xKjb77jL+PhTz2Y/8cwLeXfec18CfQsklhJvn2nrLXAX3Uq8QnxIvEE8RFzhq+1xp0uyH3vDKqEAAAAASUVORK5CYII=)}.bue-render .node .header .icon.isvalid:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAgklEQVR42mNgoCL4b/P/9H8QOP3fC7s0MojAVHAHrFeYgeH/tP///79Dl1YC69NHmIXPLdhMgEsK/98BNssLlwKQ9Dvc0vpg3Tb4QgKP85gZfBl6GHoYchiSGSoZ2hlC0RWwMTh3FoBN0GaoYtjM0IXbiiUMvgxSuCySY6hhqCApCgEvhWJnAgJmhQAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.blueprint-node:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAByUlEQVR4AWJ8eOvASkkFLUDj5OwvVxTE8d+cexaxbdtNzL/qtUEf1rGdVHGVLmaXVLGzupqZxZ3PPuN77DPaowYyFK2BWguoIQqFqMIpv3/9tMP7wshNpRpPUGE0oVZFMKBZZTgY8D4PP2LSBh+Fle9FYJaqACA7oOgbhQFmQZxE352kyX9CF7IPYyioyH9fLv0pjwVB1a5p9TEgBEDI4d/fH3/95ROHD6za9uF3kiT5THxCvlAkco4IWQI1cAQy3QQuACs+3zxz7J6fOnnymLlTx69NkzhHRNooCLyHKqCiEGUwMyQr2uwTCLUwLBZyAfu5i5ZtGzFuxhqBgtoiKIys38ranicCOBixcsOOykwfhtWfYViBsHbRNPUtOKjzgnyhHEfR36akpcw7MID27SdWiBySJElv37ygvlar/ldlAA6Kvi4iGO1VB0IcVdzj55+XeObkv4hk/1Lt23n68M44jmppiJLnJCkrMxDYBX3IbDKg6ziOwmoY4revlss1ChxcrgiI9KG4Lh3D54vgNIkBlPy+Q1c/dgTFuyPGTFoumgbmOPZpgvVgULPvc3l+++rpIwA1suunAJjTJdzISle0y3wK4DOAL3Wxrg3PNG+67QAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.select:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABZElEQVR4AaySA3IsQRiAn3mCLTwztm3b9gXiS8SniVFOSoOeWcxsbJvT+Xttd9XX/r/mC4yxV/hGsLs75ieILTuC2LwriE37gtB4QOpqdZfaJcHO7nC6Qll2JVcU3HF82hPHpz/STDBmUQz2+AgsipVYFOWNIIrsQLLsR1zcEYwJQKFTAeISrAQcn3pHxoAbIE97iXsT39fWe5ZYFCeRc5Pt00wIZthIkCQ9kTmi2LqlEmpPdME6ou81gqmpTj/ElR+TLQNkANNMKAjCDAKVquaEl2ffmwhgLP7a7hEYlkyKk6yPFv+kDY4ldxHsQBBp8xk5PuUMAueAMNJ2IIggx4AZL0qAOOCr3WeUyWQBLEqQyOchQdpS+5Hevn370ek/+Pz5c+DySvItCdYSAoRhparmWLu6+Q4gvTUTQPoJJAEJQLyOSNNgoBCoAlqBQaAF+Ge+HZhoh+eBDDEA4mioRR5QSyQB57aHAAKZXiEAAAAASUVORK5CYII=)}.bue-render .node .header .icon.switch:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABBElEQVR4AY3BwUrCcADH8e9/bpYogt6EJPASRBAEnYLoHAQ9RD1Jlx6ha9Bz1KFLnXoCCwrJTKJtOv/Tbb/QoSQk9Pmwirpq64TV9CFppGPDjG6o4pGRIs65osYRU2OX3CllOjj4DKlSVxMZA0TkFClgiQ0l9bRLTqEiluhNd9pjTl+K+Jsu1denrLIs0EC+LlTjF4cKGVBApmCxzuvBtUfOAzDMyKdoSpVtbRIPy7zzzRYbxDy4zCQFh1bjeZ97QopYxoiUEN9lqjla99LhWd2hmKRBwC0hIW3mvFI8kKwmyVi9fmOHNRZcgMmIx5fDyLGY5KkbGGIWDHMNWoDBoUOb//sBgDV++n4nGX4AAAAASUVORK5CYII=)}.bue-render .node .header .icon.input-gamepad:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACK0lEQVR4AdzPg46dQRgG4H99HbXC2rZt27a7tm3bOljb5rHNtfft1IjTsDN5os8UgH/yPzXYe95tC1feL5ZrjBKpZpCbkc1w9/fz+xgZEfmxqLjSTaQwcpWGIaVYO6w89zTq8B8N1m7YZZKWQcvR949CYRjHNPl/v6npaej6xyHQjKGqqbt29YY9Vj8bfPr4fidfrERerQbRTBU4sn40srRgNGpR2KRGRZcWLIkemdUKRBYJ0aUYgbt/8JWfDXKyc/LrOkSIYQiRUEoK68Uob+YhntGN5KJe0GrYSC3sQGSxGKnlYsRVKdDYI2q98+iFBXXlytWZtQ2to42dXNCqupBb2YPC2na0chXoECjRwVeiS6hBWUMnYnPr4J3HRYtID65uFHbugasoaxvbU+V1bSiu70FmcT2iskoQllM1bRuQIP/gFckneNa+MZLQFOZkIq0SMdllqBUZ0DM8grBk2gvKPyDobX5pA3LKW5BZ1oowWiOWbNpTbmZh6UqZmNkR1iZm5vYz58xnugXFTqUXNaKoQ4bmwWFkVHcGUydOnb2eSq8iNzYgqbwbBy7el1EUlU3kEzQi/7vM5avW8iLSC5FZ2YVy6SDufXBxoMzMzBeduXa/1SksffTM/XciM3OLGJLsStgQnwhrwp5wI6J2Hz4ldI3KmXpsHyD+PF5BYTcGIGAHYjkOLh5TIK0BxKJAzA3EHEiYE4h5gVgciHW5ePldgLQeEPMPfF4AABrQozcZBuj0AAAAAElFTkSuQmCC)}.bue-render .node .header .icon.input-touch:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACnklEQVR4AWL8//8/AyUAbEBbW4d7WVkpoAxy4JIlC4Jw1C21xzNr27b3fyyOls+2bdu2bdu2bZZvvrxjfN3RyIiTHZ3jiZGMEEK6riPPnTsvfd+n5557ThYWFiAMI0gVYQYMG926Ue2/p0EtmD177v9UiStXrlLXHn2oaZtO1Kx1R2rdtiMdOnyYypCsNbuOduE3CDCGaeaglCAIMX7iFDz73Ito3rAuWjatj6++/Bxjx03EzVu3oCAwFKWhUFuWL1/Zl0q5eu0adezSg6Ioosr07T+INm7aTIqQte3w2UnlDex4PA+lpFMpgCROnzmLilYB+BbIzs0FAZAsoSEHjAEmnkzmKUNjJRIJfPXF5xg6fCRX/wIpXrh7z17k5hXgjTdehyNLcrFYLKt8gW0nc0IAZYNff/0Z2Tk52LJtB9yLV/DeR5/g55++RwiBgIO64Jxhptv2HaujY8fO5okzl4+5RKQUsCTVRHkP2Lznl7yfvfH4fK/Rs5PG7l079Y+++vHBgwCPokgaQkDThAaNsSxLtdV8PyTBBjQ2+WGYBt28dTtcPHuybpw6dQpzZ06ek0hlfonC8GmABFcQ4C2nTp92NUB7+ZVXbNWLdxKgSd0wH92+dWPtqoUzXfz++59fPuZKHvfmdhRV+gszFiy/PnP23OvE+Dx0QqKHHFS6/SiU737w8cfGmbNn8iMJOJ4E94YQSkDcAmDYkSYDBAAeeQARIDmmcpata1nZOflGUVHRcxaHw0iAoCgJluT0OB8EEYAyU/0A+GnqQHZO7jOG6/n2ibPXfMcNeKSOx2LiyRj4BteM8LE4c/FO2nM8Nkp9rhhPmhRJSvBn/elkJvsDnscATaHeBM/p4f27V1U+lcl+mojKTJUSLPfOzWu7nwDYK7XSckdYIgAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.input-mouse:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACg0lEQVR4AXRTA5TjUBR9vxnbtn2wtm3bB2vbtm3btu3t2LYZtpPsm3Td7j25n8/5DyRJ0uKxY8eDYmPjTnz48FEZG5f48dMX5eIdu/eb6JLVOujZs1fzgoKiYglx9sIl6cnzl1IdYhJTn3Xs3NXyX3kF/IHhw0dYrlmz5rSJqZkdIKITUkD5TQlqFPTy9Ww9ZeacHfAP/jLQtGnTcfb2Dp4cL8h7UyMDMDc3kw2wvAgNmjQdtnjVhhCdBvr166/w9/cfKm8IkadAHw/w8ffTCCoIGBtTeiFhEaN1GvD19XMHyiAkOjkdvsQmwYuvcRCTkgVfI+Pg9adI+KKMh7jETLBxcG4+Z8kaomUgMyfXMykzx7iK5kDCfa1ahNbtOkL9+o0ARApEUYTi0gpITk1zSE1NMfypp/dz0bJpE+vG4UFgYW0L+obGoNAzAErfAF1QGgGicefj7WdpaWlljDvurwiiY6IZmmWhhmGB4XhgkTTDAINksaisIMqFrKisEmKiI9VaEdTU0OmVFRW8sZmlIVGp8IKAQpJd4EeBAiVFkKCyuqYI5eifetTy5cvlxfbt26s8PDwG2Ds6OWieB0EFAIkQAEyFmBBcAzx/8PjBxsXTrmkV8eXLF+r79+89pGkaw+eAF1QyBUENaiLXEb0LcO7InnhCiL6WATw0ePzo4Rflt68ch/kzWA+OxxnXnEqT/4Prt4pjvn2sC99O10tUoOeCY0cOPklLS4VqmkUyMqsw5U8vvtUe2Lj0CYCUCwAs/MSvrtL8KEdkLy8fvzOT5y0v3nL0irT11C1xwsL1WQ4uHvsBoCfSFUn+240IY6Q3sp2Ftd1wM0ubwbj+PguoRg509QAd7YHBADTl/wAAAABJRU5ErkJggg==)}.bue-render .node .header .icon.timeline:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAA1ElEQVR42n2RPQ5EQBiGTSeZimqvoKHnGs7AGQj3UOv3FIJ+FNQusVE9GzNYdjfyFtM8k+/9sSyLW1kaEEh8CkYWFiZKfCRiBwQPElpmempqOmZaUh4rsgKSBEVDToSHR0ROgyJFGsCnpSHGRVBRIXCIaWgJDFAwk+NqU4pBvy45M6UBRnoiY+kABCEdkwEWauwtluKFQlHhUbP8Ak8GrQsw0R0ndl1OlNqkcwEcso/Jc0zz+yumJN2KCrGxCcmuRa1Vp7rq7n/VZqyAkukYKziPdas3Gzo9V0WjmTwAAAAASUVORK5CYII=)}.bue-render .node .header .icon.pill:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAvElEQVR4AdXBvS5DYRgA4Oc955QmLRJxAVYWP5GYJWJ1lSaJxeJnqPYKxGgRiYQ0ISVSLf2+z2SzGjyP/yC4W7zpl41ujGSBUIRWbl/H3sFbQ/9qfXMVlSJLkpnko3rcfri025S5o62OZZUiy5KZLzO1WnuHRnoq9/EuFBRZkWVZ+EQTaf95fuUFgUAIodZ1MaRhcJYO1xY6suJHURm+npzS8Hnea/X8qk+NWx1LsqmpiYmxsbGRgWPJ3/sGBOxJ/BmgVT0AAAAASUVORK5CYII=)}.bue-render .node .header .has-icon{display:block;margin-left:20px}.bue-render .node .header .pin{display:inline-block;height:16px;position:absolute;right:0;top:3px;width:16px}.bue-render .node .header.icon-async:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAACGklEQVR42s2VL2wacRTHP7CUf+0CS7vCAfd7U7hLEIhlM8tUcbihlpkmExVLMMsUU6s7OdUgKxAkNc2p1eFA1ZFUIJbUkCmo6Zug6125ozvEkr1n3/fzy/v7g39mKbbJkuXJ5tIsFgYJuI1Fga044gT7CEKNI1w8hni4dHAQDBaZx+VJqggN+iwOtKun+kMH2tWWZpQzmgg2hfXyDAbBzd90da6r1tOSckINwx6JKHmaKg7eS51ptM21rYxoYNgPZ57DQvBaOr8NiliBdJUJDsLuQ3keC4P7ZkU+DAFUPykXCMJTH7BNGcPr4s3s9mFwFEC1rhwi2P6EFLERPDcUGg0YKFNqfhoJbAQnvZjHBKjWlXcI9rIbSQxCpxURuA7wTTlBMGSXAEHof98AMFZGCMKzZQoG4WKwAeBKmSIIe8sqVBFGwzUA3x/OB+KXsYQwPI8E+B60mXKNIH/2ooDQ72l8u1IuEYTcErCFzfHHDQA9pY9ggqP06sUGgLbSQaj6w5yjyug8pvynphc4SHAnE5Q4rMcEtJRjBEMquJE7GLzPMeT3mxC6CWUcpn/rxVjTC94iVEiGb7GhybX76Ov5G94jVKKP/S6GBpctHUeWrq1MaSJY4deDCOErvw60d38b53qqHzS9wKWGeewqLxtaweBwxBmTuy2Y4PGFBjbPo+9xGLJPmSo25s5timTjiYOfTIosO2yvz/j/sN/WVncLEyOa6AAAAABJRU5ErkJggg==);height:32px;position:absolute;right:-16px;top:-16px;width:32px}.bue-render .node .header.icon-message:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAF6klEQVR4Ae2TA7AsuxaGv5XGTM/W7Nk+tp9t27Zt27Zd9rNt2+/gYh/b52zPTHeSl5tKV9c8m/erWbVW0un5/5WkuZJ/N1ci/A084kVvu8fw8rWvjpN0HFHMnDv91cOX/uq5wFH+SuQOj3gmfym1SOoTaza9ZnB8hX/JWouIoOKEzuLC4elf/fBJwOf4K5A7Pfq5f5m4mG1Tm676gb7myI2N1nhEAB+oKMICRy7f+cbLfvbdlwFt/gLkGre8K3+O9Zu2PWjl9mu/M05rLS/uhUEQrIjP/ieKKEk5e+Lw93d+78uPB3bxZ5Dr3fF+/DHmTh9rXvtWd33L+Notj7TGYK0JYtK7A35YzcXORLfdnt3z42+8EHgPfwK53cOezh/i+PTO61/vdvf+QGtyxVWLvIunEgu/ykBlyBcoFfm7cWjPzz/8s6996mnAKf4AsuHq1+d3mVi57qnXudVdXx/X6pnO81I0JPk9sd7a57BESNIaF8+d2vfjL3z4CcBXf/8O3OLOlAzWZEV9bN1br3ajW9xH5wXG6D8qGEZ/8AhKLB5/JNrxwy9+4rWZPv9GYJ6A3PLOdwPgac98ZlIbGv/+8Yv6OucuzBIphVLlJavO24TOqs6rC2hteBZCwhptLIhixcQQambfK4GXEYif+OznALBn1065z4Ou1bxqX4NL959i+tBp2t2COIqQIGrFVz0iXrjXlA/l5704rf4aW1c32Tze4GvfvnSQCuKIHIDr3eimWiTqiBK2b5pkxWST3dNH2e+M5IUmSWJEqfDNK6AyYKxFhWceV2ttybKULatH2bR6mHqsWAJWrF6T9xhwEwT0/Nxc3uivk3dhoK/ODa+5gTXLR/nVzr0cOHwCURFpLUW5bKtria+V8rkojF+zed2Ua2QZTde9BrrB3uTKlabHgJugpD3b1UbjKTSIi6nxJpO3vDbT+4/wo5/u4sTJE8RJgjHahQVARSrsBGxYv5IbXGcryyeGMUBuoUQJHD9xUvcYOHXiJJTkqugfyCgKPP4PQr1540rWrJril7++lO//4OdsWreW0dEmAAcOHuXMmTPc4bY3YduWdSgFuQFrQ9uBSODQvv29BtwEJTt2XKvQRXgRQELtotuFKIrZumkdK6amGBsfcWM817jaDk6dOM7IWBML5Bqw+FpCRvCFKYreI3ATlFw8f74YGGygc6B6ByWQ5zlzM/PEcY3WyAhFDnm5ThSTy1cwc+Eic7OnaY0Nk6YJ1gRx8I0sGVi3aUv/tVYtU2GDie9z61tSctnZpcL/qa26F4HFxTbtpS5ZY5A4jtAFIJVBv87FULNJp9Ph3OmLDAw1aPT1+WclSsF3vvrVbcB6YB9gFFQcPXSwmyTVEVhjmZ9bpMgt/f2D/vYbAx4L1kdVaw1JUqM5PEZ7UbsdncEag4Rmogj2/ObXG4E7AMMAPQYO7ps2cYynyLXrvEMUpdTrGaZX7I9GabB/cJAornPxwjyddheAVODyPbtTYKTUjiNHltVTl4wLrIU8L9CF9d2ISNU1YKW6YFQ1QoX3qaGW1kiS1O3Gkm+oUctwx6IipZTLw8CZeHR0dMCRxZEyypF3cYKKOFZY6BH3W1mNe5St7Z0X5d9FELJGw1/ihSXI6plkjSwZGxsbBIhbrVafM9DnDNg0qWf1OljrxaszrgjjYIZekCpR1uKDtJaQpTgzfQqLtta3Qqy1NleEiKQ//u7XvzF74dRprEoWFhZaFy+cX+PWDQlEviUgUgpxUQlJaQ1xWIs1RoOFvMjpdDu2yAtbFLmLjt31y58vqCiSInz+0mw2+7MsayilhnVR1B1X3IfxpfbSLZ2vGyolg+IAQaqfKOXnwFpXK0w4K1Hiv55yo1xzQVxbdwzGWrvo1n+zVqt9CPhZPDMzszQ3N2dFJHVh4zgGiNzCtov9QB2IAAXEIhKXY1crt0YcESCujgCqeQHA1ViPz2033y13ILYO59IA80DHuXSZApgD+oAUSEJ48VBTGevJEmpFRVlbIAf2OZ3ZYFb4d/Jb3G2oVXRHrgwAAAAASUVORK5CYII=);height:32px;position:absolute;right:-16px;top:-16px;width:32px}.bue-render .node .header.icon-client-event:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC1ElEQVR42u2VS2zMURjFf9P+RVvaMTVTiqqoJkhUZaaejUWVCmrahCZEvOMVyRDBxkI8YieKCGJnQ8NC7tAmY1ESjwUixKOdkqkEiWdDTKI6cyyGdmbazmwsfd/6/O653733XPjnZSOPqdTQwKpBu4EappKHrb88k2I2chWTtq+yniIykgH5bLP8jW2hsFJW54/Gl5afTdhjMosCZlJPHRsx50Md0UqRsiv1KnKqHUNZDFDAur/WLH9YlXKoSt6kXqjpKlRGL+JrBENtDODGXOuUpOMvXC2SXdVJ4uXyqEyOOA92SY5m1gJk4MW8/iV9Vl6bMyCNTJIv02S5lZmwCbskZ4BNALn4SgOSdLCHZmdAcibIl2i8ZvVaTwJsBijmzI4nUpccQUwyoFb5mq1h/cYYD/BgLn6QDkVo7g+YpFEqG+Ac+gA2lmKed3+Xq2P5Hd+jRMBcofnKSwnIYXthS48eRp93SXNeJALsytWiAW9CH2AsJzY8it2vVnErHlAhVKJZaQDlmLPvpbCkVd8SZ+ASmqnyNIAKzL3wEe2IdMp6GA9YLJtQlWakAUzgaNEX2pu+7O/GT2MfwCOElqXdQhbTOIcJ/nK1sQufMyDZVSWvSoQseVWdCrAeYAT7pty80E0Lc1lptYRVqeGap9FCQ+WVV9kDvsewaKYOYByNe55Nf8d+CvDgPx0NKv1zDupoFEM5QBGnd76hFQ8WTnw5obM9H6OpA+VT5GTP0CDbcQBM5tLsNg7gACxK2UuIn32rZWuLtsid6OEnr/ExkQyw4c6+bN2mliF/0smFm9UcoykWMU2dkhQKZ13HYLjCSXZTzwycWLE4KWQJNYyKS8YcqrmCyb1Rfzfw9q/tB5/W3M+9gcGwlTHJUZ4Y0MUcP/w0MsgcAm8xVKT+G0o5d+bjYAN83I1hXmpAPivoGPQQuzhISWpAJiNxUzfgr7SSBZSQxf/qrd+kdAqEuQK2cAAAAABJRU5ErkJggg==);height:32px;position:absolute;right:-16px;top:-16px;width:32px}.bue-render .node .header.icon-server-event:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEjElEQVR4AcXXA3AsSxQG4Bfz2rZt27Zt27Zt28by2rbtu7GNnfT7T6onNbVva7Ks11VfNOh/uk93Zv9hjP2vbHYjNAdICyWhIVcFikBW8ARHuwRA84LyMBLOgELiECyBUdAF6kA+cDMaAM0VMkN+KAjZxZMN8acqCYNBkT59+stLliwJ/Pbtm3D37t2EAwcORE6aNOlP69at3+bPn/+mJNRCKPqfAGjuUAEmwk7YAzOgMoUwOK8gf6Ljzs7OqilTpuj8/PySmEwLCwtjt27dSnB3d9fgug7gbBigAKykxJScDBgw4Bv+Nhdy8tHJA21gOyjo+OfPnwVmQouJiWEDBw70z5Ahw3VcOwLcDYuoISju37+fyHhbvnx5EO+sEJSC+aBo0aLFmydPnuiZiU2v17PRo0cHYaSSMmbMeAf3GAte0gBuMNDb2/tSfHx8ypBlzpz5Cv4+mtfEmCpVqjzWarXxzMw2d+7cUHQuTJ8+nWXKlOmusQDZYXm7du3eMd5WrVpFT6/gNVAWLk6YMEE3bdo0v2XLlgUqlcpYnU4nO+/8PhETJ05M7lwuQBlQUKcMLTIykuXOnfsGH/Ic0ISO//79O6XDV69e6anS582bF0Ch6FoanYCAACa2gwcPxo4bN05PHacWoBEoqEoZ2tatW8P40x+AWtANFL9+/ZKd50ePHiX27dv3K4bbF3PuO378+ETqVDYAr+7+tDyoUsWnL1as2F2k/8NHYYRsAEnTaDSJ9H3Dhg2809QDZIXFVNkMjUbh7NmzMfREtBRxbD0MNDWASqUS6DvqxOQAJeHMokWLAgw3DloVfKdrCYq1a9cKmFdGMNxGA2hPnxbY5ctmBWgACsPltWnTplBeB5WgueEIfPz4kR05coRQoOTvX758YefOnROwR5gWAM0ZetJ2Sk/84cMH4fDhw5E0/FQDODYVMkK71KaA9g/8D0g6efKkngJR9ZsSwBU6lS1b9gHt5xRk7969EWq1Oo465KPjBG3EAKY2U0fACQrBMFAQGgX6f4Cf10BuPk1N+DZt2wD85k6QCxbRv03aYHiY9uAq3SdOo8DE+SbXrl2jZWtdAIKWBzYOHjz4O196h6CI5HhLY1NAux62ZIZlyy5cuEA/U3FaFKAYHKXtlC+9/uAlOd7O1Br4/v07bUZs6tSpgqlT4ABVQDFixIhf+H4aSoGDNICNi3AUeIg3d4aO2bNnv8aXXn9IQ8dsHYCWpqen5zXcqzu4SIuwuYeHxwl8nwMFwMnWAehlJE+ePPSGdRbKg4O0gxxQEfKInds6QLly5XS4xxVoKtaXYScOMq/eTawJ0LBhw0BcfxNaS6fXnHf/ErC7e/fuibT+//79a3KAjh07huPae9ALMkrva+6Hj5pwAf5CbIECBdjQoUPZ8ePHma+vr9EAeAuOdXFxeYrz50EecLQoAEFz5zepDh1hKdwHHcRhBdGbL21KyRvUrFmzBOwpb3DsIK8vF5t9NOMrJx0U4iPTGVbDE/CFeHT+kzY3qA3u9v5w6gzpoQjvsAP0hLJixds8gAmflp3kVhb5F3+yRKkpSI7UAAAAAElFTkSuQmCC);height:32px;position:absolute;right:-16px;top:-16px;width:32px}.bue-render .node .header.icon-replicated:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADzklEQVR4Ae2VA3BkaRSFR2vbZnlt2x4rXI+N2olt27Zt20kj7GQnbaats3etUrTsU/U133v3+70GwN/Kkm+0s7O72crKaiPhQbgSH+3YseOGVRdwcHDYsHv37m+OHTtuqKiqxuQMB1yhCJ09/QgKCdd//vmXx9esWbN2VQQ2bty4ft++fR3ZOXngCYQwmc0wAz+8awxGyDR6tHYPwNs3sHlVBKibj6WnZ0GhMvxQ9Lcx0nepVg+uVA0WR4QzDm7OKypAxS/fv3+/jsGcgkKthxn4k4BYq8OcRIXxswokZ5Vov++xFROwtrZ+KS4uDlMcPkRyLQym3ytojUbMq6n1fCmYHCGG2Vz4+QdO7ztwIMrGxubGlRA4nJeXjxHGDGbmFyBW6KA2GKGhwkqDAVyNBpN8AWRK9Q+9oTeZoDIYSVYFmpxqK8pyh+DztLR0tHUOY4jBBZsjxzRfiRmpEiM8PmaEEuiNJph/MzcM9HlBZ4BArkF1Qzu2bdv1/nIEHnVzc0dRaS3qW0fQ3j+LnjEhethiDI5NQiLTwow/R009xCUBjlCFiJgUxfbt2y9dksCePXvOs7Ozl0RExiMrvwZFlT2oaGSgomkC05x5CCSaP60MUBQGA2alKkxwF9DHFMDR1d9pycuQdroPDh46Ag/vUITF5CI2rRpxaRVgsmcxRwVUegPMf2g9j+YGW6zA6JwM3aMiJGRVjS1rJ3zuuefKrKxscOi4C067hCMgLAU9/QwwxvmY46sgVGgh1+kh0ekwq1KBJVdgcF6KnnExGrrnkVrZKluWAOXDK664ouOJJ5/Wv/P+Juw/fAo1dW1o72FhkCXE6LQMjLNyjPHlGBRK0csVo41+bxzgo6CGhdSG9tnlCpxPbCQK1q5dO3zzzTcbUtNzUFzejLpWBpp7OGgb4qNtVIimUQHq6XNFx7fIr51AclE/3CJTUlfkNKRcSbxw//33Rzg4OCEiOhXpefXIKe1EYfUIiurYKKibRHYVGwl5vYhMb4VnaLbpkksuO0L3Xb0MgT+zdevWka/3HICbdxR8QzMQHFuKkIQqBCfUICCuCl7hJXAPzsETz7xcTcUdiGPEvSsmcNFFF227++67ObZ2X2DvIQccPROMEy5ROOkWR+8x2HPMG48/8zKTigYTPoQ78cyKCVBuJk5cffXV7Acfelj1xNMvm5576S3z0y+8aXjy+TeUl1x6WTv9n0PEEX7Ey8QFKyYAgrKOeJ/wJ+qIdqKVqCUyfir8JnHtnybhSkO5nLiNuJe4g7j0e8FlHEarh0XAImARsAhYBL4DM6GerW1wPn4AAAAASUVORK5CYII=);height:32px;position:absolute;right:-16px;top:-16px;width:32px}.bue-render .node .body{font-size:12px;font-weight:300;min-height:15px;overflow:hidden;padding-top:8px}.bue-render .node .body .left-col{display:inline-table;float:left;padding-left:10px;padding-right:10px;top:0}.bue-render .node .body .right-col{display:inline-table;float:right;padding-left:10px;padding-right:10px;text-align:right;top:0}.bue-render .node .body .pin{margin-bottom:10px}.bue-render .node .less,.bue-render .node .more{border-radius:0 0 5px 5px;cursor:pointer;height:16px;overflow:hidden;text-align:center;width:100%}.bue-render .node .less:hover,.bue-render .node .more:hover{background-color:hsla(0,0%,39%,.4)}.bue-render .node .less>span,.bue-render .node .more>span{border:6px solid transparent;display:inline-block;height:0;position:relative;width:0}.bue-render .node .more>span{border-top:9px solid #c3c3c3;top:3px}.bue-render .node .less>span{border-bottom:9px solid #c3c3c3;top:-3px}.bue-render .node.selected{border:1px solid #f1b000}.bue-render .node.knot{background-color:transparent;border:1px solid transparent;box-shadow:none}.bue-render .node.knot.selected{border:1px solid #f1b000}.bue-render .node.knot .body{width:30px}.bue-render .node.knot .label-text{display:none}.bue-render .node.knot .left-col,.bue-render .node.knot .right-col{position:absolute;top:4px}.bue-render .node .tooltip{background-color:#cfcfcf;border-radius:5px;color:#545454;line-height:15px;padding:5px;position:absolute}.bue-render .node .tooltip:after{border-color:#cfcfcf transparent transparent;border-style:solid;border-width:8px 2px 0;bottom:-8px;content:" ";height:0;left:8px;position:absolute;width:0}.bue-render .node .fake-input.hlsl{background-color:#fff;border-radius:5px;color:#000;font-size:12px;margin:0 10px 10px;padding:7px;white-space:pre}.bue-render .node.ncomment{border:0;border-radius:0;color:#fff;cursor:default;font-size:22px;font-weight:700;z-index:1}.bue-render .node.ncomment .header{border-radius:0;cursor:move;line-height:26px;margin-left:3px;margin-right:3px;margin-top:4px;min-height:26px;overflow:hidden;padding-bottom:4px;padding-left:12px;padding-top:8px;text-shadow:2px 2px 1px #000;white-space:normal}.bue-render .node.ncomment:after{bottom:0;content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAAOklEQVR42mNgIAX0ufStwS78us+FSsJ9Bn1TsAu/6IumknCffF8VduF7fWUgibUQB/ZNgxjSVw0SBgAZBjp8dl6w7QAAAABJRU5ErkJggg==);height:22px;position:absolute;right:0;width:14px}.bue-render .node.ncomment.selected{outline:3px solid #f1b000}.bue-render .node.nvariableget{border-radius:15px;min-width:130px}.bue-render .node.nvariableget.default{background:linear-gradient(90deg,hsla(37,48%,77%,0) 0,hsla(37,48%,77%,.3) 50%,hsla(37,48%,77%,0))}.bue-render .node.nvariableget.exec{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.3) 50%,hsla(0,0%,100%,0))}.bue-render .node.nvariableget.bool{background:linear-gradient(90deg,rgba(149,0,0,0) 0,rgba(149,0,0,.3) 50%,rgba(149,0,0,0))}.bue-render .node.nvariableget.byte{background:linear-gradient(90deg,rgba(0,111,101,0) 0,rgba(0,111,101,.3) 50%,rgba(0,111,101,0))}.bue-render .node.nvariableget.class{background:linear-gradient(90deg,rgba(89,0,188,0) 0,rgba(89,0,188,.3) 50%,rgba(89,0,188,0))}.bue-render .node.nvariableget.double{background:linear-gradient(90deg,rgba(56,213,0,0) 0,rgba(56,213,0,.3) 50%,rgba(56,213,0,0))}.bue-render .node.nvariableget.int{background:linear-gradient(90deg,rgba(31,227,175,0) 0,rgba(31,227,175,.3) 50%,rgba(31,227,175,0))}.bue-render .node.nvariableget.int64{background:linear-gradient(90deg,rgba(172,227,175,0) 0,rgba(172,227,175,.3) 50%,rgba(172,227,175,0))}.bue-render .node.nvariableget.float{background:linear-gradient(90deg,rgba(161,255,69,0) 0,rgba(161,255,69,.3) 50%,rgba(161,255,69,0))}.bue-render .node.nvariableget.name{background:linear-gradient(90deg,rgba(205,130,255,0) 0,rgba(205,130,255,.3) 50%,rgba(205,130,255,0))}.bue-render .node.nvariableget.asset{background:linear-gradient(90deg,rgba(149,255,255,0) 0,rgba(149,255,255,.3) 50%,rgba(149,255,255,0))}.bue-render .node.nvariableget.asset-class{background:linear-gradient(90deg,rgba(255,149,255,0) 0,rgba(255,149,255,.3) 50%,rgba(255,149,255,0))}.bue-render .node.nvariableget.delegate{background:linear-gradient(90deg,rgba(255,56,56,0) 0,rgba(255,56,56,.3) 50%,rgba(255,56,56,0))}.bue-render .node.nvariableget.object{background:linear-gradient(90deg,rgba(0,170,245,0) 0,rgba(0,170,245,.3) 50%,rgba(0,170,245,0))}.bue-render .node.nvariableget.interface{background:linear-gradient(90deg,rgba(241,255,170,0) 0,rgba(241,255,170,.3) 50%,rgba(241,255,170,0))}.bue-render .node.nvariableget.real{background:linear-gradient(90deg,rgba(56,213,0,0) 0,rgba(56,213,0,.3) 50%,rgba(56,213,0,0))}.bue-render .node.nvariableget.string{background:linear-gradient(90deg,rgba(255,0,212,0) 0,rgba(255,0,212,.3) 50%,rgba(255,0,212,0))}.bue-render .node.nvariableget.text{background:linear-gradient(90deg,rgba(231,124,170,0) 0,rgba(231,124,170,.3) 50%,rgba(231,124,170,0))}.bue-render .node.nvariableget.struct{background:linear-gradient(90deg,rgba(0,89,203,0) 0,rgba(0,89,203,.3) 50%,rgba(0,89,203,0))}.bue-render .node.nvariableget.wildcard{background:linear-gradient(90deg,hsla(0,3%,48%,0) 0,hsla(0,3%,48%,.3) 50%,hsla(0,3%,48%,0))}.bue-render .node.nvariableget.vector{background:linear-gradient(90deg,rgba(255,202,35,0) 0,rgba(255,202,35,.3) 50%,rgba(255,202,35,0))}.bue-render .node.nvariableget.rotator{background:linear-gradient(90deg,rgba(160,180,255,0) 0,rgba(160,180,255,.3) 50%,rgba(160,180,255,0))}.bue-render .node.nvariableget.transform{background:linear-gradient(90deg,rgba(255,115,0,0) 0,rgba(255,115,0,.3) 50%,rgba(255,115,0,0))}.bue-render .node.nvariableget.index{background:linear-gradient(90deg,rgba(31,227,175,0) 0,rgba(31,227,175,.3) 50%,rgba(31,227,175,0))}.bue-render .node.nvariableget.soft-class{background:linear-gradient(90deg,rgba(255,149,255,0) 0,rgba(255,149,255,.3) 50%,rgba(255,149,255,0))}.bue-render .node.nvariableget.soft-object{background:linear-gradient(90deg,rgba(149,255,255,0) 0,rgba(149,255,255,.3) 50%,rgba(149,255,255,0))}.bue-render .node.nvariableget .right-col{float:right;padding-left:17px}.bue-render .node.nvariableget .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.nvariableget .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .node.nvariableset{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:130px}.bue-render .node.nvariableset .round-bg-color.default{background:linear-gradient(90deg,hsla(37,48%,77%,0) 0,hsla(37,48%,77%,.3) 50%,hsla(37,48%,77%,0))}.bue-render .node.nvariableset .round-bg-color.exec{background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.3) 50%,hsla(0,0%,100%,0))}.bue-render .node.nvariableset .round-bg-color.bool{background:linear-gradient(90deg,rgba(149,0,0,0) 0,rgba(149,0,0,.3) 50%,rgba(149,0,0,0))}.bue-render .node.nvariableset .round-bg-color.byte{background:linear-gradient(90deg,rgba(0,111,101,0) 0,rgba(0,111,101,.3) 50%,rgba(0,111,101,0))}.bue-render .node.nvariableset .round-bg-color.class{background:linear-gradient(90deg,rgba(89,0,188,0) 0,rgba(89,0,188,.3) 50%,rgba(89,0,188,0))}.bue-render .node.nvariableset .round-bg-color.double{background:linear-gradient(90deg,rgba(56,213,0,0) 0,rgba(56,213,0,.3) 50%,rgba(56,213,0,0))}.bue-render .node.nvariableset .round-bg-color.int{background:linear-gradient(90deg,rgba(31,227,175,0) 0,rgba(31,227,175,.3) 50%,rgba(31,227,175,0))}.bue-render .node.nvariableset .round-bg-color.int64{background:linear-gradient(90deg,rgba(172,227,175,0) 0,rgba(172,227,175,.3) 50%,rgba(172,227,175,0))}.bue-render .node.nvariableset .round-bg-color.float{background:linear-gradient(90deg,rgba(161,255,69,0) 0,rgba(161,255,69,.3) 50%,rgba(161,255,69,0))}.bue-render .node.nvariableset .round-bg-color.name{background:linear-gradient(90deg,rgba(205,130,255,0) 0,rgba(205,130,255,.3) 50%,rgba(205,130,255,0))}.bue-render .node.nvariableset .round-bg-color.asset{background:linear-gradient(90deg,rgba(149,255,255,0) 0,rgba(149,255,255,.3) 50%,rgba(149,255,255,0))}.bue-render .node.nvariableset .round-bg-color.asset-class{background:linear-gradient(90deg,rgba(255,149,255,0) 0,rgba(255,149,255,.3) 50%,rgba(255,149,255,0))}.bue-render .node.nvariableset .round-bg-color.delegate{background:linear-gradient(90deg,rgba(255,56,56,0) 0,rgba(255,56,56,.3) 50%,rgba(255,56,56,0))}.bue-render .node.nvariableset .round-bg-color.object{background:linear-gradient(90deg,rgba(0,170,245,0) 0,rgba(0,170,245,.3) 50%,rgba(0,170,245,0))}.bue-render .node.nvariableset .round-bg-color.interface{background:linear-gradient(90deg,rgba(241,255,170,0) 0,rgba(241,255,170,.3) 50%,rgba(241,255,170,0))}.bue-render .node.nvariableset .round-bg-color.real{background:linear-gradient(90deg,rgba(56,213,0,0) 0,rgba(56,213,0,.3) 50%,rgba(56,213,0,0))}.bue-render .node.nvariableset .round-bg-color.string{background:linear-gradient(90deg,rgba(255,0,212,0) 0,rgba(255,0,212,.3) 50%,rgba(255,0,212,0))}.bue-render .node.nvariableset .round-bg-color.text{background:linear-gradient(90deg,rgba(231,124,170,0) 0,rgba(231,124,170,.3) 50%,rgba(231,124,170,0))}.bue-render .node.nvariableset .round-bg-color.struct{background:linear-gradient(90deg,rgba(0,89,203,0) 0,rgba(0,89,203,.3) 50%,rgba(0,89,203,0))}.bue-render .node.nvariableset .round-bg-color.wildcard{background:linear-gradient(90deg,hsla(0,3%,48%,0) 0,hsla(0,3%,48%,.3) 50%,hsla(0,3%,48%,0))}.bue-render .node.nvariableset .round-bg-color.vector{background:linear-gradient(90deg,rgba(255,202,35,0) 0,rgba(255,202,35,.3) 50%,rgba(255,202,35,0))}.bue-render .node.nvariableset .round-bg-color.rotator{background:linear-gradient(90deg,rgba(160,180,255,0) 0,rgba(160,180,255,.3) 50%,rgba(160,180,255,0))}.bue-render .node.nvariableset .round-bg-color.transform{background:linear-gradient(90deg,rgba(255,115,0,0) 0,rgba(255,115,0,.3) 50%,rgba(255,115,0,0))}.bue-render .node.nvariableset .round-bg-color.index{background:linear-gradient(90deg,rgba(31,227,175,0) 0,rgba(31,227,175,.3) 50%,rgba(31,227,175,0))}.bue-render .node.nvariableset .round-bg-color.soft-class{background:linear-gradient(90deg,rgba(255,149,255,0) 0,rgba(255,149,255,.3) 50%,rgba(255,149,255,0))}.bue-render .node.nvariableset .round-bg-color.soft-object{background:linear-gradient(90deg,rgba(149,255,255,0) 0,rgba(149,255,255,.3) 50%,rgba(149,255,255,0))}.bue-render .node.nvariableset .right-col{float:right;padding-left:17px}.bue-render .node.nvariableset .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.nvariableset .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;font-weight:700}.bue-render .node.nvariableset .body .round-bg,.bue-render .node.nvariableset .body .round-bg-color{height:13px;left:14px;padding-top:7px;position:absolute;right:14px;text-align:center;top:0;z-index:-1}.bue-render .node.nconv{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:100px}.bue-render .node.nconv .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.nconv .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .node.nconv:after{background-color:grey;border-radius:10px;color:grey;content:"0";font-size:0;height:8px;left:50%;position:absolute;top:40%;width:6px;z-index:-1}.bue-render .node.ndot{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:100px}.bue-render .node.ndot .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.ndot .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .node.ndot:after{background-color:grey;color:grey;content:".";font-size:0;height:4px;left:50%;position:absolute;top:58%;width:5px;z-index:-1}.bue-render .node.nkismetmath{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:130px}.bue-render .node.nkismetmath .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.nkismetmath .body .center-text{color:hsla(0,0%,100%,.35);font-family:Roboto,sans-serif;font-size:28px;font-weight:700;height:100%;pointer-events:none;position:absolute;text-align:center;top:0;width:100%}.bue-render .node.nkismetmath .body .center-text span{float:left;left:50%;position:relative;top:50%;transform:translate(-50%,-50%)}.bue-render .node.nkismetmath .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .node.narray{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:130px}.bue-render .node.narray .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px;min-height:75px}.bue-render .node.narray .body .center-text{color:hsla(0,0%,100%,.35);font-family:Roboto,sans-serif;font-size:28px;font-weight:700;height:100%;pointer-events:none;position:absolute;text-align:center;text-transform:uppercase;top:0;width:100%}.bue-render .node.narray .body .center-text .img-array,.bue-render .node.narray .body .center-text span{float:left;left:50%;position:relative;top:50%;transform:translate(-50%,-50%)}.bue-render .node.narray .body .center-text .img-array{background:#817a7a url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAG0lEQVR4AWMQFRVFxv/x8Wmr+D+xeNTNZCsGACg0RaB8zNMXAAAAAElFTkSuQmCC) no-repeat;background-size:cover;height:64px;opacity:.2;width:64px;z-index:-1}.bue-render .node.narray .body .center-text .img-array.default{background-color:#e1ccaa}.bue-render .node.narray .body .center-text .img-array.exec{background-color:#fff}.bue-render .node.narray .body .center-text .img-array.bool{background-color:#950000}.bue-render .node.narray .body .center-text .img-array.byte{background-color:#006f65}.bue-render .node.narray .body .center-text .img-array.class{background-color:#5900bc}.bue-render .node.narray .body .center-text .img-array.int{background-color:#1fe3af}.bue-render .node.narray .body .center-text .img-array.float{background-color:#a1ff45}.bue-render .node.narray .body .center-text .img-array.name{background-color:#cd82ff}.bue-render .node.narray .body .center-text .img-array.asset{background-color:#95ffff}.bue-render .node.narray .body .center-text .img-array.asset-class{background-color:#ff95ff}.bue-render .node.narray .body .center-text .img-array.delegate{background-color:#ff3838}.bue-render .node.narray .body .center-text .img-array.object{background-color:#00aaf5}.bue-render .node.narray .body .center-text .img-array.interface{background-color:#f1ffaa}.bue-render .node.narray .body .center-text .img-array.string{background-color:#ff00d4}.bue-render .node.narray .body .center-text .img-array.text{background-color:#e77caa}.bue-render .node.narray .body .center-text .img-array.struct{background-color:#0059cb}.bue-render .node.narray .body .center-text .img-array.wildcard{background-color:#7f7878}.bue-render .node.narray .body .center-text .img-array.vector{background-color:#ffca23}.bue-render .node.narray .body .center-text .img-array.rotator{background-color:#a0b4ff}.bue-render .node.narray .body .center-text .img-array.transform{background-color:#ff7300}.bue-render .node.narray .body .center-text .img-array.index{background-color:#1fe3af}.bue-render .node.narray .body .center-text .img-array.int64{background-color:#ace3af}.bue-render .node.narray .body .center-text .img-array.double,.bue-render .node.narray .body .center-text .img-array.real{background-color:#38d500}.bue-render .node.narray .body .center-text .img-array.soft-class{background-color:#ff95ff}.bue-render .node.narray .body .center-text .img-array.soft-object{background-color:#95ffff}.bue-render .node.narray .body .center-text .img-array.time{background-color:#95fefe}.bue-render .node.narray .body .center-text .img-array.wavetable{background-color:#c800eb}.bue-render .node.narray .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .node.n_anim_state{background-color:rgba(90,90,90,.7)}.bue-render .node.n_anim_state.white_body{background-color:hsla(0,0%,100%,.7)}.bue-render .node.n_anim_state.round{border-radius:50%}.bue-render .node.n_anim_state.pad10{padding:10px}.bue-render .node.n_anim_state_reset_body .body{padding-top:0}.bue-render .node .n_anim_transition{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAfklEQVR4Ae3UAQbFMAzG8RyhN+gR0q/vAH33h8EA7AC7xOYboyCGhCJ/ApSf0lSybN06cKG1A0ANAcYYhcgzvZ+qWtyRn+qfwDS7CfGQ02whCAzIQIJvFBpl79t8guCE2FAUwnfO9z4f5j6Id4S4wS/CzZaIAFT+SURk2bLsBpAT3m02QqiKAAAAAElFTkSuQmCC);height:25px;width:25px}.bue-render .node.nmetasound{min-width:115px}.bue-render .node.nmetasound.input,.bue-render .node.nmetasound.output{min-width:inherit}.bue-render .node.nmetasound.icon-center.conv:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAOVBMVEUAAACfn5+jo6OmpqampqalpaWlpaWoqKilpaWlpaWmpqalpaWmpqampqampqanp6elpaWmpqampqY8GYeYAAAAEnRSTlMAEFBQX2Bvb3+Aj5Cvz9/f7++0HpSPAAAAd0lEQVQYGe3BQRKDIBAEwMFAVLKsOv9/bC4eFAbuVtmN10OE2TZys4ix6eDJIwZ+vFjRtfImoyOxMkFzVvYAJbHxhWJsGJTChkOhAIUCFGejQDE2DMrMRoQSDlYc2oeViI7MmwVdCy8yBpLzdEwYS1ZItzng9Qx/CjkV2kobT4gAAAAASUVORK5CYII=)}.bue-render .node.nmetasound.icon-center.math-add:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAAGFBMVEUAAACmpqanp6enp6enp6empqampqampqbbGVCMAAAAB3RSTlMAX2B/n6+/htxmCwAAADFJREFUKM9jYIAA83IgKGRABaOCMJ4SBISDBEugHIZyLGBoCxpDQDqIUwrljCYGYgQBF2ytbluTjPsAAAAASUVORK5CYII=)}.bue-render .node.nmetasound.icon-center.math-divide:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAoCAMAAABDwLOoAAAAwFBMVEUAAAClpaX///+lpaWmpqalpaWmpqampqampqampqampqampqampqampqampqampqampqalpaWlpaWlpaWlpaWmpqalpaWlpaWlpaWmpqalpaWlpaWmpqalpaWlpaWlpaWmpqalpaWlpaWmpqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqY/NmPVAAAAP3RSTlMAAAABAQMMDxAREhQaGyQlKVhpbXBwcnd5eXp9fX5/gICBgoKOlpeanKGjrbjCy87b3urr7O3x8/T4+vv8/f5VuS84AAABEUlEQVQ4y73U2VaDMBAG4Eyi1hWtu1ZaiHXf627R//3fqhcGmDBDufE4N7ngOyGzJMb8Y1gZFML731UzAXnAd5gcAPK5JgMAIJtjUoRIdcMJkDrTRYChao7RYYh2fzgZKP9y/Skn2plX9t440XJfOp1wotWwd/T03SQNs3ry+MXISOnp2nhS8IxImIWN8+i4BySM27p+ZYV52abKEJUNOHtnmxSX4YMlMpXeeebkLqnrXpnDqEf3CUulNMOIPGxaaXIuPm/XrTSek4+rnpUm2mV6s2ylyTgpLhIrTTSY2F8UE2VcTPKydNzESY8U4mKTkmKscYPGMCgmvpJthl/tVsOeiHZDeU203ENPayLRXz2ZM8NQZca72xCEAAAAAElFTkSuQmCC);width:17px}.bue-render .node.nmetasound.icon-center.math-logarithm:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAEOklEQVRYR+2YOWhVQRSGkxj3DcUdEdziggquiFqkUBsLCxuNIC5go2ij2IiFYOGKKIgaQVxIAqIgghYStQgoopWKSxSjuAY3YjDGbP6f3AnHmzv3vXtf0mXg587cWc4//zlz5r6Xl9dduhXoViBWgfxc9SkrK+uwRElJSa7Lts/PiWAUObdyZ5FMTTCOXGeSLOg0X3TRQqkUzEa9zlIxkmBAYIqMrBJGCreFG0JjOLayJZs2Jn0unigyR4TdwlbhqLBJSKU4ama7kXCk+Agu18Bioa/AmHHCWmF4F4Wad9k4BfuYWSgHyV65EEyjoo9glCt515ILwTRzCz2TeO8j6bXDQcikEv32wJSXl8fy9hFkUluIZKvaIOfiNgHRtjbM+IvPxT0iFIw9wU6VtOnER9FHMOo9W41UMEwqW5KZwgHSPhdHEYRcB39EkcnGsFMsIvFPVx/5d5hwKglBF5cZY9AeFp+a2kRPLbRGz816ksIahFsBsZWBeEN9BKPiLVJBGeBKXCeQ3EnkGHognBWqhD/hHWnOUr07JEwTbG6dpHZTQA4OY+PSTEalZGiOBp0Q5gr2YBWpDYk9QqldSHP6qX1AmCWEhSC0epvxBUk+t/5LMzI0XgudFxaYHbu1WXcUKmkcHxy24L6phhwKfxB+CuEYb45LM2EF2a3d8YaQod9qvxG+GUODVN8lktaNG/XOXaO487CAq9nIl5DRwiRXHdecvepWqO3mE3c7AkOL9HxrDOFu3rkywWz0ner7dZDqhJuqV2ZLkHiKUtBuqL8xVKN6qYw0CM9V5zQ6d/FFNMYs9iPoo/+7gIqu1IaM5sdddWGCqNdsXr5SfbIA6SFCkVz5WE/W5DS6cGAOMeYKqs0O+hnHQavSXOYVh4w2JXExh8Qq+8QsNkL1q8Jp4Y6w0PS9V/2ZaeNGFyoDVb8kcvx2vSuQpG1p8BFkQU6XcxNPXNdoZl9QnZNHYR1ii69u4o0kTEG963L7JzPvjOpfgzYqc9pXC/OEsEdbfQSvaDBJlpNJjOC6c8SYM6T6I9UrBN65jbCecy3zWOOYIcen1i+1+QnhYpFumx1sqmnzxSDGtwmc1AECJ+yeNRTUuTNxNQrMFEgfuO+jQI48LkJOLTv9oBoPhZ0CeRQbiPFa4Eea+2nR0s48yQUfQZRYIpcR/HUCp/gz42LuYroRaLEwX3gqEIcIweGjvMyZYLafVhGbinwloarVwemmVCe56rK1kXqcyPGv02izQHOSPNjBcFL1RICkvUwgyZNuat0a6tuu9r6gz9mqbyeY9h+DhHJt0XiuRO5o8mOliNXryZfPDMHmWd5fzvhPQdThSaqc24TWuqY6mcHZdT8hbKiRZmqEvUJFRhenJeNRFrcuEQYHJMNngBR1X1gvvGCNjAQTujDT8JMawCcV//eQlvg4RU1UI19eFIhDUtW/FPUXk94eG6NQb9oAAAAASUVORK5CYII=)}.bue-render .node.nmetasound.icon-center.math-modulo:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAoCAYAAAB0HkOaAAAFZUlEQVRYhe2YS6xdUxjHf9/ae/e46lHVekZzRVuPiFcYECQMGEhQxVWSBi3qHSoYiDByibd6jExMOhDi0UH16VUqKRLUIx6pQb0aorR6zt57/Q3W3rf7nLvP2ceIgf/kJvuss9Zvf9+3/t93rknivyL3bwNUFQMsX74cAEmYGd57vPc45wyQmSGJLMvI8xznHFEUEUURZWSda36vQVlYsGBBgClVHGrOuYMB8963nXMHAUrT9DPvvZmZekGG1Ezgl0EL4pLYzEqgUUkXOedmAkcCJ0la4Zz7HhiPoshFUeR7X6JBBlwI7As8PBDGOYf3HjObAdwDnCFpTuWQhUmSTM3zfIaZPSpp6z+AOQCYJ2kJcAIQAQ/2hSnqY3/v/b1mdnXNuqmScM4tBUYk3TgkyB6EiNwOzC6ejRd/JwE5gHa7jaRTgbEh6uAG4NimRcDewEJJiyXNpfvmjgN31cIkSUKWZacSQjqMxho+nw5cDtwBnNJnzThw7ySYOI6dc26/IUEg5B7om6b5kq6VNNqwz/3AyV0wkszMfh2WxMy21D0GDgSuA24GTgKShq3WAXO6YAAPfAxkQ4D4LMtehElGFwEXALdKOqZpH2AN8CTwSheMglYB6xs28MBrWZat7yn06cAiSddIOroA66c2sBJ4AHgN2NkLA/A7IcTbikPrtF7Sc61Wq+q++wCXEIr15D7fq+od4BngfSCvfhBDVxF+C5wFPCVpu5mdCBwKfAi8CrwObI7jmDzPIURgTNIiYLQBYgfwLvA4sIqakoh7HwCfeu8XS/rDzC51zn0r6Tsz+7wAt8KtDwDmAbcCRzeAAGwEHgHerAOphSk69jdmZpKWFe5c7V8ipPcC4CZJs3v36FFaACwD3ibUTK0mYCQhicrhKnsWhFQWMDMJPnINzU7sCdd3vACpjUhZf3HvA+fcRCScc1UIgKmE1NxGxR8GaD3wLCFFk0DKfbMs64YBJmaUKkAFZE/giqJYZxNMrp92EiLxGMFPukDKPcuBLU3T3TBmNmFgfex9BnAxISJzB0CUep9gaG9Rub7VFyxBsiwjiqLdMAMgSs2XdC1weAPEX8CGAmQNRbHW7V1GxDlHq9XqhqmREYr1IuB64LgGEAg+8gAhRWm5j0LzAzgC+K3T6fxaRmRkZGQiK4NgEgofkTRMsa4BngbeA9IiFQmhvk6QdA4wamYvA6lz7tmRkREXRZHvqpkaTQMuk3Q1cFQDxC6CjzwMrDOzvLiZe5nZ5ZLOB84r1npJJ8ZxPNV7P8vMHmq3279Nuto9IGPAUnaPioO0gRCRDRTFWkRlnpndSUhNKUcYyuWcuzvP82nA9WVN1f3YGStGxdEGiB3AakJEVgI7S4MEDgOukjSrz3cNwHu/BDh3wuMqC+YCS4BbCN13UD1BuL7jhFrpSCLPczqdDsDxwOk0DFdFRJZmWRbRc+AxwH2S9m+AyAjOuoyQmk4ZZu996R+HlN7RJDM7Is/zCMirMGslxQyOSEroNeX1nTC0NE2rzfRHmkfO3n270rQdOBP4YcCX3iIMRh/QMxhlWYZzjiRJiKJoE/DnEBACVk+ZMkW9MACbgbNrgHYAbwAPASuojIrARFON47i8ST8V6wfKzL4EXojjkIy62/RFDdBGQtPr6jVVlSCFMsKvyG0DWL4GnnfOfTTIZ6pAawnReoJQtLvqFkuipmC3EEbY5wgD4mnFoV/lef5RkiTvSHoJ2DFMOyiBDmbAYFQFqmmIn0q6EpgFzE/TdFOSJLskfdLpdH5utVrbihG2EaYE+r4JBPp3fTP7WtLWNE3XFkP8tCRJtnc6Hd9ut2m1Wrunyf//p9dH/8P009+5QXLavrNkrQAAAABJRU5ErkJggg==);width:17px}.bue-render .node.nmetasound.icon-center.math-multiply:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoAgMAAADxkFD+AAAADFBMVEUAAAClpaWlpaWmpqb9WqD4AAAAA3RSTlMAf4C/aSLHAAAAp0lEQVQY0z3QsRWEIBQF0dGEwCIswRboTDujBUqgCAITnA0+bHLPCyZ6sD9AeDSW18uyfEx3faaHNsJLX8KiH+GtPrs6ONV2qJ2kvpda2dSvqBluVR3AGbMDKWYFtpgZZjxgxR1WXGHFGYBd9QHgUG0AXKovAEX1+6cRHzHbSiMuMeMHx+38wX46f7Am5w/mzfnDIDy1EyathJtmpveA6dlZpspyy4Q/I6PfIYQMZq0AAAAASUVORK5CYII=)}.bue-render .node.nmetasound.icon-center.math-power:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADzklEQVRYR+2YSWgUQRSGJzHuuMSDejMquOKKK6gg4sUF9SISJGByUdyXiKBiVMQFNRpcLxFEE0QEBUEURURQjPshih4UETGI+xq3id8fqkNNpacz3RP1MgUf0/W6q+qvV69eFROLZUrGAxkPBHogK13/VFRUtKWPOTAJauB4fn7+3XT79dqnJRBx7ejoEMyG1hCHh1CEyBvNITI7aieIU9NC4z2JU1F/A6GM97lR+7bbRRZIJ4NgGbT0ETIc28r/JhDvdGTwndAriYgc7Av4bnK6IkPHoFnaNQxcYuIuSMNtXk6DGmIyktYoSzyakZamIE6ChsJayDETCy0ylEAG6cQIu6C7M1Id9efw3bG3oF4AM0MrMw1SFmg8oMAf5TPYG2za0RdAqcYuHahsgLwoXkxZIAOMh0Xg7tof2PYTYxfNcj51BCrO+8N6aBPWk1mVlZWBberqtHoxeeESjAB7Y+nlFZiFwPf6EC/N50dhoCRuly9UlkC5vWGaGj9bAoIwHtPSKre5u/4FtmJPnFFzlN8z4C51e2za/QO01N5yNzV+KkusY2w5KODtUkulFHG3HPtX6oq5R45d1d6wCSQ2pZI0D5oZ9jHe6Of0Ju/ISwUI/OyOZNrOxX4AFB52+WY8WZaKwiAPKoY2gkS65QkGBX0jcdaHJ3g+CL+dxrr9KI8OjizQeGAeHcwAdxIK9u1Qnex0MPaffLMF7vkI6YlNR6WOzMCiMzOhGHFDMK4CzdYu8sZJOOYZm8htH/lOG+w0dLY6UmgpbS2ErUEKGwk0s9rGbw+fhg+wlUBtiLNVaUh3Rk3YHk85UWlH6asqWX8Jy2e8oVlNBHcDfTDingXN2H1nBt6B/Y5Pu27YtNS5yVbCjS8dY4vBu4B6ff7i4Qho58bs2cbj8VgQpoN3/K6A145IOWEMKI1l+Yls8JK5AZ/lw7GO93Ra3ITp8CrE0iZoMYMrKyhZt3KEvtW84bzbf70HTWPNcKQjTq91EVgtcU6nUap7aHQd6s9Pq3TheTN0db3oLfEEXir2/C4C+7Ar0BOWNqw64xkttSb70qf9MGzFkLBxPYG6pdhpQO01y2ugWaclzhNjRFZR1ymio9IuEjYF8lyj6n19ZqRZ6iKg3dvcRSfMOJgK3j6QQ3RGJ9yCPA8q2yvze7Hxiefd4F4E0hZqvKgEvg6qQee6xtVt/Cok3Cc9gXt5cQ60ER5DKRxOW02SDozI+7xWoj4FypHloI0i5zQULyD1QRHo1qLZ6aqkm/JfK0bkZXat/oHQjUepRquYKRkPZDyQ8cC/9MAfnE8ywKQN2lcAAAAASUVORK5CYII=)}.bue-render .node.nmetasound.icon-center.math-subtract:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAPElEQVR4Ae3OAQ2AMAwAsEEu5O4vCycbIhaSJbQKGgEAwIeuc86OwVZVPTHYHcMJdgl2CXatzNwBAMBfvWLnCSNyx9s3AAAAAElFTkSuQmCC)}.bue-render .node.nmetasound.icon-center:after{background-size:cover;content:" ";height:20px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:20px;z-index:-1}.bue-render .node.nmetasound.variable{background-color:hsla(0,0%,6%,.3);border-radius:15px}.bue-render .node.nmetasound.variable .body{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px}.bue-render .node.nmetasound.variable .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;font-weight:700;height:13px;left:14px;padding-top:7px;position:absolute;right:14px;text-align:center;top:0;z-index:-1}.bue-render .node.nmetasound.variable .header{padding:0}.bue-render .node.nmetasound .header{background:none;color:#a6e79c;padding:1px 3px;text-align:center}.bue-render .node.nmetasound .header .graph{color:#3dd9ff}.bue-render .node.nmetasound .header .native{color:#a6e79c}.bue-render .node.nmetasound .header .has-icon{margin:0}.bue-render .node.nmetasound .header .icon{display:unset;height:unset;position:unset;top:unset;width:unset}.bue-render .node.nmetasound .header .icon.graph:before{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNMTMuOSAxMS4yYTMuNSAzLjUgMCAxIDEtNyAwIDMuNSAzLjUgMCAwIDEgNyAweiIgc3Ryb2tlPSIjM0REOUZGIi8+PHBhdGggZD0iTTExLjk3MiA4Ljc2MmEuMzU4LjM1OCAwIDAgMS0uMzcuMzY2LjQyLjQyIDAgMCAxLS4yOC0uMTAyLjM0LjM0IDAgMCAxLS4xMTYtLjI2OWMwLS4xMS4wNDQtLjIwMi4xMzItLjI3M2EuMzk1LjM5NSAwIDAgMC0uMTE4LS4xODYuMjg4LjI4OCAwIDAgMC0uMjA1LS4wNzguMzEyLjMxMiAwIDAgMC0uMjQ5LjEwOC42NzIuNjcyIDAgMCAwLS4xMzIuMjUzIDEuMzQgMS4zNCAwIDAgMC0uMDUzLjMwOCA0LjU5MiA0LjU5MiAwIDAgMCAuMDEuNzM3Yy4wMTMuMTUzLjAyNy4zMDguMDQzLjQ2NGguOTU3di40NDVoLS44ODNsLjI1OCAyLjIzNi4wMi4yMjRhMS44NDMgMS44NDMgMCAwIDEtLjA1NC43MjggMS4zMDggMS4zMDggMCAwIDEtLjIxLjQ0IDEuMDE3IDEuMDE3IDAgMCAxLS44NDQuNDM0Ljk5Ljk5IDAgMCAxLS4zNzYtLjA3MyAxLjAzIDEuMDMgMCAwIDEtLjMxOC0uMTk1Ljk3OC45NzggMCAwIDEtLjIyLS4zMDMuODM4LjgzOCAwIDAgMS0uMDgzLS4zNzFjMC0uMTA4LjAzNi0uMTk2LjEwOC0uMjY0YS4zNjguMzY4IDAgMCAxIC4yNjQtLjEwMmMuMDQ4IDAgLjA5Ni4wMDguMTQxLjAyNGEuNDE3LjQxNyAwIDAgMSAuMjE1LjE5LjMyMy4zMjMgMCAwIDEgLjAzNC4xNDcuMzc0LjM3NCAwIDAgMS0uMTE3LjI3My4zOTYuMzk2IDAgMCAwIC4xMTcuMThjLjA1NS4wNTMuMTIuMDc5LjE5NS4wNzlhLjI5LjI5IDAgMCAwIC4yMTUtLjA4My41MjkuNTI5IDAgMCAwIC4xMzctLjE5NS44MzguODM4IDAgMCAwIC4wNjQtLjI0NCAxLjUgMS41IDAgMCAwIC4wMTktLjIyNWMwLS4xMjQtLjAwOC0uMjQ3LS4wMjQtLjM3MWE3LjI0NyA3LjI0NyAwIDAgMC0uMDUtLjM3MWwtLjAwNC0uMDA1LS4yNjQtMi4xNTNoLS43Mjd2LS40NDVoLjY3OGE3LjM4NCA3LjM4NCAwIDAgMS0uMDM5LS4zNjYgNi43ODUgNi43ODUgMCAwIDEtLjAxLS4zNjYgMi45IDIuOSAwIDAgMSAuMDU0LS41NTJjLjAzNi0uMTg1LjA5OC0uMzUyLjE4Ni0uNDk4LjA4OC0uMTUuMjAzLS4yNzIuMzQ2LS4zNjZhLjk5Ljk5IDAgMCAxIC41NDctLjE0MiAxLjAwNCAxLjAwNCAwIDAgMSAuNjk5LjI3OS45MzQuOTM0IDAgMCAxIC4yMjQuMzAyLjg4MS44ODEgMCAwIDEgLjA4My4zODF6TTE1LjIuOEgxMmEuOC44IDAgMCAwLS44LjhWNGEuOC44IDAgMCAwIC44LjhoMy4yQS44LjggMCAwIDAgMTYgNFYxLjZhLjguOCAwIDAgMC0uOC0uOHpNMCA1LjZWOGEuOC44IDAgMCAwIC44LjhINGEuOC44IDAgMCAwIC44LS44VjUuNmEuOC44IDAgMCAwLS44LS44SC44YS44LjggMCAwIDAtLjguOHoiIGZpbGw9IiMzREQ5RkYiLz48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTEyIDIuNEg4LjJhMSAxIDAgMCAwLTEgMXYzSDR2LjhoMy4ydjIuNjA4QTUuMzUgNS4zNSAwIDAgMSA4IDguNTZ2LTQuOGEuNTg0LjU4NCAwIDAgMSAuNTg0LS41NkgxMnYtLjh6IiBmaWxsPSIjM0REOUZGIi8+PC9nPjxkZWZzPjxjbGlwUGF0aCBpZD0iYSI+PHBhdGggZmlsbD0iIzNERDlGRiIgZD0iTTAgMGgxNnYxNkgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==) no-repeat 0 0;background-size:100%;content:" ";display:inline-block;height:16px;margin-right:5px;position:relative;top:3px;width:16px}.bue-render .node.nmetasound .header .icon.native:before{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNy4xNDUgMy4zMjRhLjcxNy43MTcgMCAwIDEtLjc0My43MzMuODQxLjg0MSAwIDAgMS0uNTU2LS4yMDUuNjguNjggMCAwIDEtLjIzNS0uNTM4YzAtLjIyLjA4OC0uNDAzLjI2NC0uNTQ2YS43OS43OSAwIDAgMC0uMjM0LS4zNzIuNTc2LjU3NiAwIDAgMC0uNDEtLjE1Ni42MjUuNjI1IDAgMCAwLS40OTkuMjE1IDEuMzQ0IDEuMzQ0IDAgMCAwLS4yNjMuNTA4Yy0uMDU5LjE5NS0uMDk1LjQtLjEwOC42MTVhOS4xNiA5LjE2IDAgMCAwIC4wMiAxLjQ3NWMuMDI2LjMwNi4wNTUuNjE1LjA4OC45MjdoMS45MTR2Ljg5SDQuNjE1bC41MTggNC40NzIuMDM5LjQ0OWEzLjcgMy43IDAgMCAxLS4xMDggMS40NTUgMi42MTggMi42MTggMCAwIDEtLjQyLjg3OWMtLjE4Mi4yNi0uNDE2LjQ2OS0uNzAzLjYyNS0uMjguMTYzLS42MDguMjQ0LS45ODYuMjQ0LS4yNiAwLS41MTEtLjA0OS0uNzUyLS4xNDZhMi4wNjUgMi4wNjUgMCAwIDEtLjYzNS0uMzkxIDEuOTU3IDEuOTU3IDAgMCAxLS40NC0uNjA1IDEuNjc2IDEuNjc2IDAgMCAxLS4xNjUtLjc0M2MwLS4yMTQuMDcyLS4zOS4yMTUtLjUyN2EuNzM1LjczNSAwIDAgMSAuNTI3LS4yMDVjLjA5OCAwIC4xOTIuMDE2LjI4My4wNDlhLjgzMi44MzIgMCAwIDEgLjI1NC4xNTYuNjQuNjQgMCAwIDEgLjE3Ni4yMjUuNjQ2LjY0NiAwIDAgMSAuMDY4LjI5My43NS43NSAwIDAgMS0uMjM0LjU0Ni43OTMuNzkzIDAgMCAwIC4yMzQuMzYyLjU1Mi41NTIgMCAwIDAgLjM5LjE1Ni41ODEuNTgxIDAgMCAwIC40My0uMTY2Yy4xMTgtLjEwNC4yMDktLjIzNC4yNzQtLjM5LjA2NS0uMTUuMTA3LS4zMTMuMTI3LS40ODkuMDI2LS4xNy4wNC0uMzE5LjA0LS40NWE1LjU5IDUuNTkgMCAwIDAtLjA1LS43NDEgMTQuNDg0IDE0LjQ4NCAwIDAgMC0uMDk3LS43NDNsLS4wMS0uMDEtLjUyNy00LjMwNkgxLjYwN1Y1Ljk4aDEuMzU4YTE0Ljc1OCAxNC43NTggMCAwIDEtLjA3OC0uNzMyIDEzLjU3IDEzLjU3IDAgMCAxLS4wMi0uNzMyYzAtLjM2NS4wMzYtLjczMy4xMDgtMS4xMDRhMy4wNCAzLjA0IDAgMCAxIC4zNy0uOTk2Yy4xNzYtLjMuNDA4LS41NDQuNjk0LS43MzIuMjkzLS4xOS42NTgtLjI4NCAxLjA5NC0uMjg0YTIuMDA4IDIuMDA4IDAgMCAxIDEuMzk2LjU1N2MuMTkuMTcuMzM5LjM3MS40NS42MDUuMTEuMjM1LjE2Ni40ODkuMTY2Ljc2MnoiIGZpbGw9IiNBNkU3OUMiLz48L3N2Zz4=) no-repeat 0 0;background-size:100%;content:" ";display:inline-block;height:16px;margin-right:5px;position:relative;top:3px;width:8px}.bue-render .node.nmetasound .header .icon.input{color:#72ffde}.bue-render .node.nmetasound .header .icon.input:before{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjM2NCAxMkg0LjcyN0M0LjM2NCAxMiA0IDExLjY3MyA0IDExLjEyOVYxLjg3YzAtLjQzNC4yNzMtLjg3LjcyNy0uODdoOS41NDZjLjM2MyAwIC43MjcuMzI3LjcyNy44NzF2OS4yNThjMCAuNTQ0LS4yNzMuODcxLS42MzYuODcxeiIgc3Ryb2tlPSIjNzJGRkRFIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48cGF0aCBkPSJNMy40OCA1LjE3MUgzVjcuODNoMy41ODlWMTBsLjc3Mi0uNjEzIDMuMTQtMi40OTFMMTEgNi41bC0uNDk5LS4zOTYtMy4xNC0yLjQ5TDYuNTkgM3YyLjE3MUgzLjQ4eiIgZmlsbD0iIzcyRkZERSIgc3Ryb2tlPSIjNzJGRkRFIi8+PC9zdmc+) no-repeat 0 0;background-size:100%;content:" ";display:inline-block;height:13px;margin-right:5px;position:relative;top:2px;width:16px}.bue-render .node.nmetasound .header .icon.output{color:#fdf071}.bue-render .node.nmetasound .header .icon.output:before{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyLjM2NCAxMkgyLjcyN0MyLjM2NCAxMiAyIDExLjY3MyAyIDExLjEyOVYxLjg3YzAtLjQzNC4yNzMtLjg3LjcyNy0uODdoOS41NDZjLjM2MyAwIC43MjcuMzI3LjcyNy44NzF2OS4yNThjMCAuNTQ0LS4yNzMuODcxLS42MzYuODcxeiIgc3Ryb2tlPSIjRkRGMDcxIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48cGF0aCBkPSJNNy40OCA1LjE3MUg3VjcuODNoMy41ODhWMTBsLjc3My0uNjEzIDMuMTQtMi40OTFMMTUgNi41bC0uNDk5LS4zOTYtMy4xNC0yLjQ5TDEwLjU4OCAzdjIuMTcxSDcuNDgxeiIgZmlsbD0iI0ZERjA3MSIgc3Ryb2tlPSIjRkRGMDcxIi8+PC9zdmc+) no-repeat 0 0;background-size:100%;content:" ";display:inline-block;height:13px;margin-right:5px;position:relative;top:2px;width:16px}.bue-render .node.nmetasound .body{align-items:center;display:flex;justify-content:space-between}.bue-render .node.nmetasound .body .left-col{align-self:flex-start;display:unset;float:unset;top:unset}.bue-render .node.nmetasound .body .right-col{display:unset;float:unset;top:unset}.bue-render .node .nmetasound-select{min-height:27px;width:191px}.bue-render .node .space-input-select{margin-bottom:5px}.bue-render .node.nsubsystem{background-color:hsla(0,0%,6%,.3);border-radius:15px;min-width:130px}.bue-render .node.nsubsystem .body{align-items:center;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAApUlEQVQY02NgQAPfxb/5fy/73vK97/ssFIlP6p+rf5398/DPve/bP0x6VoQk9Trxx9lfd15NPREJg1CJJxyP8r+efbN2Z8y2SASESh4O+XT67rTFkagQLNWn92L75ckTI9EhUKpecHnevbX1kZgQKJnp9HhPSUxeJCZkiOSLi9o7ISESG2Tw151WFhqJHTJ4uR6ZExiJHTJ4hm7swinpEduch0sSANy8jegouf+HAAAAAElFTkSuQmCC) no-repeat left 1px,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAQAAAAz1Zf0AAAAnklEQVQY02P41v+19mvxp+j3Bh/5GNDBw9RXtV8Wfd/+bdPb9uv2t/hRJE9EwuDtoietp6L3GyBJbotEwB1RV6u2RG2w28YMlVwciQoPlyyMmu4ElZwYiQ63F/VF1RuBJesjMeHGipLYImGgZF4kJiyMyo2K9QBKJkRig1OLQhKD+RlCI7HDgFg3I4bASOwwIMrBD6dkYrxjDB5JhxQAFjKCyDrNoo8AAAAASUVORK5CYII=) no-repeat right 1px;display:flex;justify-content:space-between;min-height:30px}.bue-render .node.nsubsystem .body .left-col{display:unset;float:unset;min-width:22px;top:unset}.bue-render .node.nsubsystem .body .right-col{display:unset;float:unset;top:unset}.bue-render .node.nsubsystem .body .left-text{color:hsla(0,0%,100%,.55);font-family:sans-serif;font-size:22px;font-weight:700;height:100%;line-height:27px;pointer-events:none;width:100%}.bue-render .node.nsubsystem .body .round-bg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAANCAQAAADC3sx5AAAAJklEQVR4AWP8Po3p8WGmdwwg9JYBynjPwPSJgekrA9MfBiYGEAIAHbwLxMfQ6vkAAAAASUVORK5CYII=) repeat-x left 1px;height:13px;left:14px;position:absolute;right:14px;top:0;z-index:-1}.bue-render .pin{cursor:default}.bue-render .pin .div-inside{display:inline-block}.bue-render .pin .div-inside:hover.default{background-color:hsla(37,48%,77%,.3)}.bue-render .pin .div-inside:hover.exec{background-color:hsla(0,0%,100%,.3)}.bue-render .pin .div-inside:hover.bool{background-color:rgba(149,0,0,.3)}.bue-render .pin .div-inside:hover.byte{background-color:rgba(0,111,101,.3)}.bue-render .pin .div-inside:hover.class{background-color:rgba(89,0,188,.3)}.bue-render .pin .div-inside:hover.int{background-color:rgba(31,227,175,.3)}.bue-render .pin .div-inside:hover.float{background-color:rgba(161,255,69,.3)}.bue-render .pin .div-inside:hover.name{background-color:rgba(205,130,255,.3)}.bue-render .pin .div-inside:hover.asset{background-color:rgba(149,255,255,.3)}.bue-render .pin .div-inside:hover.asset-class{background-color:rgba(255,149,255,.3)}.bue-render .pin .div-inside:hover.delegate{background-color:rgba(255,56,56,.3)}.bue-render .pin .div-inside:hover.object{background-color:rgba(0,170,245,.3)}.bue-render .pin .div-inside:hover.interface{background-color:rgba(241,255,170,.3)}.bue-render .pin .div-inside:hover.string{background-color:rgba(255,0,212,.3)}.bue-render .pin .div-inside:hover.text{background-color:rgba(231,124,170,.3)}.bue-render .pin .div-inside:hover.struct{background-color:rgba(0,89,203,.3)}.bue-render .pin .div-inside:hover.wildcard{background-color:hsla(0,3%,48%,.3)}.bue-render .pin .div-inside:hover.vector{background-color:rgba(255,202,35,.3)}.bue-render .pin .div-inside:hover.rotator{background-color:rgba(160,180,255,.3)}.bue-render .pin .div-inside:hover.transform{background-color:rgba(255,115,0,.3)}.bue-render .pin .div-inside:hover.index{background-color:rgba(31,227,175,.3)}.bue-render .pin .div-inside:hover.int64{background-color:rgba(172,227,175,.3)}.bue-render .pin .div-inside:hover.double,.bue-render .pin .div-inside:hover.real{background-color:rgba(56,213,0,.3)}.bue-render .pin .div-inside:hover.soft-class{background-color:rgba(255,149,255,.3)}.bue-render .pin .div-inside:hover.soft-object{background-color:rgba(149,255,255,.3)}.bue-render .pin .div-inside:hover.audio{background-color:rgba(253,148,253,.3)}.bue-render .pin .div-inside:hover.time{background-color:rgba(149,254,254,.3)}.bue-render .pin .div-inside:hover.trigger{background-color:hsla(0,0%,100%,.3)}.bue-render .pin .div-inside:hover.wavetable{background-color:rgba(200,0,235,.3)}.bue-render .pin .div-inside:hover.pcg-spatial-data{background-color:hsla(0,0%,100%,.3)}.bue-render .pin .div-inside:hover.pcg-attribute-set{background-color:rgba(200,129,28,.3)}.bue-render .pin .div-inside:hover.pcg-point-data{background-color:rgba(63,137,255,.3)}.bue-render .pin .div-inside:hover.pcg-poly-line-data{background-color:rgba(63,225,234,.3)}.bue-render .pin .div-inside:hover.pcg-landscape-data{background-color:rgba(212,212,75,.3)}.bue-render .pin .div-inside:hover.pcg-texture-data{background-color:rgba(230,80,25,.3)}.bue-render .pin .div-inside:hover.pcg-render-target-data{background-color:hsla(9,74%,64%,.3)}.bue-render .pin .div-inside:hover.pcg-surface-data{background-color:rgba(69,196,126,.3)}.bue-render .pin .div-inside:hover.pcg-volume-data{background-color:rgba(230,69,188,.3)}.bue-render .pin .div-inside:hover.pcg-primitive-data{background-color:rgba(129,63,255,.3)}.bue-render .pin .div-inside:hover.pcg-concrete-data{background-color:rgba(179,166,250,.3)}.bue-render .pin .div-inside:hover.pcg-any-data{background-color:hsla(0,0%,58%,.3)}.bue-render .pin .connector{background-color:#000;border:2px solid #000;border-radius:50px;box-sizing:content-box;cursor:crosshair;display:inline-block;height:8px;margin-right:5px;position:relative;top:1px;width:8px}.bue-render .pin .connector:after{border-bottom:3px solid transparent;border-left:3px solid #000;border-top:3px solid transparent;content:"";float:left;height:0;left:10px;position:relative;top:1px;width:0}.bue-render .pin .connector.filled{background-color:red}.bue-render .pin .connector.default{border-color:#e1ccaa}.bue-render .pin .connector.default:after{border-left:3px solid #e1ccaa}.bue-render .pin .connector.default.filled{background-color:#e1ccaa}.bue-render .pin .connector.exec{border-color:#fff}.bue-render .pin .connector.exec:after{border-left:3px solid #fff}.bue-render .pin .connector.exec.filled{background-color:#fff}.bue-render .pin .connector.bool{border-color:#950000}.bue-render .pin .connector.bool:after{border-left:3px solid #950000}.bue-render .pin .connector.bool.filled{background-color:#950000}.bue-render .pin .connector.byte{border-color:#006f65}.bue-render .pin .connector.byte:after{border-left:3px solid #006f65}.bue-render .pin .connector.byte.filled{background-color:#006f65}.bue-render .pin .connector.class{border-color:#5900bc}.bue-render .pin .connector.class:after{border-left:3px solid #5900bc}.bue-render .pin .connector.class.filled{background-color:#5900bc}.bue-render .pin .connector.int{border-color:#1fe3af}.bue-render .pin .connector.int:after{border-left:3px solid #1fe3af}.bue-render .pin .connector.int.filled{background-color:#1fe3af}.bue-render .pin .connector.float{border-color:#a1ff45}.bue-render .pin .connector.float:after{border-left:3px solid #a1ff45}.bue-render .pin .connector.float.filled{background-color:#a1ff45}.bue-render .pin .connector.name{border-color:#cd82ff}.bue-render .pin .connector.name:after{border-left:3px solid #cd82ff}.bue-render .pin .connector.name.filled{background-color:#cd82ff}.bue-render .pin .connector.asset{border-color:#95ffff}.bue-render .pin .connector.asset:after{border-left:3px solid #95ffff}.bue-render .pin .connector.asset.filled{background-color:#95ffff}.bue-render .pin .connector.asset-class{border-color:#ff95ff}.bue-render .pin .connector.asset-class:after{border-left:3px solid #ff95ff}.bue-render .pin .connector.asset-class.filled{background-color:#ff95ff}.bue-render .pin .connector.delegate{border-color:#ff3838;border-radius:3px}.bue-render .pin .connector.delegate:after{border-left:3px solid #ff3838;content:none}.bue-render .pin .connector.delegate.filled{background-color:#ff3838}.bue-render .pin .connector.object{border-color:#00aaf5}.bue-render .pin .connector.object:after{border-left:3px solid #00aaf5}.bue-render .pin .connector.object.filled{background-color:#00aaf5}.bue-render .pin .connector.interface{border-color:#f1ffaa}.bue-render .pin .connector.interface:after{border-left:3px solid #f1ffaa}.bue-render .pin .connector.interface.filled{background-color:#f1ffaa}.bue-render .pin .connector.string{border-color:#ff00d4}.bue-render .pin .connector.string:after{border-left:3px solid #ff00d4}.bue-render .pin .connector.string.filled{background-color:#ff00d4}.bue-render .pin .connector.text{border-color:#e77caa}.bue-render .pin .connector.text:after{border-left:3px solid #e77caa}.bue-render .pin .connector.text.filled{background-color:#e77caa}.bue-render .pin .connector.struct{border-color:#0059cb}.bue-render .pin .connector.struct:after{border-left:3px solid #0059cb}.bue-render .pin .connector.struct.filled{background-color:#0059cb}.bue-render .pin .connector.wildcard{border-color:#7f7878}.bue-render .pin .connector.wildcard:after{border-left:3px solid #7f7878}.bue-render .pin .connector.wildcard.filled{background-color:#7f7878}.bue-render .pin .connector.vector{border-color:#ffca23}.bue-render .pin .connector.vector:after{border-left:3px solid #ffca23}.bue-render .pin .connector.vector.filled{background-color:#ffca23}.bue-render .pin .connector.rotator{border-color:#a0b4ff}.bue-render .pin .connector.rotator:after{border-left:3px solid #a0b4ff}.bue-render .pin .connector.rotator.filled{background-color:#a0b4ff}.bue-render .pin .connector.transform{border-color:#ff7300}.bue-render .pin .connector.transform:after{border-left:3px solid #ff7300}.bue-render .pin .connector.transform.filled{background-color:#ff7300}.bue-render .pin .connector.index{border-color:#1fe3af}.bue-render .pin .connector.index:after{border-left:3px solid #1fe3af}.bue-render .pin .connector.index.filled{background-color:#1fe3af}.bue-render .pin .connector.materialinput{border-color:#fff}.bue-render .pin .connector.materialinput:after{border-left:3px solid #fff}.bue-render .pin .connector.materialinput.filled{background-color:#fff}.bue-render .pin .connector.int64{border-color:#ace3af}.bue-render .pin .connector.int64:after{border-left:3px solid #ace3af}.bue-render .pin .connector.int64.filled{background-color:#ace3af}.bue-render .pin .connector.double{border-color:#38d500}.bue-render .pin .connector.double:after{border-left:3px solid #38d500}.bue-render .pin .connector.double.filled{background-color:#38d500}.bue-render .pin .connector.real{border-color:#38d500}.bue-render .pin .connector.real:after{border-left:3px solid #38d500}.bue-render .pin .connector.real.filled{background-color:#38d500}.bue-render .pin .connector.soft-class{border-color:#ff95ff}.bue-render .pin .connector.soft-class:after{border-left:3px solid #ff95ff}.bue-render .pin .connector.soft-class.filled{background-color:#ff95ff}.bue-render .pin .connector.soft-object{border-color:#95ffff}.bue-render .pin .connector.soft-object:after{border-left:3px solid #95ffff}.bue-render .pin .connector.soft-object.filled{background-color:#95ffff}.bue-render .pin .connector.audio{border-color:#fd94fd}.bue-render .pin .connector.audio:after{border-left:3px solid #fd94fd}.bue-render .pin .connector.audio.filled{background-color:#fd94fd}.bue-render .pin .connector.time{border-color:#95fefe}.bue-render .pin .connector.time:after{border-left:3px solid #95fefe}.bue-render .pin .connector.time.filled{background-color:#95fefe}.bue-render .pin .connector.wavetable{border-color:#c800eb}.bue-render .pin .connector.wavetable:after{border-left:3px solid #c800eb}.bue-render .pin .connector.wavetable.filled{background-color:#c800eb}.bue-render .pin .connector.enum{border-color:#006f65}.bue-render .pin .connector.enum:after{border-left:3px solid #006f65}.bue-render .pin .connector.enum.filled{background-color:#006f65}.bue-render .pin .connector.pcg-spatial-data{border-color:#fff}.bue-render .pin .connector.pcg-spatial-data:after{border-left:3px solid #fff}.bue-render .pin .connector.pcg-spatial-data.filled{background-color:#fff}.bue-render .pin .connector.pcg-attribute-set{border-color:#c8811c}.bue-render .pin .connector.pcg-attribute-set:after{border-left:3px solid #c8811c}.bue-render .pin .connector.pcg-attribute-set.filled{background-color:#c8811c}.bue-render .pin .connector.pcg-point-data{border-color:#3f89ff}.bue-render .pin .connector.pcg-point-data:after{border-left:3px solid #3f89ff}.bue-render .pin .connector.pcg-point-data.filled{background-color:#3f89ff}.bue-render .pin .connector.pcg-poly-line-data{border-color:#3fe1ea}.bue-render .pin .connector.pcg-poly-line-data:after{border-left:3px solid #3fe1ea}.bue-render .pin .connector.pcg-poly-line-data.filled{background-color:#3fe1ea}.bue-render .pin .connector.pcg-landscape-data{border-color:#d4d44b}.bue-render .pin .connector.pcg-landscape-data:after{border-left:3px solid #d4d44b}.bue-render .pin .connector.pcg-landscape-data.filled{background-color:#d4d44b}.bue-render .pin .connector.pcg-texture-data{border-color:#e65019}.bue-render .pin .connector.pcg-texture-data:after{border-left:3px solid #e65019}.bue-render .pin .connector.pcg-texture-data.filled{background-color:#e65019}.bue-render .pin .connector.pcg-render-target-data{border-color:#e77661}.bue-render .pin .connector.pcg-render-target-data:after{border-left:3px solid #e77661}.bue-render .pin .connector.pcg-render-target-data.filled{background-color:#e77661}.bue-render .pin .connector.pcg-surface-data{border-color:#45c47e}.bue-render .pin .connector.pcg-surface-data:after{border-left:3px solid #45c47e}.bue-render .pin .connector.pcg-surface-data.filled{background-color:#45c47e}.bue-render .pin .connector.pcg-volume-data{border-color:#e645bc}.bue-render .pin .connector.pcg-volume-data:after{border-left:3px solid #e645bc}.bue-render .pin .connector.pcg-volume-data.filled{background-color:#e645bc}.bue-render .pin .connector.pcg-primitive-data{border-color:#813fff}.bue-render .pin .connector.pcg-primitive-data:after{border-left:3px solid #813fff}.bue-render .pin .connector.pcg-primitive-data.filled{background-color:#813fff}.bue-render .pin .connector.pcg-concrete-data{border-color:#b3a6fa}.bue-render .pin .connector.pcg-concrete-data:after{border-left:3px solid #b3a6fa}.bue-render .pin .connector.pcg-concrete-data.filled{background-color:#b3a6fa}.bue-render .pin .connector.pcg-any-data{border-color:#959595}.bue-render .pin .connector.pcg-any-data:after{border-left:3px solid #959595}.bue-render .pin .connector.pcg-any-data.filled{background-color:#959595}.bue-render .pin .connector.ref{border-radius:0;height:5px;transform:rotate(45deg);width:5px}.bue-render .pin .connector.ref:after{border:0}.bue-render .pin .connector.staticenum{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjMDA2RjY1IiBmaWxsPSJub25lIiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiMwMDZGNjUiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat;border:none;border-radius:unset;cursor:crosshair;display:inline-block;height:14px;margin-right:2px;position:relative;top:2px;width:17px}.bue-render .pin .connector.staticenum:after{border:none}.bue-render .pin .connector.staticenum.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjMDA2RjY1IiBmaWxsPSIjMDA2RjY1IiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat}.bue-render .pin .connector.statictype-int{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjMUZFM0FGIiBmaWxsPSJub25lIiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiMxRkUzQUYiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat;border:none;border-radius:unset;cursor:crosshair;display:inline-block;height:14px;margin-right:2px;position:relative;top:2px;width:17px}.bue-render .pin .connector.statictype-int:after{border:none}.bue-render .pin .connector.statictype-int.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjMUZFM0FGIiBmaWxsPSIjMUZFM0FGIiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat}.bue-render .pin .connector.statictype-bool{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjOTUwMDAwIiBmaWxsPSJub25lIiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiM5NTAwMDAiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat;border:none;border-radius:unset;cursor:crosshair;display:inline-block;height:14px;margin-right:2px;position:relative;top:2px;width:17px}.bue-render .pin .connector.statictype-bool:after{border:none}.bue-render .pin .connector.statictype-bool.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggc3Ryb2tlPSIjOTUwMDAwIiBmaWxsPSIjOTUwMDAwIiBkPSJNMSA4cy41LTUuMyA0LjktNS4zYzIuMiAwIDQuNi44IDYuOSAyLjQgMi4zIDEuNSAzLjkgMyAzLjkgMy4xIDAgMC0xLjYgMS45LTMuNiAzLjEtMS45IDEuMi00LjMgMi4zLTYuOSAyLjNDMS4xIDEzLjYgMSA3LjkgMSA3LjkiLz48cGF0aCBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiIGQ9Ik00LjUgMTB2MmgzVjhoLTNWNC41aDN2MS43Ii8+PC9zdmc+) no-repeat}.bue-render .pin .connector-image.exec{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAQAAACIaFaMAAAAY0lEQVR42mNgwAX++/1/+x8C3v73Q5Z4ciqaQQoE//v9f4Ik9f8/RBgEzyf8/w+XQpYA64JJoUog6UKXgOvClIBIkSKBwyi4u4hyLpIwKEjOJ8B9gBIkHv+fQwPx+X8PBsIAAN/VbnUHQrhKAAAAAElFTkSuQmCC) no-repeat;cursor:crosshair;display:inline-block;height:16px;margin-right:5px;position:relative;top:1px;width:12px}.bue-render .pin .connector-image.exec.filled{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAQAAACIaFaMAAAAVklEQVR42mNgwAVORM/8D4MnopEkZv5/duc/GDy7M/P/yVAkCWSAJIUqgSSFLgGXwpSASmGTAEmRJoHDKByW43Auigcf34YIPr6NEiQnQxGBiCSMGwAA6HX4M2XGYHEAAAAASUVORK5CYII=) no-repeat}.bue-render .pin .connector-set{cursor:crosshair;display:inline-block;font-family:monospace;font-size:18px;font-weight:700;width:22px}.bue-render .pin .connector-set:after{content:"{}"}.bue-render .pin .connector-set.default{color:#e1ccaa}.bue-render .pin .connector-set.exec{color:#fff}.bue-render .pin .connector-set.bool{color:#950000}.bue-render .pin .connector-set.byte{color:#006f65}.bue-render .pin .connector-set.class{color:#5900bc}.bue-render .pin .connector-set.int{color:#1fe3af}.bue-render .pin .connector-set.float{color:#a1ff45}.bue-render .pin .connector-set.name{color:#cd82ff}.bue-render .pin .connector-set.asset{color:#95ffff}.bue-render .pin .connector-set.asset-class{color:#ff95ff}.bue-render .pin .connector-set.delegate{color:#ff3838}.bue-render .pin .connector-set.object{color:#00aaf5}.bue-render .pin .connector-set.interface{color:#f1ffaa}.bue-render .pin .connector-set.string{color:#ff00d4}.bue-render .pin .connector-set.text{color:#e77caa}.bue-render .pin .connector-set.struct{color:#0059cb}.bue-render .pin .connector-set.wildcard{color:#7f7878}.bue-render .pin .connector-set.vector{color:#ffca23}.bue-render .pin .connector-set.rotator{color:#a0b4ff}.bue-render .pin .connector-set.transform{color:#ff7300}.bue-render .pin .connector-set.index{color:#1fe3af}.bue-render .pin .connector-set.materialinput{color:#fff}.bue-render .pin .connector-set.int64{color:#ace3af}.bue-render .pin .connector-set.double,.bue-render .pin .connector-set.real{color:#38d500}.bue-render .pin .connector-set.soft-class{color:#ff95ff}.bue-render .pin .connector-set.soft-object{color:#95ffff}.bue-render .pin .connector-set.wavetable{color:#c800eb}.bue-render .pin .connector-array{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAJElEQVR4AWMQFRVFxv/x8Wmr+D+xGMNkTIyQp55iyt088OEMAMYGTpdQIyXgAAAAAElFTkSuQmCC) no-repeat;cursor:crosshair;display:inline-block;height:11px;margin-right:5px;width:11px}.bue-render .pin .connector-array.filled{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAG0lEQVR4AWMQFRVFxv/x8Wmr+D+xeNTNZCsGACg0RaB8zNMXAAAAAElFTkSuQmCC) no-repeat}.bue-render .pin .connector-array.default{background-color:#e1ccaa}.bue-render .pin .connector-array.exec{background-color:#fff}.bue-render .pin .connector-array.bool{background-color:#950000}.bue-render .pin .connector-array.byte{background-color:#006f65}.bue-render .pin .connector-array.class{background-color:#5900bc}.bue-render .pin .connector-array.int{background-color:#1fe3af}.bue-render .pin .connector-array.float{background-color:#a1ff45}.bue-render .pin .connector-array.name{background-color:#cd82ff}.bue-render .pin .connector-array.asset{background-color:#95ffff}.bue-render .pin .connector-array.asset-class{background-color:#ff95ff}.bue-render .pin .connector-array.delegate{background-color:#ff3838}.bue-render .pin .connector-array.object{background-color:#00aaf5}.bue-render .pin .connector-array.interface{background-color:#f1ffaa}.bue-render .pin .connector-array.string{background-color:#ff00d4}.bue-render .pin .connector-array.text{background-color:#e77caa}.bue-render .pin .connector-array.struct{background-color:#0059cb}.bue-render .pin .connector-array.wildcard{background-color:#7f7878}.bue-render .pin .connector-array.vector{background-color:#ffca23}.bue-render .pin .connector-array.rotator{background-color:#a0b4ff}.bue-render .pin .connector-array.transform{background-color:#ff7300}.bue-render .pin .connector-array.index{background-color:#1fe3af}.bue-render .pin .connector-array.int64{background-color:#ace3af}.bue-render .pin .connector-array.double,.bue-render .pin .connector-array.real{background-color:#38d500}.bue-render .pin .connector-array.soft-class{background-color:#ff95ff}.bue-render .pin .connector-array.soft-object{background-color:#95ffff}.bue-render .pin .connector-array.time{background-color:#95fefe}.bue-render .pin .connector-array.wavetable{background-color:#c800eb}.bue-render .pin .connector-map{cursor:crosshair;display:inline-block}.bue-render .pin .connector-map .key{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAOCAQAAACiY3WTAAAAF0lEQVR42mNgAIP/vAx4GKL/IZCB2ooBE+0VMQkh1i4AAAAASUVORK5CYII=) no-repeat;display:inline-block;height:14px;margin-right:2px;width:4px}.bue-render .pin .connector-map .value{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOCAQAAABXnf4jAAAAGElEQVR42mNgoBb4x8so+p8IVYPTeAYGADzQBldIo2V4AAAAAElFTkSuQmCC) no-repeat;display:inline-block;height:14px;margin-right:5px;width:9px}.bue-render .pin .connector-map .key.default,.bue-render .pin .connector-map .value.default{background-color:#e1ccaa}.bue-render .pin .connector-map .key.exec,.bue-render .pin .connector-map .value.exec{background-color:#fff}.bue-render .pin .connector-map .key.bool,.bue-render .pin .connector-map .value.bool{background-color:#950000}.bue-render .pin .connector-map .key.byte,.bue-render .pin .connector-map .value.byte{background-color:#006f65}.bue-render .pin .connector-map .key.class,.bue-render .pin .connector-map .value.class{background-color:#5900bc}.bue-render .pin .connector-map .key.int,.bue-render .pin .connector-map .value.int{background-color:#1fe3af}.bue-render .pin .connector-map .key.float,.bue-render .pin .connector-map .value.float{background-color:#a1ff45}.bue-render .pin .connector-map .key.name,.bue-render .pin .connector-map .value.name{background-color:#cd82ff}.bue-render .pin .connector-map .key.asset,.bue-render .pin .connector-map .value.asset{background-color:#95ffff}.bue-render .pin .connector-map .key.asset-class,.bue-render .pin .connector-map .value.asset-class{background-color:#ff95ff}.bue-render .pin .connector-map .key.delegate,.bue-render .pin .connector-map .value.delegate{background-color:#ff3838}.bue-render .pin .connector-map .key.object,.bue-render .pin .connector-map .value.object{background-color:#00aaf5}.bue-render .pin .connector-map .key.interface,.bue-render .pin .connector-map .value.interface{background-color:#f1ffaa}.bue-render .pin .connector-map .key.string,.bue-render .pin .connector-map .value.string{background-color:#ff00d4}.bue-render .pin .connector-map .key.text,.bue-render .pin .connector-map .value.text{background-color:#e77caa}.bue-render .pin .connector-map .key.struct,.bue-render .pin .connector-map .value.struct{background-color:#0059cb}.bue-render .pin .connector-map .key.wildcard,.bue-render .pin .connector-map .value.wildcard{background-color:#7f7878}.bue-render .pin .connector-map .key.vector,.bue-render .pin .connector-map .value.vector{background-color:#ffca23}.bue-render .pin .connector-map .key.rotator,.bue-render .pin .connector-map .value.rotator{background-color:#a0b4ff}.bue-render .pin .connector-map .key.transform,.bue-render .pin .connector-map .value.transform{background-color:#ff7300}.bue-render .pin .connector-map .key.index,.bue-render .pin .connector-map .value.index{background-color:#1fe3af}.bue-render .pin .connector-map .key.int64,.bue-render .pin .connector-map .value.int64{background-color:#ace3af}.bue-render .pin .connector-map .key.double,.bue-render .pin .connector-map .key.real,.bue-render .pin .connector-map .value.double,.bue-render .pin .connector-map .value.real{background-color:#38d500}.bue-render .pin .connector-map .key.soft-class,.bue-render .pin .connector-map .value.soft-class{background-color:#ff95ff}.bue-render .pin .connector-map .key.soft-object,.bue-render .pin .connector-map .value.soft-object{background-color:#95ffff}.bue-render .pin .connector-map .key.time,.bue-render .pin .connector-map .value.time{background-color:#95fefe}.bue-render .pin .connector-map .key.wavetable,.bue-render .pin .connector-map .value.wavetable{background-color:#c800eb}.bue-render .pin .connector-trigger.trigger{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAAx0lEQVR4AXVSARGDMBBrUVAJSMDBcMIk4IA5YA5qYVPAHCCBORgOuvzuO9LS5i4H6aeh/8UaQgjB4TGAHbiDT2vti+o9a5NtvocyNrCNAaxrmz04gJOa8xCfhGhqRJe3BK4xOPN7Q4mCudJaq/WPzsjo+0830K16H6UADO2Nh9CR968b8jpTx16tyNGTnuotbLR2aDIIboXNm9YmXetPM4MYQ3rvHlxobSXvojfj8qNe6WuMmaY/shbYQs8Xc0xbfuWdao614AvOEFYm+pLoCwAAAABJRU5ErkJggg==) no-repeat;cursor:crosshair;display:inline-block;height:12px;image-rendering:-webkit-optimize-contrast;margin-right:5px;position:relative;top:1px;width:16px}.bue-render .pin .connector-trigger.trigger.filled{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAAq0lEQVQokY2R0RGCMBBE31FBSrAEO5BOtAQ6QSuIJUgF2gElYAfQwfpBogcDY95Xdu5uL9kYDkkBOANHYAI6M3u5eu31AklXbTNIOmQDr0uGt0ziwiS5lhBX/RHnWMKoOSPSeZQUKmD5nn2C631nXRUO7yOpLXzC4Ga+ugJuhbvuabhO+uFv0fzZ3rvep6Q+B+pNLpr/d03r0m+8BrCNTE780u7MbHK14DXAB0WHarPGBdRjAAAAAElFTkSuQmCC) no-repeat}.bue-render .pin .label-text{display:inline-block;padding-right:5px;vertical-align:text-top}.bue-render .pin .label-text.icon-plus:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAAMklEQVR42mNggIL/e////7+XARP8BwOKJMBmo4O9cJXoACSxHYv4duq6Ci6xHc1sXAAAMxZvZzucCzkAAAAASUVORK5CYII=);padding-left:5px}.bue-render .pin .tri-input-wrapper{margin-left:26px}.bue-render .pin span.fake-input{border:1px solid grey;border-radius:2px;color:#fff;display:inline-block;line-height:14px;min-height:14px;min-width:7px;padding-left:4px;padding-right:4px;padding-top:2px;vertical-align:text-top;white-space:pre}.bue-render .pin span.fake-input.axis{margin-right:3px}.bue-render .pin span.fake-input.axis-X:before{color:grey;content:"X";padding-right:5px}.bue-render .pin span.fake-input.axis-Y:before{color:grey;content:"Y";padding-right:5px}.bue-render .pin span.fake-input.axis-Z:before{color:grey;content:"Z";padding-right:5px}.bue-render .pin span.fake-input.axis-W:before{color:grey;content:"W";padding-right:5px}.bue-render .pin span.fake-input-colorpicker{background-color:transparent;border:1px inset grey;display:inline-block;height:16px;padding:0;vertical-align:text-top;width:16px}.bue-render .pin span.no-input{display:block;height:1px;width:1px}.bue-render .pin span.fake-input-select{background-color:#20221f;border:0;border-radius:2px;color:#fff;display:inline-block;font-size:11px;line-height:11px;margin-left:26px;min-height:14px;min-width:7px;padding-left:4px;padding-right:4px;padding-top:2px;vertical-align:text-top;white-space:pre}.bue-render .pin .checkbox{left:2px;padding:0;position:relative;top:2px}.bue-render .pin .dropdown{border-color:#909090 transparent transparent;border-style:solid;border-width:7px 6px 0;cursor:pointer;display:inline-block;height:0;margin-left:5px;width:0}.bue-render .pin .asset-browser{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAgElEQVR4AWP4//8/OhYC4m4gFsYix4AuIAjEF/5DAD8hDSJAfByq+AVIDJ8GXiA+8h8BPgOxNxDbI2E1mAYJID7zHx9AGGLOADaZeLAPpKGNBA1HYX6YRoTiH0DshBwCs5EkP2HxtBbM09g0vcUXrOh4E1STILEamIC4CxrcGPIAWhns4nl183oAAAAASUVORK5CYII=);margin-left:2px}.bue-render .pin .asset-browser,.bue-render .pin .browse{cursor:pointer;display:inline-block;height:12px;position:relative;top:3px;width:12px}.bue-render .pin .browse{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAApklEQVQYGQXBsSoEAACA4T8hm0FsViWDpJsMXsDoAe4dGMxGWRTblYFJXeINLEbDTRgUg0nCJMvn+5IkAyMT9/YsSEmyj1eXbvFmXUmGODQvWTXxYzGZ9uZOkmQZB8mGb7uSJLn2kGz5si1JkpGnZMmnY0mSPLpIcubPmiQ5wmYy4xq/TuwYusOBMmeMK6defHj3bFfKDW7NyayBFUnK2LkpSZIk/QMfG7yjbyfEKQAAAABJRU5ErkJggg==);margin-left:4px}.bue-render .pin.hidden{display:none}.bue-render .pin .connector-pcg-attribute-set{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjMgOCAzMCAyMCI+PHBhdGggZD0iTTggMThjLTIuNSAwLTQuNS0yLTQuNS00LjVTNS41IDkgOCA5aDIwYzIuNSAwIDQuNSAyIDQuNSA0LjVTMzAuNSAxOCAyOCAxOEg4eiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMyMzEzMDEiLz48cGF0aCBkPSJNMjggOS41YzIuMiAwIDQgMS44IDQgNHMtMS44IDQtNCA0SDhjLTIuMiAwLTQtMS44LTQtNHMxLjgtNCA0LTRoMjBtMC0xSDhjLTIuOCAwLTUgMi4yLTUgNXMyLjIgNSA1IDVoMjBjMi44IDAgNS0yLjIgNS01cy0yLjItNS01LTV6IiBmaWxsPSIjYzg4MTFjIi8+PHBhdGggZD0iTTMxIDI3LjVIMTNjLS41IDAtMS0uNC0xLTF2LTRjMC0uNS40LTEgMS0xaDE4Yy41IDAgMSAuNCAxIDF2NGMwIC42LS40IDEtMSAxeiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNjODgxMWMiIHN0cm9rZT0iIzIzMTMwMSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9zdmc+) no-repeat;cursor:crosshair;display:inline-block;height:16px;margin-right:3px;position:relative;top:6px;width:18px}.bue-render .pin .connector-pcg-attribute-set.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjMgOCAzMCAyMCI+PHBhdGggZD0iTTggMThjLTIuNSAwLTQuNS0yLTQuNS00LjVTNS41IDkgOCA5aDIwYzIuNSAwIDQuNSAyIDQuNSA0LjVTMzAuNSAxOCAyOCAxOEg4eiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNjODgxMWMiLz48cGF0aCBkPSJNMjggOS41YzIuMiAwIDQgMS44IDQgNHMtMS44IDQtNCA0SDhjLTIuMiAwLTQtMS44LTQtNHMxLjgtNCA0LTRoMjBtMC0xSDhjLTIuOCAwLTUgMi4yLTUgNXMyLjIgNSA1IDVoMjBjMi44IDAgNS0yLjIgNS01cy0yLjItNS01LTV6IiBmaWxsPSIjMjMxMzAxIi8+PHBhdGggZD0iTTMxIDI3LjVIMTNjLS41IDAtMS0uNC0xLTF2LTRjMC0uNS40LTEgMS0xaDE4Yy41IDAgMSAuNCAxIDF2NGMwIC42LS40IDEtMSAxeiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNjODgxMWMiIHN0cm9rZT0iIzIzMTMwMSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9zdmc+) no-repeat}.bue-render .pin .connector-pcg-spatial-data{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjQgMiAzMiAzMiI+PHBhdGggZD0iTTIwLjUgMzNoLTEwYy0yLjggMC01LTIuMi01LTVWOGMwLTIuOCAyLjItNSA1LTVoMTBjMi44IDAgNSAyLjIgNSA1djIwYzAgMi44LTIuMiA1LTUgNXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSJncmF5IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PGNpcmNsZSBjeD0iMjMuNyIgY3k9IjE4IiByPSIxMCIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMyMDIwMjAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48L3N2Zz4=) no-repeat;cursor:crosshair;display:inline-block;height:18px;margin-right:3px;position:relative;top:4px;width:18px}.bue-render .pin .connector-pcg-spatial-data.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjQgMiAzMiAzMiI+PGNpcmNsZSBjeD0iMTUiIGN5PSIyMy4zIiByPSI4IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI2MzYzNjMyIgc3Ryb2tlPSIjNDY0NjQ2Ii8+PHBhdGggZD0iTTIwLjUgMzNoLTEwYy0yLjggMC01LTIuMi01LTVWOGMwLTIuOCAyLjItNSA1LTVoMTBjMi44IDAgNSAyLjIgNSA1djIwYzAgMi44LTIuMiA1LTUgNXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjODc4Nzg3IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PGNpcmNsZSBjeD0iMjMuNyIgY3k9IjE4IiByPSI5LjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTIzLjcgMjdjLTUgMC05LTQtOS05czQtOSA5LTkgOSA0IDkgOS00IDktOSA5bTAgMWM1LjUgMCAxMC00LjUgMTAtMTBzLTQuNS0xMC0xMC0xMC0xMCA0LjUtMTAgMTAgNC41IDEwIDEwIDEweiIgZmlsbD0iIzQ2NDY0NiIvPjwvc3ZnPg==) no-repeat}.bue-render .pin .connector-pcg-multiple-data-multiple-connection{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjMgMCAyOSAzNiI+PHN0eWxlPi5zdDR7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojMDIxYjFjO3N0cm9rZTojMGU0NzRhO3N0cm9rZS13aWR0aDoxLjV9PC9zdHlsZT48cGF0aCBkPSJNMjUuOCAzMi4yVjE3LjVjMC0xLjcgMS4zLTMuMSAzLTMuMXMzIDEuMyAzIDMuMXYxNC43YzAgMS44LTEuMyAzLjItMyAzLjItMS44LjEtMy0xLjQtMy0zLjJ6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzFkNzY3YiIgc3Ryb2tlPSIjMGU0NzRhIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMTguOCAzMC4xVjExLjhjMC0yLjQgMS44LTQuMyA0LTQuM3M0IDEuOSA0IDQuM3YxOC40YzAgMi40LTEuOCA0LjMtNCA0LjMtMi4zIDAtNC0yLTQtNC40eiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMyZWFjYjMiIHN0cm9rZT0iIzBlNDc0YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTIxLjMgNi40djIxLjNjMCAzLjItMi40IDUuOC01LjUgNS44cy01LjUtMi41LTUuNS01LjhWNi4zYzAtMy4yIDIuNC01LjggNS41LTUuOCAzIDAgNS40IDIuNSA1LjUgNS45eiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzZmUxZWEiLz48cGF0aCBkPSJNMTUuOCAzM2MtMi45IDAtNS0yLjMtNS01LjNWNi4zYzAtMyAyLjItNS4zIDUtNS4zczUgMi4zIDUgNS4zdjIxLjNjMCAzLTIuMiA1LjQtNSA1LjRtMCAxYzMuMyAwIDYtMi44IDYtNi4zVjYuM2MwLTMuNS0yLjYtNi4zLTYtNi4zcy02IDIuNy02IDYuM3YyMS4zYzAgMy41IDIuNiA2LjQgNiA2LjR6IiBmaWxsPSIjMGU0NzRhIi8+PGNpcmNsZSBjbGFzcz0ic3Q0IiBjeD0iMTAuMiIgY3k9IjkiIHI9IjYiLz48Y2lyY2xlIGNsYXNzPSJzdDQiIGN4PSIxMC4yIiBjeT0iMTciIHI9IjYiLz48Y2lyY2xlIGNsYXNzPSJzdDQiIGN4PSIxMC4yIiBjeT0iMjUiIHI9IjYiLz48L3N2Zz4=) no-repeat;cursor:crosshair;display:inline-block;height:20px;left:-2px;margin-top:-4px;position:relative;top:6px;width:18px}.bue-render .pin .connector-pcg-multiple-data-multiple-connection.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjMgMCAyOSAzNiI+PHN0eWxlPi5zdDR7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojM2ZlMWVhO3N0cm9rZTojMGU0NzRhfTwvc3R5bGU+PHBhdGggZD0iTTI1LjggMzIuMlYxNy41YzAtMS43IDEuMy0zLjEgMy0zLjFzMyAxLjMgMyAzLjF2MTQuN2MwIDEuOC0xLjMgMy4yLTMgMy4yLTEuOC4xLTMtMS40LTMtMy4yeiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMxZDc2N2IiIHN0cm9rZT0iIzBlNDc0YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTE4LjggMzAuMVYxMS44YzAtMi40IDEuOC00LjMgNC00LjNzNCAxLjkgNCA0LjN2MTguNGMwIDIuNC0xLjggNC4zLTQgNC4zLTIuMyAwLTQtMi00LTQuNHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjMmVhY2IzIiBzdHJva2U9IiMwZTQ3NGEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yMS4zIDYuNHYyMS4zYzAgMy4yLTIuNCA1LjgtNS41IDUuOHMtNS41LTIuNS01LjUtNS44VjYuM2MwLTMuMiAyLjQtNS44IDUuNS01LjggMyAwIDUuNCAyLjUgNS41IDUuOXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjM2ZlMWVhIi8+PHBhdGggZD0iTTE1LjggMzNjLTIuOSAwLTUtMi4zLTUtNS4zVjYuM2MwLTMgMi4yLTUuMyA1LTUuM3M1IDIuMyA1IDUuM3YyMS4zYzAgMy0yLjIgNS40LTUgNS40bTAgMWMzLjMgMCA2LTIuOCA2LTYuM1Y2LjNjMC0zLjUtMi42LTYuMy02LTYuM3MtNiAyLjctNiA2LjN2MjEuM2MwIDMuNSAyLjYgNi40IDYgNi40eiIgZmlsbD0iIzBlNDc0YSIvPjxjaXJjbGUgY2xhc3M9InN0NCIgY3g9IjEwLjIiIGN5PSI5IiByPSI2Ii8+PGNpcmNsZSBjbGFzcz0ic3Q0IiBjeD0iMTAuMiIgY3k9IjE3IiByPSI2Ii8+PGNpcmNsZSBjbGFzcz0ic3Q0IiBjeD0iMTAuMiIgY3k9IjI1IiByPSI2Ii8+PC9zdmc+) no-repeat}.bue-render .pin .connector-pcg-multiple-data-single-connection{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjkgMSAxOCAzNCI+PHN0eWxlPi5zdDJ7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojMDIxYjFjO3N0cm9rZTojMGU0NzRhO3N0cm9rZS13aWR0aDoxLjV9PC9zdHlsZT48cGF0aCBkPSJNMjEuMiAzNC41Yy0zLjEgMC01LjUtMi42LTUuNS01LjhWNy4zYzAtMy4zIDIuNC01LjggNS41LTUuOHM1LjUgMi42IDUuNSA1Ljh2MjEuM2MuMSAzLjMtMi40IDUuOS01LjUgNS45eiIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzZmUxZWEiLz48cGF0aCBkPSJNMjEuMiAyYzIuOCAwIDUgMi4zIDUgNS4zdjIxLjNjMCAzLTIuMiA1LjMtNSA1LjNzLTUtMi4zLTUtNS4zVjcuM2MwLTMgMi4zLTUuMyA1LTUuM20wLTFjLTMuNCAwLTYgMi44LTYgNi4zdjIxLjNjMCAzLjYgMi42IDYuMyA2IDYuM3M2LTIuOCA2LTYuM1Y3LjNjMC0zLjUtMi42LTYuMy02LTYuM3oiIGZpbGw9IiMwZTQ3NGEiLz48Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSIxNS44IiBjeT0iMTAiIHI9IjYiLz48Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSIxNS44IiBjeT0iMTgiIHI9IjYiLz48Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSIxNS44IiBjeT0iMjYiIHI9IjYiLz48L3N2Zz4=) no-repeat;cursor:crosshair;display:inline-block;height:20px;margin-right:3px;margin-top:-4px;position:relative;top:6px;width:12px}.bue-render .pin .connector-pcg-multiple-data-single-connection.filled{background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjkgMSAxOCAzNCI+PHN0eWxlPi5zdDJ7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojM2ZlMWVhO3N0cm9rZTojMGU0NzRhfTwvc3R5bGU+PHBhdGggZD0iTTIxLjIgMzQuNWMtMy4xIDAtNS41LTIuNi01LjUtNS44VjcuM2MwLTMuMyAyLjQtNS44IDUuNS01LjhzNS41IDIuNiA1LjUgNS44djIxLjNjLjEgMy4zLTIuNCA1LjktNS41IDUuOXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjM2ZlMWVhIi8+PHBhdGggZD0iTTIxLjIgMmMyLjggMCA1IDIuMyA1IDUuM3YyMS4zYzAgMy0yLjIgNS4zLTUgNS4zcy01LTIuMy01LTUuM1Y3LjNjMC0zIDIuMy01LjMgNS01LjNtMC0xYy0zLjQgMC02IDIuOC02IDYuM3YyMS4zYzAgMy42IDIuNiA2LjMgNiA2LjNzNi0yLjggNi02LjNWNy4zYzAtMy41LTIuNi02LjMtNi02LjN6IiBmaWxsPSIjMGU0NzRhIi8+PGNpcmNsZSBjbGFzcz0ic3QyIiBjeD0iMTUuOCIgY3k9IjEwIiByPSI2Ii8+PGNpcmNsZSBjbGFzcz0ic3QyIiBjeD0iMTUuOCIgY3k9IjE4IiByPSI2Ii8+PGNpcmNsZSBjbGFzcz0ic3QyIiBjeD0iMTUuOCIgY3k9IjI2IiByPSI2Ii8+PC9zdmc+) no-repeat}.bue-render .right-col .pin .connector-pcg-attribute-set,.bue-render .right-col .pin .connector-pcg-spatial-data{margin-right:0;transform:scaleX(-1)}.bue-render .right-col .pin .connector-pcg-multiple-data-multiple-connection{left:0;margin-right:0;transform:scaleX(-1)}.bue-render .right-col .pin .connector-pcg-multiple-data-single-connection{transform:scaleX(-1)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-any-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-any-data{filter:grayscale(1)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-point-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-point-data{filter:brightness(67%) hue-rotate(43deg) saturate(150%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-landscape-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-landscape-data{filter:brightness(155%) hue-rotate(250deg) saturate(110%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-texture-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-texture-data{filter:brightness(70%) hue-rotate(190deg) saturate(170%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-render-target-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-render-target-data{filter:brightness(92%) hue-rotate(184deg) saturate(128%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-surface-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-surface-data{filter:hue-rotate(326deg)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-volume-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-volume-data{filter:brightness(80%) hue-rotate(128deg) saturate(150%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-primitive-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-primitive-data{filter:brightness(74%) hue-rotate(77deg) saturate(250%)}.bue-render .clink.connector-pcg-multiple-data-multiple-connection.pcg-concrete-data,.bue-render .clink.connector-pcg-multiple-data-single-connection.pcg-concrete-data{filter:hue-rotate(68deg)}
</style>
`;

function loadEmbeddedScript() {
  const script1 = document.createElement("script");
  const textContent = `KGZ1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIHZvaWQgMCA9PT0gd2luZG93LmJsdWVwcmludFVFICYmICh3aW5kb3cuYmx1ZXByaW50VUUgPSB7fSksCiAgICB2b2lkIDAgPT09IHdpbmRvdy5ibHVlcHJpbnRVRS5yZW5kZXIgJiYgKHdpbmRvdy5ibHVlcHJpbnRVRS5yZW5kZXIgPSB7fSk7CiAgZnVuY3Rpb24gcmdiYSh0LCBlLCBuLCByKSB7CiAgICBmdW5jdGlvbiBzYW5pdGl6ZVJHQih0KSB7CiAgICAgIHQgPSBwYXJzZUludCh0LCAxMCk7CiAgICAgIHJldHVybiBpc05hTih0KSA/IDI1NSA6IE1hdGgubWluKE1hdGgubWF4KHQsIDApLCAyNTUpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgcmVkOiBzYW5pdGl6ZVJHQih0KSwKICAgICAgZ3JlZW46IHNhbml0aXplUkdCKGUpLAogICAgICBibHVlOiBzYW5pdGl6ZVJHQihuKSwKICAgICAgYWxwaGE6CiAgICAgICAgKCh0ID0gciksCiAgICAgICAgKHQgPSBwYXJzZUZsb2F0KHQpKSwKICAgICAgICBpc05hTih0KSA/IDEgOiBNYXRoLm1pbihNYXRoLm1heCh0LCAwKSwgMSkpLAogICAgICBsb2c6IGZ1bmN0aW9uICgpIHt9LAogICAgICBnZW5lcmF0ZUJsdWVwcmludFRleHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgIihSPSIgKwogICAgICAgICAgdGhpcy5kZWNpbWFsVG9GbG9hdCh0aGlzLnJlZCkgKwogICAgICAgICAgIixHPSIgKwogICAgICAgICAgdGhpcy5kZWNpbWFsVG9GbG9hdCh0aGlzLmdyZWVuKSArCiAgICAgICAgICAiLEI9IiArCiAgICAgICAgICB0aGlzLmRlY2ltYWxUb0Zsb2F0KHRoaXMuYmx1ZSkgKwogICAgICAgICAgIixBPSIgKwogICAgICAgICAgdGhpcy5maXhBbHBoYUZvckJsdWVwcmludFRleHQodGhpcy5hbHBoYSkgKwogICAgICAgICAgIikiCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgZGVjb2RlQmx1ZXByaW50VGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICB0ID0gU3RyaW5nKHQpLnNwbGl0KCIsIik7CiAgICAgICAgcmV0dXJuIHJnYmEoCiAgICAgICAgICB0aGlzLmZsb2F0VG9EZWNpbWFsKHRbMF0uc3Vic3RyKDMpKSwKICAgICAgICAgIHRoaXMuZmxvYXRUb0RlY2ltYWwodFsxXS5zdWJzdHIoMikpLAogICAgICAgICAgdGhpcy5mbG9hdFRvRGVjaW1hbCh0WzJdLnN1YnN0cigyKSksCiAgICAgICAgICBwYXJzZUZsb2F0KHRbM10uc3Vic3RyKDIsIHRbM10ubGVuZ3RoIC0gMykpCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgc2V0VmFsdWVzRnJvbUJsdWVwcmludFRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdCA9IHRoaXMuZGVjb2RlQmx1ZXByaW50VGV4dCh0KTsKICAgICAgICAodGhpcy5yZWQgPSB0LnJlZCksCiAgICAgICAgICAodGhpcy5ncmVlbiA9IHQuZ3JlZW4pLAogICAgICAgICAgKHRoaXMuYmx1ZSA9IHQuYmx1ZSksCiAgICAgICAgICAodGhpcy5hbHBoYSA9IHQuYWxwaGEpOwogICAgICB9LAogICAgICBzZXRWYWx1ZXNGcm9tUHJvcHM6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgZSwgbiA9IDAsIHIgPSB0Lmxlbmd0aDsgbiA8IHI7ICsrbikKICAgICAgICAgIChlID0gdGhpcy5mbG9hdFRvRGVjaW1hbCh0W25dLnZhbHVlKSksCiAgICAgICAgICAgICJSIiA9PT0gdFtuXS5uYW1lICYmICh0aGlzLnJlZCA9IGUpLAogICAgICAgICAgICAiRyIgPT09IHRbbl0ubmFtZSAmJiAodGhpcy5ncmVlbiA9IGUpLAogICAgICAgICAgICAiQiIgPT09IHRbbl0ubmFtZSAmJiAodGhpcy5ibHVlID0gZSksCiAgICAgICAgICAgICJBIiA9PT0gdFtuXS5uYW1lICYmICh0aGlzLmFscGhhID0gZSk7CiAgICAgIH0sCiAgICAgIGdlbmVyYXRlQ3NzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICJyZ2JhKCIgKwogICAgICAgICAgdGhpcy5yZWQgKwogICAgICAgICAgIiwgIiArCiAgICAgICAgICB0aGlzLmdyZWVuICsKICAgICAgICAgICIsICIgKwogICAgICAgICAgdGhpcy5ibHVlICsKICAgICAgICAgICIsICIgKwogICAgICAgICAgdGhpcy5hbHBoYSArCiAgICAgICAgICAiKSIKICAgICAgICApOwogICAgICB9LAogICAgICBmbG9hdFRvRGVjaW1hbDogZnVuY3Rpb24gKHQpIHsKICAgICAgICB0ID0gTWF0aC5yb3VuZCgyNTUgKiB0KTsKICAgICAgICByZXR1cm4gaXNOYU4odCkgPyAyNTUgOiBNYXRoLm1pbihNYXRoLm1heCh0LCAwKSwgMjU1KTsKICAgICAgfSwKICAgICAgZGVjaW1hbFRvRmxvYXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGUgPSAwOwogICAgICAgIHJldHVybiAyNTUgPD0gdAogICAgICAgICAgPyAiMS4wMDAwMDAiCiAgICAgICAgICA6IHQgPD0gMAogICAgICAgICAgPyAiMC4wMDAwMDAiCiAgICAgICAgICA6ICgoZSA9IHQgLyAyNTUpLAogICAgICAgICAgICBpc05hTihlKSA/ICIxLjAwMDAwMCIgOiAoZS50b0ZpeGVkKDYpICsgIjAwMDAwMCIpLnN1YnN0cigwLCA4KSk7CiAgICAgIH0sCiAgICAgIGZpeEFscGhhRm9yQmx1ZXByaW50VGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gKHBhcnNlRmxvYXQodCkudG9GaXhlZCg2KSArICIwMDAwMDAiKS5zdWJzdHIoMCwgOCk7CiAgICAgIH0sCiAgICB9OwogIH0KICBmdW5jdGlvbiByYW5kb21JbnRlcnZhbCh0LCBlKSB7CiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGUgLSB0ICsgMSkpICsgdDsKICB9CiAgZnVuY3Rpb24gZ2VuZXJhdGVHVUlEKCkgewogICAgZm9yICh2YXIgdCA9ICIiLCBlID0gMDsgZSA8IDMyOyArK2UpCiAgICAgIDEgPT09IHJhbmRvbUludGVydmFsKDAsIDEpCiAgICAgICAgPyAodCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhbmRvbUludGVydmFsKDY1LCA5MCkpKQogICAgICAgIDogKHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21JbnRlcnZhbCg0OCwgNTcpKSk7CiAgICByZXR1cm4gdDsKICB9CiAgZnVuY3Rpb24gY2xhbXAodCwgZSwgbikgewogICAgcmV0dXJuIG4gPCBlCiAgICAgID8gbmV3IEVycm9yKCJBcmd1bWVudCBtaW4gaXMgc3VwZXJpb3IgdG8gbWF4IikKICAgICAgOiBNYXRoLm1pbihNYXRoLm1heCh0LCBlKSwgbik7CiAgfQogIGZ1bmN0aW9uIHJlbW92ZVF1b3Rlcyh0KSB7CiAgICB2YXIgZSA9ICIiOwogICAgcmV0dXJuIG51bGwgPT0gdAogICAgICA/IHQKICAgICAgOiAnIicgPT09CiAgICAgICAgKGUgPSAnIicgPT09IChlID0gU3RyaW5nKHQpKS5jaGFyQXQoMCkgPyBlLnN1YnN0cmluZygxKSA6IGUpLmNoYXJBdCgKICAgICAgICAgIGUubGVuZ3RoIC0gMQogICAgICAgICkKICAgICAgPyBlLnN1YnN0cmluZygwLCBlLmxlbmd0aCAtIDEpCiAgICAgIDogZTsKICB9CiAgZnVuY3Rpb24gbmwyYnIodCkgewogICAgdmFyIGUgPSAiIiwKICAgICAgbiA9ICIiOwogICAgcmV0dXJuIG51bGwgPT0gdAogICAgICA/IHQKICAgICAgOiAoIlxcclxcbiIgPT09IChuID0gU3RyaW5nKHQpKS5zdWJzdHJpbmcobi5sZW5ndGggLSA0KSAmJiAoZSA9ICI8YnI+IiksCiAgICAgICAgbi5yZXBsYWNlKC9cXHJcXG4vZywgIjxicj4iKSArIGUpOwogIH0KICBmdW5jdGlvbiBuMmJyKHQpIHsKICAgIHZhciBlID0gIiIsCiAgICAgIG4gPSAiIjsKICAgIHJldHVybiBudWxsID09IHQKICAgICAgPyB0CiAgICAgIDogKCJcXG4iID09PSAobiA9IFN0cmluZyh0KSkuc3Vic3RyaW5nKG4ubGVuZ3RoIC0gMikgJiYgKGUgPSAiPGJyPiIpLAogICAgICAgIG4ucmVwbGFjZSgvXFxuL2csICI8YnI+IikgKyBlKTsKICB9CiAgZnVuY3Rpb24gdHJhbnNmb3JtSW50ZXJuYWxOYW1lKHQpIHsKICAgIHZhciBlID0gIiI7CiAgICByZXR1cm4gbnVsbCA9PSB0CiAgICAgID8gdAogICAgICA6IChlID0KICAgICAgICAgIDAgPT09CiAgICAgICAgICAoZSA9IChlID0gKGUgPSBTdHJpbmcodCkpLnJlcGxhY2UoL18vZywgIiAiKSkucmVwbGFjZSgKICAgICAgICAgICAgLyhbQS1aXSkoW0EtWl0pKFthLXpdKXwoW2Etel0pKFtBLVpdKS9nLAogICAgICAgICAgICAiJDEkNCAkMiQzJDUiCiAgICAgICAgICApKS5pbmRleE9mKCJLMiIpCiAgICAgICAgICAgID8gZS5yZXBsYWNlKC8gL2csICIiKS5zdWJzdHJpbmcoMikKICAgICAgICAgICAgOiBlKS50cmltKCk7CiAgfQogIGZ1bmN0aW9uIGdldFN2Z1BhdGgodCwgZSwgbiwgcikgewogICAgcmV0dXJuIHQubGVmdCA8PSBlLmxlZnQKICAgICAgPyB0LnRvcCA8PSBlLnRvcAogICAgICAgID8gIk0gMCAwIEMiICsKICAgICAgICAgICgobiAvIDIpID4+IDApICsKICAgICAgICAgICIsMCAiICsKICAgICAgICAgICgobiAvIDIpID4+IDApICsKICAgICAgICAgICIsIiArCiAgICAgICAgICByICsKICAgICAgICAgICIgIiArCiAgICAgICAgICBuICsKICAgICAgICAgICIsIiArCiAgICAgICAgICByCiAgICAgICAgOiAiTSAwICIgKwogICAgICAgICAgciArCiAgICAgICAgICAiIEMiICsKICAgICAgICAgICgobiAvIDIpID4+IDApICsKICAgICAgICAgICIsIiArCiAgICAgICAgICByICsKICAgICAgICAgICIgIiArCiAgICAgICAgICAoKG4gLyAyKSA+PiAwKSArCiAgICAgICAgICAiLDAgIiArCiAgICAgICAgICBuICsKICAgICAgICAgICIsMCIKICAgICAgOiB0LnRvcCA8PSBlLnRvcAogICAgICA/ICJNICIgKyBuICsgIiAwIEMiICsgKG4gKyBuKSArICIsMCAiICsgLW4gKyAiLCIgKyByICsgIiAwLCIgKyByCiAgICAgIDogIk0gIiArIG4gKyAiICIgKyByICsgIiBDIiArIChuICsgbikgKyAiLCIgKyByICsgIiAiICsgLW4gKyAiLDAgMCwwIjsKICB9CiAgZnVuY3Rpb24gY29ycmVjdFN2Z1BhdGhGb3JLbm90KHQsIGUsIG4sIHIsIGEsIGksIHUpIHsKICAgIHZhciBvID0KICAgICAgICBlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoCiAgICAgICAgICAia25vdCIKICAgICAgICApLAogICAgICBsID0KICAgICAgICBuLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoCiAgICAgICAgICAia25vdCIKICAgICAgICApOwogICAgaWYgKCFvICYmIGwpIHsKICAgICAgaWYgKAogICAgICAgICFlLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygKICAgICAgICAgICJsZWZ0LWNvbCIKICAgICAgICApICYmCiAgICAgICAgci5sZWZ0ID4gYS5sZWZ0CiAgICAgICkKICAgICAgICByZXR1cm4gci50b3AgPiBhLnRvcAogICAgICAgICAgPyAiTSAiICsgaSArICIgIiArIHUgKyAiIEMiICsgKGkgKyAxNTApICsgIiwiICsgdSArICIgIiArIGkgKyAiLDAgMCwwIgogICAgICAgICAgOiAiTSAiICsgaSArICIgMCBDIiArIChpICsgMTUwKSArICIsMCAiICsgaSArICIsIiArIHUgKyAiIDAsIiArIHU7CiAgICB9IGVsc2UgaWYgKAogICAgICBvICYmCiAgICAgICFsICYmCiAgICAgIG4ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKAogICAgICAgICJsZWZ0LWNvbCIKICAgICAgKSAmJgogICAgICByLmxlZnQgPiBhLmxlZnQKICAgICkKICAgICAgcmV0dXJuIGEudG9wID4gci50b3AKICAgICAgICA/ICJNIDAgIiArIHUgKyAiIEMtNzUsIiArIHUgKyAiIC03NSwwICIgKyBpICsgIiwwIgogICAgICAgIDogIk0gMCAwIEMtNzUsMCAtNzUsIiArIHUgKyAiICIgKyBpICsgIiwiICsgdTsKICAgIHJldHVybiB0OwogIH0KICBmdW5jdGlvbiB1Y2ZpcnN0KHQpIHsKICAgIHQgPSB0LnRyaW0oKTsKICAgIHJldHVybiB0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdC5zdWJzdHJpbmcoMSk7CiAgfQogIGZ1bmN0aW9uIGZsb2F0Rml4ZWQodCwgZSkgewogICAgdCA9IHQudG9GaXhlZChlKTsKICAgIHJldHVybiBwYXJzZUZsb2F0KHQpOwogIH0KICBmdW5jdGlvbiBnZXRDb2VmZmljZW50T2Zmc2V0Rm9yU2NhbGUodCwgZSkgewogICAgcmV0dXJuIHsKICAgICAgMS41NjogeyBpbjogMC42NzU2NjYxOTkxNTg0ODUyLCBvdXQ6IDAgfSwKICAgICAgMS40ODogeyBpbjogMC43MTQyMzI3NjUwMTExMTkzLCBvdXQ6IDAuNjQxMDY1ODMwNzIxMDAzMSB9LAogICAgICAxLjQ6IHsgaW46IDAuNzU3NDY4NTUzNDU5MTE5NSwgb3V0OiAwLjY3NTQwOTgzNjA2NTU3MzggfSwKICAgICAgMS4zMjogeyBpbjogMC44MDYyNzYxNTA2Mjc2MTUsIG91dDogMC43MTQ0OTcwNDE0MjAxMTg0IH0sCiAgICAgIDEuMjQ6IHsgaW46IDAuODYyMjU0MDI1MDQ0NzIyNywgb3V0OiAwLjc1NzExNTc0OTUyNTYxNjcgfSwKICAgICAgMS4xNjogeyBpbjogMC45MjYwMzI2NjA5MDI5Nzc5LCBvdXQ6IDAuODA2NDAyNDM5MDI0MzkwMiB9LAogICAgICAxLjA4OiB7IGluOiAxLCBvdXQ6IDAuODYyMDY4OTY1NTE3MjQxMyB9LAogICAgICAxOiB7IGluOiAxLjA4Njg3MzUwODM1MzIyMiwgb3V0OiAwLjkyNjE2MjI2MDcxMTAzIH0sCiAgICAgIDAuOTI6IHsgaW46IDEuMTkwNTcxNzE1MTQ1NDM2Miwgb3V0OiAxIH0sCiAgICAgIDAuODQ6IHsgaW46IDEuMzE1NTkzNDAwNzQ1MDc3MSwgb3V0OiAxLjA4Nzc2NTk1NzQ0NjgwODYgfSwKICAgICAgMC43NjogeyBpbjogMS40NzAzNTU3MzEyMjUyOTY0LCBvdXQ6IDEuMTkxODYwNDY1MTE2Mjc5IH0sCiAgICAgIDAuNjg6IHsgaW46IDEuNjY2ODcxOTIxMTgyMjY2LCBvdXQ6IDEuMzE3MzA3NjkyMzA3NjkyMyB9LAogICAgICAwLjY6IHsgaW46IDEuOTIyNzk2Nzk1MzM4Njc0NCwgb3V0OiAxLjQ3MTQyODU3MTQyODU3MTUgfSwKICAgICAgMC41MjogeyBpbjogMi4yNzIzNDA0MjU1MzE5MTUsIG91dDogMS42NjUzMjI1ODA2NDUxNjEzIH0sCiAgICAgIDAuNDQ6IHsgaW46IDIuNzc4MTk1NDg4NzIxODA0Niwgb3V0OiAxLjkyMDkzMDIzMjU1ODEzOTQgfSwKICAgICAgMC4zNjogeyBpbjogMy41NzA4NjYxNDE3MzIyODMzLCBvdXQ6IDIuMjczMjI0MDQzNzE1ODQ3IH0sCiAgICAgIDAuMjg6IHsgaW46IDUsIG91dDogMi43OCB9LAogICAgICAwLjI6IHsgaW46IDguMzMyNjYxMjkwMzIyNTgsIG91dDogMy41NzI2NDk1NzI2NDk1NzMgfSwKICAgICAgMC4xMjogeyBpbjogMjUsIG91dDogNSB9LAogICAgICAwLjA0OiB7IGluOiAwLCBvdXQ6IDguMzMzMzMzMzMzMzMzMzM0IH0sCiAgICB9W3RdW2VdOwogIH0KICBmdW5jdGlvbiBnZXRDb2VmZmljZW50T2Zmc2V0Rm9yU2NhbGVXaGVuWm9vbUluKHQpIHsKICAgIHJldHVybiBnZXRDb2VmZmljZW50T2Zmc2V0Rm9yU2NhbGUodCwgImluIik7CiAgfQogIGZ1bmN0aW9uIGdldENvZWZmaWNlbnRPZmZzZXRGb3JTY2FsZVdoZW5ab29tT3V0KHQpIHsKICAgIHJldHVybiBnZXRDb2VmZmljZW50T2Zmc2V0Rm9yU2NhbGUodCwgIm91dCIpOwogIH0KICBmdW5jdGlvbiBnZXRLaXNtZXRNYXRoVGV4dCh0KSB7CiAgICB2YXIgZSA9IHQuaW5kZXhPZigiXyIpOwogICAgcmV0dXJuIC0xICE9PSBlCiAgICAgID8gIkdyZWF0ZXJFcXVhbCIgPT09IChlID0gdC5zdWJzdHJpbmcoMCwgZSkpCiAgICAgICAgPyAiPj0iCiAgICAgICAgOiAiR3JlYXRlciIgPT09IGUKICAgICAgICA/ICI+IgogICAgICAgIDogIlN1YnRyYWN0IiA9PT0gZQogICAgICAgID8gIi0iCiAgICAgICAgOiAiTGVzc0VxdWFsIiA9PT0gZQogICAgICAgID8gIjw9IgogICAgICAgIDogIkxlc3MiID09PSBlCiAgICAgICAgPyAiPCIKICAgICAgICA6ICJFcXVhbEVxdWFsIiA9PT0gZQogICAgICAgID8gIj09IgogICAgICAgIDogIk5vdEVxdWFsIiA9PT0gZQogICAgICAgID8gIiE9IgogICAgICAgIDogIk5vdCIgPT09IGUKICAgICAgICA/ICJOT1QiCiAgICAgICAgOiAiUGVyY2VudCIgPT09IGUKICAgICAgICA/ICIlIgogICAgICAgIDogIk11bHRpcGx5IiA9PT0gZQogICAgICAgID8gIsOXIgogICAgICAgIDogIkRpdmlkZSIgPT09IGUKICAgICAgICA/ICLDtyIKICAgICAgICA6ICJBZGQiID09PSBlICYmICIrIgogICAgICA6IC0xICE9PSB0LmluZGV4T2YoIk5BTkQiKQogICAgICA/ICJOQU5EIgogICAgICA6IC0xICE9PSB0LmluZGV4T2YoIkFORCIpCiAgICAgID8gIkFORCIKICAgICAgOiAtMSAhPT0gdC5pbmRleE9mKCJYT1IiKQogICAgICA/ICJYT1IiCiAgICAgIDogLTEgIT09IHQuaW5kZXhPZigiTk9SIikKICAgICAgPyAiTk9SIgogICAgICA6IC0xICE9PSB0LmluZGV4T2YoIk9SIikKICAgICAgPyAiT1IiCiAgICAgIDogLTEgIT09IHQuaW5kZXhPZigiTWF4IikKICAgICAgPyAiTUFYIgogICAgICA6IC0xICE9PSB0LmluZGV4T2YoIk1pbiIpCiAgICAgID8gIk1JTiIKICAgICAgOiAtMSAhPT0gdC5pbmRleE9mKCJBYnMiKQogICAgICA/ICJBQlMiCiAgICAgIDogLTEgIT09IHQuaW5kZXhPZigiRGVnU2luIikKICAgICAgPyAiU0lOZCIKICAgICAgOiAtMSAhPT0gdC5pbmRleE9mKCJEZWdBY29zIikKICAgICAgPyAiQUNPU2QiCiAgICAgIDogLTEgIT09IHQuaW5kZXhPZigiU3FydCIpICYmICJTUVJUIjsKICB9CiAgZnVuY3Rpb24gZ2V0QXJyYXlUZXh0KHQpIHsKICAgIHJldHVybiB0LnJlcGxhY2UoIkFycmF5XyIsICIiKTsKICB9CiAgZnVuY3Rpb24gZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheSh0KSB7CiAgICB2YXIgZSA9ICIiOwogICAgcmV0dXJuIHZvaWQgMCA9PT0gdCB8fCAiMCIgPT09IChlID0gdC50cmltKCkpIHx8ICIwLjAwMDAwMCIgPT09IGUKICAgICAgPyAiMC4wIgogICAgICA6ICgiLiIgPT09IChlID0gZS5yZXBsYWNlKC8wKyQvLCAiIikpLmNoYXJBdChlLmxlbmd0aCAtIDEpICYmIChlICs9ICIwIiksCiAgICAgICAgZSk7CiAgfQogIGZ1bmN0aW9uIGdldExhc3RQYXJ0QXNzZXQodCkgewogICAgdmFyIGUgPSAiIjsKICAgIHJldHVybiBudWxsID09IHQKICAgICAgPyB0CiAgICAgIDogIiciID09PQogICAgICAgIChlID0gKHQgPSAodCA9IHQuc3BsaXQoIi8iKSlbdC5sZW5ndGggLSAxXS5zcGxpdCgiLiIpKVsKICAgICAgICAgIHQubGVuZ3RoIC0gMQogICAgICAgIF0pLmNoYXJBdChlLmxlbmd0aCAtIDEpCiAgICAgID8gZS5zdWJzdHJpbmcoMCwgZS5sZW5ndGggLSAxKQogICAgICA6IGU7CiAgfQogIGZ1bmN0aW9uIGZsb2F0MmhleCh0KSB7CiAgICByZXR1cm4gKCIwIiArICgoMjU1ICogY2xhbXAodCwgMCwgMSkpID4+IDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpOwogIH0KICBmdW5jdGlvbiBmbG9hdDJkZWModCkgewogICAgcmV0dXJuICgyNTUgKiBjbGFtcCh0LCAwLCAxKSkgPj4gMDsKICB9CiAgZnVuY3Rpb24gY3JlYXRlRWxlbSh0LCBlLCBuKSB7CiAgICBmb3IgKHZhciByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSwgYSA9IDAsIGkgPSBlLmxlbmd0aDsgYSA8IGk7ICsrYSkKICAgICAgIiIgIT09IGVbYV0gJiYgci5jbGFzc0xpc3QuYWRkKGVbYV0pOwogICAgZm9yIChhID0gMCwgaSA9IG4ubGVuZ3RoOyBhIDwgaTsgKythKSByLnNldEF0dHJpYnV0ZShuW2FdLm5hbWUsIG5bYV0udmFsdWUpOwogICAgcmV0dXJuIHI7CiAgfQogIGZ1bmN0aW9uIGNyZWF0ZUVsZW1zKHQpIHsKICAgIGZvciAodmFyIGUsIG4sIHIgPSBbXSwgYSA9IDAsIGkgPSB0Lmxlbmd0aCwgdSA9IDAsIG8gPSBudWxsOyBhIDwgaTsgKythKQogICAgICBpZiAoKG8gPSBudWxsKSAhPT0gdFthXSkgewogICAgICAgIGlmICgKICAgICAgICAgIHZvaWQgMCAhPT0gdFthXS50YWcgJiYKICAgICAgICAgICgobyA9IGNyZWF0ZUVsZW0odFthXS50YWcsIHRbYV0uY2xhc3NlcyB8fCBbXSwgdFthXS5hdHRycyB8fCBbXSkpLAogICAgICAgICAgdm9pZCAwICE9PSB0W2FdLmNoaWxkcykKICAgICAgICApCiAgICAgICAgICBmb3IgKHUgPSAwLCBuID0gKGUgPSBjcmVhdGVFbGVtcyh0W2FdLmNoaWxkcykpLmxlbmd0aDsgdSA8IG47ICsrdSkKICAgICAgICAgICAgby5hcHBlbmRDaGlsZChlW3VdKTsKICAgICAgICB2b2lkIDAgIT09IHRbYV0udGV4dCAmJgogICAgICAgICAgIiIgIT09IHRbYV0udGV4dCAmJgogICAgICAgICAgKG51bGwgPT09IG8KICAgICAgICAgICAgPyAobyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRbYV0udGV4dCkpCiAgICAgICAgICAgIDogKG8udGV4dENvbnRlbnQgPSB0W2FdLnRleHQpKSwKICAgICAgICAgIG51bGwgIT09IG8gJiYgci5wdXNoKG8pOwogICAgICB9CiAgICByZXR1cm4gcjsKICB9CiAgZnVuY3Rpb24gZ2V0SW5kZW50Rm9ybWF0KHQpIHsKICAgIHJldHVybiBBcnJheSgzICogKHQgfHwgMSkgKyAxKS5qb2luKCIgIik7CiAgfQogIGZ1bmN0aW9uIGNvbnZlcnRUZXh0VG9Qcm9wcyh0KSB7CiAgICB2YXIgbywKICAgICAgZSwKICAgICAgbCA9IDAsCiAgICAgIHMgPSAiIiwKICAgICAgbiA9IHt9LAogICAgICByID0gIiI7CiAgICBmdW5jdGlvbiBleHRyYWN0SXRlbXNJblBhcmVudGhlc2lzKCkgewogICAgICB2YXIgdCwKICAgICAgICBlID0gW10sCiAgICAgICAgbiA9IFtdLAogICAgICAgIHIgPSAwLAogICAgICAgIGEgPSAiIiwKICAgICAgICBpID0gITEsCiAgICAgICAgdSA9IDE7CiAgICAgIGZvciAoCiAgICAgICAgbCArPSAxOwogICAgICAgIGwgPCBvICYmCiAgICAgICAgKChpID0gJyInID09PSBzW2xdICYmICJcXCIgIT09IHNbbCAtIDFdID8gIWkgOiBpKSB8fAogICAgICAgICAgIigiICE9PSBzW2xdIHx8CiAgICAgICAgICAodSArPSAxKSwKICAgICAgICBpIHx8ICIpIiAhPT0gc1tsXSB8fCAwICE9IC0tdSk7CgogICAgICApCiAgICAgICAgIWkgJiYgIiwiID09PSBzW2xdICYmIHUgPD0gMSA/IChuLnB1c2goYSksIChhID0gIiIpKSA6IChhICs9IHNbbF0pLAogICAgICAgICAgKGwgKz0gMSk7CiAgICAgIGZvciAobCArPSAxLCAiIiAhPT0gYSAmJiBuLnB1c2goYSksIHQgPSBuLmxlbmd0aDsgciA8IHQ7ICsrcikKICAgICAgICBlLnB1c2goY29udmVydFRleHRUb1Byb3BzKG5bcl0pKTsKICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBpZiAoCiAgICAgICgocyA9IHQudHJpbSgpKSwKICAgICAgKG8gPSBzLmxlbmd0aCksCiAgICAgICIoIiA9PT0gcy5jaGFyQXQoMCkgJiYgIikiID09PSBzLmNoYXJBdChvIC0gMSkpCiAgICApCiAgICAgIHJldHVybiBleHRyYWN0SXRlbXNJblBhcmVudGhlc2lzKCk7CiAgICBmb3IgKDsgbCA8IG87ICkKICAgICAgaWYgKCciJyA9PT0gc1tsXSAmJiAwID09PSByLmxlbmd0aCkKICAgICAgICAobi52YWx1ZSA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdCA9ICIiOwogICAgICAgICAgZm9yIChsICs9IDE7IGwgPCBvICYmICgnIicgIT09IHNbbF0gfHwgIlxcIiA9PT0gc1tsIC0gMV0pOyApCiAgICAgICAgICAgICh0ICs9IHNbbF0pLCAobCArPSAxKTsKICAgICAgICAgIHJldHVybiAobCArPSAxKSwgdDsKICAgICAgICB9KSgpKSwKICAgICAgICAgIChuLnVzZURlbGltaXRlciA9ICEwKTsKICAgICAgZWxzZSBpZiAoIj0iID09PSBzW2xdKSB7CiAgICAgICAgaWYgKG4ubmFtZSAmJiAiIiAhPT0gbi5uYW1lKQogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKG4udmFsdWUgPSBzLnN1YnN0cmluZyhuLm5hbWUubGVuZ3RoICsgMSkpLCAobi5pc0RpcnR5ID0gITApLCBuCiAgICAgICAgICApOwogICAgICAgIChuLm5hbWUgPSByKSwgKHIgPSAiIiksIChsICs9IDEpOwogICAgICB9IGVsc2UgaWYgKCIoIiA9PT0gc1tsXSkKICAgICAgICBpZiAoCiAgICAgICAgICBudWxsICE9PQogICAgICAgICAgKGUgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IGwsCiAgICAgICAgICAgICAgZSA9ICIiOwogICAgICAgICAgICBmb3IgKGwgKz0gMTsgbCA8IG8gJiYgIikiICE9PSBzW2xdOyApIChlICs9IHNbbF0pLCAobCArPSAxKTsKICAgICAgICAgICAgcmV0dXJuICI9IiA9PT0gc1sobCArPSAxKV0KICAgICAgICAgICAgICA/ICgobCArPSAxKSwgIigiICsgZSArICIpIikKICAgICAgICAgICAgICA6ICgobCA9IHQpLCBudWxsKTsKICAgICAgICAgIH0pKCkpCiAgICAgICAgKQogICAgICAgICAgKG4ubmFtZSA9IHIgKyBlKSwgKHIgPSAiIik7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAodm9pZCAwICE9PSBuLnZhbHVlKQogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIG4ubmFtZQogICAgICAgICAgICAgICAgPyAobi52YWx1ZSA9IHMuc3Vic3RyaW5nKG4ubmFtZS5sZW5ndGggKyAxKSkKICAgICAgICAgICAgICAgIDogKG4udmFsdWUgPSBzKSwKICAgICAgICAgICAgICAobi5pc0RpcnR5ID0gITApLAogICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICAgIChuLnZhbHVlID0gZXh0cmFjdEl0ZW1zSW5QYXJlbnRoZXNpcygpKSwgKGwgKz0gMSk7CiAgICAgICAgfQogICAgICBlbHNlIChyICs9IHNbbF0pLCAobCArPSAxKTsKICAgIHJldHVybiAoCiAgICAgICIiICE9PSByICYmCiAgICAgICAgKC0xID09PSBbIk5TTE9DVEVYVCIsICJMT0NHRU5fRk9STUFUX05BTUVEIiwgIklOVlRFWFQiXS5pbmRleE9mKHIpCiAgICAgICAgICA/IChuLnZhbHVlID0gcikKICAgICAgICAgIDogKG4ucHJlZml4ID0gcikpLAogICAgICBuCiAgICApOwogIH0KICBmdW5jdGlvbiBjb252ZXJ0UHJvcHNUb1RleHQodCkgewogICAgdmFyIGUgPSAiIiwKICAgICAgbiA9IDAsCiAgICAgIHIgPSBbXSwKICAgICAgYSA9IG51bGwsCiAgICAgIGkgPSAiIiwKICAgICAgdSA9ICIiOwogICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIHsKICAgICAgZm9yICg7IG4gPCB0Lmxlbmd0aDsgKytuKSByLnB1c2goY29udmVydFByb3BzVG9UZXh0KHRbbl0pKTsKICAgICAgZSArPSAiKCIgKyByLmpvaW4oIiwiKSArICIpIjsKICAgIH0gZWxzZSBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIHQpCiAgICAgIHJldHVybiAoCiAgICAgICAgKGEgPSB0LnZhbHVlKSwKICAgICAgICAoaSA9ICIiKSwKICAgICAgICB0LnVzZURlbGltaXRlciAmJiAoaSA9ICciJyksCiAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIGEgJiYgKGEgPSBjb252ZXJ0UHJvcHNUb1RleHQodC52YWx1ZSkpLAogICAgICAgICh1ID0gIiIpLAogICAgICAgIHZvaWQgMCAhPT0gdC5uYW1lICYmICh1ID0gdC5uYW1lICsgIj0iKSwKICAgICAgICB2b2lkIDAgIT09IHQucHJlZml4ICYmICh1ICs9IHQucHJlZml4KSwKICAgICAgICB1ICsgaSArIGEgKyBpCiAgICAgICk7CiAgICByZXR1cm4gZTsKICB9CiAgZnVuY3Rpb24gZXh0cmFjdE9iamVjdERlZmluaXRpb24odCkgewogICAgdmFyIGUsCiAgICAgIG4gPSA2LAogICAgICByID0gIiIsCiAgICAgIGEgPSBbXSwKICAgICAgaSA9ICIiLAogICAgICB1ID0gIiI7CiAgICBpZiAoKChyID0gdC50cmltKCkpLCAoZSA9IHIubGVuZ3RoKSwgIkJlZ2luICIgIT09IHIuc3Vic3RyaW5nKDAsIDYpKSkKICAgICAgcmV0dXJuIG51bGw7CiAgICBmb3IgKDsgbiA8IGU7ICkKICAgICAgJyInID09PSByW25dICYmIDAgPT09IGkubGVuZ3RoCiAgICAgICAgPyAoYS5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdSwKICAgICAgICAgICAgdmFsdWU6IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIHQgPSAiIjsKICAgICAgICAgICAgICBmb3IgKG4gKz0gMTsgbiA8IGUgJiYgKCciJyAhPT0gcltuXSB8fCAiXFwiID09PSByW24gLSAxXSk7ICkKICAgICAgICAgICAgICAgICh0ICs9IHJbbl0pLCAobiArPSAxKTsKICAgICAgICAgICAgICByZXR1cm4gKG4gKz0gMSksIHQ7CiAgICAgICAgICAgIH0pKCksCiAgICAgICAgICAgIHVzZURlbGltaXRlcjogITAsCiAgICAgICAgICB9KSwKICAgICAgICAgICh1ID0gIiIpKQogICAgICAgIDogKCI9IiA9PT0gcltuXQogICAgICAgICAgICA/ICgodSA9IGkpLCAoaSA9ICIiKSkKICAgICAgICAgICAgOiAiICIgPT09IHJbbl0KICAgICAgICAgICAgPyAoIiIgIT09IGkgJiYKICAgICAgICAgICAgICAgICgiIiA9PT0gdQogICAgICAgICAgICAgICAgICA/IGEucHVzaCh7IHZhbHVlOiBpIH0pCiAgICAgICAgICAgICAgICAgIDogYS5wdXNoKHsgbmFtZTogdSwgdmFsdWU6IGkgfSkpLAogICAgICAgICAgICAgICh1ID0gaSA9ICIiKSkKICAgICAgICAgICAgOiAoaSArPSByW25dKSwKICAgICAgICAgIChuICs9IDEpKTsKICAgIHJldHVybiAoCiAgICAgICIiICE9PSBpICYmCiAgICAgICAgKCIiID09PSB1ID8gYS5wdXNoKHsgdmFsdWU6IGkgfSkgOiBhLnB1c2goeyBuYW1lOiB1LCB2YWx1ZTogaSB9KSksCiAgICAgIGEKICAgICk7CiAgfQogIGZ1bmN0aW9uIHNlYXJjaFByb3BXaXRoTmFtZSh0LCBlKSB7CiAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoOyBuIDwgcjsgKytuKSBpZiAodFtuXS5uYW1lID09PSBlKSByZXR1cm4gdFtuXTsKICAgIHJldHVybiBudWxsOwogIH0KICBmdW5jdGlvbiBmb3JtYXRUZXh0TDExbkZyb21Qcm9wKHQpIHsKICAgIHZhciBlLAogICAgICBuID0gMSwKICAgICAgciA9ICIiOwogICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0LnZhbHVlKSByZXR1cm4gdC52YWx1ZTsKICAgIGlmICh2b2lkIDAgPT09IHQucHJlZml4KSByZXR1cm4gU3RyaW5nKHQudmFsdWUpOwogICAgaWYgKCJOU0xPQ1RFWFQiID09PSB0LnByZWZpeCkKICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC52YWx1ZVsyXSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgdC52YWx1ZVsyXS52YWx1ZQogICAgICAgID8gdC52YWx1ZVsyXS52YWx1ZQogICAgICAgIDogIiI7CiAgICBpZiAoIkxPQ0dFTl9GT1JNQVRfTkFNRUQiICE9PSB0LnByZWZpeCkKICAgICAgcmV0dXJuICJJTlZURVhUIiA9PT0gdC5wcmVmaXggJiYKICAgICAgICAwIDwgdC52YWx1ZS5sZW5ndGggJiYKICAgICAgICB2b2lkIDAgIT09IHQudmFsdWVbMF0gJiYKICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YgdC52YWx1ZVswXS52YWx1ZQogICAgICAgID8gdC52YWx1ZVswXS52YWx1ZQogICAgICAgIDogIiI7CiAgICBmb3IgKAogICAgICBlID0gdC52YWx1ZS5sZW5ndGgsIHIgPSBmb3JtYXRUZXh0TDExbkZyb21Qcm9wKHQudmFsdWVbMF0pOwogICAgICBuIDwgZTsKICAgICAgbiArPSAyCiAgICApCiAgICAgIHIgPSByLnJlcGxhY2UoCiAgICAgICAgInsiICsgdC52YWx1ZVtuXS52YWx1ZSArICJ9IiwKICAgICAgICBmb3JtYXRUZXh0TDExbkZyb21Qcm9wKHQudmFsdWVbbiArIDFdKQogICAgICApOwogICAgcmV0dXJuIHI7CiAgfQogIGZ1bmN0aW9uIGNhc3RJbnQodCwgZSwgbikgewogICAgbnVsbCA9PT0gbiA/ICh0aGlzW2VdID0gcGFyc2VJbnQodCwgMTApKSA6ICh0aGlzW2VdW25dID0gcGFyc2VJbnQodCwgMTApKTsKICB9CiAgZnVuY3Rpb24gY2FzdFN0cih0LCBlKSB7CiAgICB0aGlzW2VdID0gdDsKICB9CiAgZnVuY3Rpb24gQnVzKCkgewogICAgdGhpcy5kYXRhID0ge307CiAgfQogIChCdXMucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICByZXR1cm4gInN0cmluZyIgIT0gdHlwZW9mIHQKICAgICAgPyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkFyZ3VtZW50ICdldmVudE5hbWUnIGlzIGluY29ycmVjdCwgZXhwZWN0IHN0cmluZywgZ2V0ICIgKyB0eXBlb2YgdAogICAgICAgICkKICAgICAgOiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlCiAgICAgID8gbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJBcmd1bWVudCAnY2FsbGJhY2snIGlzIGluY29ycmVjdCwgZXhwZWN0IGZ1bmN0aW9uLCBnZXQgIiArIHR5cGVvZiBlCiAgICAgICAgKQogICAgICA6ICh2b2lkIDAgPT09IHRoaXMuZGF0YVt0XSAmJiAodGhpcy5kYXRhW3RdID0gW10pLAogICAgICAgIHZvaWQgdGhpcy5kYXRhW3RdLnB1c2goZSkpOwogIH0pLAogICAgKEJ1cy5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHZhciByLAogICAgICAgIG4gPSAwOwogICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHQpCiAgICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiQXJndW1lbnQgJ2V2ZW50TmFtZScgaXMgaW5jb3JyZWN0LCBleHBlY3Qgc3RyaW5nLCBnZXQgIiArIHR5cGVvZiB0CiAgICAgICAgKTsKICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5kYXRhW3RdKSByZXR1cm4gITE7CiAgICAgIGlmICh2b2lkIDAgIT09IGUgJiYgIUFycmF5LmlzQXJyYXkoZSkpCiAgICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiQXJndW1lbnQgJ2FyZ3MnIGlzIGluY29ycmVjdCwgZXhwZWN0IGFycmF5IG9yIHVuZGVmaW5lZCwgZ2V0ICIgKwogICAgICAgICAgICB0eXBlb2YgZQogICAgICAgICk7CiAgICAgIGZvciAociA9IHRoaXMuZGF0YVt0XS5sZW5ndGgsIG4gPSAwOyBuIDwgcjsgKytuKQogICAgICAgIGlmICghMSA9PT0gdGhpcy5kYXRhW3RdW25dLmFwcGx5KG51bGwsIGUpKSByZXR1cm4gITE7CiAgICAgIHJldHVybiAhMDsKICAgIH0pOwogIGZ1bmN0aW9uIGZsYXR0ZW5IaWVyYXJjaHkoZSwgbikgewogICAgZm9yICh2YXIgaSwgdCA9IFtdLCBzID0gMCwgbyA9IGUubGVuZ3RoLCBkID0gW10sIHIgPSAwOyBzIDwgbzsgKytzKSB7CiAgICAgIGlmICghMCA9PT0gZVtzXS5jb250YWluc1Zpc3VhbE5vZGVzICYmIHZvaWQgMCAhPT0gZVtzXS5ub2RlcykKICAgICAgICBmb3IgKAogICAgICAgICAgZCA9IFtdLAogICAgICAgICAgICByID0gMCwKICAgICAgICAgICAgaSA9IChkID0KICAgICAgICAgICAgICBudWxsICE9PSBzZWFyY2hQcm9wV2l0aE5hbWUoZVtzXS5ub2Rlc1swXS5wcm9wcywgIkdyYXBoR3VpZCIpICYmCiAgICAgICAgICAgICAgMCA8IGVbc10ubm9kZXNbMF0ubm9kZXMubGVuZ3RoCiAgICAgICAgICAgICAgICA/IGZsYXR0ZW5IaWVyYXJjaHkoZVtzXS5ub2Rlc1swXS5ub2RlcywgZVtzXS5ndWlkKQogICAgICAgICAgICAgICAgOiBmbGF0dGVuSGllcmFyY2h5KGVbc10ubm9kZXMsIGVbc10uZ3VpZCkpLmxlbmd0aDsKICAgICAgICAgIHIgPCBpOwogICAgICAgICAgKytyCiAgICAgICAgKQogICAgICAgICAgdC5wdXNoKGRbcl0pOwogICAgICB0LnB1c2goeyBub2RlOiBlW3NdLCBwYXJlbnRHVUlEOiBuIH0pOwogICAgfQogICAgcmV0dXJuIHQ7CiAgfQogIGZ1bmN0aW9uIGV2ZW50RXhwYW5kTm9kZShlKSB7CiAgICB0aGlzLmJ1cy5lbWl0KCJpbnRlcmFjdG9yX19leHBhbmRfbm9kZSIsIFtlXSk7CiAgfQogIGZ1bmN0aW9uIGV2ZW50SW5pdEVudmlyb25tZW50KCkgewogICAgdGhpcy5pbml0QnVzRW52aXJvbm1lbnQoKSwgdGhpcy5pbml0RW52aXJvbm1lbnQoKTsKICB9CiAgZnVuY3Rpb24gZXZlbnRJbml0SW50ZXJhY3RvcigpIHsKICAgIHRoaXMuaW5pdEJ1c0ludGVyYWN0b3IoKSwgdGhpcy5pbml0SW50ZXJhY3RvcigpOwogIH0KICBmdW5jdGlvbiBldmVudEluaXRVcGRhdGVyKCkgewogICAgdGhpcy5pbml0QnVzVXBkYXRlcigpLCB0aGlzLmluaXRVcGRhdGVyKCk7CiAgfQogIGZ1bmN0aW9uIGV2ZW50UGFzdGVUZXh0RnJvbUNsaXBib2FyZChlKSB7CiAgICB2YXIgbiwKICAgICAgaSwKICAgICAgdCwKICAgICAgcyA9IG5ldyBJbnRlcnByZXRlcigpLAogICAgICBlID0gcy5wYXJzZVRleHQoZSksCiAgICAgIG8gPSAwLAogICAgICBkID0gW10sCiAgICAgIHIgPSAwLAogICAgICBhID0gW10sCiAgICAgIGwgPSAwOwogICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0aGlzLmJ1cy5lbWl0KCJlbmRfcGFzdGUiKTsKICAgIGVsc2UgaWYgKHMuaXNCZWxvdzQxM1ZlcnNpb24gIT09IHRoaXMuYmx1ZXByaW50LmlzQmVsb3c0MTNWZXJzaW9uKQogICAgICB0aGlzLmJ1cy5lbWl0KCJlbmRfcGFzdGUiKTsKICAgIGVsc2UgewogICAgICBmb3IgKAogICAgICAgIGkgPSBmbGF0dGVuSGllcmFyY2h5KGUsIG51bGwpLAogICAgICAgICAgciA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLmxlbmd0aCwKICAgICAgICAgIG8gPSAwLAogICAgICAgICAgbiA9IGkubGVuZ3RoOwogICAgICAgIG8gPCBuOwogICAgICAgICsrbwogICAgICApCiAgICAgICAgZC5wdXNoKGlbb10ubm9kZS5ndWlkKSwKICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLnB1c2goaVtvXSksCiAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlcy5wdXNoKHsKICAgICAgICAgICAgaWR4OiByLAogICAgICAgICAgICBndWlkOiBpW29dLm5vZGUuZ3VpZCwKICAgICAgICAgIH0pLAogICAgICAgICAgKHIgKz0gMSk7CiAgICAgIHRoaXMubGlzdElEcygpLAogICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZygiRElTUExBWSBOT0RFUy4uLiIpLAogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuc2hvd0xvYWRpbmcoKSwKICAgICAgICAgICAgICAgIGEgPSBbXSwKICAgICAgICAgICAgICAgIHQgPSB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlcy5sZW5ndGg7CiAgICAgICAgICAgICAgbCA8IHQ7CiAgICAgICAgICAgICAgKytsCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAtMSAhPT0KICAgICAgICAgICAgICAgIGQuaW5kZXhPZigKICAgICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbbF0uaWR4CiAgICAgICAgICAgICAgICAgIF0ubm9kZS5ndWlkCiAgICAgICAgICAgICAgICApICYmCiAgICAgICAgICAgICAgICBhLnB1c2goCiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW2xdLmlkeAogICAgICAgICAgICAgICAgICBdLm5vZGUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmRpc3BsYXlOb2Rlc0luVmlld3BvcnQoYSksCiAgICAgICAgICAgICAgc2V0VGltZW91dCgKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZygiRFJBVyBMSU5LUy4uLiIpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmRyYXdMaW5rcygKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLmxpbmtzCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KAogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5yZW1vdmVMb2FkaW5nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXMuZW1pdCgiZW5kX3Bhc3RlIik7CiAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICApOwogICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgMAogICAgICAgICk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGV2ZW50UmVEcmF3TGlua3MoZSwgbikgewogICAgZm9yICgKICAgICAgdmFyIGkgPSB0aGlzLmZpbmROb2RlSWR4V2l0aElkKGUpLAogICAgICAgIHQgPSBbXSwKICAgICAgICBzID0gMCwKICAgICAgICBvID0gdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbaV0ubm9kZS5waW5zLmxlbmd0aCwKICAgICAgICBkID0gMCwKICAgICAgICByID0gdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3MubGVuZ3RoOwogICAgICBzIDwgbzsKICAgICAgKytzCiAgICApCiAgICAgIGlmICh0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFtpXS5ub2RlLnBpbnNbc10uaXNMaW5rZWRUbygpKQogICAgICAgIGZvciAoZCA9IDA7IGQgPCByOyArK2QpCiAgICAgICAgICAtMSAhPT0KICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3NbZF0uaW5kZXhPZigKICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFtpXS5ub2RlLnBpbnNbc10uaWQKICAgICAgICAgICAgKSAmJiB0LnB1c2godGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3NbZF0pOwogICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQucmVEcmF3TGlua3ModCwgbik7CiAgfQogIGZ1bmN0aW9uIGV2ZW50UmVkdWNlTm9kZShlKSB7CiAgICBmb3IgKAogICAgICB2YXIgbiA9IFtdLAogICAgICAgIGkgPSAwLAogICAgICAgIHQgPSB0aGlzLmZpbmROb2RlSWR4V2l0aElkKGUpLAogICAgICAgIHMgPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFt0XS5ub2RlLm9iamVjdERlZmluaXRpb24sCiAgICAgICAgICAiTmFtZSIKICAgICAgICApLAogICAgICAgIG8gPSB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFt0XS5ub2RlLnBpbnMubGVuZ3RoOwogICAgICBpIDwgbzsKICAgICAgKytpCiAgICApCiAgICAgICExID09PSB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFt0XS5ub2RlLnBpbnNbaV0uaGFzVG9IaWRlUGluKCExKSAmJgogICAgICAgIG4ucHVzaChzLnZhbHVlICsgIiAiICsgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbdF0ubm9kZS5waW5zW2ldLmlkKTsKICAgIHRoaXMuYnVzLmVtaXQoImludGVyYWN0b3JfX3JlZHVjZV9ub2RlIiwgW2UsIG5dKTsKICB9CiAgZnVuY3Rpb24gZml4UG9zaXRpb25CeUNoZWNraW5nTm9kZXNJblZpZXdwb3J0KGUsIG4sIGkpIHsKICAgIGZvciAoCiAgICAgIHZhciB0LAogICAgICAgIHMgPSBbXSwKICAgICAgICBvID0gWwogICAgICAgICAgW25bMF0sIG5bMF0gKyBpWzBdXSwKICAgICAgICAgIFtuWzFdLCBuWzFdICsgaVsxXV0sCiAgICAgICAgXSwKICAgICAgICBkID0gMCwKICAgICAgICByID0gZS5sZW5ndGgsCiAgICAgICAgYSA9IFtdLAogICAgICAgIGwgPSAwOwogICAgICBkIDwgcjsKICAgICAgKytkCiAgICApCiAgICAgIGVbZF1bMF0gPj0gb1swXVswXSAmJgogICAgICAgIGVbZF1bMF0gPD0gb1swXVsxXSAmJgogICAgICAgIGVbZF1bMV0gPj0gb1sxXVswXSAmJgogICAgICAgIGVbZF1bMV0gPD0gb1sxXVsxXSAmJgogICAgICAgIHMucHVzaChlW2RdKTsKICAgIGlmICgwID09PSBzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICBpZiAoMSA9PT0gcy5sZW5ndGgpIHJldHVybiBzWzBdOwogICAgZm9yIChhID0gc1swXSwgbCA9IDEsIHQgPSBzLmxlbmd0aDsgbCA8IHQ7ICsrbCkKICAgICAgKGFbMF0gPSBNYXRoLm1pbihhWzBdLCBzW2xdWzBdKSksIChhWzFdID0gTWF0aC5taW4oYVsxXSwgc1tsXVsxXSkpOwogICAgcmV0dXJuIGE7CiAgfQogIGZ1bmN0aW9uIGZpbmRNaW5Qb3NOb2RlKCkgewogICAgdmFyIGUsCiAgICAgIG4sCiAgICAgIGksCiAgICAgIHQsCiAgICAgIHMgPSAtMjAsCiAgICAgIG8gPSAtNjAsCiAgICAgIGQgPSAwLAogICAgICByID0gMCwKICAgICAgYSA9IFtdLAogICAgICBsID0gW10sCiAgICAgIHAgPSAxLAogICAgICBoID0gW107CiAgICBpZiAoMCA9PT0gdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXMubGVuZ3RoKSByZXR1cm4geyB4OiAwLCB5OiAwIH07CiAgICBmb3IgKAogICAgICBhID0gWwogICAgICAgIFsKICAgICAgICAgIChkID0KICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbMF0uaWR4CiAgICAgICAgICAgIF0ubm9kZS5wb3NpdGlvblswXSksCiAgICAgICAgICAociA9CiAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzWzBdLmlkeAogICAgICAgICAgICBdLm5vZGUucG9zaXRpb25bMV0pLAogICAgICAgIF0sCiAgICAgIF0sCiAgICAgICAgbCA9IFtkLCByXSwKICAgICAgICBlID0gdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXMubGVuZ3RoOwogICAgICBwIDwgZTsKICAgICAgKytwCiAgICApCiAgICAgIChuID0KICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFt0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1twXS5pZHhdCiAgICAgICAgICAubm9kZS5wb3NpdGlvblswXSksCiAgICAgICAgKGkgPQogICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbcF0uaWR4XQogICAgICAgICAgICAubm9kZS5wb3NpdGlvblsxXSksCiAgICAgICAgYS5wdXNoKFtuLCBpXSksCiAgICAgICAgKGxbMF0gPiBuIHx8IChsWzBdID09PSBuICYmIGxbMV0gPiBpKSkgJiYgKGwgPSBbbiwgaV0pLAogICAgICAgIChkID0gTWF0aC5taW4obiwgZCkpLAogICAgICAgIChyID0gTWF0aC5taW4oaSwgcikpOwogICAgcmV0dXJuIGQgPT09IGxbMF0gJiYgciA9PT0gbFsxXQogICAgICA/IHsgeDogLShkICsgcyksIHk6IC0ociArIG8pIH0KICAgICAgOiAobnVsbCA9PT0KICAgICAgICAoaCA9IGZpeFBvc2l0aW9uQnlDaGVja2luZ05vZGVzSW5WaWV3cG9ydCgKICAgICAgICAgIGEsCiAgICAgICAgICBbZCwgcl0sCiAgICAgICAgICBbCiAgICAgICAgICAgICh0ID0gdGhpcy5kYXRhLmh0bWxFbGVtZW50CiAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5mcmFtZSIpCiAgICAgICAgICAgICAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS53aWR0aCwKICAgICAgICAgICAgdC5oZWlnaHQsCiAgICAgICAgICBdCiAgICAgICAgKSkKICAgICAgICAgID8gKGggPSBbLShsWzBdICsgcyksIC0obFsxXSArIG8pXSkKICAgICAgICAgIDogKChoWzBdID0gLShoWzBdICsgcykpLCAoaFsxXSA9IC0oaFsxXSArIG8pKSksCiAgICAgICAgeyB4OiBoWzBdLCB5OiBoWzFdIH0pOwogIH0KICBmdW5jdGlvbiBleHRyYWN0QnJlYWRjcnVtYihlLCBuKSB7CiAgICBmb3IgKHZhciBpID0gMCwgdCA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLmxlbmd0aDsgaSA8IHQ7ICsraSkKICAgICAgaWYgKGUgPT09IHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkW2ldLm5vZGUuZ3VpZCkgewogICAgICAgIGlmICgKICAgICAgICAgIChuLnB1c2goewogICAgICAgICAgICBpZDogZSwKICAgICAgICAgICAgdGV4dDogdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbaV0ubm9kZS5maW5kSGVhZGVyTmFtZSgpLAogICAgICAgICAgfSksCiAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFtpXS5wYXJlbnRHVUlEKQogICAgICAgICkKICAgICAgICAgIHJldHVybiBleHRyYWN0QnJlYWRjcnVtYi5jYWxsKAogICAgICAgICAgICB0aGlzLAogICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFtpXS5wYXJlbnRHVUlELAogICAgICAgICAgICBuCiAgICAgICAgICApOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICByZXR1cm4gbjsKICB9CiAgZnVuY3Rpb24gZXZlbnRDb3B5Tm9kZXNUb0NsaXBib2FyZChlLCBuKSB7CiAgICBmb3IgKAogICAgICB2YXIgaSA9IFtdLCB0ID0gMCwgcyA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzLmxlbmd0aDsKICAgICAgdCA8IHM7CiAgICAgICsrdAogICAgKQogICAgICAtMSAhPT0gbi5pbmRleE9mKHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3RdLmd1aWQpICYmCiAgICAgICAgaS5wdXNoKAogICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3RdLmlkeAogICAgICAgICAgXS5ub2RlLmdlbmVyYXRlVGV4dEZvclVucmVhbCgxKQogICAgICAgICk7CiAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YSgidGV4dC9wbGFpbiIsIGkuam9pbigiXG4iKSk7CiAgfQogIGZ1bmN0aW9uIGV2ZW50RGJsY2xpY2soZSkgewogICAgdmFyIG4sCiAgICAgIGksCiAgICAgIHQsCiAgICAgIHMsCiAgICAgIG8gPSBbXSwKICAgICAgZCA9ICExLAogICAgICByID0gMCwKICAgICAgYSA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLmxlbmd0aCwKICAgICAgbCA9IDAsCiAgICAgIHAgPSBudWxsLAogICAgICBoID0gMCwKICAgICAgdSA9IG51bGwsCiAgICAgIGMgPSAwOwogICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSB7CiAgICAgIGZvciAoOyByIDwgYTsgKytyKQogICAgICAgIGlmICh0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFtyXS5wYXJlbnRHVUlEID09PSBlKSB7CiAgICAgICAgICBkID0gITA7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGlmICghZCkgcmV0dXJuOwogICAgICB0aGlzLnNldERpc3BsYXllZE5vZGVzKHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLCBlKTsKICAgIH0gZWxzZSB0aGlzLnNldERpc3BsYXllZE5vZGVzKHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLCBudWxsKTsKICAgIGZvciAobiA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzLmxlbmd0aDsgbCA8IG47ICsrbCkKICAgICAgby5wdXNoKAogICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkW3RoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW2xdLmlkeF0KICAgICAgICAgIC5ub2RlCiAgICAgICk7CiAgICB0aGlzLmxpc3RJRHMoKSwKICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuY2xlYW5WaWV3cG9ydCgpLAogICAgICBzZXRUaW1lb3V0KAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmRpc3BsYXlOb2Rlc0luVmlld3BvcnQobyksCiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmludGVyYWN0b3IucmVzZXRDYW52YXMoKSwKICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuaW50ZXJhY3Rvci5tb3ZlQ2FudmFzVG8oeyB4OiAwLCB5OiAwIH0pLAogICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5kcmF3TGlua3MoCiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3MKICAgICAgICAgICAgKSwKICAgICAgICAgICAgc2V0VGltZW91dCgKICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5pbnRlcmFjdG9yLm1vdmVDYW52YXNUbygKICAgICAgICAgICAgICAgICAgICBmaW5kTWluUG9zTm9kZS5jYWxsKHRoaXMpCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgcCA9IHRoaXMuZGF0YS5odG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAgICAgICAgICAgIi5mcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWIiCiAgICAgICAgICAgICAgICAgICAgKS5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgICBoID0gcC5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICAwIDwgaDsKICAgICAgICAgICAgICAgICAgLS1oCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIHBbaF0ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgewogICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgIGkgPSBleHRyYWN0QnJlYWRjcnVtYi5jYWxsKHRoaXMsIGUsIFtdKSwKICAgICAgICAgICAgICAgICAgICAgIHUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksCiAgICAgICAgICAgICAgICAgICAgICBjID0gaS5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICAgIDAgPD0gYzsKICAgICAgICAgICAgICAgICAgICAtLWMKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICh0ID0gY3JlYXRlRWxlbXMoWwogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWItc2VwYXJhdG9yIl0sCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF0pKSwKICAgICAgICAgICAgICAgICAgICAgIChzID0gY3JlYXRlRWxlbXMoWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWItaXRlbSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiZGF0YS1ub2RlLWlkIiwgdmFsdWU6IGlbY10uaWQgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogaVtjXS50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgXSkpLAogICAgICAgICAgICAgICAgICAgICAgdS5hcHBlbmRDaGlsZCh0WzBdKSwKICAgICAgICAgICAgICAgICAgICAgIHUuYXBwZW5kQ2hpbGQoc1swXSk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5odG1sRWxlbWVudAogICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCIuZnJhbWUtaGVhZGVyX19icmVhZGNydW1iIikKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQodSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIDAKICAgICAgICAgICAgKTsKICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgMAogICAgICApOwogIH0KICBmdW5jdGlvbiBFZGl0b3IoZSwgbiwgaSwgdCkgewogICAgcmV0dXJuICJzdHJpbmciICE9IHR5cGVvZiBlCiAgICAgID8gbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJBcmd1bWVudCAndGV4dCcgaXMgaW5jb3JyZWN0LCBleHBlY3Qgc3RyaW5nLCBnZXQgIiArIHR5cGVvZiBlCiAgICAgICAgKQogICAgICA6IG4gaW5zdGFuY2VvZiBIVE1MRWxlbWVudAogICAgICA/ICJvYmplY3QiICE9IHR5cGVvZiBpCiAgICAgICAgPyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgICAiQXJndW1lbnQgJ29wdGlvbnMnIGlzIGluY29ycmVjdCwgZXhwZWN0IG9iamVjdCwgZ2V0ICIgKyB0eXBlb2YgaQogICAgICAgICAgKQogICAgICAgIDogdCBpbnN0YW5jZW9mIEJ1cwogICAgICAgID8gKCh0aGlzLmRhdGEgPSB7IGh0bWxFbGVtZW50OiBuLCBvcHRpb25zOiBpLCB0ZXh0OiBlIH0pLAogICAgICAgICAgKHRoaXMuYnVzID0gdCksCiAgICAgICAgICAodGhpcy5lbGFwc2VkVGltZSA9IHsKICAgICAgICAgICAgcGFyc2VCbHVlcHJpbnQ6IDAsCiAgICAgICAgICAgIGNyZWF0ZVBsYXlncm91bmQ6IDAsCiAgICAgICAgICAgIGRpc3BsYXlOb2Rlc0luVmlld3BvcnQ6IDAsCiAgICAgICAgICAgIGRyYXdMaW5rczogMCwKICAgICAgICAgICAgc3RhcnRBbGxCaW5kaW5nOiAwLAogICAgICAgICAgfSksCiAgICAgICAgICAodGhpcy5ibHVlcHJpbnQgPSB7CiAgICAgICAgICAgIG5vZGVzUGFyc2VkOiBbXSwKICAgICAgICAgICAgbm9kZXNEaXNwbGF5ZWQ6IHsKICAgICAgICAgICAgICBub2RlczogW10sCiAgICAgICAgICAgICAgaWRzOiB7IG5vZGVzOiBbXSwgcGluczogW10gfSwKICAgICAgICAgICAgICBsaW5rczogW10sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhpc3Rvcnk6IFtdLAogICAgICAgICAgICBpc0JlbG93NDEzVmVyc2lvbjogITEsCiAgICAgICAgICB9KSwKICAgICAgICAgICh0aGlzLmV2ZW50c0JpbmRpbmcgPSB7CiAgICAgICAgICAgIGNvcHlOb2Rlc1RvQ2xpcGJvYXJkOiBldmVudENvcHlOb2Rlc1RvQ2xpcGJvYXJkLmJpbmQodGhpcyksCiAgICAgICAgICAgIGRibGNsaWNrOiBldmVudERibGNsaWNrLmJpbmQodGhpcyksCiAgICAgICAgICAgIGV4cGFuZE5vZGU6IGV2ZW50RXhwYW5kTm9kZS5iaW5kKHRoaXMpLAogICAgICAgICAgICBpbml0RW52aXJvbm1lbnQ6IGV2ZW50SW5pdEVudmlyb25tZW50LmJpbmQodGhpcyksCiAgICAgICAgICAgIGluaXRJbnRlcmFjdG9yOiBldmVudEluaXRJbnRlcmFjdG9yLmJpbmQodGhpcyksCiAgICAgICAgICAgIGluaXRVcGRhdGVyOiBldmVudEluaXRVcGRhdGVyLmJpbmQodGhpcyksCiAgICAgICAgICAgIHBhc3RlVGV4dEZyb21DbGlwYm9hcmQ6IGV2ZW50UGFzdGVUZXh0RnJvbUNsaXBib2FyZC5iaW5kKHRoaXMpLAogICAgICAgICAgICByZURyYXdMaW5rczogZXZlbnRSZURyYXdMaW5rcy5iaW5kKHRoaXMpLAogICAgICAgICAgICByZWR1Y2VOb2RlOiBldmVudFJlZHVjZU5vZGUuYmluZCh0aGlzKSwKICAgICAgICAgIH0pLAogICAgICAgICAgKHRoaXMuaW5zdGFuY2VzID0gewogICAgICAgICAgICBlbnZpcm9ubWVudDogbmV3IEVudmlyb25tZW50KAogICAgICAgICAgICAgIHRoaXMuZGF0YS5odG1sRWxlbWVudCwKICAgICAgICAgICAgICB0aGlzLmRhdGEub3B0aW9ucywKICAgICAgICAgICAgICB0aGlzLmJ1cwogICAgICAgICAgICApLAogICAgICAgICAgICBpbnRlcmFjdG9yOiBuZXcgSW50ZXJhY3RvcigKICAgICAgICAgICAgICB0aGlzLmRhdGEuaHRtbEVsZW1lbnQsCiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9wdGlvbnMsCiAgICAgICAgICAgICAgdGhpcy5idXMKICAgICAgICAgICAgKSwKICAgICAgICAgICAgdXBkYXRlcjogbmV3IFVwZGF0ZXIodGhpcy5kYXRhLm9wdGlvbnMsIHRoaXMuYnVzKSwKICAgICAgICAgIH0pLAogICAgICAgICAgdGhpcy5idXMubGlzdGVuKAogICAgICAgICAgICAiaW5pdF9lbnZpcm9ubWVudCIsCiAgICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5pbml0RW52aXJvbm1lbnQKICAgICAgICAgICksCiAgICAgICAgICB0aGlzLmJ1cy5saXN0ZW4oImluaXRfaW50ZXJhY3RvciIsIHRoaXMuZXZlbnRzQmluZGluZy5pbml0SW50ZXJhY3RvciksCiAgICAgICAgICB0aGlzLmJ1cy5saXN0ZW4oImluaXRfdXBkYXRlciIsIHRoaXMuZXZlbnRzQmluZGluZy5pbml0VXBkYXRlciksCiAgICAgICAgICB0aGlzLmJ1cy5saXN0ZW4oCiAgICAgICAgICAgICJjb3B5X25vZGVzX3RvX2NsaXBib2FyZCIsCiAgICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5jb3B5Tm9kZXNUb0NsaXBib2FyZAogICAgICAgICAgKSwKICAgICAgICAgIHRoaXMuYnVzLmxpc3RlbigKICAgICAgICAgICAgInBhc3RlX3RleHRfZnJvbV9jbGlwYm9hcmQiLAogICAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucGFzdGVUZXh0RnJvbUNsaXBib2FyZAogICAgICAgICAgKSwKICAgICAgICAgIHRoaXMuYnVzLmxpc3RlbigiZGJsY2xpY2siLCB0aGlzLmV2ZW50c0JpbmRpbmcuZGJsY2xpY2spLAogICAgICAgICAgKHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbiA9IG51bGwpLAogICAgICAgICAgdm9pZCAodGhpcy5lcnJvciA9IG51bGwpKQogICAgICAgIDogbmV3IFR5cGVFcnJvcigKICAgICAgICAgICAgIkFyZ3VtZW50ICdidXMnIGlzIGluY29ycmVjdCwgZXhwZWN0IEJ1cywgZ2V0ICIgKyB0eXBlb2YgdAogICAgICAgICAgKQogICAgICA6IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiQXJndW1lbnQgJ2h0bWxFbGVtZW50JyBpcyBpbmNvcnJlY3QsIGV4cGVjdCBIVE1MRWxlbWVudCwgZ2V0ICIgKwogICAgICAgICAgICB0eXBlb2YgbgogICAgICAgICk7CiAgfQogIChFZGl0b3IucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciBuID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmICh0aGlzLmNhbGxiYWNrSW5pdGlhbGl6YXRpb24gPSBlKTsKICAgIHRyeSB7CiAgICAgIHRoaXMucGFyc2VCbHVlcHJpbnQoKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgKHRoaXMuZXJyb3IgPSB7CiAgICAgICAgdHlwZTogIlBBUlNFX0JMVUVQUklOVCIsCiAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLAogICAgICAgIGRpc3BsYXllZE1lc3NhZ2U6ICJGQUlMRUQgRElTUExBWSBCTFVFUFJJTlQ6IFBhcnNpbmcgRXJyb3IiLAogICAgICB9KSwKICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWQgPSBbXSk7CiAgICB9CiAgICB0aGlzLnNldERpc3BsYXllZE5vZGVzKHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkLCBudWxsKSwKICAgICAgdGhpcy5saXN0SURzKCksCiAgICAgICh0aGlzLmVsYXBzZWRUaW1lLnBhcnNlQmx1ZXByaW50ID0gcGVyZm9ybWFuY2Uubm93KCkgLSBuKSwKICAgICAgdGhpcy5idXMuZW1pdCgiaW5pdF9lbnZpcm9ubWVudCIpOwogIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUucGFyc2VCbHVlcHJpbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gbmV3IEludGVycHJldGVyKCksCiAgICAgICAgbiA9IGUucGFyc2VUZXh0KHRoaXMuZGF0YS50ZXh0KTsKICAgICAgKHRoaXMuYmx1ZXByaW50LmlzQmVsb3c0MTNWZXJzaW9uID0gZS5pc0JlbG93NDEzVmVyc2lvbiksCiAgICAgICAgdm9pZCAwID09PSB0aGlzLmRhdGEub3B0aW9ucy50eXBlICYmICh0aGlzLmRhdGEub3B0aW9ucy50eXBlID0gZS50eXBlKSwKICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWQgPSBmbGF0dGVuSGllcmFyY2h5KG4sIG51bGwpKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuc2V0RGlzcGxheWVkTm9kZXMgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICB2YXIgaSA9IDAsCiAgICAgICAgdCA9IGUubGVuZ3RoOwogICAgICBmb3IgKHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzID0gW107IGkgPCB0OyArK2kpCiAgICAgICAgZVtpXS5wYXJlbnRHVUlEID09PSBuICYmCiAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlcy5wdXNoKHsKICAgICAgICAgICAgaWR4OiBpLAogICAgICAgICAgICBndWlkOiBlW2ldLm5vZGUuZ3VpZCwKICAgICAgICAgIH0pOwogICAgfSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5saXN0SURzID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmFkZE5vZGVzSUQoKSwKICAgICAgICB0aGlzLmFkZFBpbnNJRCgpLAogICAgICAgIHRoaXMuYmx1ZXByaW50LmlzQmVsb3c0MTNWZXJzaW9uCiAgICAgICAgICA/IHRoaXMuYWRkTGlua3NGb3JCZWxvdzQxMygpCiAgICAgICAgICA6IHRoaXMuYWRkTGlua3MoKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuYWRkTm9kZXNJRCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSA9IDAsIG4gPSB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlcy5sZW5ndGg7CiAgICAgICAgZSA8IG47CiAgICAgICAgKytlCiAgICAgICkKICAgICAgICB2b2lkIDAgIT09IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW2VdLmd1aWQgJiYKICAgICAgICAgIC0xID09PQogICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5pZHMubm9kZXMuaW5kZXhPZigKICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1tlXS5ndWlkCiAgICAgICAgICAgICkgJiYKICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLmlkcy5ub2Rlcy5wdXNoKAogICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1tlXS5ndWlkCiAgICAgICAgICApOwogICAgfSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5hZGRQaW5zSUQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIGUsIG4sIGkgPSAwLCB0ID0gdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXMubGVuZ3RoLCBzID0gMDsKICAgICAgICBpIDwgdDsKICAgICAgICArK2kKICAgICAgKQogICAgICAgIGZvciAoCiAgICAgICAgICBzID0gMCwKICAgICAgICAgICAgZSA9CiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1tpXS5pZHgKICAgICAgICAgICAgICBdLm5vZGUucGlucy5sZW5ndGg7CiAgICAgICAgICBzIDwgZTsKICAgICAgICAgICsrcwogICAgICAgICkKICAgICAgICAgIHZvaWQgMCAhPT0KICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbaV0uaWR4CiAgICAgICAgICAgIF0ubm9kZS5waW5zW3NdLmlkICYmCiAgICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICAgKG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFsKICAgICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbaV0uaWR4CiAgICAgICAgICAgICAgICBdLm5vZGUub2JqZWN0RGVmaW5pdGlvbiwKICAgICAgICAgICAgICAgICJOYW1lIgogICAgICAgICAgICAgICkpICYmCiAgICAgICAgICAgICgobiA9CiAgICAgICAgICAgICAgbi52YWx1ZSArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFsKICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW2ldLmlkeAogICAgICAgICAgICAgIF0ubm9kZS5waW5zW3NdLmlkKSwKICAgICAgICAgICAgLTEgPT09IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLmlkcy5waW5zLmluZGV4T2YobikgJiYKICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5pZHMucGlucy5wdXNoKG4pKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuYWRkTGlua3NGb3JCZWxvdzQxMyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSwKICAgICAgICAgIG4sCiAgICAgICAgICBpLAogICAgICAgICAgdCA9IDAsCiAgICAgICAgICBzID0gdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXMubGVuZ3RoLAogICAgICAgICAgbyA9IDAsCiAgICAgICAgICBkID0gW10sCiAgICAgICAgICByID0gIiIsCiAgICAgICAgICBhID0gW10sCiAgICAgICAgICBsID0gW10sCiAgICAgICAgICBwID0gMCwKICAgICAgICAgIGggPSAwLAogICAgICAgICAgdSA9ICIiLAogICAgICAgICAgYyA9ICIiLAogICAgICAgICAgYiA9IFtdLAogICAgICAgICAgbSA9IG51bGwsCiAgICAgICAgICB5ID0gW10sCiAgICAgICAgICBmID0gbnVsbDsKICAgICAgICB0IDwgczsKICAgICAgICArK3QKICAgICAgKQogICAgICAgIGZvciAoCiAgICAgICAgICBvID0gMCwKICAgICAgICAgICAgZSA9CiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1t0XS5pZHgKICAgICAgICAgICAgICBdLm5vZGUucGlucy5sZW5ndGg7CiAgICAgICAgICBvIDwgZTsKICAgICAgICAgICsrbwogICAgICAgICkKICAgICAgICAgIGlmICgKICAgICAgICAgICAgITEgIT09CiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1t0XS5pZHgKICAgICAgICAgICAgICBdLm5vZGUucGluc1tvXS5pc0xpbmtlZFRvKCkgJiYKICAgICAgICAgICAgIXRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3RdLmlkeAogICAgICAgICAgICBdLm5vZGUucGluc1tvXS5pc0lucHV0KCkgJiYKICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAobiA9IHNlYXJjaFByb3BXaXRoTmFtZSgKICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1t0XS5pZHgKICAgICAgICAgICAgICAgIF0ubm9kZS5vYmplY3REZWZpbml0aW9uLAogICAgICAgICAgICAgICAgIk5hbWUiCiAgICAgICAgICAgICAgKSkKICAgICAgICAgICkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG0gPQogICAgICAgICAgICAgICAgbi52YWx1ZSArCiAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3RdLmlkeAogICAgICAgICAgICAgICAgXS5ub2RlLnBpbnNbb10uaWQsCiAgICAgICAgICAgICAgICBkID0gW10sCiAgICAgICAgICAgICAgICByID0gIiIsCiAgICAgICAgICAgICAgICBwID0gMCwKICAgICAgICAgICAgICAgIGggPSAobCA9CiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3RdLmlkeAogICAgICAgICAgICAgICAgICBdLm5vZGUucGluc1tvXS5nZXRMaW5rcygpKS5sZW5ndGg7CiAgICAgICAgICAgICAgcCA8IGg7CiAgICAgICAgICAgICAgKytwCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAociA9CiAgICAgICAgICAgICAgICAyID09PQogICAgICAgICAgICAgICAgKGEgPSAociA9IChyID0gbFtwXS5zdWJzdHJpbmcoMTEpKS5zdWJzdHJpbmcoCiAgICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAgIHIubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgKSkuc3BsaXQoIi4iKSkubGVuZ3RoCiAgICAgICAgICAgICAgICAgID8gYS5qb2luKCIgIikKICAgICAgICAgICAgICAgICAgOiBhW2EubGVuZ3RoIC0gMl0gKyAiICIgKyBhW2EubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgZC5wdXNoKHJlbW92ZVF1b3RlcyhyKSk7CiAgICAgICAgICAgIGZvciAocCA9IDAsIGggPSBkLmxlbmd0aDsgcCA8IGg7ICsrcCkKICAgICAgICAgICAgICAodSA9IG0gKyAiLCIgKyBkW3BdKSwKICAgICAgICAgICAgICAgIChjID0gZFtwXSArICIsIiArIG0pLAogICAgICAgICAgICAgICAgLTEgPT09IGIuaW5kZXhPZih1KSAmJgogICAgICAgICAgICAgICAgICAtMSA9PT0gYi5pbmRleE9mKGMpICYmCiAgICAgICAgICAgICAgICAgIChiLnB1c2gobSArICIsIiArIGRbcF0pLAogICAgICAgICAgICAgICAgICAwID09PSB1LmluZGV4T2YoIkFuaW1TdGF0ZVRyYW5zaXRpb25Ob2RlIikKICAgICAgICAgICAgICAgICAgICA/ICh5WyhpID0gbS5zcGxpdCgiICIpWzBdKV0gfHwgKHlbaV0gPSBbXSksIHlbaV0ucHVzaChkW3BdKSkKICAgICAgICAgICAgICAgICAgICA6IDAgPT09IGMuaW5kZXhPZigiQW5pbVN0YXRlVHJhbnNpdGlvbk5vZGUiKSAmJgogICAgICAgICAgICAgICAgICAgICAgKHlbKGkgPSBkW3BdLnNwbGl0KCIgIilbMF0pXSB8fCAoeVtpXSA9IFtdKSwKICAgICAgICAgICAgICAgICAgICAgIHlbaV0ucHVzaChtKSkpOwogICAgICAgICAgfQogICAgICBmb3IgKGYgaW4geSkgMiA9PT0geVtmXS5sZW5ndGggJiYgYi5wdXNoKHlbZl1bMF0gKyAiLCIgKyB5W2ZdWzFdKTsKICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3MgPSBiOwogICAgfSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5hZGRMaW5rcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSwKICAgICAgICAgIG4sCiAgICAgICAgICBpLAogICAgICAgICAgdCwKICAgICAgICAgIHMgPSAwLAogICAgICAgICAgbyA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzLmxlbmd0aCwKICAgICAgICAgIGQgPSAwLAogICAgICAgICAgciA9IFtdLAogICAgICAgICAgYSA9IDAsCiAgICAgICAgICBsID0gIiIsCiAgICAgICAgICBwID0gIiIsCiAgICAgICAgICBoID0gW10sCiAgICAgICAgICB1ID0gbnVsbCwKICAgICAgICAgIGMgPSBbXSwKICAgICAgICAgIGIgPSBudWxsOwogICAgICAgIHMgPCBvOwogICAgICAgICsrcwogICAgICApCiAgICAgICAgZm9yICgKICAgICAgICAgIGQgPSAwLAogICAgICAgICAgICBlID0KICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFsKICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3NdLmlkeAogICAgICAgICAgICAgIF0ubm9kZS5waW5zLmxlbmd0aDsKICAgICAgICAgIGQgPCBlOwogICAgICAgICAgKytkCiAgICAgICAgKQogICAgICAgICAgaWYgKAogICAgICAgICAgICAhMSAhPT0KICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFsKICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3NdLmlkeAogICAgICAgICAgICAgIF0ubm9kZS5waW5zW2RdLmlzTGlua2VkVG8oKSAmJgogICAgICAgICAgICAhdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbc10uaWR4CiAgICAgICAgICAgIF0ubm9kZS5waW5zW2RdLmlzSW5wdXQoKSAmJgogICAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAgIChuID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3NdLmlkeAogICAgICAgICAgICAgICAgXS5ub2RlLm9iamVjdERlZmluaXRpb24sCiAgICAgICAgICAgICAgICAiTmFtZSIKICAgICAgICAgICAgICApKQogICAgICAgICAgKQogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIHUgPQogICAgICAgICAgICAgICAgbi52YWx1ZSArCiAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWRbCiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3NdLmlkeAogICAgICAgICAgICAgICAgXS5ub2RlLnBpbnNbZF0uaWQsCiAgICAgICAgICAgICAgICBhID0gMCwKICAgICAgICAgICAgICAgIGkgPSAociA9CiAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW3NdLmlkeAogICAgICAgICAgICAgICAgICBdLm5vZGUucGluc1tkXS5nZXRMaW5rcygpKS5sZW5ndGg7CiAgICAgICAgICAgICAgYSA8IGk7CiAgICAgICAgICAgICAgKythCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAobCA9IHUgKyAiLCIgKyByW2FdKSwKICAgICAgICAgICAgICAgIChwID0gclthXSArICIsIiArIHUpLAogICAgICAgICAgICAgICAgLTEgPT09IGguaW5kZXhPZihsKSAmJgogICAgICAgICAgICAgICAgICAtMSA9PT0gaC5pbmRleE9mKHApICYmCiAgICAgICAgICAgICAgICAgIChoLnB1c2godSArICIsIiArIHJbYV0pLAogICAgICAgICAgICAgICAgICAwID09PSBsLmluZGV4T2YoIkFuaW1TdGF0ZVRyYW5zaXRpb25Ob2RlIikKICAgICAgICAgICAgICAgICAgICA/IChjWyh0ID0gdS5zcGxpdCgiICIpWzBdKV0gfHwgKGNbdF0gPSBbXSksIGNbdF0ucHVzaChyW2FdKSkKICAgICAgICAgICAgICAgICAgICA6IDAgPT09IHAuaW5kZXhPZigiQW5pbVN0YXRlVHJhbnNpdGlvbk5vZGUiKSAmJgogICAgICAgICAgICAgICAgICAgICAgKGNbKHQgPSByW2FdLnNwbGl0KCIgIilbMF0pXSB8fCAoY1t0XSA9IFtdKSwKICAgICAgICAgICAgICAgICAgICAgIGNbdF0ucHVzaCh1KSkpOwogICAgICBmb3IgKGIgaW4gYykgMiA9PT0gY1tiXS5sZW5ndGggJiYgaC5wdXNoKGNbYl1bMF0gKyAiLCIgKyBjW2JdWzFdKTsKICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3MgPSBoOwogICAgfSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5pbml0QnVzRW52aXJvbm1lbnQgPSBmdW5jdGlvbiAoKSB7fSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5pbml0RW52aXJvbm1lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLAogICAgICAgIG4sCiAgICAgICAgaSA9IHBlcmZvcm1hbmNlLm5vdygpLAogICAgICAgIHQgPSBbXSwKICAgICAgICBzID0gMDsKICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuY3JlYXRlUGxheWdyb3VuZCh0aGlzLmRhdGEub3B0aW9ucy50eXBlKSAmJgogICAgICAgICgodGhpcy5lbGFwc2VkVGltZS5jcmVhdGVQbGF5Z3JvdW5kID0gcGVyZm9ybWFuY2Uubm93KCkgLSBpKSwKICAgICAgICAobiA9IGZpbmRNaW5Qb3NOb2RlLmNhbGwodGhpcykpLAogICAgICAgICh0aGlzLmRhdGEuaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcigiLmNhbnZhcyIpLnN0eWxlLnRyYW5zZm9ybSA9CiAgICAgICAgICBnZXRTdHlsZVRyYW5zZm9ybUNTUyhuLngsIG4ueSwgMSkpLAogICAgICAgICh0aGlzLmRhdGEuaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcigiLnJlZmVyZW5jZSIpLnN0eWxlLnRyYW5zZm9ybSA9CiAgICAgICAgICBnZXRTdHlsZVRyYW5zZm9ybUNTUyhuLngsIG4ueSwgMSkpLAogICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgaSA9IHBlcmZvcm1hbmNlLm5vdygpLAogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZygiRElTUExBWSBOT0RFUy4uLiIpLAogICAgICAgICAgICAgICAgdCA9IFtdLAogICAgICAgICAgICAgICAgZSA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzLmxlbmd0aDsKICAgICAgICAgICAgICBzIDwgZTsKICAgICAgICAgICAgICArK3MKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHQucHVzaCgKICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzUGFyc2VkWwogICAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1tzXS5pZHgKICAgICAgICAgICAgICAgIF0ubm9kZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuZGlzcGxheU5vZGVzSW5WaWV3cG9ydCh0KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICh0aGlzLmVycm9yID0gewogICAgICAgICAgICAgICAgdHlwZTogIkRJU1BMQVlfTk9ERVMiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgZGlzcGxheWVkTWVzc2FnZTogIiIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBlLk5vZGVHVUlECiAgICAgICAgICAgICAgICAgID8gKHRoaXMuZXJyb3IuZGlzcGxheWVkTWVzc2FnZSA9CiAgICAgICAgICAgICAgICAgICAgICAiRkFJTEVEIERJU1BMQVkgQkxVRVBSSU5UOiBFcnJvciBvbiBOb2RlR1VJRCAiICsKICAgICAgICAgICAgICAgICAgICAgIGUuTm9kZUdVSUQpCiAgICAgICAgICAgICAgICAgIDogKHRoaXMuZXJyb3IuZGlzcGxheWVkTWVzc2FnZSA9CiAgICAgICAgICAgICAgICAgICAgICAiRkFJTEVEIERJU1BMQVkgQkxVRVBSSU5UOiBFcnJvciBvbiBOb2RlICMiICsgZS5Ob2RlSWR4KSwKICAgICAgICAgICAgICAgICh0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZCA9IFtdKSwKICAgICAgICAgICAgICAgICh0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2RlcyA9IFtdKSwKICAgICAgICAgICAgICAgICh0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5saW5rcyA9IFtdKSwKICAgICAgICAgICAgICAgICh0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5pZHMubm9kZXMgPSBbXSksCiAgICAgICAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQuaWRzLnBpbnMgPSBbXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKHRoaXMuZWxhcHNlZFRpbWUuZGlzcGxheU5vZGVzSW5WaWV3cG9ydCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gaSksCiAgICAgICAgICAgICAgc2V0VGltZW91dCgKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgKGkgPSBwZXJmb3JtYW5jZS5ub3coKSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZygiRFJBVyBMSU5LUy4uLiIpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmRyYXdMaW5rcygKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLmxpbmtzCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5lbGFwc2VkVGltZS5kcmF3TGlua3MgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGkpLAogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzLmVtaXQoImluaXRfaW50ZXJhY3RvciIpOwogICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAgIDAKICAgICAgICApKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuaW5pdEJ1c0ludGVyYWN0b3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuYnVzLmxpc3RlbigiZWRpdG9yX19leHBhbmRfbm9kZSIsIHRoaXMuZXZlbnRzQmluZGluZy5leHBhbmROb2RlKSwKICAgICAgICB0aGlzLmJ1cy5saXN0ZW4oImVkaXRvcl9fcmVkdWNlX25vZGUiLCB0aGlzLmV2ZW50c0JpbmRpbmcucmVkdWNlTm9kZSksCiAgICAgICAgdGhpcy5idXMubGlzdGVuKCJyZV9kcmF3X2xpbmtzIiwgdGhpcy5ldmVudHNCaW5kaW5nLnJlRHJhd0xpbmtzKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuaW5pdEludGVyYWN0b3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LnVwZGF0ZUxvYWRpbmcoIklOSVQgSU5URVJBQ1RJT05TLi4uIiksCiAgICAgICAgdGhpcy5pbnN0YW5jZXMuaW50ZXJhY3Rvci5zdGFydEFsbEJpbmRpbmcoKSwKICAgICAgICAodGhpcy5lbGFwc2VkVGltZS5zdGFydEFsbEJpbmRpbmcgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGUpLAogICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmFkZERhdGFUaW1lckluUGxheWdyb3VuZCh0aGlzLmVsYXBzZWRUaW1lKSwKICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5yZW1vdmVMb2FkaW5nKCksCiAgICAgICAgKGUgPSBmaW5kTWluUG9zTm9kZS5jYWxsKHRoaXMpKSwKICAgICAgICB0aGlzLmluc3RhbmNlcy5pbnRlcmFjdG9yLm1vdmVDYW52YXNUbyhlKSwKICAgICAgICB0aGlzLmJ1cy5lbWl0KCJpbml0X3VwZGF0ZXIiKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuZmluZE5vZGVJZHhXaXRoSWQgPSBmdW5jdGlvbiAoZSkgewogICAgICBmb3IgKAogICAgICAgIHZhciBuID0gMCwgaSA9IHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzLmxlbmd0aDsKICAgICAgICBuIDwgaTsKICAgICAgICArK24KICAgICAgKQogICAgICAgIGlmICh0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlc1tuXS5ndWlkID09PSBlKQogICAgICAgICAgcmV0dXJuIHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLm5vZGVzW25dLmlkeDsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9KSwKICAgIChFZGl0b3IucHJvdG90eXBlLmluaXRCdXNVcGRhdGVyID0gZnVuY3Rpb24gKCkge30pLAogICAgKEVkaXRvci5wcm90b3R5cGUuaW5pdFVwZGF0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gITA7CiAgICAgIG51bGwgIT09IHRoaXMuZXJyb3IgJiYKICAgICAgICAoKGUgPSAhMSksCiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZyh0aGlzLmVycm9yLmRpc3BsYXllZE1lc3NhZ2UpLAogICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LnNob3dMb2FkaW5nKCkpLAogICAgICAgIG51bGwgIT09IHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbiAmJgogICAgICAgICAgKHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbihlLCB0aGlzLmVycm9yKSwKICAgICAgICAgICh0aGlzLmNhbGxiYWNrSW5pdGlhbGl6YXRpb24gPSBudWxsKSk7CiAgICB9KSwKICAgIChFZGl0b3IucHJvdG90eXBlLnVwZGF0ZUJsdWVwcmludFRleHQgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICB2YXIgaSwKICAgICAgICB0ID0gcGVyZm9ybWFuY2Uubm93KCksCiAgICAgICAgcyA9IFtdLAogICAgICAgIG8gPSAwOwogICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIGUpCiAgICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiQXJndW1lbnQgJ25ld0JsdWVwcmludFRleHQnIGlzIGluY29ycmVjdCwgZXhwZWN0IHN0cmluZywgZ2V0ICIgKwogICAgICAgICAgICB0eXBlb2YgZQogICAgICAgICk7CiAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gJiYgKHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbiA9IG4pLAogICAgICAgICh0aGlzLmVycm9yID0gbnVsbCksCiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuY2xlYW5WaWV3cG9ydCgpLAogICAgICAgICh0aGlzLmRhdGEudGV4dCA9IGUpLAogICAgICAgICh0aGlzLmVsYXBzZWRUaW1lLnN0YXJ0QWxsQmluZGluZyA9IDApLAogICAgICAgICh0aGlzLmVsYXBzZWRUaW1lLmNyZWF0ZVBsYXlncm91bmQgPSAwKTsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnBhcnNlQmx1ZXByaW50KCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAodGhpcy5lcnJvciA9IHsKICAgICAgICAgIHR5cGU6ICJQQVJTRV9CTFVFUFJJTlQiLAogICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLAogICAgICAgICAgZGlzcGxheWVkTWVzc2FnZTogIkZBSUxFRCBESVNQTEFZIEJMVUVQUklOVDogUGFyc2luZyBFcnJvciIsCiAgICAgICAgfSksCiAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWQgPSBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5zZXREaXNwbGF5ZWROb2Rlcyh0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZCwgbnVsbCksCiAgICAgICAgdGhpcy5saXN0SURzKCksCiAgICAgICAgKHRoaXMuZWxhcHNlZFRpbWUucGFyc2VCbHVlcHJpbnQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHQpLAogICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdCA9IHBlcmZvcm1hbmNlLm5vdygpLAogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQudXBkYXRlTG9hZGluZygiRElTUExBWSBOT0RFUy4uLiIpLAogICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuc2hvd0xvYWRpbmcoKSwKICAgICAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgICAgIGkgPSB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5ub2Rlcy5sZW5ndGg7CiAgICAgICAgICAgICAgbyA8IGk7CiAgICAgICAgICAgICAgKytvCiAgICAgICAgICAgICkKICAgICAgICAgICAgICBzLnB1c2goCiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc1BhcnNlZFsKICAgICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXNbb10uaWR4CiAgICAgICAgICAgICAgICBdLm5vZGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LmRpc3BsYXlOb2Rlc0luVmlld3BvcnQocyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAodGhpcy5lcnJvciA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJESVNQTEFZX05PREVTIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgICAgICAgICAgIGRpc3BsYXllZE1lc3NhZ2U6ICIiLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgZS5Ob2RlR1VJRAogICAgICAgICAgICAgICAgICA/ICh0aGlzLmVycm9yLmRpc3BsYXllZE1lc3NhZ2UgPQogICAgICAgICAgICAgICAgICAgICAgIkZBSUxFRCBESVNQTEFZIEJMVUVQUklOVDogRXJyb3Igb24gTm9kZUdVSUQgIiArCiAgICAgICAgICAgICAgICAgICAgICBlLk5vZGVHVUlEKQogICAgICAgICAgICAgICAgICA6ICh0aGlzLmVycm9yLmRpc3BsYXllZE1lc3NhZ2UgPQogICAgICAgICAgICAgICAgICAgICAgIkZBSUxFRCBESVNQTEFZIEJMVUVQUklOVDogRXJyb3Igb24gTm9kZSAjIiArIGUuTm9kZUlkeCksCiAgICAgICAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNQYXJzZWQgPSBbXSksCiAgICAgICAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubm9kZXMgPSBbXSksCiAgICAgICAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQubGlua3MgPSBbXSksCiAgICAgICAgICAgICAgICAodGhpcy5ibHVlcHJpbnQubm9kZXNEaXNwbGF5ZWQuaWRzLm5vZGVzID0gW10pLAogICAgICAgICAgICAgICAgKHRoaXMuYmx1ZXByaW50Lm5vZGVzRGlzcGxheWVkLmlkcy5waW5zID0gW10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgICh0aGlzLmVsYXBzZWRUaW1lLmRpc3BsYXlOb2Rlc0luVmlld3BvcnQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHQpLAogICAgICAgICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICh0ID0gcGVyZm9ybWFuY2Uubm93KCkpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LnVwZGF0ZUxvYWRpbmcoIkRSQVcgTElOS1MuLi4iKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5kcmF3TGlua3MoCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludC5ub2Rlc0Rpc3BsYXllZC5saW5rcwogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxhcHNlZFRpbWUuZHJhd0xpbmtzID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0KSwKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KAogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuZW52aXJvbm1lbnQuYWRkRGF0YVRpbWVySW5QbGF5Z3JvdW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxhcHNlZFRpbWUKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5yZW1vdmVMb2FkaW5nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBmaW5kTWluUG9zTm9kZS5jYWxsKHRoaXMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5pbnRlcmFjdG9yLm1vdmVDYW52YXNUbyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLmVycm9yICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChlID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LnVwZGF0ZUxvYWRpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmRpc3BsYXllZE1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50LnNob3dMb2FkaW5nKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY2FsbGJhY2tJbml0aWFsaXphdGlvbihlLCB0aGlzLmVycm9yKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmNhbGxiYWNrSW5pdGlhbGl6YXRpb24gPSBudWxsKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICk7CiAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICAwCiAgICAgICAgKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pbnN0YW5jZXMuaW50ZXJhY3Rvci5zdG9wKCksCiAgICAgICAgKHRoaXMuaW5zdGFuY2VzLmludGVyYWN0b3IgPSBudWxsKSwKICAgICAgICB0aGlzLmluc3RhbmNlcy5lbnZpcm9ubWVudC5zdG9wKCksCiAgICAgICAgKHRoaXMuaW5zdGFuY2VzLmVudmlyb25tZW50ID0gbnVsbCksCiAgICAgICAgKHRoaXMuaW5zdGFuY2VzLnVwZGF0ZXIgPSBudWxsKSwKICAgICAgICAodGhpcy5idXMgPSBudWxsKTsKICAgIH0pLAogICAgKEVkaXRvci5wcm90b3R5cGUuZ2V0Qmx1ZXByaW50RGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuYmx1ZXByaW50OwogICAgfSksCiAgICAoRWRpdG9yLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbiAoZSwgbiwgaSkgewogICAgICB0aGlzLmluc3RhbmNlcy5pbnRlcmFjdG9yLnNldFNjYWxlKGkpLAogICAgICAgIHRoaXMuaW5zdGFuY2VzLmludGVyYWN0b3IubW92ZUNhbnZhc1RvKHsgeDogZSwgeTogbiB9KTsKICAgIH0pOwogIHZhciBMRUZUX01PVVNFID0gMCwKICAgIFJJR0hUX01PVVNFID0gMiwKICAgIFNURVAgPSAxNiwKICAgIFpPT01fU1RFUCA9IDAuMDgsCiAgICBMSU1JVF9aT09NX0lOID0gNywKICAgIExJTUlUX1pPT01fT1VUID0gLTEyLAogICAgTU9ERV9SRUFEID0gIlJFQUQiLAogICAgTU9ERV9XUklURSA9ICJXUklURSIsCiAgICBQTEFURk9STV9XSU4gPSAiV0lOIiwKICAgIFBMQVRGT1JNX01BQyA9ICJNQUMiLAogICAgSU5JVF9GUkFNRV9TSVpFID0gIjI1MHB4IiwKICAgIFNUQVRFX0RPV04gPSAiRE9XTiIsCiAgICBTVEFURV9NT1ZFID0gIk1PVkUiLAogICAgU1RBVEVfVVAgPSAiVVAiOwogIGZ1bmN0aW9uIGdldFBsYXRmb3JtKCkgewogICAgcmV0dXJuIDAgPT09IHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKS5pbmRleE9mKCJNQUMiKQogICAgICA/IFBMQVRGT1JNX01BQwogICAgICA6IFBMQVRGT1JNX1dJTjsKICB9CiAgZnVuY3Rpb24gYmVzdE11bHRpcGxlKHQpIHsKICAgIHJldHVybiAodCA9IHQgLyBTVEVQKSAtICh0ID0gdCA+PiAwKSA8PSAwLjUgPyB0ICogU1RFUCA6ICgxICsgdCkgKiBTVEVQOwogIH0KICBmdW5jdGlvbiBnZXRQb3NpdGlvbnModCkgewogICAgdmFyIHQgPSB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICBlID0gdC50b3AsCiAgICAgIHMgPSB0LmxlZnQ7CiAgICByZXR1cm4gWwogICAgICBbcywgcyArIHQud2lkdGhdLAogICAgICBbZSwgZSArIHQuaGVpZ2h0XSwKICAgIF07CiAgfQogIGZ1bmN0aW9uIGNvbXBhcmVQb3NpdGlvbnModCwgZSkgewogICAgdmFyIHMgPSAwLAogICAgICBuID0gMCwKICAgICAgcyA9IHRbMF0gPCBlWzBdID8gdCA6IGUsCiAgICAgIG4gPSB0WzBdIDwgZVswXSA/IGUgOiB0OwogICAgcmV0dXJuIHNbMV0gPiBuWzBdIHx8IHNbMF0gPT09IG5bMF07CiAgfQogIGZ1bmN0aW9uIGlzT3ZlcmxhcHBpbmcodCwgZSkgewogICAgKHQgPSBnZXRQb3NpdGlvbnModCkpLCAoZSA9IGdldFBvc2l0aW9ucyhlKSk7CiAgICByZXR1cm4gY29tcGFyZVBvc2l0aW9ucyh0WzBdLCBlWzBdKSAmJiBjb21wYXJlUG9zaXRpb25zKHRbMV0sIGVbMV0pOwogIH0KICBmdW5jdGlvbiBwYXJlbnRzKHQsIGUsIHMpIHsKICAgIHZhciBuLAogICAgICBpID0gdC5wYXJlbnROb2RlLAogICAgICBvID0gMCwKICAgICAgYSA9IDA7CiAgICBpZiAobnVsbCA9PT0gaSB8fCB2b2lkIDAgPT09IGkuY2xhc3NMaXN0KSByZXR1cm4gbnVsbDsKICAgIGZvciAobiA9IGUubGVuZ3RoOyBhIDwgbjsgKythKSBpLmNsYXNzTGlzdC5jb250YWlucyhlW2FdKSAmJiAobyArPSAxKTsKICAgIHJldHVybiBvID09PSBuID8gaSA6IDAgPCBzID8gcGFyZW50cyhpLCBlLCBzIC0gMSkgOiBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRTdHlsZVRyYW5zZm9ybUNTUyh0LCBlLCBzKSB7CiAgICByZXR1cm4gInRyYW5zbGF0ZSgiICsgdCArICJweCwiICsgZSArICJweCkgc2NhbGUoIiArIHMgKyAiKSI7CiAgfQogIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2xhdGVTY2FsZSh0KSB7CiAgICB2YXIgZSA9IHsgeDogMCwgeTogMCwgc2NhbGU6IDEgfSwKICAgICAgcyA9IC0xLAogICAgICBuID0gW10sCiAgICAgIGkgPSB0LmluZGV4T2YoInRyYW5zbGF0ZSgiKSwKICAgICAgbyA9IHQuaW5kZXhPZigic2NhbGUoIik7CiAgICByZXR1cm4gKAogICAgICAtMSAhPT0gaSAmJgogICAgICAgIC0xICE9PSAocyA9IHQuaW5kZXhPZigiKSIsIGkgKyAxMCkpICYmCiAgICAgICAgKChuID0gdC5zdWJzdHJpbmcoaSArIDEwLCBzKS5zcGxpdCgiLCIpKSwKICAgICAgICAoZS54ID0gblswXS5yZXBsYWNlKCJweCIsICIiKSA+PiAwKSwKICAgICAgICAxIDwgbi5sZW5ndGggJiYgKGUueSA9IG5bMV0ucmVwbGFjZSgicHgiLCAiIikgPj4gMCkpLAogICAgICAtMSAhPT0gbyAmJgogICAgICAgIC0xICE9PSAocyA9IHQuaW5kZXhPZigiKSIsIG8gKyA2KSkgJiYKICAgICAgICAoKGUuc2NhbGUgPSBwYXJzZUZsb2F0KHQuc3Vic3RyaW5nKG8gKyA2LCBzKSkpLAogICAgICAgIGlzTmFOKGUuc2NhbGUpICYmIChlLnNjYWxlID0gMSkpLAogICAgICBlCiAgICApOwogIH0KICBmdW5jdGlvbiBJbnRlcmFjdG9yKHQsIGUsIHMpIHsKICAgICh0aGlzLmRvbSA9IHsKICAgICAgYnJlYWRjcnVtYjogbnVsbCwKICAgICAgYnRuczogbnVsbCwKICAgICAgY2FudmFzOiBudWxsLAogICAgICBkZWJ1Z0luZm9zOiBudWxsLAogICAgICBmcmFtZTogbnVsbCwKICAgICAgbGF5ZXI6IG51bGwsCiAgICAgIG11bHRpU2VsZWN0OiBudWxsLAogICAgICBub2RlTW92aW5nOiBudWxsLAogICAgICBub2Rlc01vdmluZzogW10sCiAgICAgIG92ZXJsYXk6IG51bGwsCiAgICAgIHBhbmVsOiBudWxsLAogICAgICBwYW5lbEJ0bnM6IFtdLAogICAgICByZWZlcmVuY2U6IG51bGwsCiAgICAgIHJvb3Q6IHQsCiAgICAgIHpvb206IG51bGwsCiAgICB9KSwKICAgICAgKHRoaXMuYnVzID0gcyksCiAgICAgICh0aGlzLmV2ZW50cyA9IHsgcG9pbnRlckRvd246IG51bGwsIHBvaW50ZXJNb3ZlOiBudWxsLCBwb2ludGVyVXA6IG51bGwgfSksCiAgICAgICh0aGlzLnN0YXRlcyA9IHsKICAgICAgICBjdXJyZW50OiBudWxsLAogICAgICAgIHByZXZpb3VzOiBudWxsLAogICAgICAgIG1vZGU6IE1PREVfUkVBRCwKICAgICAgICBwbGF0Zm9ybTogZ2V0UGxhdGZvcm0oKSwKICAgICAgICBpc1RvdWNoOiAhMSwKICAgICAgICBpc0xvbmdwcmVzczogITEsCiAgICAgICAgaXNMZWZ0Q2xpY2s6ICExLAogICAgICAgIGlzUmlnaHRDbGljazogITEsCiAgICAgICAgaXNQYW5lbE9wZW46ICExLAogICAgICAgIGluUGxheWdyb3VuZDogITEsCiAgICAgICAgaXNNb3ZpbmdOb2RlOiAhMSwKICAgICAgICBpbkZ1bGxzY3JlZW46ICExLAogICAgICAgIGlzVHJlYXRpbmdQYXN0ZTogITEsCiAgICAgICAgZW5hYmxlRGVidWc6ICExLAogICAgICAgIGVuYWJsZU11bHRpVXNlcnM6ICExLAogICAgICAgIGVuYWJsZU1hdGVyaWFsVml6OiAhMSwKICAgICAgICBlbmFibGVBbm5vdGF0aW9uczogITEsCiAgICAgICAgdGltZW91dExvbmdwcmVzczogbnVsbCwKICAgICAgICB0aW1lb3V0T3ZlcmxheTogbnVsbCwKICAgICAgICBub2RlSURzQWxyZWFkeVNlbGVjdGVkOiBbXSwKICAgICAgICBtdWx0aVNlbGVjdEhhc0N0cmxLZXk6ICExLAogICAgICAgIG11bHRpU2VsZWN0SGFzU2hpZnRLZXk6ICExLAogICAgICAgIHdoZWVsQWNjdW11bGF0b3I6IDAsCiAgICAgIH0pLAogICAgICAodGhpcy5ldmVudHNCaW5kaW5nID0gewogICAgICAgIGJyZWFkY3J1bWI6IHRoaXMuZXZlbnRCcmVhZGNydW1iLmJpbmQodGhpcyksCiAgICAgICAgY29udGV4dE1lbnU6IHRoaXMuZXZlbnRDb250ZXh0TWVudS5iaW5kKHRoaXMpLAogICAgICAgIGNvcHlOb2RlczogdGhpcy5ldmVudENvcHlOb2Rlcy5iaW5kKHRoaXMpLAogICAgICAgIGV4aXRGdWxsc2NyZWVuSGFuZGxlckZvclJlc2l6aW5nOgogICAgICAgICAgdGhpcy5ldmVudEV4aXRGdWxsc2NyZWVuSGFuZGxlckZvclJlc2l6aW5nLmJpbmQodGhpcyksCiAgICAgICAgZm9jdXNQbGF5Z3JvdW5kOiB0aGlzLmV2ZW50Rm9jdXNQbGF5Z3JvdW5kLmJpbmQodGhpcyksCiAgICAgICAgaGVhZGVyQnV0dG9uczogdGhpcy5ldmVudEhlYWRlckJ1dHRvbnMuYmluZCh0aGlzKSwKICAgICAgICBoaWRlT3ZlcmxheUZvclpvb206IHRoaXMuZXZlbnRIaWRlT3ZlcmxheUZvclpvb20uYmluZCh0aGlzKSwKICAgICAgICBwYW5lbEJ1dHRvbnM6IHRoaXMuZXZlbnRQYW5lbEJ1dHRvbnMuYmluZCh0aGlzKSwKICAgICAgICBwYXN0ZU5vZGVzOiB0aGlzLmV2ZW50UGFzdGVOb2Rlcy5iaW5kKHRoaXMpLAogICAgICAgIHBvaW50ZXJEb3VibGVDbGljazogdGhpcy5ldmVudFBvaW50ZXJEb3VibGVDbGljay5iaW5kKHRoaXMpLAogICAgICAgIHBvaW50ZXJEb3duOiB0aGlzLmV2ZW50UG9pbnRlckRvd24uYmluZCh0aGlzKSwKICAgICAgICBwb2ludGVyTG9uZ3ByZXNzOiB0aGlzLmV2ZW50UG9pbnRlckxvbmdwcmVzcy5iaW5kKHRoaXMpLAogICAgICAgIHBvaW50ZXJNb3ZlOiB0aGlzLmV2ZW50UG9pbnRlck1vdmUuYmluZCh0aGlzKSwKICAgICAgICBwb2ludGVyUGluY2g6IHRoaXMuZXZlbnRQb2ludGVyUGluY2guYmluZCh0aGlzKSwKICAgICAgICBwb2ludGVyVXA6IHRoaXMuZXZlbnRQb2ludGVyVXAuYmluZCh0aGlzKSwKICAgICAgICBwb2ludGVyV2hlZWw6IHRoaXMuZXZlbnRQb2ludGVyV2hlZWwuYmluZCh0aGlzKSwKICAgICAgICBkb01vdmVDYW52YXM6IHRoaXMuZXZlbnREb01vdmVDYW52YXMuYmluZCh0aGlzKSwKICAgICAgfSksCiAgICAgICh0aGlzLnBpbmNoRGlzdGFuY2UgPSBudWxsKSwKICAgICAgKHRoaXMuY2FudmFzID0geyB4OiAwLCB5OiAwIH0pLAogICAgICAodGhpcy5yZXNldFBvc2l0aW9uID0geyB4OiAwLCB5OiAwIH0pLAogICAgICAodGhpcy5zY2FsZSA9IDEpLAogICAgICAodGhpcy5zdGFydFBpbkxpbmsgPSBudWxsKSwKICAgICAgKHRoaXMuY3VycmVudFpvb20gPSAwKSwKICAgICAgKHRoaXMubGFzdFVwZGF0ZUNhbGxlZCA9IG51bGwpLAogICAgICAodGhpcy5mcmFtZVNpemUgPSBlLmhlaWdodCB8fCBJTklUX0ZSQU1FX1NJWkUpOwogIH0KICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuc3RhcnRBbGxCaW5kaW5nID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHQsCiAgICAgIGUgPSAwOwogICAgZm9yICgKICAgICAgdGhpcy5kb20uZnJhbWUgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5mcmFtZSIpLAogICAgICAgIHRoaXMuZG9tLmxheWVyID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIubGF5ZXIiKSwKICAgICAgICB0aGlzLmRvbS5yZWZlcmVuY2UgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5yZWZlcmVuY2UiKSwKICAgICAgICB0aGlzLmRvbS5jYW52YXMgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5jYW52YXMiKSwKICAgICAgICB0aGlzLmRvbS5idG5zID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIuZnJhbWUtaGVhZGVyX19idXR0b25zIiksCiAgICAgICAgdGhpcy5kb20ucGFuZWwgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5wYW5lbCIpLAogICAgICAgIHRoaXMuZG9tLnBhbmVsQnRucyA9IHRoaXMuZG9tLnJvb3QucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICIucGFuZWwgaW5wdXRbZGF0YS1mZWF0dXJlLXBhbmVsLWNoZWNrYm94XSIKICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLnpvb20gPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAiLmZyYW1lLWhlYWRlcl9fY3VycmVudC16b29tIgogICAgICAgICksCiAgICAgICAgdGhpcy5kb20ub3ZlcmxheSA9IHRoaXMuZG9tLnJvb3QucXVlcnlTZWxlY3RvcigiLm92ZXJsYXkiKSwKICAgICAgICB0aGlzLmRvbS5icmVhZGNydW1iID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgIi5mcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWIiCiAgICAgICAgKSwKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICJtb3VzZWRvd24iLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmZvY3VzUGxheWdyb3VuZAogICAgICAgICksCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAidG91Y2hzdGFydCIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuZm9jdXNQbGF5Z3JvdW5kCiAgICAgICAgKSwKICAgICAgICB0aGlzLmRvbS5sYXllci5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgIm1vdXNlZG93biIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlckRvd24KICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLmxheWVyLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAidG91Y2hzdGFydCIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlckRvd24sCiAgICAgICAgICB7IHBhc3NpdmU6ICExIH0KICAgICAgICApLAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlck1vdmUpLAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlck1vdmUsIHsKICAgICAgICAgIHBhc3NpdmU6ICExLAogICAgICAgIH0pLAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgdGhpcy5ldmVudHNCaW5kaW5nLnBvaW50ZXJVcCksCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIiwgdGhpcy5ldmVudHNCaW5kaW5nLnBvaW50ZXJVcCwgewogICAgICAgICAgcGFzc2l2ZTogITEsCiAgICAgICAgfSksCiAgICAgICAgdGhpcy5kb20ubGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICJ3aGVlbCIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlcldoZWVsCiAgICAgICAgKSwKICAgICAgICB0aGlzLmRvbS5sYXllci5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgImRibGNsaWNrIiwKICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5wb2ludGVyRG91YmxlQ2xpY2sKICAgICAgICApLAogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvcHkiLCB0aGlzLmV2ZW50c0JpbmRpbmcuY29weU5vZGVzKSwKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJwYXN0ZSIsIHRoaXMuZXZlbnRzQmluZGluZy5wYXN0ZU5vZGVzKSwKICAgICAgICB0aGlzLmRvbS5idG5zLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAiY2xpY2siLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmhlYWRlckJ1dHRvbnMKICAgICAgICApLAogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAid2Via2l0ZnVsbHNjcmVlbmNoYW5nZSIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuZXhpdEZ1bGxzY3JlZW5IYW5kbGVyRm9yUmVzaXppbmcKICAgICAgICApLAogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAiZnVsbHNjcmVlbmNoYW5nZSIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuZXhpdEZ1bGxzY3JlZW5IYW5kbGVyRm9yUmVzaXppbmcKICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLmJyZWFkY3J1bWIuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICJjbGljayIsCiAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuYnJlYWRjcnVtYgogICAgICAgICksCiAgICAgICAgdCA9IHRoaXMuZG9tLnBhbmVsQnRucy5sZW5ndGg7CiAgICAgIGUgPCB0OwogICAgICArK2UKICAgICkKICAgICAgdGhpcy5kb20ucGFuZWxCdG5zW2VdLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgImNsaWNrIiwKICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucGFuZWxCdXR0b25zCiAgICAgICk7CiAgICB0aGlzLmRvbS5sYXllci5hZGRFdmVudExpc3RlbmVyKAogICAgICAiY29udGV4dG1lbnUiLAogICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuY29udGV4dE1lbnUKICAgICksCiAgICAgIHRoaXMuYnVzLmxpc3RlbigiaW50ZXJhY3Rvcl9fZXhwYW5kX25vZGUiLCB0aGlzLmV4cGFuZE5vZGUuYmluZCh0aGlzKSksCiAgICAgIHRoaXMuYnVzLmxpc3RlbigiaW50ZXJhY3Rvcl9fcmVkdWNlX25vZGUiLCB0aGlzLnJlZHVjZU5vZGUuYmluZCh0aGlzKSk7CiAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnREb01vdmVDYW52YXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMubW92ZUNhbnZhcyh0aGlzLmV2ZW50cy5wb2ludGVyTW92ZSksICh0aGlzLmxhc3RVcGRhdGVDYWxsZWQgPSBudWxsKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50Rm9jdXNQbGF5Z3JvdW5kID0gZnVuY3Rpb24gKHQpIHsKICAgICAgZm9yICh2YXIgZSA9IDAsIHMgPSB0LmNvbXBvc2VkUGF0aCgpLCBuID0gcy5sZW5ndGg7IGUgPCBuOyArK2UpCiAgICAgICAgaWYgKHNbZV0gPT09IHRoaXMuZG9tLnJvb3QpIHJldHVybiB2b2lkICh0aGlzLnN0YXRlcy5pblBsYXlncm91bmQgPSAhMCk7CiAgICAgIHRoaXMuc3RhdGVzLmluUGxheWdyb3VuZCA9ICExOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRQb2ludGVyRG93biA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlOwogICAgICByZXR1cm4gKAogICAgICAgIG51bGwgPT09IHRoaXMuc3RhdGVzLmN1cnJlbnQgJiYKICAgICAgICAoKHRoaXMuc3RhdGVzLmN1cnJlbnQgPSBTVEFURV9ET1dOKSwKICAgICAgICB3aW5kb3cuVG91Y2hFdmVudCAmJiB0IGluc3RhbmNlb2YgVG91Y2hFdmVudAogICAgICAgICAgPyAodGhpcy5zdGF0ZXMuaW5GdWxsc2NyZWVuCiAgICAgICAgICAgICAgPyAoKHRoaXMuc3RhdGVzLmlzVG91Y2ggPSAhMCksCiAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMucG9pbnRlckRvd24gPSB0LnRvdWNoZXNbMF0pLAogICAgICAgICAgICAgICAgdGhpcy5zdGFydE1vdmluZ0NhbnZhcyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bikpCiAgICAgICAgICAgICAgOiAxID09PSB0LnRvdWNoZXMubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAoKHRoaXMuc3RhdGVzLmlzVG91Y2ggPSAhMCksCiAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMucG9pbnRlckRvd24gPSB0LnRvdWNoZXNbMF0pLAogICAgICAgICAgICAgICAgKHRoaXMuc3RhdGVzLnRpbWVvdXRMb25ncHJlc3MgPSB3aW5kb3cuc2V0VGltZW91dCgKICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLnBvaW50ZXJMb25ncHJlc3MsCiAgICAgICAgICAgICAgICAgIDE1MAogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TW92aW5nQ2FudmFzKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duKSksCiAgICAgICAgICAgICEwKQogICAgICAgICAgOiAoKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duID0gdCkuYnV0dG9uID09PSBMRUZUX01PVVNFCiAgICAgICAgICAgICAgPyAodGhpcy5zdGF0ZXMuaXNMZWZ0Q2xpY2sgPSAhMCkKICAgICAgICAgICAgICA6IHQuYnV0dG9uID09PSBSSUdIVF9NT1VTRSAmJiAodGhpcy5zdGF0ZXMuaXNSaWdodENsaWNrID0gITApLAogICAgICAgICAgICB0aGlzLnN0YXRlcy5wbGF0Zm9ybSA9PT0gUExBVEZPUk1fTUFDICYmCiAgICAgICAgICAgICAgITAgPT09IHQuY3RybEtleSAmJgogICAgICAgICAgICAgICh0aGlzLnN0YXRlcy5pc1JpZ2h0Q2xpY2sgPSAhMCksCiAgICAgICAgICAgIHRoaXMuc3RhdGVzLmlzUmlnaHRDbGljayB8fCB0aGlzLnN0YXRlcy5pc1RvdWNoCiAgICAgICAgICAgICAgPyB2b2lkIHRoaXMuc3RhcnRNb3ZpbmdDYW52YXModGhpcy5ldmVudHMucG9pbnRlckRvd24pCiAgICAgICAgICAgICAgOiB0aGlzLnN0YXRlcy5tb2RlID09PSBNT0RFX1dSSVRFICYmCiAgICAgICAgICAgICAgICBudWxsICE9PSAoZSA9IHBhcmVudHModC50YXJnZXQsIFsicGluIl0sIDUpKQogICAgICAgICAgICAgID8gITAgPT09IHQuY3RybEtleSB8fCAhMCA9PT0gdC5hbHRLZXkKICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICA6IHZvaWQgdGhpcy5kcmF3TmV3TGluayhlLCB0aGlzLmV2ZW50cy5wb2ludGVyRG93bikKICAgICAgICAgICAgICA6IG51bGwgIT09IChlID0gcGFyZW50cyh0LnRhcmdldCwgWyJub2RlIl0sIDUpKQogICAgICAgICAgICAgID8gITEgPT09CiAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImxlc3MiKSAmJgogICAgICAgICAgICAgICAgITEgPT09CiAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIm1vcmUiKSAmJgogICAgICAgICAgICAgICAgbnVsbCA9PT0gcGFyZW50cyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bi50YXJnZXQsIFsibGVzcyJdLCAwKSAmJgogICAgICAgICAgICAgICAgbnVsbCA9PT0gcGFyZW50cyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bi50YXJnZXQsIFsibW9yZSJdLCAwKSAmJgogICAgICAgICAgICAgICAgITEgPT09IHQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiZmFrZS1pbnB1dCIpICYmCiAgICAgICAgICAgICAgICAhMSA9PT0gdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJjaGVja2JveCIpICYmCiAgICAgICAgICAgICAgICAiU0VMRUNUIiAhPT0gdC50YXJnZXQudGFnTmFtZQogICAgICAgICAgICAgICAgPyAoKHRoaXMuc3RhdGVzLmlzTW92aW5nTm9kZSA9ICEwKSwKICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLnN0YXJ0TW92aW5nTm9kZSh0aGlzLmV2ZW50cy5wb2ludGVyRG93biwgZSkpCiAgICAgICAgICAgICAgICA6IHZvaWQgMAogICAgICAgICAgICAgIDogdm9pZCB0aGlzLmJlZ2luRHJhd011bHRpU2VsZWN0KHQpKSkKICAgICAgKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50UG9pbnRlck1vdmUgPSBmdW5jdGlvbiAodCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5zdGF0ZXMuY3VycmVudCAhPT0gU1RBVEVfTU9WRSAmJgogICAgICAgIHRoaXMuc3RhdGVzLmN1cnJlbnQgIT09IFNUQVRFX0RPV04KICAgICAgKQogICAgICAgIHJldHVybiAhMTsKICAgICAgaWYgKAogICAgICAgICgodGhpcy5zdGF0ZXMucHJldmlvdXMgPSB0aGlzLnN0YXRlcy5jdXJyZW50KSwKICAgICAgICAodGhpcy5zdGF0ZXMuY3VycmVudCA9IFNUQVRFX01PVkUpLAogICAgICAgIHdpbmRvdy5Ub3VjaEV2ZW50ICYmIHQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KQogICAgICApIHsKICAgICAgICBpZiAoCiAgICAgICAgICAoKHRoaXMuZXZlbnRzLnBvaW50ZXJNb3ZlID0gdC50b3VjaGVzWzBdKSwgIXRoaXMuc3RhdGVzLmluRnVsbHNjcmVlbikKICAgICAgICApIHsKICAgICAgICAgIGlmICghdGhpcy5zdGF0ZXMuaXNSaWdodENsaWNrKSByZXR1cm47CiAgICAgICAgICBpZiAoIXQuY2FuY2VsYWJsZSkgcmV0dXJuOwogICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCB0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwogICAgICAgIH0KICAgICAgICBpZiAoMiA9PT0gdC50b3VjaGVzLmxlbmd0aCkgcmV0dXJuIHZvaWQgdGhpcy5ldmVudFBvaW50ZXJQaW5jaCh0KTsKICAgICAgfSBlbHNlIHRoaXMuZXZlbnRzLnBvaW50ZXJNb3ZlID0gdDsKICAgICAgaWYgKHRoaXMuc3RhdGVzLmlzUmlnaHRDbGljayB8fCB0aGlzLnN0YXRlcy5pc1RvdWNoKQogICAgICAgIHJldHVybiAoCiAgICAgICAgICB0aGlzLmxhc3RVcGRhdGVDYWxsZWQgJiYgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5sYXN0VXBkYXRlQ2FsbGVkKSwKICAgICAgICAgIHZvaWQgKHRoaXMubGFzdFVwZGF0ZUNhbGxlZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgKICAgICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmRvTW92ZUNhbnZhcwogICAgICAgICAgKSkKICAgICAgICApOwogICAgICBudWxsICE9PSB0aGlzLnN0YXJ0UGluTGluawogICAgICAgID8gdGhpcy5tb3ZlTGluayh0aGlzLmV2ZW50cy5wb2ludGVyTW92ZSkKICAgICAgICA6ICEwID09PSB0aGlzLnN0YXRlcy5pc01vdmluZ05vZGUKICAgICAgICA/IHRoaXMubW92ZU5vZGUodGhpcy5ldmVudHMucG9pbnRlck1vdmUpCiAgICAgICAgOiAhMSA9PT0KICAgICAgICAgICAgdGhpcy5ldmVudHMucG9pbnRlckRvd24udGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiZmFrZS1pbnB1dCIpICYmCiAgICAgICAgICAhMSA9PT0KICAgICAgICAgICAgdGhpcy5ldmVudHMucG9pbnRlckRvd24udGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiY2hlY2tib3giKSAmJgogICAgICAgICAgITEgPT09IHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImxlc3MiKSAmJgogICAgICAgICAgITEgPT09IHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIm1vcmUiKSAmJgogICAgICAgICAgbnVsbCA9PT0gcGFyZW50cyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bi50YXJnZXQsIFsibGVzcyJdLCAwKSAmJgogICAgICAgICAgbnVsbCA9PT0gcGFyZW50cyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bi50YXJnZXQsIFsibW9yZSJdLCAwKSAmJgogICAgICAgICAgdGhpcy5kcmF3TXVsdGlTZWxlY3QodGhpcy5ldmVudHMucG9pbnRlck1vdmUpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRQb2ludGVyVXAgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSwKICAgICAgICBzLAogICAgICAgIG4sCiAgICAgICAgaSA9IFtdLAogICAgICAgIG8gPSAwOwogICAgICBpZiAoCiAgICAgICAgdGhpcy5zdGF0ZXMuY3VycmVudCAhPT0gU1RBVEVfTU9WRSAmJgogICAgICAgIHRoaXMuc3RhdGVzLmN1cnJlbnQgIT09IFNUQVRFX0RPV04KICAgICAgKQogICAgICAgIHJldHVybiAhMTsKICAgICAgaWYgKAogICAgICAgICgoZSA9IHRoaXMuc3RhdGVzLnByZXZpb3VzKSwKICAgICAgICAocyA9IHRoaXMuc3RhdGVzLmN1cnJlbnQpLAogICAgICAgICh0aGlzLnN0YXRlcy5wcmV2aW91cyA9IHRoaXMuc3RhdGVzLmN1cnJlbnQpLAogICAgICAgICh0aGlzLnN0YXRlcy5jdXJyZW50ID0gU1RBVEVfVVApLAogICAgICAgIHdpbmRvdy5Ub3VjaEV2ZW50ICYmIHQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KQogICAgICApCiAgICAgICAgcmV0dXJuIDAgPCB0LnRvdWNoZXMubGVuZ3RoCiAgICAgICAgICA/ICgodGhpcy5zdGF0ZXMucHJldmlvdXMgPSBlKSwgdm9pZCAodGhpcy5zdGF0ZXMuY3VycmVudCA9IHMpKQogICAgICAgICAgOiAoKHRoaXMuZXZlbnRzLnBvaW50ZXJVcCA9IHQudG91Y2hlc1swXSksCiAgICAgICAgICAgICh0aGlzLnN0YXRlcy5pc1RvdWNoID0gITEpLAogICAgICAgICAgICAodGhpcy5zdGF0ZXMuaXNMb25ncHJlc3MgPSAhMSksCiAgICAgICAgICAgIHRoaXMuc3RhdGVzLnRpbWVvdXRMb25ncHJlc3MgJiYKICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZXMudGltZW91dExvbmdwcmVzcyksCiAgICAgICAgICAgICh0aGlzLnN0YXRlcy5wcmV2aW91cyA9IFNUQVRFX1VQKSwKICAgICAgICAgICAgKHRoaXMuc3RhdGVzLmN1cnJlbnQgPSBudWxsKSwKICAgICAgICAgICAgdm9pZCAodGhpcy5zdGF0ZXMuaXNSaWdodENsaWNrID0gITEpKTsKICAgICAgaWYgKAogICAgICAgICgodGhpcy5ldmVudHMucG9pbnRlclVwID0gdCksCiAgICAgICAgdGhpcy5ldmVudHMucG9pbnRlckRvd24udGFyZ2V0ID09PSB0aGlzLmRvbS5jYW52YXMgJiYKICAgICAgICAgIHRoaXMuc3RhdGVzLnByZXZpb3VzID09PSBTVEFURV9ET1dOICYmCiAgICAgICAgICB0aGlzLnVuc2VsZWN0QWxsTm9kZXMoKSwKICAgICAgICBudWxsICE9PSB0aGlzLmRvbS5ub2RlTW92aW5nICYmIHRoaXMuc3RhdGVzLnByZXZpb3VzID09PSBTVEFURV9ET1dOKQogICAgICApCiAgICAgICAgaWYgKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnNoaWZ0S2V5KQogICAgICAgICAgdGhpcy5kb20ubm9kZU1vdmluZy5jbGFzc0xpc3QuYWRkKCJzZWxlY3RlZCIpOwogICAgICAgIGVsc2UgaWYgKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLmN0cmxLZXkpCiAgICAgICAgICB0aGlzLmRvbS5ub2RlTW92aW5nLmNsYXNzTGlzdC5jb250YWlucygic2VsZWN0ZWQiKQogICAgICAgICAgICA/IHRoaXMuZG9tLm5vZGVNb3ZpbmcuY2xhc3NMaXN0LnJlbW92ZSgic2VsZWN0ZWQiKQogICAgICAgICAgICA6IHRoaXMuZG9tLm5vZGVNb3ZpbmcuY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWQiKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGZvciAoCiAgICAgICAgICAgIG4gPSAoaSA9IHRoaXMuZG9tLmNhbnZhcy5xdWVyeVNlbGVjdG9yQWxsKCIubm9kZS5zZWxlY3RlZCIpKS5sZW5ndGg7CiAgICAgICAgICAgIG8gPCBuOwogICAgICAgICAgICArK28KICAgICAgICAgICkKICAgICAgICAgICAgaVtvXS5jbGFzc0xpc3QucmVtb3ZlKCJzZWxlY3RlZCIpOwogICAgICAgICAgdGhpcy5kb20ubm9kZU1vdmluZy5jbGFzc0xpc3QuYWRkKCJzZWxlY3RlZCIpOwogICAgICAgIH0KICAgICAgITAgPT09IHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImxlc3MiKSB8fAogICAgICBudWxsICE9PSBwYXJlbnRzKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldCwgWyJsZXNzIl0sIDApCiAgICAgICAgPyB0aGlzLnNlbmRSZWR1Y2VOb2RlKAogICAgICAgICAgICBwYXJlbnRzKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldCwgWyJub2RlIl0sIDUpCiAgICAgICAgICApCiAgICAgICAgOiAoITAgIT09IHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIm1vcmUiKSAmJgogICAgICAgICAgICBudWxsID09PSBwYXJlbnRzKHRoaXMuZXZlbnRzLnBvaW50ZXJEb3duLnRhcmdldCwgWyJtb3JlIl0sIDApKSB8fAogICAgICAgICAgdGhpcy5zZW5kRXhwYW5kTm9kZSgKICAgICAgICAgICAgcGFyZW50cyh0aGlzLmV2ZW50cy5wb2ludGVyRG93bi50YXJnZXQsIFsibm9kZSJdLCA1KQogICAgICAgICAgKSwKICAgICAgICBudWxsICE9PSB0aGlzLnN0YXJ0UGluTGluayAmJiB0aGlzLmVuZExpbmsodGhpcy5ldmVudHMucG9pbnRlclVwKSwKICAgICAgICB0aGlzLnJlbW92ZU11bHRpU2VsZWN0KCksCiAgICAgICAgKHRoaXMuc3RhdGVzLmlzTGVmdENsaWNrID0gITEpLAogICAgICAgICh0aGlzLnN0YXRlcy5pc1JpZ2h0Q2xpY2sgPSAhMSksCiAgICAgICAgKHRoaXMuc3RhdGVzLmlzVG91Y2ggPSAhMSksCiAgICAgICAgKHRoaXMuc3RhdGVzLmlzTG9uZ3ByZXNzID0gITEpLAogICAgICAgIHRoaXMuc3RhdGVzLnRpbWVvdXRMb25ncHJlc3MgJiYKICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlcy50aW1lb3V0TG9uZ3ByZXNzKSwKICAgICAgICAodGhpcy5zdGF0ZXMucHJldmlvdXMgPSBTVEFURV9VUCksCiAgICAgICAgKHRoaXMuc3RhdGVzLmN1cnJlbnQgPSBudWxsKSwKICAgICAgICAodGhpcy5zdGFydFBpbkxpbmsgPSBudWxsKSwKICAgICAgICAodGhpcy5zdGF0ZXMuaXNNb3ZpbmdOb2RlID0gITEpLAogICAgICAgICh0aGlzLmRvbS5ub2RlTW92aW5nID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLm5vZGVzTW92aW5nID0gW10pLAogICAgICAgICh0aGlzLmRvbS5jYW52YXMuc3R5bGUuY3Vyc29yID0gImRlZmF1bHQiKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50UG9pbnRlckxvbmdwcmVzcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICh0aGlzLnN0YXRlcy5pc0xvbmdwcmVzcyA9ICEwKSwgKHRoaXMuc3RhdGVzLmlzUmlnaHRDbGljayA9ICEwKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50UG9pbnRlcldoZWVsID0gZnVuY3Rpb24gKHQpIHsKICAgICAgaWYgKCExID09PSB0aGlzLnN0YXRlcy5pbkZ1bGxzY3JlZW4gJiYgITEgPT09IHQuY3RybEtleSkKICAgICAgICB0aGlzLnNob3dPdmVybGF5Rm9yWm9vbSgiVXNlIGN0cmwgKyBzY3JvbGwgdG8gem9vbSIpOwogICAgICBlbHNlIHsKICAgICAgICBpZiAoCiAgICAgICAgICAodGhpcy5ldmVudHNCaW5kaW5nLmhpZGVPdmVybGF5Rm9yWm9vbSgpLAogICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgdGhpcy5zdGF0ZXMuaXNSaWdodENsaWNrIHx8IHRoaXMuc3RhdGVzLmlzTGVmdENsaWNrKQogICAgICAgICkKICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICBpZiAodC5kZWx0YVkgPCAxMDApIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKCh0aGlzLnN0YXRlcy53aGVlbEFjY3VtdWxhdG9yICs9IHQuZGVsdGFZKSwKICAgICAgICAgICAgTWF0aC5hYnModGhpcy5zdGF0ZXMud2hlZWxBY2N1bXVsYXRvcikgPCAyNSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgdGhpcy5zdGF0ZXMud2hlZWxBY2N1bXVsYXRvciA9IDA7CiAgICAgICAgfQogICAgICAgIHQuZGVsdGFZIDwgMCA/IHRoaXMuem9vbUluKHQsICExKSA6IHRoaXMuem9vbU91dCh0KTsKICAgICAgfQogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRQb2ludGVyUGluY2ggPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSA9CiAgICAgICAgICAodC50b3VjaGVzWzBdLnBhZ2VYIC0gdC50b3VjaGVzWzFdLnBhZ2VYKSAqCiAgICAgICAgICAodC50b3VjaGVzWzBdLnBhZ2VYIC0gdC50b3VjaGVzWzFdLnBhZ2VYKSwKICAgICAgICBzID0KICAgICAgICAgICh0LnRvdWNoZXNbMF0ucGFnZVkgLSB0LnRvdWNoZXNbMV0ucGFnZVkpICoKICAgICAgICAgICh0LnRvdWNoZXNbMF0ucGFnZVkgLSB0LnRvdWNoZXNbMV0ucGFnZVkpLAogICAgICAgIGUgPSBNYXRoLnNxcnQoZSArIHMpOwogICAgICBudWxsID09PSB0aGlzLnBpbmNoRGlzdGFuY2UKICAgICAgICA/ICh0aGlzLnBpbmNoRGlzdGFuY2UgPSBlKQogICAgICAgIDogKCh0LnBhZ2VYID0gdC50b3VjaGVzWzBdLnBhZ2VYKSwKICAgICAgICAgICh0LnBhZ2VZID0gdC50b3VjaGVzWzBdLnBhZ2VZKSwKICAgICAgICAgIDUwIDwgKHMgPSB0aGlzLnBpbmNoRGlzdGFuY2UgLSBlKQogICAgICAgICAgICA/ICh0aGlzLnpvb21PdXQodCksCiAgICAgICAgICAgICAgKHRoaXMucGluY2hEaXN0YW5jZSA9IGUpLAogICAgICAgICAgICAgICh0aGlzLmRpZmZYID0gdC50b3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLmNhbnZhcy54KSwKICAgICAgICAgICAgICAodGhpcy5kaWZmWSA9IHQudG91Y2hlc1swXS5jbGllbnRZIC0gdGhpcy5jYW52YXMueSkpCiAgICAgICAgICAgIDogcyA8IC01MCAmJgogICAgICAgICAgICAgICh0aGlzLnpvb21Jbih0LCAhMCksCiAgICAgICAgICAgICAgKHRoaXMucGluY2hEaXN0YW5jZSA9IGUpLAogICAgICAgICAgICAgICh0aGlzLmRpZmZYID0gdC50b3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLmNhbnZhcy54KSwKICAgICAgICAgICAgICAodGhpcy5kaWZmWSA9IHQudG91Y2hlc1swXS5jbGllbnRZIC0gdGhpcy5jYW52YXMueSkpKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50UG9pbnRlckRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdCA9IHBhcmVudHModC50YXJnZXQsIFsibm9kZSJdLCA1KTsKICAgICAgbnVsbCAhPT0gdCAmJiB0aGlzLmJ1cy5lbWl0KCJkYmxjbGljayIsIFt0LmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpXSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5ldmVudEV4aXRGdWxsc2NyZWVuSGFuZGxlckZvclJlc2l6aW5nID0gZnVuY3Rpb24gKCkgewogICAgICAobnVsbCAhPT0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgJiYKICAgICAgICBudWxsICE9PSBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCkgfHwKICAgICAgICAoKHRoaXMuZG9tLmZyYW1lLnN0eWxlLmhlaWdodCA9IHRoaXMuZnJhbWVTaXplKSwKICAgICAgICB0aGlzLmRvbS5idG5zCiAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmZyYW1lLWhlYWRlcl9fYnV0dG9ucy1mdWxsc2NyZWVuIikKICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCJmcmFtZS1oZWFkZXJfX2J1dHRvbnMtZnVsbHNjcmVlbi0tZXhpdCIpLAogICAgICAgICh0aGlzLnN0YXRlcy5pbkZ1bGxzY3JlZW4gPSAhMSkpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRDb250ZXh0TWVudSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICh3aW5kb3cuVG91Y2hFdmVudCAmJiB0aGlzLmV2ZW50cy5wb2ludGVyRG93biBpbnN0YW5jZW9mIFRvdWNoKSB8fAogICAgICAgIHQucHJldmVudERlZmF1bHQoKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50Q29weU5vZGVzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGU7CiAgICAgICExID09PSB0aGlzLnN0YXRlcy5pblBsYXlncm91bmQgfHwKICAgICAgICB0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImZha2UtaW5wdXQiKSB8fAogICAgICAgICgwIDwgKGUgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zZWxlY3RlZCIpKS5sZW5ndGggJiYKICAgICAgICAgICh0aGlzLmNvcHlOb2Rlc1NlbGVjdGVkSW5DbGlwYm9hcmQodCwgZSksIHQucHJldmVudERlZmF1bHQoKSkpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRQYXN0ZU5vZGVzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGUsCiAgICAgICAgcyA9IG51bGwsCiAgICAgICAgbiA9IG51bGw7CiAgICAgIGlmICghMSAhPT0gdGhpcy5zdGF0ZXMuaW5QbGF5Z3JvdW5kKSB7CiAgICAgICAgaWYgKHQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiZmFrZS1pbnB1dCIpKQogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICB2b2lkICgKICAgICAgICAgICAgICAocyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSkuZ2V0UmFuZ2VBdCAmJgogICAgICAgICAgICAgIHMucmFuZ2VDb3VudCAmJgogICAgICAgICAgICAgICgobiA9IHMuZ2V0UmFuZ2VBdCgwKSkuZGVsZXRlQ29udGVudHMoKSwKICAgICAgICAgICAgICAoZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKAogICAgICAgICAgICAgICAgdC5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKQogICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgIG4uaW5zZXJ0Tm9kZShlKSwKICAgICAgICAgICAgICBuLnNldFN0YXJ0QWZ0ZXIoZSksCiAgICAgICAgICAgICAgbi5zZXRFbmRBZnRlcihlKSwKICAgICAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpLAogICAgICAgICAgICAgIHMuYWRkUmFuZ2UobikpCiAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgaWYgKHRoaXMuc3RhdGVzLm1vZGUgIT09IE1PREVfUkVBRCkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICAoKHRoaXMuc3RhdGVzLmlzVHJlYXRpbmdQYXN0ZSA9ICEwKSwKICAgICAgICAgICAgIiIgPT09IChlID0gdC5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKSkpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAodGhpcy5zdGF0ZXMuaXNUcmVhdGluZ1Bhc3RlID0gITEpOwogICAgICAgICAgc2V0VGltZW91dCgKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRoaXMuc3RhdGVzLmlzVHJlYXRpbmdQYXN0ZSA9ICExOwogICAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICAgIDFlMwogICAgICAgICAgKSwKICAgICAgICAgICAgdGhpcy5idXMuZW1pdCgicGFzdGVfdGV4dF9mcm9tX2NsaXBib2FyZCIsIFtlXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5ldmVudEhlYWRlckJ1dHRvbnMgPSBmdW5jdGlvbiAodCkgewogICAgICB0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImZyYW1lLWhlYWRlcl9fYnV0dG9ucy1mdWxsc2NyZWVuIikKICAgICAgICA/IHRoaXMuZnVsbHNjcmVlblRvZ2dsZSgpCiAgICAgICAgOiB0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImZyYW1lLWhlYWRlcl9fYnV0dG9ucy1yZXNldCIpCiAgICAgICAgPyAodGhpcy5yZXNldENhbnZhcygpLAogICAgICAgICAgdGhpcy5yZXNldFNjYWxlKCksCiAgICAgICAgICB0aGlzLm1vdmVDYW52YXNUbyh0aGlzLnJlc2V0UG9zaXRpb24pKQogICAgICAgIDogdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJmcmFtZS1oZWFkZXJfX2J1dHRvbnMtcGFuZWwiKSAmJgogICAgICAgICAgdGhpcy5wYW5lbFRvZ2dsZSgpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRQYW5lbEJ1dHRvbnMgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSA9IG51bGw7CiAgICAgIHN3aXRjaCAodC50YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLWZlYXR1cmUtcGFuZWwtbmFtZSIpKSB7CiAgICAgICAgY2FzZSAiZGVidWctaW5mb3MiOgogICAgICAgICAgKHRoaXMuc3RhdGVzLmVuYWJsZURlYnVnID0gIXRoaXMuc3RhdGVzLmVuYWJsZURlYnVnKSwKICAgICAgICAgICAgKHRoaXMuZG9tLmRlYnVnSW5mb3MgPSB0LnRhcmdldC5wYXJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSwKICAgICAgICAgICAgdGhpcy51cGRhdGVEZWJ1Z0luZm9zKCksCiAgICAgICAgICAgIChlID0gdGhpcy5zdGF0ZXMuZW5hYmxlRGVidWcpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicmVhZC13cml0ZSI6CiAgICAgICAgICB0aGlzLnN0YXRlcy5tb2RlID09PSBNT0RFX1dSSVRFCiAgICAgICAgICAgID8gKHRoaXMuc3RhdGVzLm1vZGUgPSBNT0RFX1JFQUQpCiAgICAgICAgICAgIDogdGhpcy5zdGF0ZXMubW9kZSA9PT0gTU9ERV9SRUFEICYmICh0aGlzLnN0YXRlcy5tb2RlID0gTU9ERV9XUklURSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJtdWx0aS11c2VycyI6CiAgICAgICAgICAodGhpcy5zdGF0ZXMuZW5hYmxlTXVsdGlVc2VycyA9ICF0aGlzLnN0YXRlcy5lbmFibGVNdWx0aVVzZXJzKSwKICAgICAgICAgICAgKGUgPSB0aGlzLnN0YXRlcy5lbmFibGVNdWx0aVVzZXJzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm1hdGVyaWFsLXZpeiI6CiAgICAgICAgICAodGhpcy5zdGF0ZXMuZW5hYmxlTWF0ZXJpYWxWaXogPSAhdGhpcy5zdGF0ZXMuZW5hYmxlTWF0ZXJpYWxWaXopLAogICAgICAgICAgICAoZSA9IHRoaXMuc3RhdGVzLmVuYWJsZU1hdGVyaWFsVml6KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImFubm90YXRpb25zIjoKICAgICAgICAgICh0aGlzLnN0YXRlcy5lbmFibGVBbm5vdGF0aW9ucyA9ICF0aGlzLnN0YXRlcy5lbmFibGVBbm5vdGF0aW9ucyksCiAgICAgICAgICAgIChlID0gdGhpcy5zdGF0ZXMuZW5hYmxlQW5ub3RhdGlvbnMpOwogICAgICB9CiAgICAgICEwID09PSBlCiAgICAgICAgPyAodC50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICJibG9jayIpCiAgICAgICAgOiAhMSA9PT0gZSAmJgogICAgICAgICAgKHQudGFyZ2V0LnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAibm9uZSIpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXZlbnRCcmVhZGNydW1iID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJmcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWItaXRlbSIpICYmCiAgICAgICAgKG51bGwgIT09ICh0ID0gdC50YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLW5vZGUtaWQiKSkgJiYgIiIgIT09IHQKICAgICAgICAgID8gdGhpcy5idXMuZW1pdCgiZGJsY2xpY2siLCBbdF0pCiAgICAgICAgICA6IHRoaXMuYnVzLmVtaXQoImRibGNsaWNrIiwgW251bGxdKSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5zZW5kUmVkdWNlTm9kZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHQgPSB0LmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpOwogICAgICB0aGlzLmJ1cy5lbWl0KCJlZGl0b3JfX3JlZHVjZV9ub2RlIiwgW3RdKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLnNlbmRFeHBhbmROb2RlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdCA9IHQuZ2V0QXR0cmlidXRlKCJkYXRhLWlkIik7CiAgICAgIHRoaXMuYnVzLmVtaXQoImVkaXRvcl9fZXhwYW5kX25vZGUiLCBbdF0pOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZXhwYW5kTm9kZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIGUgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlW2RhdGEtaWQ9IicgKyB0ICsgJyJdJyksCiAgICAgICAgICBzID0gZS5xdWVyeVNlbGVjdG9yQWxsKCIuYm9keSAucGluIiksCiAgICAgICAgICBuID0gMCwKICAgICAgICAgIGkgPSBzLmxlbmd0aCwKICAgICAgICAgIG8gPSBudWxsOwogICAgICAgIG4gPCBpOwogICAgICAgICsrbgogICAgICApCiAgICAgICAgc1tuXS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKICAgICAgKG8gPSBlLnF1ZXJ5U2VsZWN0b3IoIi5tb3JlIikpLmNsYXNzTGlzdC5yZW1vdmUoIm1vcmUiKSwKICAgICAgICBvLmNsYXNzTGlzdC5hZGQoImxlc3MiKSwKICAgICAgICAodGhpcy5kb20uY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKDAsIDAsIDEpKSwKICAgICAgICB0aGlzLmJ1cy5lbWl0KCJyZV9kcmF3X2xpbmtzIiwgWwogICAgICAgICAgdCwKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5kb20uY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKAogICAgICAgICAgICAgIHRoaXMuY2FudmFzLngsCiAgICAgICAgICAgICAgdGhpcy5jYW52YXMueSwKICAgICAgICAgICAgICB0aGlzLnNjYWxlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgXSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5yZWR1Y2VOb2RlID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgcyA9IHRoaXMuZG9tLnJvb3QucXVlcnlTZWxlY3RvcignLm5vZGVbZGF0YS1pZD0iJyArIHQgKyAnIl0nKSwKICAgICAgICAgIG4gPSBzLnF1ZXJ5U2VsZWN0b3JBbGwoIi5ib2R5IC5waW4iKSwKICAgICAgICAgIGkgPSAwLAogICAgICAgICAgbyA9IG4ubGVuZ3RoLAogICAgICAgICAgYSA9IG51bGw7CiAgICAgICAgaSA8IG87CiAgICAgICAgKytpCiAgICAgICkKICAgICAgICAtMSA9PT0gZS5pbmRleE9mKG5baV0uZ2V0QXR0cmlidXRlKCJkYXRhLWlkIikpICYmCiAgICAgICAgICBuW2ldLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwogICAgICAoYSA9IHMucXVlcnlTZWxlY3RvcigiLmxlc3MiKSkuY2xhc3NMaXN0LnJlbW92ZSgibGVzcyIpLAogICAgICAgIGEuY2xhc3NMaXN0LmFkZCgibW9yZSIpLAogICAgICAgICh0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoMCwgMCwgMSkpLAogICAgICAgIHRoaXMuYnVzLmVtaXQoInJlX2RyYXdfbGlua3MiLCBbCiAgICAgICAgICB0LAogICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICAgICAgdGhpcy5jYW52YXMueCwKICAgICAgICAgICAgICB0aGlzLmNhbnZhcy55LAogICAgICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICBdKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLnN0YXJ0TW92aW5nQ2FudmFzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgKHRoaXMuZVdpID0gcGFyc2VJbnQodGhpcy5kb20uY2FudmFzLnN0eWxlLndpZHRoLCAxMCkpLAogICAgICAgICh0aGlzLmVIZSA9IHBhcnNlSW50KHRoaXMuZG9tLmNhbnZhcy5zdHlsZS5oZWlnaHQsIDEwKSksCiAgICAgICAgKHRoaXMuZGlmZlggPSB0LmNsaWVudFggLSB0aGlzLmNhbnZhcy54KSwKICAgICAgICAodGhpcy5kaWZmWSA9IHQuY2xpZW50WSAtIHRoaXMuY2FudmFzLnkpLAogICAgICAgICh0aGlzLmRvbS5jYW52YXMuc3R5bGUuY3Vyc29yID0gImdyYWJiaW5nIik7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5tb3ZlQ2FudmFzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGUgPSAodC5jbGllbnRYIC0gdGhpcy5kaWZmWCkgPj4gMCwKICAgICAgICB0ID0gKHQuY2xpZW50WSAtIHRoaXMuZGlmZlkpID4+IDA7CiAgICAgICh0aGlzLmNhbnZhcy54ID09PSBlICYmIHRoaXMuY2FudmFzLnkgPT09IHQpIHx8CiAgICAgICAgKCh0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICBlLAogICAgICAgICAgdCwKICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICApKSwKICAgICAgICAodGhpcy5kb20ucmVmZXJlbmNlLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKAogICAgICAgICAgZSwKICAgICAgICAgIHQsCiAgICAgICAgICB0aGlzLnNjYWxlCiAgICAgICAgKSksCiAgICAgICAgKHRoaXMuY2FudmFzLnggPSBlKSwKICAgICAgICAodGhpcy5jYW52YXMueSA9IHQpKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLnN0YXJ0TW92aW5nTm9kZSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHZhciBzID0gdC5jbGllbnRYIC8gdGhpcy5zY2FsZSwKICAgICAgICB0ID0gdC5jbGllbnRZIC8gdGhpcy5zY2FsZSwKICAgICAgICBuID0gKGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLyB0aGlzLnNjYWxlKSA+PiAwLAogICAgICAgIGkgPSAoZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyB0aGlzLnNjYWxlKSA+PiAwLAogICAgICAgIG8gPSBleHRyYWN0VHJhbnNsYXRlU2NhbGUoZS5zdHlsZS50cmFuc2Zvcm0pOwogICAgICAodGhpcy5lV2kgPSBuKSwKICAgICAgICAodGhpcy5lSGUgPSBpKSwKICAgICAgICAodGhpcy5kaWZmWCA9IG8ueCArIG4gLSBzKSwKICAgICAgICAodGhpcy5kaWZmWSA9IG8ueSArIGkgLSB0KSwKICAgICAgICAodGhpcy5kb20ubm9kZU1vdmluZyA9IGUpLAogICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLm1vdmVOb2RlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGUsCiAgICAgICAgcywKICAgICAgICBuLAogICAgICAgIGksCiAgICAgICAgbyA9IDAsCiAgICAgICAgYSA9IDAsCiAgICAgICAgciA9IHQuY2xpZW50WCAvIHRoaXMuc2NhbGUsCiAgICAgICAgdCA9IHQuY2xpZW50WSAvIHRoaXMuc2NhbGUsCiAgICAgICAgciA9IHIgKyB0aGlzLmRpZmZYIC0gdGhpcy5lV2kgKyAyICogdGhpcy5zY2FsZSwKICAgICAgICB0ID0gdCArIHRoaXMuZGlmZlkgLSB0aGlzLmVIZSArIDIgKiB0aGlzLnNjYWxlLAogICAgICAgIGwgPSBbXSwKICAgICAgICBoID0gbnVsbCwKICAgICAgICByID0gYmVzdE11bHRpcGxlKHIpLAogICAgICAgIHQgPSBiZXN0TXVsdGlwbGUodCk7CiAgICAgIGlmICh0aGlzLmRvbS5ub2RlTW92aW5nLmNsYXNzTGlzdC5jb250YWlucygic2VsZWN0ZWQiKSkKICAgICAgICAwID09PSB0aGlzLmRvbS5ub2Rlc01vdmluZy5sZW5ndGggJiYKICAgICAgICAgICh0aGlzLmRvbS5ub2Rlc01vdmluZyA9CiAgICAgICAgICAgIHRoaXMuZG9tLmNhbnZhcy5xdWVyeVNlbGVjdG9yQWxsKCIubm9kZS5zZWxlY3RlZCIpKTsKICAgICAgZWxzZSB7CiAgICAgICAgZm9yICgKICAgICAgICAgIG8gPSAwLAogICAgICAgICAgICBhID0gKGwgPSB0aGlzLmRvbS5jYW52YXMucXVlcnlTZWxlY3RvckFsbCgiLm5vZGUuc2VsZWN0ZWQiKSkubGVuZ3RoOwogICAgICAgICAgbyA8IGE7CiAgICAgICAgICArK28KICAgICAgICApCiAgICAgICAgICBsW29dLmNsYXNzTGlzdC5yZW1vdmUoInNlbGVjdGVkIik7CiAgICAgICAgdGhpcy5kb20ubm9kZU1vdmluZy5jbGFzc0xpc3QuYWRkKCJzZWxlY3RlZCIpLAogICAgICAgICAgKHRoaXMuZG9tLm5vZGVzTW92aW5nID0gW10pOwogICAgICB9CiAgICAgIGlmICgKICAgICAgICAoaCA9IGV4dHJhY3RUcmFuc2xhdGVTY2FsZSh0aGlzLmRvbS5ub2RlTW92aW5nLnN0eWxlLnRyYW5zZm9ybSkpLnggIT09CiAgICAgICAgICByIHx8CiAgICAgICAgaC55ICE9PSB0CiAgICAgICkKICAgICAgICBpZiAoCiAgICAgICAgICAoKHRoaXMuZG9tLm5vZGVNb3Zpbmcuc3R5bGUudHJhbnNmb3JtID0KICAgICAgICAgICAgInRyYW5zbGF0ZSgiICsgciArICJweCwiICsgdCArICJweCkiKSwKICAgICAgICAgIDEgPCB0aGlzLmRvbS5ub2Rlc01vdmluZy5sZW5ndGgpCiAgICAgICAgKSB7CiAgICAgICAgICBmb3IgKAogICAgICAgICAgICBlID0gciAtIGgueCwgcyA9IHQgLSBoLnksIG8gPSAwLCBhID0gdGhpcy5kb20ubm9kZXNNb3ZpbmcubGVuZ3RoOwogICAgICAgICAgICBvIDwgYTsKICAgICAgICAgICAgKytvCiAgICAgICAgICApCiAgICAgICAgICAgIHRoaXMuZG9tLm5vZGVzTW92aW5nW29dICE9PSB0aGlzLmRvbS5ub2RlTW92aW5nICYmCiAgICAgICAgICAgICAgKChuID0KICAgICAgICAgICAgICAgIChoID0gZXh0cmFjdFRyYW5zbGF0ZVNjYWxlKAogICAgICAgICAgICAgICAgICB0aGlzLmRvbS5ub2Rlc01vdmluZ1tvXS5zdHlsZS50cmFuc2Zvcm0KICAgICAgICAgICAgICAgICkpLnggKyBlKSwKICAgICAgICAgICAgICAoaSA9IGgueSArIHMpLAogICAgICAgICAgICAgICh0aGlzLmRvbS5ub2Rlc01vdmluZ1tvXS5zdHlsZS50cmFuc2Zvcm0gPQogICAgICAgICAgICAgICAgInRyYW5zbGF0ZSgiICsgbiArICJweCwiICsgaSArICJweCkiKSk7CiAgICAgICAgICBmb3IgKAogICAgICAgICAgICB0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICAgICAgKG8gPSAwKSwKICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbyA8IGE7CiAgICAgICAgICAgICsrbwogICAgICAgICAgKQogICAgICAgICAgICB0aGlzLmRyYXdMaW5rcyh0aGlzLmRvbS5ub2Rlc01vdmluZ1tvXSk7CiAgICAgICAgICB0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICAgIHRoaXMuY2FudmFzLngsCiAgICAgICAgICAgIHRoaXMuY2FudmFzLnksCiAgICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICAodGhpcy5kb20uY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKDAsIDAsIDEpKSwKICAgICAgICAgICAgdGhpcy5kcmF3TGlua3ModGhpcy5kb20ubm9kZU1vdmluZyksCiAgICAgICAgICAgICh0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICAgICAgdGhpcy5jYW52YXMueCwKICAgICAgICAgICAgICB0aGlzLmNhbnZhcy55LAogICAgICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICAgICAgKSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5kcmF3TGlua3MgPSBmdW5jdGlvbiAodCkgewogICAgICB0ID0gdC5nZXRBdHRyaWJ1dGUoImRhdGEtaWQiKTsKICAgICAgdGhpcy5idXMuZW1pdCgicmVfZHJhd19saW5rcyIsIFt0XSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5tb3ZlTGluayA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHRoaXMuYnVzLmVtaXQoIm1vdmVfbGluayIsIFt0aGlzLnN0YXJ0UGluTGluaywgdCwgdGhpcy5zY2FsZV0pOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuZHJhd05ld0xpbmsgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAodGhpcy5zdGFydFBpbkxpbmsgPSB0KSwKICAgICAgICB0aGlzLmJ1cy5lbWl0KCJkcmF3X25ld19saW5rIiwgW3QsIGUsIHRoaXMuc2NhbGVdKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLnpvb21JbiA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHZhciBzLAogICAgICAgIG4sCiAgICAgICAgaSA9IHRoaXMuc2NhbGU7CiAgICAgIHRoaXMuY3VycmVudFpvb20gPj0gTElNSVRfWk9PTV9JTiB8fAogICAgICAgICgwID09PSB0aGlzLmN1cnJlbnRab29tICYmICExID09PSB0LmN0cmxLZXkgJiYgITEgPT09IGUpIHx8CiAgICAgICAgKCh0aGlzLmN1cnJlbnRab29tICs9IDEpLAogICAgICAgICh0aGlzLnNjYWxlID0gZmxvYXRGaXhlZCh0aGlzLnNjYWxlICsgWk9PTV9TVEVQLCAyKSksCiAgICAgICAgKGUgPSBnZXRDb2VmZmljZW50T2Zmc2V0Rm9yU2NhbGVXaGVuWm9vbUluKHRoaXMuc2NhbGUpKSwKICAgICAgICAobiA9IHRoaXMuZG9tLmZyYW1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSwKICAgICAgICAocyA9ICgodC5wYWdlWCAtIChuLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCkgLSB0aGlzLmNhbnZhcy54KSAqIGUpID4+IDApLAogICAgICAgICh0ID0gKCh0LnBhZ2VZIC0gKG4udG9wICsgd2luZG93LnNjcm9sbFkpIC0gdGhpcy5jYW52YXMueSkgKiBlKSA+PiAwKSwKICAgICAgICAobiA9IHRoaXMuc2NhbGUgLSBpKSwKICAgICAgICAodGhpcy5jYW52YXMueCA9ICh0aGlzLmNhbnZhcy54IC0gcyAqIG4pID4+IDApLAogICAgICAgICh0aGlzLmNhbnZhcy55ID0gKHRoaXMuY2FudmFzLnkgLSB0ICogbikgPj4gMCksCiAgICAgICAgKHRoaXMuZG9tLmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBnZXRTdHlsZVRyYW5zZm9ybUNTUygKICAgICAgICAgIHRoaXMuY2FudmFzLngsCiAgICAgICAgICB0aGlzLmNhbnZhcy55LAogICAgICAgICAgdGhpcy5zY2FsZQogICAgICAgICkpLAogICAgICAgICh0aGlzLmRvbS5yZWZlcmVuY2Uuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICB0aGlzLmNhbnZhcy54LAogICAgICAgICAgdGhpcy5jYW52YXMueSwKICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICApKSwKICAgICAgICB0aGlzLnVwZGF0ZVpvb21UZXh0KCkpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuem9vbU91dCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlLAogICAgICAgIHMsCiAgICAgICAgbiwKICAgICAgICBpID0gdGhpcy5zY2FsZTsKICAgICAgdGhpcy5jdXJyZW50Wm9vbSA8PSBMSU1JVF9aT09NX09VVCB8fAogICAgICAgICgwIDwgdGhpcy5zY2FsZSAtIFpPT01fU1RFUCAmJgogICAgICAgICAgKCh0aGlzLnNjYWxlID0gZmxvYXRGaXhlZCh0aGlzLnNjYWxlIC0gWk9PTV9TVEVQLCAyKSksCiAgICAgICAgICAtLXRoaXMuY3VycmVudFpvb20pLAogICAgICAgIChlID0gZ2V0Q29lZmZpY2VudE9mZnNldEZvclNjYWxlV2hlblpvb21PdXQodGhpcy5zY2FsZSkpLAogICAgICAgIChuID0gdGhpcy5kb20uZnJhbWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLAogICAgICAgIChzID0gKCh0LnBhZ2VYIC0gKG4ubGVmdCArIHdpbmRvdy5zY3JvbGxYKSAtIHRoaXMuY2FudmFzLngpICogZSkgPj4gMCksCiAgICAgICAgKHQgPSAoKHQucGFnZVkgLSAobi50b3AgKyB3aW5kb3cuc2Nyb2xsWSkgLSB0aGlzLmNhbnZhcy55KSAqIGUpID4+IDApLAogICAgICAgIChuID0gdGhpcy5zY2FsZSAtIGkpLAogICAgICAgICh0aGlzLmNhbnZhcy54ID0gKHRoaXMuY2FudmFzLnggLSBzICogbikgPj4gMCksCiAgICAgICAgKHRoaXMuY2FudmFzLnkgPSAodGhpcy5jYW52YXMueSAtIHQgKiBuKSA+PiAwKSwKICAgICAgICAodGhpcy5kb20uY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKAogICAgICAgICAgdGhpcy5jYW52YXMueCwKICAgICAgICAgIHRoaXMuY2FudmFzLnksCiAgICAgICAgICB0aGlzLnNjYWxlCiAgICAgICAgKSksCiAgICAgICAgKHRoaXMuZG9tLnJlZmVyZW5jZS5zdHlsZS50cmFuc2Zvcm0gPSBnZXRTdHlsZVRyYW5zZm9ybUNTUygKICAgICAgICAgIHRoaXMuY2FudmFzLngsCiAgICAgICAgICB0aGlzLmNhbnZhcy55LAogICAgICAgICAgdGhpcy5zY2FsZQogICAgICAgICkpLAogICAgICAgIHRoaXMudXBkYXRlWm9vbVRleHQoKSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS51cGRhdGVab29tVGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSB0aGlzLmN1cnJlbnRab29tOwogICAgICAwID09PSB0aGlzLmN1cnJlbnRab29tCiAgICAgICAgPyAodCA9ICIxOjEiKQogICAgICAgIDogMCA8IHRoaXMuY3VycmVudFpvb20gJiYgKHQgPSAiKyIgKyB0aGlzLmN1cnJlbnRab29tKSwKICAgICAgICB0aGlzLmRvbS56b29tLmNsYXNzTGlzdC5hZGQoInVwZGF0ZSIpLAogICAgICAgICh0aGlzLmRvbS56b29tLnRleHRDb250ZW50ID0gIlpvb20gIiArIHQpLAogICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuZG9tLnpvb20uY2xhc3NMaXN0LnJlbW92ZSgidXBkYXRlIik7CiAgICAgICAgICB9LmJpbmQodGhpcyksCiAgICAgICAgICA0MAogICAgICAgICk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5lbmRMaW5rID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJjbGluayIpCiAgICAgICAgPyB0aGlzLmJ1cy5lbWl0KCJuZXdfbGluayIsIFt0aGlzLnN0YXJ0UGluTGluaywgdC50YXJnZXQsIHRoaXMuc2NhbGVdKQogICAgICAgIDogdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCJzdmcubW92aW5nIikucmVtb3ZlKCk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS51bnNlbGVjdEFsbE5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciB0ID0gdGhpcy5kb20uY2FudmFzLnF1ZXJ5U2VsZWN0b3JBbGwoIi5ub2RlLnNlbGVjdGVkIiksCiAgICAgICAgICBlID0gMCwKICAgICAgICAgIHMgPSB0Lmxlbmd0aDsKICAgICAgICBlIDwgczsKICAgICAgICArK2UKICAgICAgKQogICAgICAgIHRbZV0uY2xhc3NMaXN0LnJlbW92ZSgic2VsZWN0ZWQiKTsKICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuYmVnaW5EcmF3TXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAodCkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlID0gdGhpcy5kb20uY2FudmFzLnF1ZXJ5U2VsZWN0b3JBbGwoIi5ub2RlLnNlbGVjdGVkIiksCiAgICAgICAgICBzID0gMCwKICAgICAgICAgIG4gPSBlLmxlbmd0aDsKICAgICAgICBzIDwgbjsKICAgICAgICArK3MKICAgICAgKQogICAgICAgIHRoaXMuc3RhdGVzLm5vZGVJRHNBbHJlYWR5U2VsZWN0ZWQucHVzaChlW3NdLmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpKTsKICAgICAgKHRoaXMuc3RhdGVzLm11bHRpU2VsZWN0SGFzQ3RybEtleSA9IHQuY3RybEtleSB8fCB0Lm1ldGFLZXkpLAogICAgICAgICh0aGlzLnN0YXRlcy5tdWx0aVNlbGVjdEhhc1NoaWZ0S2V5ID0gdC5zaGlmdEtleSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5kcmF3TXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSwKICAgICAgICBzLAogICAgICAgIG4gPSB7fSwKICAgICAgICBpID0ge30sCiAgICAgICAgbyA9IDAsCiAgICAgICAgYSA9IDAsCiAgICAgICAgciA9IFtdLAogICAgICAgIGwgPSAwLAogICAgICAgIGggPSAhMTsKICAgICAgZm9yICgKICAgICAgICB0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICB0aGlzLmNhbnZhcy54LAogICAgICAgICAgdGhpcy5jYW52YXMueSwKICAgICAgICAgIDEKICAgICAgICApLAogICAgICAgICAgZSA9IHsKICAgICAgICAgICAgdG9wOgogICAgICAgICAgICAgIChlID0gdGhpcy5kb20uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS50b3AgKwogICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxZLAogICAgICAgICAgICBsZWZ0OiBlLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCwKICAgICAgICAgIH0sCiAgICAgICAgICBuID0gewogICAgICAgICAgICBsZWZ0OiB0aGlzLmV2ZW50cy5wb2ludGVyRG93bi5wYWdlWCAvIHRoaXMuc2NhbGUsCiAgICAgICAgICAgIHRvcDogdGhpcy5ldmVudHMucG9pbnRlckRvd24ucGFnZVkgLyB0aGlzLnNjYWxlLAogICAgICAgICAgfSwKICAgICAgICAgIGkgPSB7IGxlZnQ6IHQucGFnZVggLyB0aGlzLnNjYWxlLCB0b3A6IHQucGFnZVkgLyB0aGlzLnNjYWxlIH0sCiAgICAgICAgICBuLnRvcCAtPSBlLnRvcCAvIHRoaXMuc2NhbGUsCiAgICAgICAgICBuLmxlZnQgLT0gZS5sZWZ0IC8gdGhpcy5zY2FsZSwKICAgICAgICAgIGkudG9wIC09IGUudG9wIC8gdGhpcy5zY2FsZSwKICAgICAgICAgIGkubGVmdCAtPSBlLmxlZnQgLyB0aGlzLnNjYWxlLAogICAgICAgICAgdCA9IE1hdGgubWluKG4ubGVmdCwgaS5sZWZ0KSwKICAgICAgICAgIGUgPSBNYXRoLm1pbihuLnRvcCwgaS50b3ApLAogICAgICAgICAgMCA9PT0gKG8gPSBNYXRoLm1heChuLmxlZnQsIGkubGVmdCkgLSBNYXRoLm1pbihuLmxlZnQsIGkubGVmdCkpICYmCiAgICAgICAgICAgIChvID0gMiksCiAgICAgICAgICAwID09PSAoYSA9IE1hdGgubWF4KG4udG9wLCBpLnRvcCkgLSBNYXRoLm1pbihuLnRvcCwgaS50b3ApKSAmJgogICAgICAgICAgICAoYSA9IDIpLAogICAgICAgICAgbnVsbCA9PT0gdGhpcy5kb20ubXVsdGlTZWxlY3QgJiYKICAgICAgICAgICAgKHRoaXMuZG9tLmNhbnZhcy5hcHBlbmRDaGlsZCgKICAgICAgICAgICAgICBjcmVhdGVFbGVtKCJkaXYiLCBbIm11bHRpLXNlbGVjdCJdLCBbXSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgKHRoaXMuZG9tLm11bHRpU2VsZWN0ID0KICAgICAgICAgICAgICB0aGlzLmRvbS5jYW52YXMucXVlcnlTZWxlY3RvcigiLm11bHRpLXNlbGVjdCIpKSksCiAgICAgICAgICB0aGlzLmRvbS5tdWx0aVNlbGVjdC5zdHlsZS5sZWZ0ID0gdCArICJweCIsCiAgICAgICAgICB0aGlzLmRvbS5tdWx0aVNlbGVjdC5zdHlsZS50b3AgPSBlICsgInB4IiwKICAgICAgICAgIHRoaXMuZG9tLm11bHRpU2VsZWN0LnN0eWxlLndpZHRoID0gbyArICJweCIsCiAgICAgICAgICB0aGlzLmRvbS5tdWx0aVNlbGVjdC5zdHlsZS5oZWlnaHQgPSBhICsgInB4IiwKICAgICAgICAgIHRoaXMuZG9tLm11bHRpU2VsZWN0LnN0eWxlLmJvcmRlckltYWdlV2lkdGggPQogICAgICAgICAgICAoKDYgLyB0aGlzLnNjYWxlKSA+PiAwKSArICJweCIsCiAgICAgICAgICBzID0gKHIgPSB0aGlzLmRvbS5jYW52YXMucXVlcnlTZWxlY3RvckFsbCgiLm5vZGUiKSkubGVuZ3RoOwogICAgICAgIGwgPCBzOwogICAgICAgICsrbAogICAgICApCiAgICAgICAgKHRoaXMuc3RhdGVzLm11bHRpU2VsZWN0SGFzU2hpZnRLZXkgJiYKICAgICAgICAgIC0xICE9PQogICAgICAgICAgICB0aGlzLnN0YXRlcy5ub2RlSURzQWxyZWFkeVNlbGVjdGVkLmluZGV4T2YoCiAgICAgICAgICAgICAgcltsXS5nZXRBdHRyaWJ1dGUoImRhdGEtaWQiKQogICAgICAgICAgICApKSB8fAogICAgICAgICAgKChoID0gaXNPdmVybGFwcGluZyh0aGlzLmRvbS5tdWx0aVNlbGVjdCwgcltsXSkpLAogICAgICAgICAgKGggPQogICAgICAgICAgICB0aGlzLnN0YXRlcy5tdWx0aVNlbGVjdEhhc0N0cmxLZXkgJiYKICAgICAgICAgICAgLTEgIT09CiAgICAgICAgICAgICAgdGhpcy5zdGF0ZXMubm9kZUlEc0FscmVhZHlTZWxlY3RlZC5pbmRleE9mKAogICAgICAgICAgICAgICAgcltsXS5nZXRBdHRyaWJ1dGUoImRhdGEtaWQiKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICA/ICFoCiAgICAgICAgICAgICAgOiBoKQogICAgICAgICAgICA/IHJbbF0uY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWQiKQogICAgICAgICAgICA6IHJbbF0uY2xhc3NMaXN0LnJlbW92ZSgic2VsZWN0ZWQiKSk7CiAgICAgIHRoaXMuZG9tLmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBnZXRTdHlsZVRyYW5zZm9ybUNTUygKICAgICAgICB0aGlzLmNhbnZhcy54LAogICAgICAgIHRoaXMuY2FudmFzLnksCiAgICAgICAgdGhpcy5zY2FsZQogICAgICApOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUucmVtb3ZlTXVsdGlTZWxlY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgIG51bGwgIT09IHRoaXMuZG9tLm11bHRpU2VsZWN0ICYmIHRoaXMuZG9tLm11bHRpU2VsZWN0LnJlbW92ZSgpLAogICAgICAgICh0aGlzLmRvbS5tdWx0aVNlbGVjdCA9IG51bGwpLAogICAgICAgICh0aGlzLnN0YXRlcy5ub2RlSURzQWxyZWFkeVNlbGVjdGVkID0gW10pLAogICAgICAgICh0aGlzLnN0YXRlcy5tdWx0aVNlbGVjdEhhc0N0cmxLZXkgPSAhMSksCiAgICAgICAgKHRoaXMuc3RhdGVzLm11bHRpU2VsZWN0SGFzU2hpZnRLZXkgPSAhMSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5jb3B5Tm9kZXNTZWxlY3RlZEluQ2xpcGJvYXJkID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgZm9yICh2YXIgcyA9IFtdLCBuID0gMCwgaSA9IGUubGVuZ3RoOyBuIDwgaTsgKytuKQogICAgICAgIHMucHVzaChlW25dLmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpKTsKICAgICAgdGhpcy5idXMuZW1pdCgiY29weV9ub2Rlc190b19jbGlwYm9hcmQiLCBbdCwgc10pOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUubW92ZUNhbnZhc1RvID0gZnVuY3Rpb24gKHQpIHsKICAgICAgKHRoaXMuY2FudmFzLnggPSB0LngpLAogICAgICAgICh0aGlzLmNhbnZhcy55ID0gdC55KSwKICAgICAgICAodGhpcy5yZXNldFBvc2l0aW9uLnggPSB0aGlzLmNhbnZhcy54KSwKICAgICAgICAodGhpcy5yZXNldFBvc2l0aW9uLnkgPSB0aGlzLmNhbnZhcy55KSwKICAgICAgICAodGhpcy5kb20uY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKAogICAgICAgICAgdC54LAogICAgICAgICAgdC55LAogICAgICAgICAgdGhpcy5zY2FsZQogICAgICAgICkpLAogICAgICAgICh0aGlzLmRvbS5yZWZlcmVuY2Uuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICB0LngsCiAgICAgICAgICB0LnksCiAgICAgICAgICB0aGlzLnNjYWxlCiAgICAgICAgKSk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5zZXRTY2FsZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlID0gMCwKICAgICAgICBzID0gMC4wNDsKICAgICAgZm9yICgKICAgICAgICB0aGlzLnNjYWxlID0gdCwgdGhpcy5jdXJyZW50Wm9vbSA9IDAsIGUgPSBMSU1JVF9aT09NX09VVDsKICAgICAgICBlIDw9IExJTUlUX1pPT01fSU47CiAgICAgICAgKytlCiAgICAgICkgewogICAgICAgIGlmIChzID09PSB0KSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRab29tID0gZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBzID0gZmxvYXRGaXhlZChzICsgWk9PTV9TVEVQLCAyKTsKICAgICAgfQogICAgICB0aGlzLnVwZGF0ZVpvb21UZXh0KCk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5wYW5lbFRvZ2dsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zdGF0ZXMuaXNQYW5lbE9wZW4KICAgICAgICA/ICh0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5wYW5lbCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSIpCiAgICAgICAgOiAodGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIucGFuZWwiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIiksCiAgICAgICAgKHRoaXMuc3RhdGVzLmlzUGFuZWxPcGVuID0gIXRoaXMuc3RhdGVzLmlzUGFuZWxPcGVuKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmZ1bGxzY3JlZW5Ub2dnbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0ID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIuYnVlLXJlbmRlciIpOwogICAgICBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudAogICAgICAgID8gKCh0aGlzLmRvbS5mcmFtZS5zdHlsZS5oZWlnaHQgPSB0aGlzLmZyYW1lU2l6ZSksCiAgICAgICAgICB0aGlzLmRvbS5idG5zCiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCIuZnJhbWUtaGVhZGVyX19idXR0b25zLWZ1bGxzY3JlZW4iKQogICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgiZnJhbWUtaGVhZGVyX19idXR0b25zLWZ1bGxzY3JlZW4tLWV4aXQiKSwKICAgICAgICAgICh0aGlzLnN0YXRlcy5pbkZ1bGxzY3JlZW4gPSAhMSksCiAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbgogICAgICAgICAgICA/IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCkKICAgICAgICAgICAgOiBkb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuICYmCiAgICAgICAgICAgICAgZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpKQogICAgICAgIDogdC5yZXF1ZXN0RnVsbHNjcmVlbgogICAgICAgID8gKHQucmVxdWVzdEZ1bGxzY3JlZW4oKSwKICAgICAgICAgICh0aGlzLmRvbS5mcmFtZS5zdHlsZS5oZWlnaHQgPSB3aW5kb3cuc2NyZWVuLmhlaWdodCArICJweCIpLAogICAgICAgICAgdGhpcy5kb20uYnRucwogICAgICAgICAgICAucXVlcnlTZWxlY3RvcigiLmZyYW1lLWhlYWRlcl9fYnV0dG9ucy1mdWxsc2NyZWVuIikKICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoImZyYW1lLWhlYWRlcl9fYnV0dG9ucy1mdWxsc2NyZWVuLS1leGl0IiksCiAgICAgICAgICAodGhpcy5zdGF0ZXMuaW5GdWxsc2NyZWVuID0gITApKQogICAgICAgIDogdC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiAmJgogICAgICAgICAgKHQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCksCiAgICAgICAgICAodGhpcy5kb20uZnJhbWUuc3R5bGUuaGVpZ2h0ID0gd2luZG93LnNjcmVlbi5oZWlnaHQgKyAicHgiKSwKICAgICAgICAgIHRoaXMuZG9tLmJ0bnMKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoIi5mcmFtZS1oZWFkZXJfX2J1dHRvbnMtZnVsbHNjcmVlbiIpCiAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCJpZnJhbWUtaGVhZGVyX19idXR0b25zLWZ1bGxzY3JlZW4tLWV4aXQiKSwKICAgICAgICAgICh0aGlzLnN0YXRlcy5pbkZ1bGxzY3JlZW4gPSAhMCkpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUucmVzZXRDYW52YXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICh0aGlzLnNjYWxlID0gMSksCiAgICAgICAgKHRoaXMuZG9tLmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBnZXRTdHlsZVRyYW5zZm9ybUNTUygKICAgICAgICAgIHRoaXMucmVzZXRQb3NpdGlvbi54LAogICAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uLnksCiAgICAgICAgICAxCiAgICAgICAgKSksCiAgICAgICAgKHRoaXMuZG9tLnJlZmVyZW5jZS5zdHlsZS50cmFuc2Zvcm0gPSBnZXRTdHlsZVRyYW5zZm9ybUNTUygKICAgICAgICAgIHRoaXMucmVzZXRQb3NpdGlvbi54LAogICAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uLnksCiAgICAgICAgICAxCiAgICAgICAgKSksCiAgICAgICAgKHRoaXMuY3VycmVudFpvb20gPSAwKSwKICAgICAgICB0aGlzLnVwZGF0ZVpvb21UZXh0KCk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5yZXNldFNjYWxlID0gZnVuY3Rpb24gKCkgewogICAgICAodGhpcy5zY2FsZSA9IDEpLAogICAgICAgICh0aGlzLmRvbS5jYW52YXMuc3R5bGUudHJhbnNmb3JtID0gZ2V0U3R5bGVUcmFuc2Zvcm1DU1MoCiAgICAgICAgICB0aGlzLmNhbnZhcy54LAogICAgICAgICAgdGhpcy5jYW52YXMueSwKICAgICAgICAgIHRoaXMuc2NhbGUKICAgICAgICApKSwKICAgICAgICAodGhpcy5kb20ucmVmZXJlbmNlLnN0eWxlLnRyYW5zZm9ybSA9IGdldFN0eWxlVHJhbnNmb3JtQ1NTKAogICAgICAgICAgdGhpcy5jYW52YXMueCwKICAgICAgICAgIHRoaXMuY2FudmFzLnksCiAgICAgICAgICB0aGlzLnNjYWxlCiAgICAgICAgKSksCiAgICAgICAgKHRoaXMuY3VycmVudFpvb20gPSAwKSwKICAgICAgICB0aGlzLnVwZGF0ZVpvb21UZXh0KCk7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS5zaG93T3ZlcmxheUZvclpvb20gPSBmdW5jdGlvbiAodCkgewogICAgICAodGhpcy5kb20ub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiKSwKICAgICAgICAodGhpcy5kb20ub3ZlcmxheS50ZXh0Q29udGVudCA9IHQpLAogICAgICAgIG51bGwgIT09IHRoaXMuc3RhdGVzLnRpbWVvdXRPdmVybGF5ICYmCiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZXMudGltZW91dE92ZXJsYXkpLAogICAgICAgICh0aGlzLnN0YXRlcy50aW1lb3V0T3ZlcmxheSA9IHdpbmRvdy5zZXRUaW1lb3V0KAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmhpZGVPdmVybGF5Rm9yWm9vbSwKICAgICAgICAgIDE1MDAKICAgICAgICApKTsKICAgIH0pLAogICAgKEludGVyYWN0b3IucHJvdG90eXBlLmV2ZW50SGlkZU92ZXJsYXlGb3Jab29tID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmRvbS5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9KSwKICAgIChJbnRlcmFjdG9yLnByb3RvdHlwZS51cGRhdGVEZWJ1Z0luZm9zID0gZnVuY3Rpb24gKCkgewogICAgICAhMSAhPT0gdGhpcy5zdGF0ZXMuZW5hYmxlRGVidWcgJiYKICAgICAgICAodGhpcy5kb20uZGVidWdJbmZvcy50ZXh0Q29udGVudCA9IHRoaXMuc3RhdGVzLnRvU3RyaW5nKCkpOwogICAgfSksCiAgICAoSW50ZXJhY3Rvci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQsCiAgICAgICAgZSA9IDA7CiAgICAgIGlmICgKICAgICAgICAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAibW91c2Vkb3duIiwKICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5mb2N1c1BsYXlncm91bmQKICAgICAgICApLAogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICAgICAgInRvdWNoc3RhcnQiLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmZvY3VzUGxheWdyb3VuZAogICAgICAgICksCiAgICAgICAgdGhpcy5kb20uY2FudmFzICYmCiAgICAgICAgICAodGhpcy5kb20uY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAgICJtb3VzZWRvd24iLAogICAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlckRvd24KICAgICAgICAgICksCiAgICAgICAgICB0aGlzLmRvbS5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgInRvdWNoc3RhcnQiLAogICAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlckRvd24sCiAgICAgICAgICAgIHsgcGFzc2l2ZTogITEgfQogICAgICAgICAgKSksCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIHRoaXMuZXZlbnRzQmluZGluZy5wb2ludGVyTW92ZSksCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAidG91Y2htb3ZlIiwKICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5wb2ludGVyTW92ZSwKICAgICAgICAgIHsgcGFzc2l2ZTogITEgfQogICAgICAgICksCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlclVwKSwKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLCB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlclVwLCB7CiAgICAgICAgICBwYXNzaXZlOiAhMSwKICAgICAgICB9KSwKICAgICAgICB0aGlzLmRvbS5jYW52YXMgJiYKICAgICAgICAgICh0aGlzLmRvbS5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgIndoZWVsIiwKICAgICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLnBvaW50ZXJXaGVlbAogICAgICAgICAgKSwKICAgICAgICAgIHRoaXMuZG9tLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICAgICAgICAiZGJsY2xpY2siLAogICAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcucG9pbnRlckRvdWJsZUNsaWNrCiAgICAgICAgICApKSwKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjb3B5IiwgdGhpcy5ldmVudHNCaW5kaW5nLmNvcHlOb2RlcyksCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFzdGUiLCB0aGlzLmV2ZW50c0JpbmRpbmcucGFzdGVOb2RlcyksCiAgICAgICAgdGhpcy5kb20uYnRucyAmJgogICAgICAgICAgdGhpcy5kb20uYnRucy5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICAgICAgICAiY2xpY2siLAogICAgICAgICAgICB0aGlzLmV2ZW50c0JpbmRpbmcuaGVhZGVyQnV0dG9ucwogICAgICAgICAgKSwKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICAgICAgIndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UiLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmV4aXRGdWxsc2NyZWVuSGFuZGxlckZvclJlc2l6aW5nCiAgICAgICAgKSwKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKAogICAgICAgICAgImZ1bGxzY3JlZW5jaGFuZ2UiLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmV4aXRGdWxsc2NyZWVuSGFuZGxlckZvclJlc2l6aW5nCiAgICAgICAgKSwKICAgICAgICB0aGlzLmRvbS5icmVhZGNydW1iICYmCiAgICAgICAgICB0aGlzLmRvbS5icmVhZGNydW1iLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAgICJjbGljayIsCiAgICAgICAgICAgIHRoaXMuZXZlbnRzQmluZGluZy5icmVhZGNydW1iCiAgICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLnBhbmVsQnRucykKICAgICAgKQogICAgICAgIGZvciAodCA9IHRoaXMuZG9tLnBhbmVsQnRucy5sZW5ndGg7IGUgPCB0OyArK2UpCiAgICAgICAgICB0aGlzLmRvbS5wYW5lbEJ0bnNbZV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgImNsaWNrIiwKICAgICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLnBhbmVsQnV0dG9ucwogICAgICAgICAgKTsKICAgICAgdGhpcy5kb20uY2FudmFzICYmCiAgICAgICAgdGhpcy5kb20uY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgICAiY29udGV4dG1lbnUiLAogICAgICAgICAgdGhpcy5ldmVudHNCaW5kaW5nLmNvbnRleHRNZW51CiAgICAgICAgKSwKICAgICAgICAodGhpcy5kb20uYnJlYWRjcnVtYiA9IG51bGwpLAogICAgICAgICh0aGlzLmRvbS5idG5zID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLmNhbnZhcyA9IG51bGwpLAogICAgICAgICh0aGlzLmRvbS5kZWJ1Z0luZm9zID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLmZyYW1lID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLm11bHRpU2VsZWN0ID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLm5vZGVNb3ZpbmcgPSBudWxsKSwKICAgICAgICAodGhpcy5kb20ubm9kZXNNb3ZpbmcgPSBbXSksCiAgICAgICAgKHRoaXMuZG9tLm92ZXJsYXkgPSBudWxsKSwKICAgICAgICAodGhpcy5kb20ucGFuZWwgPSBudWxsKSwKICAgICAgICAodGhpcy5kb20ucGFuZWxCdG5zID0gW10pLAogICAgICAgICh0aGlzLmRvbS5yb290ID0gbnVsbCksCiAgICAgICAgKHRoaXMuZG9tLnpvb20gPSBudWxsKTsKICAgIH0pOwogIHZhciBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX09CSkVDVCA9IFsKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJFZEdyYXBoTm9kZV9Db21tZW50IiwgTm9kZUNvbnN0cnVjdG9yOiBOQ29tbWVudCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9WYXJpYWJsZUdldCIsIE5vZGVDb25zdHJ1Y3RvcjogTlZhcmlhYmxlR2V0IH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0xpdGVyYWwiLCBOb2RlQ29uc3RydWN0b3I6IE5WYXJpYWJsZUdldCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9WYXJpYWJsZVNldCIsIE5vZGVDb25zdHJ1Y3RvcjogTlZhcmlhYmxlU2V0IH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0NyZWF0ZURlbGVnYXRlIiwgTm9kZUNvbnN0cnVjdG9yOiBORGVsZWdhdGUgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRXZlbnQiLCBOb2RlQ29uc3RydWN0b3I6IE5FdmVudCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Db21wb25lbnRCb3VuZEV2ZW50IiwgTm9kZUNvbnN0cnVjdG9yOiBORXZlbnQgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfSW5wdXRBeGlzRXZlbnQiLCBOb2RlQ29uc3RydWN0b3I6IE5FdmVudCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9BY3RvckJvdW5kRXZlbnQiLCBOb2RlQ29uc3RydWN0b3I6IE5FdmVudCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9DdXN0b21FdmVudCIsIE5vZGVDb25zdHJ1Y3RvcjogTkV2ZW50Q3VzdG9tIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0lmVGhlbkVsc2UiLCBOb2RlQ29uc3RydWN0b3I6IE5JZlRoZW5FbHNlIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0lucHV0QWN0aW9uIiwgTm9kZUNvbnN0cnVjdG9yOiBOSW5wdXRBY3Rpb24gfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfU2VsZiIsIE5vZGVDb25zdHJ1Y3RvcjogTlNlbGYgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfS25vdCIsIE5vZGVDb25zdHJ1Y3RvcjogTktub3QgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfSW5wdXRLZXkiLCBOb2RlQ29uc3RydWN0b3I6IE5JbnB1dEtleSB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9JbnB1dFRvdWNoIiwgTm9kZUNvbnN0cnVjdG9yOiBOSW5wdXRLZXkgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfSW5wdXRBeGlzS2V5RXZlbnQiLCBOb2RlQ29uc3RydWN0b3I6IE5JbnB1dEtleSB9LAogICAgewogICAgICBibHVlcHJpbnRDbGFzczogIk1hdGVyaWFsR3JhcGhOb2RlX1Jvb3QiLAogICAgICBOb2RlQ29uc3RydWN0b3I6IE5NYXRlcmlhbEdyYXBoTm9kZVJvb3QsCiAgICB9LAogICAgewogICAgICBibHVlcHJpbnRDbGFzczogIk1hdGVyaWFsR3JhcGhOb2RlX0NvbW1lbnQiLAogICAgICBOb2RlQ29uc3RydWN0b3I6IE5NYXRlcmlhbEdyYXBoTm9kZUNvbW1lbnQsCiAgICB9LAogICAgewogICAgICBibHVlcHJpbnRDbGFzczogIk1hdGVyaWFsR3JhcGhOb2RlIiwKICAgICAgTm9kZUNvbnN0cnVjdG9yOiBOTWF0ZXJpYWxHcmFwaE5vZGUsCiAgICB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9FbnVtRXF1YWxpdHkiLCBOb2RlQ29uc3RydWN0b3I6IE5LaXNtZXRNYXRoIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0VudW1JbmVxdWFsaXR5IiwgTm9kZUNvbnN0cnVjdG9yOiBOS2lzbWV0TWF0aCB9LAogICAgewogICAgICBibHVlcHJpbnRDbGFzczogIksyTm9kZV9HZXRFbnVtZXJhdG9yTmFtZUFzU3RyaW5nIiwKICAgICAgTm9kZUNvbnN0cnVjdG9yOiBOQ29udiwKICAgIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0Nhc3RCeXRlVG9FbnVtIiwgTm9kZUNvbnN0cnVjdG9yOiBOQ29udiB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Db252ZXJ0QXNzZXQiLCBOb2RlQ29uc3RydWN0b3I6IE5Db252IH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0NvbXBvc2l0ZSIsIE5vZGVDb25zdHJ1Y3RvcjogTkNvbXBvc2l0ZSB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIkFuaW1TdGF0ZU5vZGUiLCBOb2RlQ29uc3RydWN0b3I6IE5BbmltU3RhdGUgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJBbmltU3RhdGVFbnRyeU5vZGUiLCBOb2RlQ29uc3RydWN0b3I6IE5BbmltU3RhdGVFbnRyeSB9LAogICAgewogICAgICBibHVlcHJpbnRDbGFzczogIkFuaW1TdGF0ZVRyYW5zaXRpb25Ob2RlIiwKICAgICAgTm9kZUNvbnN0cnVjdG9yOiBOQW5pbVN0YXRlVHJhbnNpdGlvbiwKICAgIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiTWV0YXNvdW5kRWRpdG9yIiwgTm9kZUNvbnN0cnVjdG9yOiBOTWV0YXNvdW5kIH0sCiAgICB7CiAgICAgIGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0VuaGFuY2VkSW5wdXRBY3Rpb24iLAogICAgICBOb2RlQ29uc3RydWN0b3I6IE5FbmhhbmNlZElucHV0QWN0aW9uLAogICAgfSwKICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfSW5wdXREZWJ1Z0tleSIsIE5vZGVDb25zdHJ1Y3RvcjogTklucHV0S2V5IH0sCiAgICB7CiAgICAgIGJsdWVwcmludENsYXNzOiAiTmlhZ2FyYUNsaXBib2FyZENvbnRlbnQiLAogICAgICBOb2RlQ29uc3RydWN0b3I6IE5OaWFnYXJhQ2xpcGJvYXJkQ29udGVudCwKICAgIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiTmlhZ2FyYU5vZGVSZXJvdXRlIiwgTm9kZUNvbnN0cnVjdG9yOiBOS25vdCB9LAogICAgeyBibHVlcHJpbnRDbGFzczogIk5pYWdhcmFFZGl0b3IiLCBOb2RlQ29uc3RydWN0b3I6IE5OaWFnYXJhIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiUENHRWRpdG9yR3JhcGhOb2RlIiwgTm9kZUNvbnN0cnVjdG9yOiBOUENHIH0sCiAgICB7CiAgICAgIGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0dldEVuZ2luZVN1YnN5c3RlbSIsCiAgICAgIE5vZGVDb25zdHJ1Y3RvcjogTlN1YnN5c3RlbSwKICAgIH0sCiAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0dldFN1YnN5c3RlbSIsIE5vZGVDb25zdHJ1Y3RvcjogTlN1YnN5c3RlbSB9LAogIF07CiAgZnVuY3Rpb24gSW50ZXJwcmV0ZXIoKSB7CiAgICAodGhpcy50ZXh0ID0gIiIpLAogICAgICAodGhpcy5saW5lcyA9IFtdKSwKICAgICAgKHRoaXMuY291bnRMaW5lcyA9IDApLAogICAgICAodGhpcy5ub2RlcyA9IFtdKSwKICAgICAgKHRoaXMuY3VycmVudE5vZGUgPSBudWxsKSwKICAgICAgKHRoaXMucHJldmlvdXNOb2RlcyA9IFtdKSwKICAgICAgKHRoaXMudHlwZSA9ICJibHVlcHJpbnQiKSwKICAgICAgKHRoaXMuaXNCZWxvdzQxM1ZlcnNpb24gPSAhMSksCiAgICAgICh0aGlzLmlzQmVsb3c1MlZlcnNpb24gPSAhMSksCiAgICAgICh0aGlzLmdyYXBoUGlucyA9IHt9KSwKICAgICAgKHRoaXMuaW5HcmFwaFBpbkRlY2xhcmF0aW9uID0gITEpLAogICAgICAodGhpcy5pbkdyYXBoUGluRGVmaW5pdGlvbiA9ICExKSwKICAgICAgKHRoaXMuY3VycmVudEdyYXBoUGluTmFtZSA9IG51bGwpOwogIH0KICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLnBhcnNlVGV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gKAogICAgICAodGhpcy50ZXh0ID0gZSksCiAgICAgIHRoaXMuZGV0ZWN0VW5yZWFsVmVyc2lvbigpLAogICAgICB0aGlzLmNsZWFuVGV4dCgpLAogICAgICB0aGlzLmRldGVjdFR5cGUoKSwKICAgICAgdGhpcy5zcGxpdFRleHRJbkNsZWFuTGluZXMoKSwKICAgICAgdGhpcy5wYXJzZUxpbmVzKCksCiAgICAgIHRoaXMuaW5zcGVjdE5vZGVzKCksCiAgICAgIHRoaXMubm9kZXMKICAgICk7CiAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmRldGVjdFVucmVhbFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIC0xID09PSB0aGlzLnRleHQuaW5kZXhPZigiQ3VzdG9tUHJvcGVydGllcyBQaW4iKSAmJgogICAgICAgIC0xID09PSB0aGlzLnRleHQuaW5kZXhPZigiRXhwb3J0ZWROb2RlcyIpICYmCiAgICAgICAgKHRoaXMuaXNCZWxvdzQxM1ZlcnNpb24gPSAhMCksCiAgICAgICAgLTEgPT09IHRoaXMudGV4dC5pbmRleE9mKCciTm9kZUd1aWQiJykgJiYgKHRoaXMuaXNCZWxvdzUyVmVyc2lvbiA9ICEwKTsKICAgIH0pLAogICAgKEludGVycHJldGVyLnByb3RvdHlwZS5jbGVhblRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC50cmltKCk7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuZGV0ZWN0VHlwZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgLTEgIT09IHRoaXMudGV4dC5pbmRleE9mKCJCZWhhdmlvclRyZWVHcmFwaE5vZGVfIikgfHwKICAgICAgLTEgIT09IHRoaXMudGV4dC5pbmRleE9mKCJCZWhhdmlvclRyZWVEZWNvcmF0b3JHcmFwaE5vZGVfIikKICAgICAgICA/ICh0aGlzLnR5cGUgPSAiQmVoYXZpb3IgVHJlZSIpCiAgICAgICAgOiAtMSAhPT0gdGhpcy50ZXh0LmluZGV4T2YoIk1hdGVyaWFsR3JhcGhOb2RlIikKICAgICAgICA/ICh0aGlzLnR5cGUgPSAiTWF0ZXJpYWwiKQogICAgICAgIDogLTEgIT09IHRoaXMudGV4dC5pbmRleE9mKCJBbmltR3JhcGhOb2RlXyIpCiAgICAgICAgPyAodGhpcy50eXBlID0gIkFuaW1hdGlvbiIpCiAgICAgICAgOiAtMSAhPT0gdGhpcy50ZXh0LmluZGV4T2YoIi9TY3JpcHQvTWV0YXNvdW5kRWRpdG9yIikKICAgICAgICA/ICh0aGlzLnR5cGUgPSAiTWV0YXNvdW5kIikKICAgICAgICA6IC0xICE9PSB0aGlzLnRleHQuaW5kZXhPZigiL1NjcmlwdC9OaWFnYXJhRWRpdG9yIikKICAgICAgICA/ICh0aGlzLnR5cGUgPSAiTmlhZ2FyYSIpCiAgICAgICAgOiAtMSAhPT0gdGhpcy50ZXh0LmluZGV4T2YoIlBDR0VkaXRvckdyYXBoTm9kZSIpICYmICh0aGlzLnR5cGUgPSAiUENHIik7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuc3BsaXRUZXh0SW5DbGVhbkxpbmVzID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IDA7CiAgICAgIGZvciAoCiAgICAgICAgdGhpcy5saW5lcyA9IHRoaXMudGV4dC5zcGxpdCgvXG4vZyksCiAgICAgICAgICB0aGlzLmNvdW50TGluZXMgPSB0aGlzLmxpbmVzLmxlbmd0aDsKICAgICAgICBlIDwgdGhpcy5jb3VudExpbmVzOwogICAgICAgICsrZQogICAgICApCiAgICAgICAgdGhpcy5saW5lc1tlXSA9IHRoaXMubGluZXNbZV0udHJpbSgpOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLnBhcnNlTGluZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGUsIHQgPSAwOyB0IDwgdGhpcy5jb3VudExpbmVzOyArK3QpIHsKICAgICAgICBpZiAodGhpcy5pc0JlbG93NDEzVmVyc2lvbikgewogICAgICAgICAgaWYgKHRoaXMuaXNOZXdHcmFwaFBpbkRlY2xhcmF0aW9uKHRoaXMubGluZXNbdF0pKSB7CiAgICAgICAgICAgIHRoaXMuYWRkR3JhcGhQaW5EZWNsYXJhdGlvbih0aGlzLmxpbmVzW3RdKSwKICAgICAgICAgICAgICAodGhpcy5pbkdyYXBoUGluRGVjbGFyYXRpb24gPSAhMCksCiAgICAgICAgICAgICAgKHRoaXMuaW5HcmFwaFBpbkRlZmluaXRpb24gPSAhMSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuaXNFbmRHcmFwaFBpbkRlY2xhcmF0aW9uKHRoaXMubGluZXNbdF0pKSB7CiAgICAgICAgICAgICh0aGlzLmluR3JhcGhQaW5EZWNsYXJhdGlvbiA9ICExKSwgKHRoaXMuaW5HcmFwaFBpbkRlZmluaXRpb24gPSAhMSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuaXNHcmFwaFBpbkRlZmluaXRpb24odGhpcy5saW5lc1t0XSkpIHsKICAgICAgICAgICAgKHRoaXMuaW5HcmFwaFBpbkRlY2xhcmF0aW9uID0gITEpLCAodGhpcy5pbkdyYXBoUGluRGVmaW5pdGlvbiA9ICEwKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5pc0VuZEdyYXBoUGluRGVmaW5pdGlvbih0aGlzLmxpbmVzW3RdKSkgewogICAgICAgICAgICAodGhpcy5pbkdyYXBoUGluRGVjbGFyYXRpb24gPSAhMSksICh0aGlzLmluR3JhcGhQaW5EZWZpbml0aW9uID0gITEpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghMCA9PT0gdGhpcy5pbkdyYXBoUGluRGVmaW5pdGlvbikgewogICAgICAgICAgICAoZSA9IGNvbnZlcnRUZXh0VG9Qcm9wcyh0aGlzLmxpbmVzW3RdKSksCiAgICAgICAgICAgICAgdGhpcy5ncmFwaFBpbnNbdGhpcy5jdXJyZW50R3JhcGhQaW5OYW1lXS5hZGRQcm9wKGUpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5pc05ld05vZGUodGhpcy5saW5lc1t0XSkKICAgICAgICAgID8gdGhpcy5jcmVhdGVOb2RlKHRoaXMubGluZXNbdF0pCiAgICAgICAgICA6IHRoaXMuaXNFbmROb2RlKHRoaXMubGluZXNbdF0pCiAgICAgICAgICA/ICh0aGlzLmlzQmVsb3c0MTNWZXJzaW9uICYmCiAgICAgICAgICAgICAgKHRoaXMuY3VycmVudE5vZGUucGlucyA9IHRoaXMucmVvcmRlckdyYXBoUGlucygpKSwKICAgICAgICAgICAgdGhpcy5jaGFuZ2VOb2RlSWZOZWNlc3NhcnkoKSwKICAgICAgICAgICAgdGhpcy5jbG9zZU5vZGUoKSkKICAgICAgICAgIDogdGhpcy50cmVhdExpbmUodGhpcy5saW5lc1t0XSk7CiAgICAgIH0KICAgIH0pLAogICAgKEludGVycHJldGVyLnByb3RvdHlwZS5pc05ld0dyYXBoUGluRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gITAgPT09IC9eQmVnaW4gT2JqZWN0IENsYXNzPUVkR3JhcGhQaW4vaS50ZXN0KGUpOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmFkZEdyYXBoUGluRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgZSA9IGV4dHJhY3RPYmplY3REZWZpbml0aW9uKGUpLAogICAgICAgIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUoZSwgIk5hbWUiKSwKICAgICAgICB0ID0gbmV3IFBpbigpOwogICAgICAodC5pc0JlbG93NDEzVmVyc2lvbiA9ICEwKSwgKHQuaWQgPSBlLnZhbHVlKSwgKHRoaXMuZ3JhcGhQaW5zW3QuaWRdID0gdCk7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuZXh0cmFjdEdyYXBoUGluTmFtZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZS5pbmRleE9mKCdOYW1lPSInKTsKICAgICAgcmV0dXJuIGUuc3Vic3RyaW5nKHQgKyA2KS5yZXBsYWNlKCciJywgIiIpOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmlzRW5kR3JhcGhQaW5EZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAhMCA9PT0gL15FbmQgT2JqZWN0L2kudGVzdChlKSAmJiAhMCA9PT0gdGhpcy5pbkdyYXBoUGluRGVjbGFyYXRpb247CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaXNHcmFwaFBpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoITAgPT09IC9eQmVnaW4gT2JqZWN0L2kudGVzdChlKSkgewogICAgICAgIGlmICgtMSA9PT0gZS5pbmRleE9mKCJFZEdyYXBoUGluIikpIHJldHVybiAhMTsKICAgICAgICBpZiAoKChlID0gdGhpcy5leHRyYWN0R3JhcGhQaW5OYW1lKGUpKSwgdm9pZCAwICE9PSB0aGlzLmdyYXBoUGluc1tlXSkpCiAgICAgICAgICByZXR1cm4gKHRoaXMuY3VycmVudEdyYXBoUGluTmFtZSA9IGUpLCAhMDsKICAgICAgfQogICAgICByZXR1cm4gITE7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaXNFbmRHcmFwaFBpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gITAgPT09IC9eRW5kIE9iamVjdC9pLnRlc3QoZSkgJiYgITAgPT09IHRoaXMuaW5HcmFwaFBpbkRlZmluaXRpb247CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaXNOZXdOb2RlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICEwID09PSAvXkJlZ2luIE9iamVjdC9pLnRlc3QoZSk7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuY3JlYXRlTm9kZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIG51bGwgIT09IHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5wcmV2aW91c05vZGVzLnB1c2godGhpcy5jdXJyZW50Tm9kZSksCiAgICAgICAgKHRoaXMuY3VycmVudE5vZGUgPSB0aGlzLm5vZGVGYWN0b3J5KGUpKSwKICAgICAgICB0aGlzLmN1cnJlbnROb2RlLnRyZWF0KGUpLAogICAgICAgICh0aGlzLmN1cnJlbnROb2RlLmlzQmVsb3c0MTNWZXJzaW9uID0gdGhpcy5pc0JlbG93NDEzVmVyc2lvbiksCiAgICAgICAgKHRoaXMuY3VycmVudE5vZGUuaXNCZWxvdzUyVmVyc2lvbiA9IHRoaXMuaXNCZWxvdzUyVmVyc2lvbik7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUucmVvcmRlckdyYXBoUGlucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSA9IDAsIHQgPSB0aGlzLmN1cnJlbnROb2RlLnByb3BzLmxlbmd0aCwgciA9IFtdLCBuID0gMCwgaSA9IFtdOwogICAgICAgIGUgPCB0OwogICAgICAgICsrZQogICAgICApCiAgICAgICAgIlBpbnMoIiA9PT0gdGhpcy5jdXJyZW50Tm9kZS5wcm9wc1tlXS5uYW1lLnN1YnN0cmluZygwLCA1KSAmJgogICAgICAgICAgKGlbCiAgICAgICAgICAgIChuID0gcGFyc2VJbnQoCiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS5wcm9wc1tlXS5uYW1lLnN1YnN0cmluZygKICAgICAgICAgICAgICAgIDUsCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLnByb3BzW2VdLm5hbWUubGVuZ3RoIC0gMQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgMTAKICAgICAgICAgICAgKSkKICAgICAgICAgIF0gPSB0aGlzLmN1cnJlbnROb2RlLnByb3BzW2VdLnZhbHVlLnN1YnN0cmluZygKICAgICAgICAgICAgMTEsCiAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUucHJvcHNbZV0udmFsdWUubGVuZ3RoIC0gMQogICAgICAgICAgKSk7CiAgICAgIGZvciAobiA9IDA7IG4gPCBpLmxlbmd0aDsgKytuKQogICAgICAgIHZvaWQgMCAhPT0gaVtuXSAmJgogICAgICAgICAgdm9pZCAwICE9PSB0aGlzLmdyYXBoUGluc1tpW25dXSAmJgogICAgICAgICAgci5wdXNoKHRoaXMuZ3JhcGhQaW5zW2lbbl1dKTsKICAgICAgcmV0dXJuIHI7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaXNFbmROb2RlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICEwID09PSAvXkVuZCBPYmplY3QvaS50ZXN0KGUpOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmNoYW5nZU5vZGVJZk5lY2Vzc2FyeSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBudWxsOwogICAgICBpZiAodGhpcy5pc0N1c3RvbU5vZGUoKSkgcmV0dXJuICExOwogICAgICB0aGlzLmlzQ29udk5vZGUoKQogICAgICAgID8gKChlID0gbmV3IE5Db252KCkpLCB0aGlzLnJlcGxhY2VOb2RlKGUpKQogICAgICAgIDogdGhpcy5pc0tpc21ldE1hdGhOb2RlKCkKICAgICAgICA/ICgoZSA9IG5ldyBOS2lzbWV0TWF0aCgpKSwgdGhpcy5yZXBsYWNlTm9kZShlKSkKICAgICAgICA6IHRoaXMuaXNEb3ROb2RlKCkKICAgICAgICA/ICgoZSA9IG5ldyBORG90KCkpLCB0aGlzLnJlcGxhY2VOb2RlKGUpKQogICAgICAgIDogdGhpcy5pc0FycmF5Tm9kZSgpICYmICgoZSA9IG5ldyBOQXJyYXkoKSksIHRoaXMucmVwbGFjZU5vZGUoZSkpOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmNsb3NlTm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCwKICAgICAgICByID0gbnVsbCwKICAgICAgICBuID0gMDsKICAgICAgaWYgKDAgPCB0aGlzLnByZXZpb3VzTm9kZXMubGVuZ3RoKQogICAgICAgIChyID0gdGhpcy5wcmV2aW91c05vZGVzLnBvcCgpKS5ub2Rlcy5wdXNoKHRoaXMuY3VycmVudE5vZGUpLAogICAgICAgICAgKHRoaXMuY3VycmVudE5vZGUgPSByKTsKICAgICAgZWxzZSB7CiAgICAgICAgaWYgKCJOTmlhZ2FyYUNsaXBib2FyZENvbnRlbnQiID09PSB0aGlzLmN1cnJlbnROb2RlLmNvbnN0cnVjdG9yLm5hbWUpCiAgICAgICAgICBmb3IgKAogICAgICAgICAgICB0ID0gKGUgPSBuZXcgSW50ZXJwcmV0ZXIoKS5wYXJzZVRleHQoCiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS5nZXRFeHBvcnRlZE5vZGVzKCkKICAgICAgICAgICAgKSkubGVuZ3RoOwogICAgICAgICAgICBuIDwgdDsKICAgICAgICAgICAgKytuCiAgICAgICAgICApCiAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChlW25dKTsKICAgICAgICBlbHNlIHRoaXMubm9kZXMucHVzaCh0aGlzLmN1cnJlbnROb2RlKTsKICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gbnVsbDsKICAgICAgfQogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLnRyZWF0TGluZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIG51bGwgIT09IHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZS50cmVhdChlKTsKICAgIH0pLAogICAgKEludGVycHJldGVyLnByb3RvdHlwZS5ub2RlRmFjdG9yeSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIHQgPSAwLAogICAgICAgICAgciA9IEVRVUlWQUxFTkNFX01BUF9CTFVFUFJJTlRfQ0xBU1NfVE9fT0JKRUNULmxlbmd0aCwKICAgICAgICAgIG4gPSBudWxsOwogICAgICAgIHQgPCByOwogICAgICAgICsrdAogICAgICApCiAgICAgICAgaWYgKAogICAgICAgICAgLTEgIT09CiAgICAgICAgICBlLmluZGV4T2YoRVFVSVZBTEVOQ0VfTUFQX0JMVUVQUklOVF9DTEFTU19UT19PQkpFQ1RbdF0uYmx1ZXByaW50Q2xhc3MpCiAgICAgICAgKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICF0aGlzLmlzQmVsb3c1MlZlcnNpb24gJiYKICAgICAgICAgICAgIk1hdGVyaWFsR3JhcGhOb2RlIiA9PT0KICAgICAgICAgICAgICBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX09CSkVDVFt0XS5ibHVlcHJpbnRDbGFzcyAmJgogICAgICAgICAgICBudWxsICE9PSB0aGlzLmN1cnJlbnROb2RlICYmCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgIFsiTk1hdGVyaWFsR3JhcGhOb2RlIl0uaW5kZXhPZih0aGlzLmN1cnJlbnROb2RlLmNvbnN0cnVjdG9yLm5hbWUpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBuZXcgQmFzaWNPYmplY3QoKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIksyTm9kZV9Db21wb3NpdGUiICE9PQogICAgICAgICAgICAgIEVRVUlWQUxFTkNFX01BUF9CTFVFUFJJTlRfQ0xBU1NfVE9fT0JKRUNUW3RdLmJsdWVwcmludENsYXNzIHx8CiAgICAgICAgICAgICgobiA9IG5ldyBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX09CSkVDVFsKICAgICAgICAgICAgICB0CiAgICAgICAgICAgIF0uTm9kZUNvbnN0cnVjdG9yKCkpLnRyZWF0KGUpLAogICAgICAgICAgICBuLmlzUmVhbENvbXBvc2l0ZU5vZGUoKSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIG5ldyBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX09CSkVDVFsKICAgICAgICAgICAgICB0CiAgICAgICAgICAgIF0uTm9kZUNvbnN0cnVjdG9yKCk7CiAgICAgICAgfQogICAgICByZXR1cm4gbmV3ICgKICAgICAgICBudWxsICE9PSB0aGlzLmN1cnJlbnROb2RlICYmCiAgICAgICAgLTEgIT09IFsiTk1hdGVyaWFsR3JhcGhOb2RlIl0uaW5kZXhPZih0aGlzLmN1cnJlbnROb2RlLmNvbnN0cnVjdG9yLm5hbWUpCiAgICAgICAgICA/IEJhc2ljT2JqZWN0CiAgICAgICAgICA6IFVOb2RlCiAgICAgICkoKTsKICAgIH0pLAogICAgKEludGVycHJldGVyLnByb3RvdHlwZS5pc0N1c3RvbU5vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAhKHRoaXMuY3VycmVudE5vZGUgaW5zdGFuY2VvZiBVTm9kZSk7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaXNDb252Tm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBudWxsLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5jdXJyZW50Tm9kZS5wcm9wcywgIkZ1bmN0aW9uUmVmZXJlbmNlIik7CiAgICAgIHJldHVybiAoCiAgICAgICAgbnVsbCAhPT0gdCAmJgogICAgICAgIChudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0LnZhbHVlLCAiTWVtYmVyUGFyZW50IikpIHx8CiAgICAgICAgICBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0LnZhbHVlLCAiTWVtYmVyUGFyZW50Q2xhc3MiKSkpICYmCiAgICAgICAgLTEgIT09CiAgICAgICAgICBzZWFyY2hQcm9wV2l0aE5hbWUodC52YWx1ZSwgIk1lbWJlck5hbWUiKS52YWx1ZS5pbmRleE9mKCJDb252XyIpICYmCiAgICAgICAgKC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIktpc21ldE1hdGhMaWJyYXJ5IikgfHwKICAgICAgICAgIC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIktpc21ldFN0cmluZ0xpYnJhcnkiKSB8fAogICAgICAgICAgLTEgIT09IGUudmFsdWUuaW5kZXhPZigiS2lzbWV0VGV4dExpYnJhcnkiKSB8fAogICAgICAgICAgLTEgIT09IGUudmFsdWUuaW5kZXhPZigiS2lzbWV0U3lzdGVtTGlicmFyeSIpKQogICAgICApOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmlzS2lzbWV0TWF0aE5vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gbnVsbCwKICAgICAgICB0ID0gbnVsbCwKICAgICAgICByID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMuY3VycmVudE5vZGUucHJvcHMsICJNYWNyb0dyYXBoUmVmZXJlbmNlIik7CiAgICAgIHJldHVybiAoCiAgICAgICAgKG51bGwgIT09IHIgJiYKICAgICAgICAgICgtMSAhPT0KICAgICAgICAgICAgKHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUoci52YWx1ZSwgIk1hY3JvR3JhcGgiKSkudmFsdWUuaW5kZXhPZigKICAgICAgICAgICAgICAiU3RhbmRhcmRNYWNyb3M6SW5jcmVtZW50IgogICAgICAgICAgICApIHx8CiAgICAgICAgICAgIC0xICE9PSB0LnZhbHVlLmluZGV4T2YoIlN0YW5kYXJkTWFjcm9zOkRlY3JlbWVudCIpKSkgfHwKICAgICAgICAobnVsbCAhPT0KICAgICAgICAgIChyID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLnByb3BzLAogICAgICAgICAgICAiRnVuY3Rpb25SZWZlcmVuY2UiCiAgICAgICAgICApKSAmJgogICAgICAgICAgKG51bGwgPT09IChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHIudmFsdWUsICJNZW1iZXJQYXJlbnQiKSkgJiYKICAgICAgICAgICAgKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUoci52YWx1ZSwgIk1lbWJlclBhcmVudENsYXNzIikpLAogICAgICAgICAgKHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUoci52YWx1ZSwgIk1lbWJlck5hbWUiKSksCiAgICAgICAgICBudWxsICE9PSBlICYmCiAgICAgICAgICAgIG51bGwgIT09IHQgJiYKICAgICAgICAgICAgLTEgIT09IGUudmFsdWUuaW5kZXhPZigiS2lzbWV0TWF0aExpYnJhcnkiKSAmJgogICAgICAgICAgICAhMSAhPT0gZ2V0S2lzbWV0TWF0aFRleHQodC52YWx1ZSkpKQogICAgICApOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmlzRG90Tm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBudWxsLAogICAgICAgIHQgPSBudWxsLAogICAgICAgIHIgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5jdXJyZW50Tm9kZS5wcm9wcywgIkZ1bmN0aW9uUmVmZXJlbmNlIik7CiAgICAgIHJldHVybiAoCiAgICAgICAgbnVsbCAhPT0gciAmJgogICAgICAgICgoZSA9IHNlYXJjaFByb3BXaXRoTmFtZShyLnZhbHVlLCAiTWVtYmVyUGFyZW50IikpLAogICAgICAgICh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHIudmFsdWUsICJNZW1iZXJOYW1lIikpLAogICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgIG51bGwgIT09IHQgJiYKICAgICAgICAgICEoCiAgICAgICAgICAgICgtMSA9PT0gdC52YWx1ZS5pbmRleE9mKCJEb3RfVmVjdG9yVmVjdG9yIikgJiYKICAgICAgICAgICAgICAtMSA9PT0gdC52YWx1ZS5pbmRleE9mKCJEb3RQcm9kdWN0MkQiKSkgfHwKICAgICAgICAgICAgKC0xID09PSBlLnZhbHVlLmluZGV4T2YoIktpc21ldE1hdGhMaWJyYXJ5IikgJiYKICAgICAgICAgICAgICAtMSA9PT0gZS52YWx1ZS5pbmRleE9mKCJLaXNtZXRTdHJpbmdMaWJyYXJ5IikpCiAgICAgICAgICApKQogICAgICApOwogICAgfSksCiAgICAoSW50ZXJwcmV0ZXIucHJvdG90eXBlLmlzQXJyYXlOb2RlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLmN1cnJlbnROb2RlLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpOwogICAgICBpZiAobnVsbCAhPT0gZSkgewogICAgICAgIGlmICgtMSAhPT0gZS52YWx1ZS5pbmRleE9mKCJLMk5vZGVfR2V0QXJyYXlJdGVtIikpIHJldHVybiAhMDsKICAgICAgICBpZiAoLTEgIT09IGUudmFsdWUuaW5kZXhPZigiSzJOb2RlX0NhbGxBcnJheUZ1bmN0aW9uIikpCiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAgIChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS5wcm9wcywKICAgICAgICAgICAgICAgICJGdW5jdGlvblJlZmVyZW5jZSIKICAgICAgICAgICAgICApKSAmJgogICAgICAgICAgICAhKAogICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgIHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTWVtYmVyTmFtZSIpLnZhbHVlLmluZGV4T2YoCiAgICAgICAgICAgICAgICAiQXJyYXlfU2V0IgogICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gITE7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUucmVwbGFjZU5vZGUgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IG51bGw7CiAgICAgIGZvciAodCBpbiB0aGlzLmN1cnJlbnROb2RlKQogICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmN1cnJlbnROb2RlLCB0KSAmJgogICAgICAgICAgKGVbdF0gPSB0aGlzLmN1cnJlbnROb2RlW3RdKTsKICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IGU7CiAgICB9KSwKICAgIChJbnRlcnByZXRlci5wcm90b3R5cGUuaW5zcGVjdE5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBlID0gMCwgdCA9IHRoaXMubm9kZXMubGVuZ3RoOyBlIDwgdDsgKytlKQogICAgICAgIHRoaXMubm9kZXNbZV0uY2FsbGJhY2tJbnNwZWN0Tm9kZShudWxsLCBudWxsKTsKICAgIH0pOwogIGZ1bmN0aW9uIEhpdmVNUCgpIHsKICAgIHJldHVybiAoCiAgICAgICh0aGlzLnRpdGxlID0gewogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX0FkbWluaXN0cmF0aW9uU2Vzc2lvbl9zZXNzaW9uREVMRVRFJyI6CiAgICAgICAgICAiRXhwbGljaXRseSBkZWxldGUgYW4gYWRtaW5pc3RyYXRpdmUgc2Vzc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fQWRtaW5pc3RyYXRpb25TZXNzaW9uX3Nlc3Npb25HRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgZGV0YWlscyBhYm91dCBhbiBleGlzdGluZyBhZG1pbmlzdHJhdGl2ZSBzZXNzaW9uIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYWRtaW5fc2Vzc2lvbl9BZG1pbmlzdHJhdGlvblNlc3Npb25fc2Vzc2lvblBPU1QnIjoKICAgICAgICAgICJFeHRlbmQgdGhlIGV4cGlyeSBvZiB5b3VyIGN1cnJlbnQgYWRtaW5pc3RyYXRpdmUgc2Vzc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fQWRtaW5pc3RyYXRpb25TZXNzaW9uX3Nlc3Npb25QVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgbmV3IGFkbWluaXN0cmF0aXZlIHNlc3Npb24iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX0FkbWluaXN0cmF0aW9uU2Vzc2lvbl9zd2l0Y2hQVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgbmV3IGFkbWluaXN0cmF0aXZlIHNlc3Npb24gdGhhdCB0YXJnZXRzIHRoZSBzcGVjaWZpZWQgcHJvamVjdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fQWRtaW5pc3RyYXRpb25Vc2VyX3VzZXJHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgZGV0YWlscyBhYm91dCBhbiBhZG1pbmlzdHJhdGlvbiB1c2VyIGFjY291bnQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX0FkbWluaXN0cmF0aW9uVXNlcl91c2VyUFVUJyI6CiAgICAgICAgICAiUmVxdWVzdHMgdGhlIGNyZWF0aW9uIG9mIGEgbmV3IGFkbWluaXN0cmF0aW9uIHVzZXIgYWNjb3VudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fQWRtaW5pc3RyYXRpb25Vc2VyX3ZlcmlmeVBPU1QnIjoKICAgICAgICAgICJWZXJpZmllcyBhbiBhY2NvdW50IHVzaW5nIGEgY29kZSB0aGF0IHRoZSBzeXN0ZW0gcHJvdmlkZWQgaW4gdGhlIGVtYWlsIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYWRtaW5fc2Vzc2lvbl9OZXdzX25ld3NSZWNlbnRHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZSByZWNlbnQgbmV3cyBhcnRpY2xlcyBhYm91dCBIaXZlTVAiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX1Byb2plY3RJbmZvX2FjY2Vzc0dFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhIGxpc3Qgb2YgdXNlcnMgdGhhdCBoYXZlIGFjY2VzcyB0byB0aGUgcHJvamVjdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fUHJvamVjdEluZm9fYWNjZXNzUHJvamVjdERFTEVURSciOgogICAgICAgICAgIlJldm9rZXMgcHJvamVjdCBhY2Nlc3MgZnJvbSBhIHNwZWNpZmljIHByb2plY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX1Byb2plY3RJbmZvX2FjY2Vzc1Byb2plY3RQVVQnIjoKICAgICAgICAgICJHcmFudCBhbGwgdXNlcnMgb2YgYW5vdGhlciBwcm9qZWN0IGFjY2VzcyB0byBhIHNwZWNpZmljIHByb2plY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX1Byb2plY3RJbmZvX2FjY2Vzc1VzZXJERUxFVEUnIjoKICAgICAgICAgICJSZXZva2VzIHVzZXIgYWNjZXNzIGZyb20gYSBzcGVjaWZpYyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYWRtaW5fc2Vzc2lvbl9Qcm9qZWN0SW5mb19hY2Nlc3NVc2VyUFVUJyI6CiAgICAgICAgICAiR3JhbnQgYSB1c2VyIGFjY2VzcyB0byBhIHNwZWNpZmljIHByb2plY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX1Byb2plY3RJbmZvX3Byb2plY3RCaWxsaW5nQWNjb3VudFBVVCciOgogICAgICAgICAgIlNldCB0aGUgYmlsbGluZyBhY2NvdW50IGZvciBhIHByb2plY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hZG1pbl9zZXNzaW9uX1Byb2plY3RJbmZvX3Byb2plY3RHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYWRtaW5fc2Vzc2lvbl9Qcm9qZWN0SW5mb19wcm9qZWN0UE9TVCciOgogICAgICAgICAgIlJlbmFtZXMgYSBwcm9qZWN0LCBvciB0b2dnbGVzIHdoZXRoZXIgaXQgaXMgYWN0aXZlIG9yIG5vdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fUHJvamVjdEluZm9fcHJvamVjdFBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgcHJvamVjdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFkbWluX3Nlc3Npb25fUHJvamVjdEluZm9fcHJvamVjdHNHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgYSBsaXN0IG9mIHByb2plY3RzIHRoYXQgdGhlIHVzZXIgaGFzIGFjY2VzcyB0byIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFwaV9rZXlfS2V5X2tleURFTEVURSciOgogICAgICAgICAgIkRlbGV0ZXMgdGhlIEFQSSBrZXkgaW1tZWRpYXRlbHksIHByZXZlbnRpbmcgaXQgZnJvbSBiZWluZyB1c2VkIGJ5IGZ1dHVyZSBpbmNvbWluZyByZXF1ZXN0cy5cclxuVGhpcyBET0VTIE5PVCBkZWxldGUgdGhlIGFzc29jaWF0ZWQgc2Vzc2lvbiwgd2hpY2ggeW91IHdpbGwgc3RpbGwgYmUgY2hhcmdlZCBmb3IuIFRoZXJlZm9yZSB3aGVyZVxyXG5hcHByb3ByaWF0ZSB5b3Ugc2hvdWxkIHVzZSB0aGUgcmVsZXZhbnQgQVBJcyB0byBkZWxldGUgdGhlIHNlc3Npb24gaW5zdGVhZCAod2hpY2ggd2lsbCBjYXVzZSB0aGVcclxuQVBJIGtleSB0byBiZSBkZWxldGVkKSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFwaV9rZXlfS2V5X2tleUdFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBwdWJsaWMgaW5mb3JtYXRpb24gYWJvdXQgYSBwdWJsaWMgQVBJIGtleS4gVGhpcyBkb2VzIG5vdCByZXZlYWwgdGhlIGtleSBpdHNlbGYiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hcGlfa2V5X0tleV9rZXlQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyB0aGUgY29tbWVudCBvbiBhbiBBUEkga2V5LCBpZiBwZXJtaXR0ZWQgZm9yIHRoaXMgQVBJIGtleSB0eXBlLiBUaGUgb25seSBBUEkga2V5XHJcbnR5cGVzIHlvdSBjYW4gc2V0IGEgY29tbWVudCBvbiBhcmU6ICdwdWJsaWMnIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYXBpX2tleV9LZXlfa2V5UHVibGljUFVUJyI6CiAgICAgICAgICAiQ3JlYXRlcyBhIG5ldyBwdWJsaWMgQVBJIGtleSB3aXRoIHRoZSBzcGVjaWZpZWQgY29tbWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmFwaV9rZXlfS2V5X2tleXNBY2NvdW50R0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiBjdXJyZW50IEFQSSBrZXlzIG93bmVkIGJ5IGEgZ2l2ZW4gdXNlciBhY2NvdW50IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYXBpX2tleV9LZXlfa2V5c0FkbWluVXNlckdFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhIGxpc3Qgb2YgY3VycmVudCBBUEkga2V5cyBvd25lZCBieSBhIGdpdmVuIGFkbWluaXN0cmF0aW9uIHVzZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hcGlfa2V5X0tleV9rZXlzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiBwdWJsaWMgQVBJIGtleXMiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hcGlfa2V5X0tleV9yZXZlYWxQVVQnIjoKICAgICAgICAgICJSZXZlYWxzIHRoZSBhY3R1YWwgQVBJIGtleSBiYXNlZCBvbiB0aGUgaGFzaCwgaWYgcGVybWl0dGVkIGZvciB0aGlzIEFQSSBrZXkgdHlwZS4gVGhlIG9ubHkgQVBJIGtleVxyXG50eXBlcyB5b3UgY2FuIHJldmVhbCB0aGUgQVBJIGtleSBmb3IgYXJlOiAncHVibGljJyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmF0dHJpYnV0ZV9BdHRyaWJ1dGVfYXR0cmlidXRlREVMRVRFJyI6CiAgICAgICAgICAiRGVsZXRlcyBhbiBhdHRyaWJ1dGUgZnJvbSBhbiBvYmplY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hdHRyaWJ1dGVfQXR0cmlidXRlX2F0dHJpYnV0ZUdFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhbiBhdHRyaWJ1dGUgYW5kIGl0J3MgdmFsdWUgZnJvbSBhbiBvYmplY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5hdHRyaWJ1dGVfQXR0cmlidXRlX2F0dHJpYnV0ZVBVVCciOgogICAgICAgICAgIlNldHMgb3IgdXBkYXRlcyBhbiBhdHRyaWJ1dGUgb24gYW4gb2JqZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuYXR0cmlidXRlX0F0dHJpYnV0ZV9hdHRyaWJ1dGVzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiBhdHRyaWJ1dGUga2V5cyBvbiBhbiBvYmplY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5ldmVudF9FdmVudFR5cGVzX3R5cGVERUxFVEUnIjoKICAgICAgICAgICJTY2hlZHVsZXMgZGVsZXRpb24gb2YgYW4gZXZlbnQgdHlwZSB2ZXJzaW9uIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZXZlbnRfRXZlbnRUeXBlc190eXBlR0VUJyI6CiAgICAgICAgICAiR2V0cyB0aGUgc3RhdHVzIG9mIGFsbCBvZiB0aGUgdmVyc2lvbnMgb2YgYSBzcGVjaWZpYyBldmVudCB0eXBlIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZXZlbnRfRXZlbnRUeXBlc190eXBlUE9TVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgdmVyc2lvbiBvZiBhbiBldmVudCB0eXBlLCB3aXRoIGEgbmV3IHNjaGVtYSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmV2ZW50X0V2ZW50VHlwZXNfdHlwZVBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgZXZlbnQgdHlwZSB3aXRoIHRoZSBzcGVjaWZpZWQgc2NoZW1hIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZXZlbnRfRXZlbnRUeXBlc190eXBlc0dFVCciOgogICAgICAgICAgIkdldHMgYSBsaXN0IG9mIGRlZmluZWQgZXZlbnQgdHlwZXMgYW5kIHRoZWlyIGN1cnJlbnQgc3RhdHVzIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZXZlbnRfRXZlbnRfZXZlbnRCYXRjaEluc2VydFBVVCciOgogICAgICAgICAgIkJhdGNoIGluc2VydHMgbXVsdGlwbGUgZXZlbnRzIHdpdGggdGhlIHNhbWUgZXZlbnQgdHlwZSBhbmQgdmVyc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmV2ZW50X0V2ZW50X2V2ZW50SW5zZXJ0UFVUJyI6CiAgICAgICAgICAiSW5zZXJ0cyBhIHNpbmdsZSBldmVudCB3aXRoIHRoZSBzcGVjaWZpZWQgZXZlbnQgdHlwZSBhbmQgdmVyc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmdhbWVfc2VydmVyX0dhbWVTZXJ2ZXJUZW1wbGF0ZV90ZW1wbGF0ZURFTEVURSciOgogICAgICAgICAgIkRlbGV0ZXMgYSBnYW1lIHNlcnZlciB0ZW1wbGF0ZSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmdhbWVfc2VydmVyX0dhbWVTZXJ2ZXJUZW1wbGF0ZV90ZW1wbGF0ZUdFVCciOgogICAgICAgICAgIkdldHMgaW5mb3JtYXRpb24gYWJvdXQgYW4gZXhpc3RpbmcgZ2FtZSBzZXJ2ZXIgdGVtcGxhdGUiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5nYW1lX3NlcnZlcl9HYW1lU2VydmVyVGVtcGxhdGVfdGVtcGxhdGVQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBleGlzdGluZyBnYW1lIHNlcnZlciB0ZW1wbGF0ZSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmdhbWVfc2VydmVyX0dhbWVTZXJ2ZXJUZW1wbGF0ZV90ZW1wbGF0ZVBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgZ2FtZSBzZXJ2ZXIgdGVtcGxhdGUiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5nYW1lX3NlcnZlcl9HYW1lU2VydmVyVGVtcGxhdGVfdGVtcGxhdGVzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmUgYSBsaXN0IG9mIGdhbWUgc2VydmVyIHRlbXBsYXRlcyBpbiB0aGUgc3lzdGVtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZ2FtZV9zZXJ2ZXJfR2FtZVNlcnZlcl9wcm92aXNpb25QVVQnIjoKICAgICAgICAgICJSZXF1ZXN0cyB0aGUgcHJvdmlzaW9uaW5nIG9mIGEgZ2FtZSBzZXJ2ZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5nYW1lX3NlcnZlcl9HYW1lU2VydmVyX3NlcnZlckNsZWFudXBQT1NUJyI6CiAgICAgICAgICAiRGVsZXRlIGFuZCBiaWxsIGFuIGV4cGlyZWQgZ2FtZSBzZXJ2ZXIgaW5zdGFuY2UgaW4gSGl2ZU1QIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZ2FtZV9zZXJ2ZXJfR2FtZVNlcnZlcl9zZXJ2ZXJHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZSBkZXRhaWxzIGFib3V0IGFuIGV4aXN0aW5nIGdhbWUgc2VydmVyIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuZ2FtZV9zZXJ2ZXJfR2FtZVNlcnZlcl9zZXJ2ZXJTdGF0dXNQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyB0aGUgaW50ZXJuYWwgc3RhdHVzIG9mIGEgZ2FtZSBzZXJ2ZXIgaW5zdGFuY2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5nYW1lX3NlcnZlcl9HYW1lU2VydmVyX3NlcnZlcnNHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZSBkZXRhaWxzIGFib3V0IGdhbWUgc2VydmVycyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmdhbWVfc2VydmVyX0dhbWVTZXJ2ZXJfdGVybWluYXRlREVMRVRFJyI6CiAgICAgICAgICAiUmVxdWVzdCB0ZXJtaW5hdGlvbiBvZiBhbiBleGlzdGluZyBnYW1lIHNlcnZlciIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtU3RhdGVfc3RlYW1TdGF0ZUN1cmF0b3JHRVQnIjoKICAgICAgICAgICJHZXRzIHRoZSBoYXNoIG9mIHRoZSBsYXN0IHJlY29yZGVkIEN1cmF0b3IgQ29ubmVjdCBkYXRhIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1TdGF0ZV9zdGVhbVN0YXRlQ3VyYXRvclBPU1QnIjoKICAgICAgICAgICJTZXRzIHRoZSBoYXNoIG9mIHRoZSBsYXN0IHJlY29yZGVkIEN1cmF0b3IgQ29ubmVjdCBkYXRhIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1TdGF0ZV9zdGVhbVN0YXRlUGFja2FnZUdFVCciOgogICAgICAgICAgIkdldHMgdGhlIHBhY2thZ2UgaW5mb3JtYXRpb24gZm9yIHRoZSBsYXN0IHJlY29yZGVkIHBhY2thZ2UgZGF0YSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtU3RhdGVfc3RlYW1TdGF0ZVBhY2thZ2VQT1NUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgaGFzaCBvZiB0aGUgbGFzdCByZWNvcmRlZCBwYWNrYWdlIGRhdGEiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbVN0YXRlX3N0ZWFtU3RhdGVTYWxlc0dFVCciOgogICAgICAgICAgIkdldHMgdGhlIFVOSVggdGltZXN0YW1wIGFuZCBpbmRleCBvZiB0aGUgbGFzdCByZWNvcmRlZCBzYWxlcyBkYXRhIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1TdGF0ZV9zdGVhbVN0YXRlU2FsZXNQT1NUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgVU5JWCB0aW1lc3RhbXAgYW5kIGluZGV4IG9mIHRoZSBsYXN0IHJlY29yZGVkIHNhbGVzIGRhdGEiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbVN0YXRlX3N0ZWFtU3RhdGVUcmFmZmljR0VUJyI6CiAgICAgICAgICAiR2V0cyB0aGUgVU5JWCB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgcmVjb3JkZWQgdHJhZmZpYyBkYXRhIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1TdGF0ZV9zdGVhbVN0YXRlVHJhZmZpY1BPU1QnIjoKICAgICAgICAgICJTZXRzIHRoZSBVTklYIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCByZWNvcmRlZCB0cmFmZmljIGRhdGEiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbVN0YXRlX3N0ZWFtU3RhdGVXaXNobGlzdEdFVCciOgogICAgICAgICAgIkdldHMgdGhlIFVOSVggdGltZXN0YW1wIG9mIHRoZSBsYXN0IHJlY29yZGVkIHdpc2hsaXN0IGRhdGEiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbVN0YXRlX3N0ZWFtU3RhdGVXaXNobGlzdFBPU1QnIjoKICAgICAgICAgICJTZXRzIHRoZSBVTklYIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCByZWNvcmRlZCB3aXNobGlzdCBkYXRhIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1Db25maWd1cmVkR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBpZiB0aGUgcHJvamVjdCBpcyBjb25maWd1cmVkIGZvciBTdGVhbSBpbnRlZ3JhdGlvbi4gIElmIHRoaXMgaXMgdHJ1ZSwgcHJvY2Vzc2luZyB3aWxsIG9jY3VyXHJcbmV2ZXJ5IGhvdXIgdG8gcGVyZm9ybSBkYXRhIGNhcHR1cmUuICBUaGlzIEFQSSBpcyBvbmx5IGFjY2Vzc2libGUgZnJvbSB3aXRoaW4gdGhlIGNsdXN0ZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbV9zdGVhbUNyZWRlbnRpYWxzR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyB0aGUgY3JlZGVudGlhbHMgcmVxdWlyZWQgdG8gYXV0aGVudGljYXRlIHdpdGggU3RlYW0uICBUaGlzIEFQSSBpcyBhY2Nlc3NpYmxlXHJcbm9ubHkgYnkgSGl2ZSdzIGludGVybmFsIGluZnJhc3RydWN0dXJlIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1DcmVkZW50aWFsc0dhbWVzUFVUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgY29va2llcyB1c2VkIHRvIGNvbm5lY3QgdG8gcGFydG5lci5zdGVhbWdhbWVzLmNvbS4gIFRoaXMgQVBJIGlzIG9ubHlcclxuYWNjZXNzaWJsZSBmcm9tIHdpdGhpbiB0aGUgY2x1c3RlciIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtX3N0ZWFtQ3JlZGVudGlhbHNHdWFyZFBVVCciOgogICAgICAgICAgIlNldHMgdGhlIFN0ZWFtIEd1YXJkIGNvb2tpZS4gIFRoaXMgQVBJIGlzIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHdpdGhpbiB0aGUgY2x1c3RlciIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtX3N0ZWFtQ3JlZGVudGlhbHNQb3dlcmVkUFVUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgY29va2llIHVzZWQgdG8gY29ubmVjdCB0byBwYXJ0bmVyLnN0ZWFtcG93ZXJlZC5jb20uICBUaGlzIEFQSSBpcyBvbmx5XHJcbmFjY2Vzc2libGUgZnJvbSB3aXRoaW4gdGhlIGNsdXN0ZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbV9zdGVhbUVtYWlsaWRHRVQnIjoKICAgICAgICAgICJHZXRzIHRoZSBTdGVhbSBhY2NvdW50IElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGFzdCBTdGVhbSBHdWFyZCByZXF1ZXN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1FbWFpbGlkUFVUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgU3RlYW0gYWNjb3VudCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIGxhc3QgU3RlYW0gR3VhcmQgcmVxdWVzdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtX3N0ZWFtRXJyb3Jtc2dHRVQnIjoKICAgICAgICAgICJHZXRzIHRoZSBsYXN0IFN0ZWFtIGF1dGhlbnRpY2F0aW9uIGVycm9yIG9yIG1lc3NhZ2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbV9zdGVhbUVycm9ybXNnUFVUJyI6CiAgICAgICAgICAiU2V0cyB0aGUgbGFzdCBTdGVhbSBhdXRoZW50aWNhdGlvbiBlcnJvciBvciBtZXNzYWdlLiAgT25seSBhY2Nlc3NpYmxlIGluc2lkZSB0aGUgSGl2ZSBjbHVzdGVyIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1HdWFyZEdFVCciOgogICAgICAgICAgIlJldHVybnMgdGhlIHN0YXR1cyBvZiBTdGVhbSBHdWFyZCBmb3IgdGhlIHByb2plY3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdGVhbV9zdGVhbUd1YXJkUFVUJyI6CiAgICAgICAgICAiQWxsb3dzIHlvdSB0byBwcm92aWRlIGEgU3RlYW0gR3VhcmQgY29kZSBpZiBvbmUgaXMgbmVjZXNzYXJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1HdWFyZFN0YXR1c1BVVCciOgogICAgICAgICAgIlNldHMgdGhlIFN0ZWFtIEd1YXJkIHN0YXR1cy4gIFRoaXMgQVBJIGlzIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHdpdGhpbiB0aGUgY2x1c3RlciIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0ZWFtX3N0ZWFtUFVUJyI6CiAgICAgICAgICAiQ29uZmlndXJlcyBTdGVhbSBpbnRlZ3JhdGlvbiBmb3IgdGhpcyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1SZWltcG9ydFBVVCciOgogICAgICAgICAgIlNjaGVkdWxlZCBhIGZ1bGwgcmVpbXBvcnQgb2YgYWxsIGNhcHR1cmVkIFN0ZWFtIGRhdGEuICBUaGlzIHdpbGwgZGVsZXRlIGFsbCBTdGVhbSByZWxhdGVkIFxyXG5kYXRhIGZyb20gSGl2ZSBiZWZvcmUgdGhlIGltcG9ydCBiZWdpbnMsIHNvIHJlcG9ydHMgd2lsbCBiZSB1bmF2YWlsYWJsZSBkdXJpbmcgdGhlIHJlaW1wb3J0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RlYW1fc3RlYW1TdGF0dXNHRVQnIjoKICAgICAgICAgICJHZXQgYSBzdW1tYXJ5IG9mIHRoZSBTdGVhbSBpbnRlZ3JhdGlvbiBjb25maWd1cmF0aW9uIGluIHRoZSBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RyaXBlX3N0cmlwZURFTEVURSciOgogICAgICAgICAgIlJlbW92ZXMgU3RyaXBlIGludGVncmF0aW9uIGZyb20gdGhpcyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RyaXBlX3N0cmlwZUdFVCciOgogICAgICAgICAgIlJldHVybnMgdGhlIFN0cmlwZSBwdWJsaWMgYW5kIHNlY3JldCBrZXlzIHRoYXQgd2VyZSBjb25maWd1cmVkIGZvciBpbnRlZ3JhdGlvbi4gIFRoaXMgbWV0aG9kXHJcbmlzIG9ubHkgYWNjZXNzaWJsZSB3aXRoaW4gdGhlIEhpdmUgY2x1c3RlciIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmludGVncmF0aW9uX1N0cmlwZV9zdHJpcGVQVVQnIjoKICAgICAgICAgICJDb25maWd1cmVzIFN0cmlwZSBpbnRlZ3JhdGlvbiBmb3IgdGhpcyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuaW50ZWdyYXRpb25fU3RyaXBlX3N0cmlwZVN0YXR1c0dFVCciOgogICAgICAgICAgIlJldHVybnMgdGhlIHN0YXR1cyBvZiBTdHJpcGUgaW50ZWdyYXRpb24gZm9yIGFkbWluaXN0cmF0aW9uIHZpZXdpbmciLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5pbnRlZ3JhdGlvbl9TdHJpcGVfc3RyaXBlVG9nZ2xlUFVUJyI6CiAgICAgICAgICAiRW5hYmxlcyBvciBkaXNhYmxlcyBTdHJpcGUgaW50ZWdyYXRpb24iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5sb2JieV9Mb2JieV9sb2JiaWVzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmUgYSBsaXN0IG9mIHRoZSBmaXJzdCA1MCBnYW1lIGxvYmJpZXMuICBUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkLCB1c2UgL2xvYmJpZXMvcGFnaW5hdGVkIGluc3RlYWQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5sb2JieV9Mb2JieV9sb2JiaWVzUGFnaW5hdGVkR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmUgYSBsaXN0IG9mIGdhbWUgbG9iYmllcyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmxvYmJ5X0xvYmJ5X2xvYmJ5REVMRVRFJyI6CiAgICAgICAgICAiRGVsZXRlcyBhIGdhbWUgbG9iYnksIGlmIHlvdSBhcmUgdGhlIG93bmVyIG9mIGl0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsubG9iYnlfTG9iYnlfbG9iYnlHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgaW5mb3JtYXRpb24gYWJvdXQgYSBnYW1lIGxvYmJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsubG9iYnlfTG9iYnlfbG9iYnlQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBleGlzdGluZyBnYW1lIGxvYmJ5LCBpZiB5b3UgYXJlIHRoZSBvd25lciBvZiBpdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmxvYmJ5X0xvYmJ5X2xvYmJ5UFVUJyI6CiAgICAgICAgICAiQ3JlYXRlcyBhIG5ldyBnYW1lIGxvYmJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsubG9iYnlfTG9iYnlfc2Vzc2lvbkRFTEVURSciOgogICAgICAgICAgIkxlYXZlcyBvciBraWNrcyBhIHNlc3Npb24gZnJvbSBhIGdhbWUgbG9iYnkiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5sb2JieV9Mb2JieV9zZXNzaW9uR0VUJyI6CiAgICAgICAgICAiR2V0cyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3RhdGUgb2YgYSBzZXNzaW9uIGNvbm5lY3RlZCB0byBhIGdhbWUgbG9iYnkiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5sb2JieV9Mb2JieV9zZXNzaW9uUFVUJyI6CiAgICAgICAgICAiSm9pbnMgdGhlIHNwZWNpZmllZCBzZXNzaW9uIHRvIGEgZ2FtZSBsb2JieSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLmxvYmJ5X0xvYmJ5X3Nlc3Npb25zR0VUJyI6CiAgICAgICAgICAiR2V0IGEgbGlzdCBvZiBzZXNzaW9ucyB0aGF0IGFyZSBpbiBhIGdhbWUgbG9iYnkiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5uYXRfcHVuY2h0aHJvdWdoX1B1bmNodGhyb3VnaF9lbmRwb2ludHNHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGEgbGlzdCBvZiBrbm93biBlbmRwb2ludHMgZm9yIGEgc2Vzc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLm5hdF9wdW5jaHRocm91Z2hfUHVuY2h0aHJvdWdoX3BpbmdQVVQnIjoKICAgICAgICAgICJBY2NlcHRzIGluZm9ybWF0aW9uIGFib3V0IGEgTkFUIHB1bmNodGhyb3VnaCBVRFAgcmVxdWVzdCBmcm9tIGEgbGlzdGVuZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5uYXRfcHVuY2h0aHJvdWdoX1B1bmNodGhyb3VnaF9wdW5jaHRocm91Z2hHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGFuIGVzdGFibGlzaGVkIE5BVCBuZWdvdGF0aW9uLCBpZiBpdCBleGlzdHMiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5uYXRfcHVuY2h0aHJvdWdoX1B1bmNodGhyb3VnaF9wdW5jaHRocm91Z2hQVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgTkFUIG5lZ290YXRpb24sIHdoaWNoIHlvdSBjYW4gdXNlIHRvIHNlbmQgYSBtZXNzYWdlIG92ZXIgVURQIHRvIHB1bmNodGhyb3VnaCBOQVQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfRXZlbnRfZXZlbnRHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGFuIGV2ZW50IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0V2ZW50X2V2ZW50UE9TVCciOgogICAgICAgICAgIlVwZGF0ZXMgYW4gZXhpc3RpbmcgZXZlbnQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfRXZlbnRfZXZlbnRQVVQnIjogIkNyZWF0ZXMgYSBuZXcgZXZlbnQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfRXZlbnRfZXZlbnRzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiBldmVudHMiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfRXZlbnRfZXZlbnRzU2VhcmNoR0VUJyI6CiAgICAgICAgICAiU2VhcmNoZXMgZm9yIGV2ZW50cyBiYXNlZCBvbiB0ZXh0IGVudHJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0xpY2Vuc2VLZXlfa2V5c0J5SXNzdWVkRW1haWxHRVQnIjoKICAgICAgICAgICJHZXRzIGEgbGlzdCBvZiBrZXlzIHRoYXQgaGF2ZSBiZWVuIGlzc3VlZCBmb3IgYSB1c2VyIGVtYWlsIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0xpY2Vuc2VLZXlfa2V5c0J5UmVzZXJ2ZWRFbWFpbEdFVCciOgogICAgICAgICAgIkdldHMgYSBsaXN0IG9mIGtleXMgdGhhdCBoYXZlIGJlZW4gcmVzZXJ2ZWQgZm9yIGEgdXNlciBlbWFpbCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnBvc19MaWNlbnNlS2V5X2tleXNJc3N1ZVBVVCciOgogICAgICAgICAgImtleXNJc3N1ZVBVVCAobWlzc2luZyBkZXNjcmlwdGlvbikiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfTGljZW5zZUtleV9rZXlzUFVUJyI6CiAgICAgICAgICAiQWRkcyBhIHNldCBvZiBsaWNlbnNlIGtleXMgdG8gYSBwb29sIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0xpY2Vuc2VLZXlfa2V5c1Jlc2VydmVQVVQnIjoKICAgICAgICAgICJSZXNlcnZlcyBhIHJhbmRvbWx5IHNlbGVjdGVkLCBhdmFpbGFibGUgbGljZW5zZSBrZXkgZnJvbSBhIGxpY2Vuc2Uga2V5IHBvb2wgdG8gYSBzcGVjaWZpYyB1c2VyIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0xpY2Vuc2VLZXlfcG9vbEdFVCciOgogICAgICAgICAgIkdldHMgYW4gZXhpc3RpbmcgbGljZW5zZSBrZXkgcG9vbCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnBvc19MaWNlbnNlS2V5X3Bvb2xQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBleGlzdGluZyBsaWNlbnNlIGtleSBwb29sIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucG9zX0xpY2Vuc2VLZXlfcG9vbFBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgbGljZW5zZSBrZXkgcG9vbCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnBvc19MaWNlbnNlS2V5X3Bvb2xzR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiBsaWNlbnNlIGtleSBwb29scyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnBvc19MaWNlbnNlS2V5X3Bvb2xzU2VhcmNoR0VUJyI6CiAgICAgICAgICAiU2VhcmNoZXMgZm9yIGxpY2Vuc2Uga2V5IHBvb2xzIGJhc2VkIG9uIHRleHQgZW50cnkiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5wb3NfUHJvZHVjdF9wcm9kdWN0R0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBwb2ludCBvZiBzYWxlIGluZm9ybWF0aW9uIGFib3V0IGEgcHJvZHVjdCwgaWYgdGhhdCBwcm9kdWN0IGV4aXN0cyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnBvc19Qcm9kdWN0X3Byb2R1Y3RQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyB0aGUgcG9pbnQgb2Ygc2FsZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggYSBwcm9kdWN0LiAgVGhlcmUgaXMgbm8gY3JlYXRlIG9yXHJcbmRlbGV0ZSBtZXRob2RzIHdpdGggdGhlIFBvaW50IG9mIFNhbGUgQVBJOyB1c2UgdGhlIFJldmVudWUgU2hhcmUgQVBJIHRvIGNyZWF0ZSBwcm9kdWN0cyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJlcG9ydGluZ19CaWdRdWVyeUFjY2Vzc19iaWdxdWVyeUFjY2Vzc0RFTEVURSciOgogICAgICAgICAgIlJldm9rZXMgYWNjZXNzIHRvIHRoZSBwcml2YXRlIGFuZCBwdWJsaWMgQmlnUXVlcnkgZGF0YXNldHMgZm9yIHRoaXMgcHJvamVjdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJlcG9ydGluZ19CaWdRdWVyeUFjY2Vzc19iaWdxdWVyeUFjY2Vzc1BVVCciOgogICAgICAgICAgIkdyYW50cyBhY2Nlc3MgdG8gdGhlIHByaXZhdGUgYW5kIHB1YmxpYyBCaWdRdWVyeSBkYXRhc2V0cyBmb3IgdGhpcyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0JpZ1F1ZXJ5QWNjZXNzX2JpZ3F1ZXJ5UHJvamVjdEFjY2Vzc0dFVCciOgogICAgICAgICAgIlZpZXcgYSBsaXN0IG9mIEdvb2dsZSBhY2NvdW50cyB3aXRoIGFjY2VzcyB0byBCaWdRdWVyeSBmb3IgdGhpcyBwcm9qZWN0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5TYWxlc1VuaXRCcmVha2Rvd25SZXRhaWxHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGEgcmVwb3J0IHdoaWNoIHByb3ZpZGVzIGEgdW5pdCBzYWxlcyBicmVha2Rvd24gZm9yIHJldGFpbCAobm9uLVN0ZWFtKSBvbmx5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5TYWxlc1VuaXRCcmVha2Rvd25Tb3VyY2VHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGEgcmVwb3J0IHdoaWNoIHByb3ZpZGVzIGEgdW5pdCBzYWxlcyBicmVha2Rvd24gYnkgYWN0aXZhdGlvbiBzb3VyY2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXBvcnRpbmdfQnVpbHRpblJlcG9ydHNfYnVpbHRpblNhbGVzVW5pdEJyZWFrZG93blN0ZWFtR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBhIHJlcG9ydCB3aGljaCBwcm92aWRlcyBhIHVuaXQgc2FsZXMgYnJlYWtkb3duIGZvciBTdGVhbSBTdG9yZSBvbmx5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5TYWxlc1VzZEJyZWFrZG93blNvdXJjZUdFVCciOgogICAgICAgICAgIlJldHVybnMgYSByZXBvcnQgd2hpY2ggcHJvdmlkZXMgYSBVU0Qgc2FsZXMgYnJlYWtkb3duIGJ5IGFjdGl2YXRpb24gc291cmNlIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5TYWxlc1VzZEJyZWFrZG93blN0ZWFtR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBhIHJlcG9ydCB3aGljaCBwcm92aWRlcyBhIFVTRCBzYWxlcyBicmVha2Rvd24gZm9yIFN0ZWFtIFN0b3JlIG9ubHkiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXBvcnRpbmdfQnVpbHRpblJlcG9ydHNfYnVpbHRpblZpc2l0c0FjdGlvbnNDb252ZXJzaW9uR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBhIHJlcG9ydCB3aGljaCBzaG93cyB0aGUgY29udmVyc2lvbiByYXRlIGJldHdlZW4gcGFnZSB2aXNpdHMgYW5kIHdpc2hsaXN0cyAvIHNhbGVzIGluIFN0ZWFtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5WaXNpdHNBY3Rpb25zR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBhIHJlcG9ydCB3aGljaCBzaG93cyB0aGUgbnVtYmVyIG9mIHBhZ2UgdmlzaXRzIGFnYWluc3Qgd2lzaGxpc3QgYWRkIGFjdGlvbnMgYW5kIHNhbGVzIGluIFN0ZWFtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5WaXNpdHNCcmVha2Rvd25EZXRhaWxlZEdFVCciOgogICAgICAgICAgIlJldHVybnMgYSByZXBvcnQgd2hpY2ggcHJvdmlkZXMgYSBkZXRhaWxlZCBicmVha2Rvd24gb2YgdmlzaXQgc291cmNlcyB0byB0aGUgc3RvcmUgcGFnZSBpbiBTdGVhbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJlcG9ydGluZ19CdWlsdGluUmVwb3J0c19idWlsdGluVmlzaXRzQnJlYWtkb3duUGFnZUdFVCciOgogICAgICAgICAgIlJldHVybnMgYSByZXBvcnQgd2hpY2ggcHJvdmlkZXMgYSBwYWdlLWdyb3VwZWQgYnJlYWtkb3duIG9mIHZpc2l0IHNvdXJjZXMgdG8gdGhlIHN0b3JlIHBhZ2UgaW4gU3RlYW0iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXBvcnRpbmdfQnVpbHRpblJlcG9ydHNfYnVpbHRpblZpc2l0c1dpc2hsaXN0c0dFVCciOgogICAgICAgICAgIlJldHVybnMgYSByZXBvcnQgd2hpY2ggc2hvd3MgdGhlIG51bWJlciBvZiBwYWdlIHZpc2l0cyBhZ2FpbnN0IHdpc2hsaXN0IGFkZCBhY3Rpb25zIGluIFN0ZWFtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmVwb3J0aW5nX0J1aWx0aW5SZXBvcnRzX2J1aWx0aW5XaXNobGlzdEFjdGlvbnNHRVQnIjoKICAgICAgICAgICJSZXR1cm5zIGEgcmVwb3J0IHdoaWNoIGJyZWFrcyBkb3duIHdpc2hsaXN0IGFjdGlvbnMgKGFkZCwgZGVsZXRlLCBwdXJjaGFzZXMvYWN0aXZhdGlvbnMsIGdpZnRzKSBpbiBTdGVhbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJlcG9ydGluZ19SZXBvcnRfcmVwb3J0R0VUJyI6CiAgICAgICAgICAiUmV0dXJuIGEgcGFnaW5hdGVkIGxpc3Qgb2YgcmVwb3J0cyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJlcG9ydGluZ19SZXBvcnRfcmVwb3J0c0dFVCciOgogICAgICAgICAgIlJldHVybiBhIHBhZ2luYXRlZCBsaXN0IG9mIHJlcG9ydHMiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX0ludm9pY2VfaW52b2ljZUdFVCciOgogICAgICAgICAgIkdldHMgYW4gZXhpc3RpbmcgaW52b2ljZSBpbiB0aGUgc3lzdGVtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VJdGVtREVMRVRFJyI6CiAgICAgICAgICAiRGVsZXRlcyBhIGxpbmUgaXRlbSBmcm9tIGFuIGludm9pY2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX0ludm9pY2VfaW52b2ljZUl0ZW1QT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBleGlzdGluZyBsaW5lIGl0ZW0gb24gYW4gaW52b2ljZSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlSXRlbVBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBsaW5lIGl0ZW0gb24gYW4gaW52b2ljZSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlUE9TVCciOgogICAgICAgICAgIlVwZGF0ZXMgYW4gaW52b2ljZSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlUFVUJyI6CiAgICAgICAgICAiQ3JlYXRlcyBhIG5ldyBpbnZvaWNlIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50R0VUJyI6CiAgICAgICAgICAiR2V0cyBhbiBleGlzdGluZyBwYXltZW50IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50UE9TVCciOgogICAgICAgICAgIlVwZGF0ZXMgYW4gZXhpc3RpbmcgZHJhZnQgcGF5bWVudCBmb3IgdGhlIGludm9pY2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX0ludm9pY2VfaW52b2ljZVBheW1lbnRQVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgbmV3IGRyYWZ0IHBheW1lbnQgZm9yIHRoZSBpbnZvaWNlIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50UG9zdFBVVCciOgogICAgICAgICAgIlBvc3RzIGEgcGF5bWVudCB0byB0aGUgc3lzdGVtLCBjYWxjdWxhdGluZyB0aGUgYXBwcm9wcmlhdGUgcmV2ZW51ZSBzaGFyZSBhbW91bnRzIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50UHJvY2Vzc1BVVCciOgogICAgICAgICAgIkluY3JlbWVudGFsbHkgcHJvY2Vzc2VzIGEgcGF5bWVudCwgY3JlYXRpbmcgb3IgYXJjaGl2aW5nIHJlY2lwaWVudCB0cmFuc2FjdGlvbnMgYXMgbmVlZGVkIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50UHJvZ3Jlc3NHRVQnIjoKICAgICAgICAgICJHZXRzIHRoZSBjdXJyZW50IG9wZXJhdGlvbiBvbiB0aGUgcGF5bWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlUGF5bWVudFJlcXVldWVQVVQnIjoKICAgICAgICAgICJSZXF1ZXVlcyB0aGUgcGF5bWVudCBmb3IgcHJvY2Vzc2luZyIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlUGF5bWVudFRyYW5zYWN0aW9uc0dFVCciOgogICAgICAgICAgIlJldHVybnMgYSBsaXN0IG9mIHRyYW5zYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggYSBwb3N0ZWQgcGF5bWVudC4gSWYgdGhlIHBheW1lbnQgaXMgbm90IHBvc3RlZCwgdGhpcyBBUEkgcmV0dXJuc1xyXG5hbiBlbXB0eSBhcnJheSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfSW52b2ljZV9pbnZvaWNlUGF5bWVudFVucG9zdFBVVCciOgogICAgICAgICAgIlVucG9zdHMgYSBwYXltZW50IGZyb20gdGhlIHN5c3RlbSwgcm9sbGluZyBiYWNrIGFueSByZWNpcGllbnQgdHJhbnNhY3Rpb25zIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VQYXltZW50c0dFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhIGxpc3Qgb2YgcGF5bWVudHMgYWdhaW5zdCBhIHNwZWNpZmllZCByZXZlbnVlIHNoYXJlIGludm9pY2UiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX0ludm9pY2VfaW52b2ljZVBvc3RQVVQnIjoKICAgICAgICAgICJQb3N0cyBhbiBpbnZvaWNlIHRvIHRoZSBwZXJtYW5lbnQgcmVjb3JkLiAgT25jZSBhbiBpbnZvaWNlIGlzIHBvc3RlZCwgaXQgY2FuJ3QgYmUgZWRpdGVkIHVudGlsIGl0IGlzIHVucG9zdGVkIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9JbnZvaWNlX2ludm9pY2VVbnBvc3RQVVQnIjoKICAgICAgICAgICJVbnBvc3RzIGFuIGludm9pY2UgZnJvbSB0aGUgcGVybWFuZW50IHJlY29yZC4gIFlvdSBjYW4gb25seSB1bnBvc3QgaW52b2ljZXMgdGhhdCBoYXZlIG5vIHBvc3RlZCBwYXltZW50cyBhZ2FpbnN0IHRoZW0iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX0ludm9pY2VfaW52b2ljZXNHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgYSBsaXN0IG9mIHJldmVudWUgc2hhcmUgaW52b2ljZXMgaW4gdGhlIHN5c3RlbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUHJvZHVjdF9wcm9kdWN0R0VUJyI6CiAgICAgICAgICAiR2V0cyBhbiBleGlzdGluZyBwcm9kdWN0IGluIHRoZSBzeXN0ZW0iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1Byb2R1Y3RfcHJvZHVjdFBPU1QnIjoKICAgICAgICAgICJVcGRhdGVzIGFuIGV4aXN0aW5nIHByb2R1Y3QiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1Byb2R1Y3RfcHJvZHVjdFBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgcHJvZHVjdCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUHJvZHVjdF9wcm9kdWN0c0dFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhIGxpc3Qgb2YgcHJvZHVjdHMgaW4gdGhlIHN5c3RlbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUHJvZHVjdF9wcm9kdWN0c1NlYXJjaEdFVCciOgogICAgICAgICAgIlNlYXJjaGVzIGZvciBwcm9kdWN0cyBiYXNlZCBvbiB0ZXh0IGVudHJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZWNpcGllbnRfcmVjaXBpZW50R0VUJyI6CiAgICAgICAgICAiR2V0cyBhbiBleGlzdGluZyByZWNpcGllbnQgaW4gdGhlIHN5c3RlbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmVjaXBpZW50X3JlY2lwaWVudFBPU1QnIjoKICAgICAgICAgICJVcGRhdGVzIGFuIGV4aXN0aW5nIHJlY2lwaWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmVjaXBpZW50X3JlY2lwaWVudFBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgcmVjaXBpZW50IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZWNpcGllbnRfcmVjaXBpZW50VHJhbnNhY3Rpb25ERUxFVEUnIjoKICAgICAgICAgICJBcmNoaXZlcyBhIGN1c3RvbSB0cmFuc2FjdGlvbiBvbiBhIHJlY2lwaWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmVjaXBpZW50X3JlY2lwaWVudFRyYW5zYWN0aW9uR0VUJyI6CiAgICAgICAgICAiUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3BlY2lmaWVkIHRyYW5zYWN0aW9uIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZWNpcGllbnRfcmVjaXBpZW50VHJhbnNhY3Rpb25QVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgbmV3IGN1c3RvbSB0cmFuc2FjdGlvbiBhZ2FpbnN0IGEgcmVjaXBpZW50IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZWNpcGllbnRfcmVjaXBpZW50VHJhbnNhY3Rpb25zR0VUJyI6CiAgICAgICAgICAiUmV0cmlldmVzIGEgbGlzdCBvZiB0cmFuc2FjdGlvbnMgYWdhaW5zdCBhIHJlY2lwaWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmVjaXBpZW50X3JlY2lwaWVudHNHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgYSBsaXN0IG9mIHJlY2lwaWVudHMgaW4gdGhlIHN5c3RlbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmVjaXBpZW50X3JlY2lwaWVudHNTZWFyY2hHRVQnIjoKICAgICAgICAgICJTZWFyY2hlcyBmb3IgcmVjaXBpZW50cyBiYXNlZCBvbiB0ZXh0IGVudHJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZXZlbnVlU2hhcmVSdWxlc2V0X3J1bGVzZXRHRVQnIjoKICAgICAgICAgICJHZXRzIGFuIGV4aXN0aW5nIHJldmVudWUgc2hhcmUgcnVsZXNldCBpbiB0aGUgc3lzdGVtIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZXZlbnVlU2hhcmVSdWxlc2V0X3J1bGVzZXRQT1NUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBleGlzdGluZyByZXZlbnVlIHNoYXJlIHJ1bGVzZXQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1JldmVudWVTaGFyZVJ1bGVzZXRfcnVsZXNldFBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgcmV2ZW51ZSBzaGFyZSBydWxlc2V0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9SZXZlbnVlU2hhcmVSdWxlc2V0X3J1bGVzZXRTaW11bGF0ZVBVVCciOgogICAgICAgICAgIlNpbXVsYXRlIGEgcmV2ZW51ZSBzaGFyZSBydWxlc2V0IGFnYWluc3QgYSBnaXZlbiBwcm9kdWN0IGFuZCBhbiBhbW91bnQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1JldmVudWVTaGFyZVJ1bGVzZXRfcnVsZXNldHNHRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgYSBsaXN0IG9mIHJldmVudWUgc2hhcmUgcnVsZXNldHMgaW4gdGhlIHN5c3RlbSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnJldmVudWVfc2hhcmVfUmV2ZW51ZVNoYXJlUnVsZXNldF9ydWxlc2V0c1NlYXJjaEdFVCciOgogICAgICAgICAgIlNlYXJjaGVzIGZvciBydWxlc2V0cyBiYXNlZCBvbiB0ZXh0IGVudHJ5IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsucmV2ZW51ZV9zaGFyZV9TdHJpcGVfc3RyaXBlUGF5bWVudEVuYWJsZWRQT1NUJyI6CiAgICAgICAgICAiRW5hYmxlcyBvciBkaXNhYmxlcyB3aGV0aGVyIHRoaXMgcGF5bWVudCBjYW4gYmUgcG9zdGVkIGJ5IHNvbWVvbmUgcGF5aW5nXHJcbml0IHZpYSBTdHJpcGUiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1N0cmlwZV9zdHJpcGVQYXltZW50R0VUJyI6CiAgICAgICAgICAic3RyaXBlUGF5bWVudEdFVCAobWlzc2luZyBkZXNjcmlwdGlvbikiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1N0cmlwZV9zdHJpcGVQYXltZW50UFVUJyI6CiAgICAgICAgICAic3RyaXBlUGF5bWVudFBVVCAobWlzc2luZyBkZXNjcmlwdGlvbikiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5yZXZlbnVlX3NoYXJlX1N0cmlwZV9zdHJpcGVQYXltZW50U3RhdHVzR0VUJyI6CiAgICAgICAgICAiR2V0cyB0aGUgU3RyaXBlIGluZm9ybWF0aW9uIGFib3V0IGEgZ2l2ZW4gcGF5bWVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnNlYXJjaF9DbHVzdGVyX2ludGVybmFsSW5kZXhERUxFVEUnIjoKICAgICAgICAgICJEZWxldGVzIGFuIG9iamVjdCBmcm9tIHRoZSBpbnRlcm5hbCBpbmRleC4gVGhpcyBpcyB1c3VhbGx5IHVzZWQgd2hlbiBcclxuYW4gb2JqZWN0IHZpc2liaWxpdHkgaXMgdG9nZ2xlZCBvZmYuIFRoaXMgY2FuIG9ubHkgYmUgY2FsbGVkXHJcbmZyb20gd2l0aGluIHRoZSBIaXZlIGNsdXN0ZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5zZWFyY2hfQ2x1c3Rlcl9pbnRlcm5hbEluZGV4UFVUJyI6CiAgICAgICAgICAiVXBkYXRlcyBhbiBvYmplY3QgaW4gdGhlIGludGVybmFsIGluZGV4LiBUaGlzIGNhbiBvbmx5IGJlIGNhbGxlZFxyXG5mcm9tIHdpdGhpbiB0aGUgSGl2ZSBjbHVzdGVyIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuc2VhcmNoX0NsdXN0ZXJfaW50ZXJuYWxTZWFyY2hHRVQnIjoKICAgICAgICAgICJTZWFyY2hlcyBmb3IgaW50ZXJuYWxseSBpbmRleGVkIG9iamVjdHMgYmFzZWQgb24gdGhlIGlucHV0IHRleHQuIFRoaXMgY2FuIG9ubHkgYmUgY2FsbGVkXHJcbmZyb20gd2l0aGluIHRoZSBIaXZlIGNsdXN0ZXIiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5zZWFyY2hfU2VhcmNoX2luZGV4REVMRVRFJyI6CiAgICAgICAgICAiRGVsZXRlcyBhbiBvYmplY3QgZnJvbSB0aGUgc2VhcmNoIGluZGV4LiBUaGlzIGlzIHVzdWFsbHkgdXNlZCB3aGVuIFxyXG5hbiBvYmplY3QgdmlzaWJpbGl0eSBpcyB0b2dnbGVkIG9mZiBvciB0aGUgb2JqZWN0IGlzIGRlbGV0ZWQiLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy5zZWFyY2hfU2VhcmNoX2luZGV4UFVUJyI6CiAgICAgICAgICAiVXBkYXRlcyBvciBhZGRzIGFuIG9iamVjdCB0byB0aGUgc2VhcmNoIGluZGV4IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuc2VhcmNoX1NlYXJjaF9zZWFyY2hHRVQnIjoKICAgICAgICAgICJTZWFyY2hlcyBmb3IgaW5kZXhlZCBvYmplY3RzIGJhc2VkIG9uIHRoZSBpbnB1dCB0ZXh0IiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsudGVtcF9zZXNzaW9uX1RlbXBvcmFyeVNlc3Npb25BZG1pbl9zZXNzaW9uc0dFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBhIGxpc3Qgb2YgdGVtcG9yYXJ5IHNlc3Npb25zIGluIHRoZSBzeXN0ZW0iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy50ZW1wX3Nlc3Npb25fVGVtcG9yYXJ5U2Vzc2lvbl9zZXNzaW9uREVMRVRFJyI6CiAgICAgICAgICAiRXhwbGljaXRseSBkZWxldGUgYSB0ZW1wb3Jhcnkgc2Vzc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnRlbXBfc2Vzc2lvbl9UZW1wb3JhcnlTZXNzaW9uX3Nlc3Npb25HRVQnIjoKICAgICAgICAgICJSZXRyaWV2ZXMgZGV0YWlscyBhYm91dCBhbiBleGlzdGluZyBzZXNzaW9uIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsudGVtcF9zZXNzaW9uX1RlbXBvcmFyeVNlc3Npb25fc2Vzc2lvblBPU1QnIjoKICAgICAgICAgICJSZXNldCB0aGUgZXhwaXJ5IG9mIHRoZSB0ZW1wb3Jhcnkgc2Vzc2lvbiIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnRlbXBfc2Vzc2lvbl9UZW1wb3JhcnlTZXNzaW9uX3Nlc3Npb25QVVQnIjoKICAgICAgICAgICJDcmVhdGVzIGEgbmV3IHRlbXBvcmFyeSBzZXNzaW9uIiwKICAgICAgICAiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsudWdjX2NhY2hlX1VHQ0NhY2hlX2NvbnRlbnRHRVQnIjoKICAgICAgICAgICJSZWRpcmVjdHMgdG8gYSBwdWJsaWMgVVJMIGNvbnRhaW5pbmcgdGhlIGZpbGUgY29udGVudCIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnVnY19jYWNoZV9VR0NDYWNoZV9pdGVtUFVUJyI6CiAgICAgICAgICAiU3RvcmVzIGEgVUdDIGNhY2hlIGl0ZW0gaW4gSGl2ZS4gIE9ubHkgbm9uLXRlbXBvcmFyeSBzZXNzaW9uIGNhbiB1c2UgdGhpcyBBUEkgKGkuZS4geW91ciBzZXNzaW9uIG11c3QgaGF2ZSBwZXJzaXN0ZW50IG93bmVyIGluZm9ybWF0aW9uIGF0dGFjaGVkKSIsCiAgICAgICAgIkNsYXNzJy9TY3JpcHQvSGl2ZU1QU0RLLnVzZXJfc2Vzc2lvbl9Vc2VyU2Vzc2lvbl9zZXNzaW9uREVMRVRFJyI6CiAgICAgICAgICAiRXhwbGljaXRseSBkZWxldGUgYSB1c2VyIHNlc3Npb24iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy51c2VyX3Nlc3Npb25fVXNlclNlc3Npb25fc2Vzc2lvbkdFVCciOgogICAgICAgICAgIlJldHJpZXZlcyBkZXRhaWxzIGFib3V0IGFuIGV4aXN0aW5nIHNlc3Npb24iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy51c2VyX3Nlc3Npb25fVXNlclNlc3Npb25fc2Vzc2lvblBPU1QnIjoKICAgICAgICAgICJSZXNldCB0aGUgZXhwaXJ5IG9mIHRoZSB1c2VyIHNlc3Npb24iLAogICAgICAgICJDbGFzcycvU2NyaXB0L0hpdmVNUFNESy51c2VyX3Nlc3Npb25fVXNlclNlc3Npb25fc2Vzc2lvblBVVCciOgogICAgICAgICAgIkNyZWF0ZXMgYSBuZXcgdXNlciBzZXNzaW9uLCBieSBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHRoZSBzcGVjaWZpZWQgYWNjb3VudCIsCiAgICAgIH0pLAogICAgICB0aGlzCiAgICApOwogIH0KICBIaXZlTVAucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lRm9ySGl2ZU1QU0RLID0gZnVuY3Rpb24gKGUpIHsKICAgIGUgPSBlLnJlcGxhY2UoLyIvZywgIiIpOwogICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy50aXRsZVtlXQogICAgICA/IHRoaXMudGl0bGVbZV0KICAgICAgOiAiQXN5bmMgVGFzazogIiArCiAgICAgICAgICB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUoCiAgICAgICAgICAgIGUucmVwbGFjZSgiQ2xhc3MnL1NjcmlwdC9IaXZlTVBTREsuIiwgIiIpLnJlcGxhY2UoIiciLCAiIikKICAgICAgICAgICk7CiAgfTsKICB2YXIgU1BFQ0lBTF9UUkVBVE1FTlRTID0gWwogICAgICB7IG5hbWU6ICJOb2RlUG9zWD0iLCBsZW46IDksIGZuOiBjYXN0SW50LCBhcmcwOiAicG9zaXRpb24iLCBhcmcxOiAwIH0sCiAgICAgIHsgbmFtZTogIk5vZGVQb3NZPSIsIGxlbjogOSwgZm46IGNhc3RJbnQsIGFyZzA6ICJwb3NpdGlvbiIsIGFyZzE6IDEgfSwKICAgICAgeyBuYW1lOiAiTm9kZVdpZHRoPSIsIGxlbjogMTAsIGZuOiBjYXN0SW50LCBhcmcwOiAic2l6ZSIsIGFyZzE6IDAgfSwKICAgICAgeyBuYW1lOiAiTm9kZUhlaWdodD0iLCBsZW46IDExLCBmbjogY2FzdEludCwgYXJnMDogInNpemUiLCBhcmcxOiAxIH0sCiAgICAgIHsgbmFtZTogIk5vZGVHdWlkPSIsIGxlbjogOSwgZm46IGNhc3RTdHIsIGFyZzA6ICJndWlkIiwgYXJnMTogbnVsbCB9LAogICAgICB7CiAgICAgICAgbmFtZTogIk5vZGVDb21tZW50PSIsCiAgICAgICAgbGVuOiAxMiwKICAgICAgICBmbjogY2FzdFN0ciwKICAgICAgICBhcmcwOiAiY29tbWVudCIsCiAgICAgICAgYXJnMTogbnVsbCwKICAgICAgfSwKICAgIF0sCiAgICBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX0NTU19DT0xPUiA9IFsKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9TZXRGaWVsZHNJblN0cnVjdCIsIGNzc0NvbG9yOiAiYnJlYWstc3RydWN0IiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0R5bmFtaWNDYXN0IiwgY3NzQ29sb3I6ICJjYXN0IiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX1N3aXRjaEVudW0iLCBjc3NDb2xvcjogInN3aXRjaCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Td2l0Y2hOYW1lIiwgY3NzQ29sb3I6ICJzd2l0Y2giIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfU3dpdGNoSW50ZWdlciIsIGNzc0NvbG9yOiAic3dpdGNoIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX1N3aXRjaFN0cmluZyIsIGNzc0NvbG9yOiAic3dpdGNoIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX1RpbWVsaW5lIiwgY3NzQ29sb3I6ICJ0aW1lbGluZSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9TZWxlY3QiLCBjc3NDb2xvcjogInB1cmUtZnVuY3Rpb24tY2FsbCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9UdW5uZWwiLCBjc3NDb2xvcjogImZ1bmN0aW9uLWNhbGwiIH0sCiAgICAgIHsKICAgICAgICBibHVlcHJpbnRDbGFzczogIksyTm9kZV9GdW5jdGlvbkVudHJ5IiwKICAgICAgICBjc3NDb2xvcjogImZ1bmN0aW9uLXRlcm1pbmF0b3IiLAogICAgICB9LAogICAgICB7CiAgICAgICAgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRnVuY3Rpb25SZXN1bHQiLAogICAgICAgIGNzc0NvbG9yOiAiZnVuY3Rpb24tdGVybWluYXRvciIsCiAgICAgIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRXhlY3V0aW9uU2VxdWVuY2UiLCBjc3NDb2xvcjogIm1hY3JvIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX01ha2VBcnJheSIsIGNzc0NvbG9yOiAicHVyZS1mdW5jdGlvbi1jYWxsIiB9LAogICAgICB7CiAgICAgICAgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfR2V0Q2xhc3NEZWZhdWx0cyIsCiAgICAgICAgY3NzQ29sb3I6ICJwdXJlLWZ1bmN0aW9uLWNhbGwiLAogICAgICB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0JyZWFrU3RydWN0IiwgY3NzQ29sb3I6ICJicmVhay1zdHJ1Y3QiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRm9ybWF0VGV4dCIsIGNzc0NvbG9yOiAicHVyZS1mdW5jdGlvbi1jYWxsIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX01ha2VNYXAiLCBjc3NDb2xvcjogInB1cmUtZnVuY3Rpb24tY2FsbCIgfSwKICAgICAgewogICAgICAgIGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0NhbGxQYXJlbnRGdW5jdGlvbiIsCiAgICAgICAgY3NzQ29sb3I6ICJwYXJlbnQtZnVuY3Rpb24tY2FsbCIsCiAgICAgIH0sCiAgICBdLAogICAgRVFVSVZBTEVOQ0VfTUFQX01BQ1JPX1RPX0NTU19JQ09OID0gWwogICAgICB7IG1hY3JvOiAiU3RhbmRhcmRNYWNyb3M6RmxpcEZsb3AiLCBjc3NJY29uOiAiZmxpcGZsb3AiIH0sCiAgICAgIHsgbWFjcm86ICJTdGFuZGFyZE1hY3JvczpHYXRlIiwgY3NzSWNvbjogImdhdGUiIH0sCiAgICAgIHsgbWFjcm86ICJTdGFuZGFyZE1hY3JvczpJc1ZhbGlkIiwgY3NzSWNvbjogImlzdmFsaWQiIH0sCiAgICAgIHsgbWFjcm86ICJTdGFuZGFyZE1hY3JvczpGb3JFYWNoTG9vcCIsIGNzc0ljb246ICJmb3JlYWNoIiB9LAogICAgICB7IG1hY3JvOiAiU3RhbmRhcmRNYWNyb3M6Rm9yRWFjaExvb3BXaXRoQnJlYWsiLCBjc3NJY29uOiAiZm9yZWFjaCIgfSwKICAgICAgeyBtYWNybzogIlN0YW5kYXJkTWFjcm9zOkZvckxvb3BXaXRoQnJlYWsiLCBjc3NJY29uOiAibG9vcCIgfSwKICAgICAgeyBtYWNybzogIlN0YW5kYXJkTWFjcm9zOkZvckxvb3AiLCBjc3NJY29uOiAibG9vcCIgfSwKICAgICAgeyBtYWNybzogIlN0YW5kYXJkTWFjcm9zOldoaWxlTG9vcCIsIGNzc0ljb246ICJsb29wIiB9LAogICAgICB7IG1hY3JvOiAiU3RhbmRhcmRNYWNyb3M6RG8gTiIsIGNzc0ljb246ICJkb19uIiB9LAogICAgICB7IG1hY3JvOiAiU3RhbmRhcmRNYWNyb3M6RG9PbmNlIiwgY3NzSWNvbjogImRvX29uY2UiIH0sCiAgICBdLAogICAgRVFVSVZBTEVOQ0VfTUFQX0JMVUVQUklOVF9DTEFTU19UT19DU1NfSUNPTiA9IFsKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9UdW5uZWwiLCBjc3NJY29uOiAiYmx1ZXByaW50LW5vZGUiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfQWRkRGVsZWdhdGUiLCBjc3NJY29uOiAiYmx1ZXByaW50LW5vZGUiIH0sCiAgICAgIHsKICAgICAgICBibHVlcHJpbnRDbGFzczogIksyTm9kZV9HZW5lcmljQ3JlYXRlT2JqZWN0IiwKICAgICAgICBjc3NJY29uOiAiYmx1ZXByaW50LW5vZGUiLAogICAgICB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0dldENsYXNzRGVmYXVsdHMiLCBjc3NJY29uOiAiYmx1ZXByaW50LW5vZGUiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfTGF0ZW50T25saW5lQ2FsbCIsIGNzc0ljb246ICJibHVlcHJpbnQtbm9kZSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Td2l0Y2hFbnVtIiwgY3NzSWNvbjogInN3aXRjaCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Td2l0Y2hOYW1lIiwgY3NzSWNvbjogInN3aXRjaCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Td2l0Y2hJbnRlZ2VyIiwgY3NzSWNvbjogInN3aXRjaCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9Td2l0Y2hTdHJpbmciLCBjc3NJY29uOiAic3dpdGNoIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX1NlbGVjdCIsIGNzc0ljb246ICJzZWxlY3QiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfTWFrZVN0cnVjdCIsIGNzc0ljb246ICJtYWtlLXN0cnVjdCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9NYWtlQXJyYXkiLCBjc3NJY29uOiAibWFrZS1hcnJheSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9CcmVha1N0cnVjdCIsIGNzc0ljb246ICJicmVhay1zdHJ1Y3QiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRnVuY3Rpb25FbnRyeSIsIGNzc0ljb246ICJibHVlcHJpbnQtbm9kZSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9GdW5jdGlvblJlc3VsdCIsIGNzc0ljb246ICJibHVlcHJpbnQtbm9kZSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9TcGF3bkFjdG9yRnJvbUNsYXNzIiwgY3NzSWNvbjogInNwYXduLWFjdG9yIiB9LAogICAgICB7IGJsdWVwcmludENsYXNzOiAiSzJOb2RlX0R5bmFtaWNDYXN0IiwgY3NzSWNvbjogImNhc3QiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfRXhlY3V0aW9uU2VxdWVuY2UiLCBjc3NJY29uOiAic2VxdWVuY2UiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfU2VsZWN0IiwgY3NzSWNvbjogInB1cmUtZnVuY3Rpb24tY2FsbCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9UaW1lbGluZSIsIGNzc0ljb246ICJ0aW1lbGluZSIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9DcmVhdGVXaWRnZXQiLCBjc3NJY29uOiAiYmx1ZXByaW50LW5vZGUiIH0sCiAgICAgIHsgYmx1ZXByaW50Q2xhc3M6ICJLMk5vZGVfU2V0RmllbGRzSW5TdHJ1Y3QiLCBjc3NJY29uOiAicGlsbCIgfSwKICAgICAgeyBibHVlcHJpbnRDbGFzczogIksyTm9kZV9NYWtlTWFwIiwgY3NzSWNvbjogIm1ha2UtbWFwIiB9LAogICAgXTsKICBmdW5jdGlvbiBVTm9kZSgpIHsKICAgICh0aGlzLm9iamVjdERlZmluaXRpb24gPSBbXSksCiAgICAgICh0aGlzLnBvc2l0aW9uID0gWzAsIDBdKSwKICAgICAgKHRoaXMuc2l6ZSA9IFswLCAwXSksCiAgICAgICh0aGlzLmd1aWQgPSAiIiksCiAgICAgICh0aGlzLmNvbW1lbnQgPSAiIiksCiAgICAgICh0aGlzLnBpbnMgPSBbXSksCiAgICAgICh0aGlzLnByb3BzID0gW10pLAogICAgICAodGhpcy51c2VyRGVmaW5lZFBpbnMgPSBbXSksCiAgICAgICh0aGlzLm5vZGVzID0gW10pLAogICAgICAodGhpcy5pc0JlbG93NDEzVmVyc2lvbiA9ICExKSwKICAgICAgKHRoaXMuaXNCZWxvdzUyVmVyc2lvbiA9ICExKSwKICAgICAgKHRoaXMuY29udGFpbnNWaXN1YWxOb2RlcyA9ICExKTsKICB9CiAgKFVOb2RlLnByb3RvdHlwZS50cmVhdCA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCwKICAgICAgbiwKICAgICAgcyA9IDAsCiAgICAgIGkgPSBTUEVDSUFMX1RSRUFUTUVOVFMubGVuZ3RoLAogICAgICByID0gMDsKICAgIGZvciAoCiAgICAgIHRoaXMuaXNCZWxvdzUyVmVyc2lvbiB8fAogICAgICAnIicgIT09IGUuc3Vic3RyaW5nKDAsIDEpIHx8CiAgICAgIChlID0gZS5yZXBsYWNlKCciJywgIiIpLnJlcGxhY2UoJyInLCAiIikpOwogICAgICBzIDwgaTsKICAgICAgKytzCiAgICApCiAgICAgIGlmICgKICAgICAgICBTUEVDSUFMX1RSRUFUTUVOVFNbc10ubmFtZSA9PT0gZS5zdWJzdHJpbmcoMCwgU1BFQ0lBTF9UUkVBVE1FTlRTW3NdLmxlbikKICAgICAgKQogICAgICAgIHJldHVybiB2b2lkIFNQRUNJQUxfVFJFQVRNRU5UU1tzXS5mbi5jYWxsKAogICAgICAgICAgdGhpcywKICAgICAgICAgIGUuc3Vic3RyaW5nKFNQRUNJQUxfVFJFQVRNRU5UU1tzXS5sZW4pLAogICAgICAgICAgU1BFQ0lBTF9UUkVBVE1FTlRTW3NdLmFyZzAsCiAgICAgICAgICBTUEVDSUFMX1RSRUFUTUVOVFNbc10uYXJnMQogICAgICAgICk7CiAgICBpZiAoIkN1c3RvbVByb3BlcnRpZXMgUGluIiA9PT0gZS5zdWJzdHJpbmcoMCwgMjApKQogICAgICB0aGlzLnRyZWF0Q3VzdG9tUHJvcGVydGllcyhlLnN1YnN0cmluZygyMCkpOwogICAgZWxzZSBpZiAoIkJlZ2luIE9iamVjdCIgPT09IGUuc3Vic3RyaW5nKDAsIDEyKSkKICAgICAgdGhpcy5vYmplY3REZWZpbml0aW9uID0gZXh0cmFjdE9iamVjdERlZmluaXRpb24oZSk7CiAgICBlbHNlIGlmICgiQ3VzdG9tUHJvcGVydGllcyBVc2VyRGVmaW5lZFBpbiIgPT09IGUuc3Vic3RyaW5nKDAsIDMxKSkKICAgICAgdGhpcy51c2VyRGVmaW5lZFBpbnMucHVzaChlLnN1YnN0cmluZygzMSkpOwogICAgZWxzZSBpZiAoKCh0ID0gY29udmVydFRleHRUb1Byb3BzKGUpKSwgQXJyYXkuaXNBcnJheSh0KSkpCiAgICAgIGZvciAobiA9IHQubGVuZ3RoOyByIDwgbjsgKytyKSB0aGlzLnByb3BzLnB1c2godFtyXSk7CiAgICBlbHNlIHRoaXMucHJvcHMucHVzaCh0KTsKICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUudHJlYXRDdXN0b21Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSBuZXcgUGluKCksCiAgICAgICAgbiA9IGNvbnZlcnRUZXh0VG9Qcm9wcyhlKSwKICAgICAgICBzID0gMCwKICAgICAgICBpID0gbi5sZW5ndGg7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KG4pKSBmb3IgKDsgcyA8IGk7ICsrcykgdC5hZGRQcm9wKG5bc10pOwogICAgICBlbHNlIHQuYWRkUHJvcChuKTsKICAgICAgdGhpcy5waW5zLnB1c2godCk7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVUZXh0Rm9yVW5yZWFsID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSAiIjsKICAgICAgcmV0dXJuICgKICAgICAgICAodCArPSAiQmVnaW4gIiArIHRoaXMuZ2VuZXJhdGVUZXh0T2JqZWN0RGVmaW5pdGlvbigpKSArCiAgICAgICAgdGhpcy5nZW5lcmF0ZVRleHRQcm9wcyhlKSArCiAgICAgICAgKCJFbmQgIiArIHRoaXMub2JqZWN0RGVmaW5pdGlvblswXS52YWx1ZSkKICAgICAgKTsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlLCB0ID0gW10sIG4gPSAwLCBzID0gdGhpcy5vYmplY3REZWZpbml0aW9uLmxlbmd0aCwgaSA9ICIiLCByID0gIiI7CiAgICAgICAgbiA8IHM7CiAgICAgICAgKytuCiAgICAgICkKICAgICAgICAoZSA9IHRoaXMub2JqZWN0RGVmaW5pdGlvbltuXS52YWx1ZSksCiAgICAgICAgICAoaSA9ICIiKSwKICAgICAgICAgIHRoaXMub2JqZWN0RGVmaW5pdGlvbltuXS51c2VEZWxpbWl0ZXIgJiYgKGkgPSAnIicpLAogICAgICAgICAgKHIgPSAiIiksCiAgICAgICAgICB0aGlzLm9iamVjdERlZmluaXRpb25bbl0ubmFtZSAmJgogICAgICAgICAgICAociA9IHRoaXMub2JqZWN0RGVmaW5pdGlvbltuXS5uYW1lICsgIj0iKSwKICAgICAgICAgIHQucHVzaChyICsgaSArIGUgKyBpKTsKICAgICAgcmV0dXJuIHQuam9pbigiICIpICsgIlxuIjsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uTmFtZU9ubHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gW10sCiAgICAgICAgdCA9ICIiLAogICAgICAgIG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiTmFtZSIpOwogICAgICByZXR1cm4gKAogICAgICAgIG51bGwgIT09IG4gJiYKICAgICAgICAgICgodCA9ICIiKSwKICAgICAgICAgIG4udXNlRGVsaW1pdGVyICYmICh0ID0gJyInKSwKICAgICAgICAgIGUucHVzaCgiTmFtZT0iICsgdCArIG4udmFsdWUgKyB0KSksCiAgICAgICAgZS5qb2luKCIgIikgKyAiXG4iCiAgICAgICk7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVUZXh0UHJvcHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCwKICAgICAgICBuLAogICAgICAgIHMgPSBbXSwKICAgICAgICBpID0gMCwKICAgICAgICByID0gdGhpcy5wcm9wcy5sZW5ndGgsCiAgICAgICAgbyA9IDAsCiAgICAgICAgYSA9IHRoaXMucGlucy5sZW5ndGgsCiAgICAgICAgbCA9IDAsCiAgICAgICAgdSA9IHRoaXMudXNlckRlZmluZWRQaW5zLmxlbmd0aCwKICAgICAgICBjID0gZ2V0SW5kZW50Rm9ybWF0KGUpLAogICAgICAgIGQgPSAiIiwKICAgICAgICBwID0gIiIsCiAgICAgICAgaCA9ICIiLAogICAgICAgIGYgPSAtMTsKICAgICAgaWYgKAogICAgICAgICgwICE9PSB0aGlzLnBvc2l0aW9uWzBdICYmCiAgICAgICAgICAoKHAgPSAnIk5vZGVQb3NYIj0nKSwKICAgICAgICAgIHRoaXMuaXNCZWxvdzUyVmVyc2lvbiAmJiAocCA9ICJOb2RlUG9zWD0iKSwKICAgICAgICAgIHMucHVzaChjICsgcCArIHRoaXMucG9zaXRpb25bMF0pKSwKICAgICAgICAwICE9PSB0aGlzLnBvc2l0aW9uWzFdICYmCiAgICAgICAgICAoKHAgPSAnIk5vZGVQb3NZIj0nKSwKICAgICAgICAgIHRoaXMuaXNCZWxvdzUyVmVyc2lvbiAmJiAocCA9ICJOb2RlUG9zWT0iKSwKICAgICAgICAgIHMucHVzaChjICsgcCArIHRoaXMucG9zaXRpb25bMV0pKSwKICAgICAgICAoMCA9PT0gdGhpcy5zaXplWzBdICYmIDAgPT09IHRoaXMuc2l6ZVsxXSkgfHwKICAgICAgICAgICgocCA9ICciTm9kZVdpZHRoIj0nKSwKICAgICAgICAgIHRoaXMuaXNCZWxvdzUyVmVyc2lvbiAmJiAocCA9ICJOb2RlV2lkdGg9IiksCiAgICAgICAgICBzLnB1c2goYyArIHAgKyB0aGlzLnNpemVbMF0pLAogICAgICAgICAgKHAgPSAnIk5vZGVIZWlnaHQiPScpLAogICAgICAgICAgdGhpcy5pc0JlbG93NTJWZXJzaW9uICYmIChwID0gIk5vZGVIZWlnaHQ9IiksCiAgICAgICAgICBzLnB1c2goYyArIHAgKyB0aGlzLnNpemVbMV0pKSwKICAgICAgICAwIDwgdGhpcy5ndWlkLmxlbmd0aCAmJgogICAgICAgICAgKChwID0gJyJOb2RlR3VpZCI9JyksCiAgICAgICAgICB0aGlzLmlzQmVsb3c1MlZlcnNpb24gJiYgKHAgPSAiTm9kZUd1aWQ9IiksCiAgICAgICAgICBzLnB1c2goYyArIHAgKyB0aGlzLmd1aWQpKSwKICAgICAgICAwIDwgdGhpcy5jb21tZW50Lmxlbmd0aCAmJgogICAgICAgICAgKChwID0gJyJOb2RlQ29tbWVudCI9JyksCiAgICAgICAgICB0aGlzLmlzQmVsb3c1MlZlcnNpb24gJiYgKHAgPSAiTm9kZUNvbW1lbnQ9IiksCiAgICAgICAgICBzLnB1c2goYyArIHAgKyB0aGlzLmNvbW1lbnQpKSwKICAgICAgICB0aGlzLmlzQmVsb3c0MTNWZXJzaW9uKQogICAgICApIHsKICAgICAgICBmb3IgKDsgbyA8IGE7ICsrbykKICAgICAgICAgIHMucHVzaCgKICAgICAgICAgICAgYyArICdCZWdpbiBPYmplY3QgQ2xhc3M9RWRHcmFwaFBpbiBOYW1lPSInICsgdGhpcy5waW5zW29dLmlkICsgJyInCiAgICAgICAgICApLAogICAgICAgICAgICBzLnB1c2goYyArICJFbmQgT2JqZWN0Iik7CiAgICAgICAgZm9yICg7IGkgPCByOyArK2kpIHMucHVzaChjICsgY29udmVydFByb3BzVG9UZXh0KHRoaXMucHJvcHNbaV0pKTsKICAgICAgICBmb3IgKDsgbCA8IHU7ICsrbCkKICAgICAgICAgIHMucHVzaCgKICAgICAgICAgICAgYyArICJDdXN0b21Qcm9wZXJ0aWVzIFVzZXJEZWZpbmVkUGluIiArIHRoaXMudXNlckRlZmluZWRQaW5zW2xdCiAgICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoOyBpIDwgcjsgKytpKQogICAgICAgICAgKGggPSBjb252ZXJ0UHJvcHNUb1RleHQodGhpcy5wcm9wc1tpXSkpLAogICAgICAgICAgICB0aGlzLmlzQmVsb3c1MlZlcnNpb24gfHwKICAgICAgICAgICAgICAoKHQgPSBoLmluZGV4T2YoIj0iKSksCiAgICAgICAgICAgICAgLTEgIT09IChuID0gaC5pbmRleE9mKCIoIikpICYmIG4gPCB0CiAgICAgICAgICAgICAgICA/IChmID0gbikKICAgICAgICAgICAgICAgIDogLTEgIT09IHQgJiYgKGYgPSB0KSwKICAgICAgICAgICAgICAoaCA9ICciJyArIGguc3Vic3RyaW5nKDAsIGYpICsgJyInICsgaC5zdWJzdHJpbmcoZikpKSwKICAgICAgICAgICAgcy5wdXNoKGMgKyBoKTsKICAgICAgICBmb3IgKDsgbCA8IHU7ICsrbCkKICAgICAgICAgIHMucHVzaCgKICAgICAgICAgICAgYyArICJDdXN0b21Qcm9wZXJ0aWVzIFVzZXJEZWZpbmVkUGluIiArIHRoaXMudXNlckRlZmluZWRQaW5zW2xdCiAgICAgICAgICApOwogICAgICB9CiAgICAgIGZvciAobyA9IDA7IG8gPCBhOyArK28pIHMucHVzaCh0aGlzLnBpbnNbb10uZ2VuZXJhdGVUZXh0Rm9yVW5yZWFsKGUpKTsKICAgICAgcmV0dXJuIDAgPCAoZCA9IHMuam9pbigiXG4iKSkubGVuZ3RoICYmIChkICs9ICJcbiIpLCBkOwogICAgfSksCiAgICAoVU5vZGUucHJvdG90eXBlLmdlbmVyYXRlSFRNTCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCA9IHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbIm5vZGUiXSwKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBjaGlsZHM6IFt0aGlzLmdlbmVyYXRlSFRNTFRvb2xUaXAoKSwgdGhpcy5nZW5lcmF0ZUhUTUxIZWFkZXIoKV0sCiAgICAgICAgfSwKICAgICAgICBuID0gdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCksCiAgICAgICAgcyA9IDA7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KG4pKSBmb3IgKGUgPSBuLmxlbmd0aDsgcyA8IGU7ICsrcykgdC5jaGlsZHMucHVzaChuW3NdKTsKICAgICAgZWxzZSB0LmNoaWxkcy5wdXNoKG4pOwogICAgICByZXR1cm4gdDsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZUNzc05vZGVTdHlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBbXTsKICAgICAgcmV0dXJuICgKICAgICAgICBlLnB1c2goInBvc2l0aW9uOmFic29sdXRlIiksCiAgICAgICAgZS5wdXNoKAogICAgICAgICAgInRyYW5zZm9ybTogdHJhbnNsYXRlKCIgKwogICAgICAgICAgICB0aGlzLnBvc2l0aW9uWzBdICsKICAgICAgICAgICAgInB4LCAiICsKICAgICAgICAgICAgdGhpcy5wb3NpdGlvblsxXSArCiAgICAgICAgICAgICJweCkiCiAgICAgICAgKSwKICAgICAgICAwICE9PSB0aGlzLnNpemVbMF0gJiYgZS5wdXNoKCJ3aWR0aDoiICsgdGhpcy5zaXplWzBdICsgInB4IiksCiAgICAgICAgMCAhPT0gdGhpcy5zaXplWzFdICYmIGUucHVzaCgiaGVpZ2h0OiIgKyB0aGlzLnNpemVbMV0gKyAicHgiKSwKICAgICAgICBlCiAgICAgICk7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MSGVhZGVyID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlID0gdGhpcy5nZW5lcmF0ZUhUTUxQaW5EZWxlZ2F0ZSgpLAogICAgICAgICAgdCA9IDAsCiAgICAgICAgICBuID0gZS5sZW5ndGgsCiAgICAgICAgICBzID0gewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbCiAgICAgICAgICAgICAgImhlYWRlciIsCiAgICAgICAgICAgICAgIm5vZGUtY29sb3IiLAogICAgICAgICAgICAgIHRoaXMuZmluZENzc0NsYXNzTm9kZUNvbG9yKCksCiAgICAgICAgICAgICAgImdyYWRpZW50IiwKICAgICAgICAgICAgICB0aGlzLmZpbmRJY29uQWZ0ZXJOb2RlKCksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJpY29uIiwgdGhpcy5maW5kQ3NzQ2xhc3NOb2RlSWNvbigpXSB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgY2xhc3NlczogWyJoYXMtaWNvbiIsICJuYW1lIl0sCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmZpbmRIZWFkZXJOYW1lKCksCiAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsic3VibmFtZSJdLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZmluZEhlYWRlclN1Ym5hbWUoKSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH07CiAgICAgICAgdCA8IG47CiAgICAgICAgKyt0CiAgICAgICkKICAgICAgICBzLmNoaWxkcy5wdXNoKGVbdF0pOwogICAgICByZXR1cm4gczsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLAogICAgICAgIHQgPSAwLAogICAgICAgIG4gPSBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX0NTU19DT0xPUi5sZW5ndGgsCiAgICAgICAgcyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpOwogICAgICBpZiAobnVsbCAhPT0gcykgewogICAgICAgIGZvciAoOyB0IDwgbjsgKyt0KQogICAgICAgICAgaWYgKAogICAgICAgICAgICAtMSAhPT0KICAgICAgICAgICAgcy52YWx1ZS5pbmRleE9mKAogICAgICAgICAgICAgIEVRVUlWQUxFTkNFX01BUF9CTFVFUFJJTlRfQ0xBU1NfVE9fQ1NTX0NPTE9SW3RdLmJsdWVwcmludENsYXNzCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIEVRVUlWQUxFTkNFX01BUF9CTFVFUFJJTlRfQ0xBU1NfVE9fQ1NTX0NPTE9SW3RdLmNzc0NvbG9yOwogICAgICAgIGlmICgtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJLMk5vZGVfQ2FsbEZ1bmN0aW9uIikpCiAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgImJJc1B1cmVGdW5jIikpICYmCiAgICAgICAgICAgICJUcnVlIiA9PT0gZS52YWx1ZQogICAgICAgICAgICA/ICJwdXJlLWZ1bmN0aW9uLWNhbGwiCiAgICAgICAgICAgIDogImZ1bmN0aW9uLWNhbGwiOwogICAgICB9CiAgICAgIHJldHVybiBudWxsICE9PSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkRlbGVnYXRlUmVmZXJlbmNlIikKICAgICAgICA/ICJmdW5jdGlvbi1jYWxsIgogICAgICAgIDogbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJNYWNyb0dyYXBoUmVmZXJlbmNlIikKICAgICAgICA/ICJtYWNybyIKICAgICAgICA6IG51bGwgIT09IChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJGdW5jdGlvblJlZmVyZW5jZSIpKSAmJgogICAgICAgICAgIkNvbmNhdF9TdHJTdHIiID09PSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgIk1lbWJlck5hbWUiKS52YWx1ZQogICAgICAgID8gInB1cmUtZnVuY3Rpb24tY2FsbCIKICAgICAgICA6ICJmdW5jdGlvbi1jYWxsIjsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxUb29sVGlwID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICB0LAogICAgICAgIG4gPSAiIiwKICAgICAgICBzID0geyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbInRvb2x0aXAiXSB9LAogICAgICAgIGkgPSBbXSwKICAgICAgICByID0gMDsKICAgICAgaWYgKDAgPT09IHRoaXMuY29tbWVudC5sZW5ndGgpIHJldHVybiBudWxsOwogICAgICBpZiAoCiAgICAgICAgKAogICAgICAgICAgKG4gPSBuMmJyKAogICAgICAgICAgICBubDJicigKICAgICAgICAgICAgICByZW1vdmVRdW90ZXModGhpcy5jb21tZW50KQogICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoIlxcJyIsICInIikKICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCIvZywgJyInKQogICAgICAgICAgICApCiAgICAgICAgICApKS5tYXRjaCgvPGJyPi9nKSB8fCBbXQogICAgICAgICkubGVuZ3RoIDwgMQogICAgICApCiAgICAgICAgKHMudGV4dCA9IG4pLCAocy5hdHRycyA9IFt7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiAidG9wOi0zM3B4IiB9XSk7CiAgICAgIGVsc2UgewogICAgICAgIGZvciAodCA9IChlID0gbi5zcGxpdCgvPGJyPi9nKSkubGVuZ3RoOyByIDwgdDsgKytyKQogICAgICAgICAgaS5wdXNoKHsgdGV4dDogZVtyXSB9KSwgciArIDEgPCB0ICYmIGkucHVzaCh7IHRhZzogImJyIiB9KTsKICAgICAgICAocy5jaGlsZHMgPSBpKSwKICAgICAgICAgIChzLmF0dHJzID0gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZTogInN0eWxlIiwKICAgICAgICAgICAgICB2YWx1ZTogInRvcDotIiArICgoaS5sZW5ndGggLyAyKSAqIDE1ICsgMjgpICsgInB4IiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0pOwogICAgICB9CiAgICAgIHJldHVybiBzOwogICAgfSksCiAgICAoVU5vZGUucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVJY29uID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiTWFjcm9HcmFwaFJlZmVyZW5jZSIpLAogICAgICAgIHQgPSBudWxsLAogICAgICAgIG4gPSBudWxsLAogICAgICAgIHMgPSBudWxsLAogICAgICAgIGkgPSBudWxsLAogICAgICAgIHIgPSAwLAogICAgICAgIG8gPSBFUVVJVkFMRU5DRV9NQVBfTUFDUk9fVE9fQ1NTX0lDT04ubGVuZ3RoOwogICAgICBpZiAobnVsbCAhPT0gZSkgewogICAgICAgIGlmIChudWxsID09PSAodCA9IHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTWFjcm9HcmFwaCIpKSkKICAgICAgICAgIHJldHVybiAibWFjcm8iOwogICAgICAgIGZvciAoOyByIDwgbzsgKytyKQogICAgICAgICAgaWYgKAogICAgICAgICAgICAtMSAhPT0gdC52YWx1ZS5pbmRleE9mKEVRVUlWQUxFTkNFX01BUF9NQUNST19UT19DU1NfSUNPTltyXS5tYWNybykKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIEVRVUlWQUxFTkNFX01BUF9NQUNST19UT19DU1NfSUNPTltyXS5jc3NJY29uOwogICAgICAgIHJldHVybiAibWFjcm8iOwogICAgICB9CiAgICAgIGlmIChudWxsICE9PSAobiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpKSkKICAgICAgICBmb3IgKAogICAgICAgICAgciA9IDAsIG8gPSBFUVVJVkFMRU5DRV9NQVBfQkxVRVBSSU5UX0NMQVNTX1RPX0NTU19JQ09OLmxlbmd0aDsKICAgICAgICAgIHIgPCBvOwogICAgICAgICAgKytyCiAgICAgICAgKQogICAgICAgICAgaWYgKAogICAgICAgICAgICAtMSAhPT0KICAgICAgICAgICAgbi52YWx1ZS5pbmRleE9mKAogICAgICAgICAgICAgIEVRVUlWQUxFTkNFX01BUF9CTFVFUFJJTlRfQ0xBU1NfVE9fQ1NTX0lDT05bcl0uYmx1ZXByaW50Q2xhc3MKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gRVFVSVZBTEVOQ0VfTUFQX0JMVUVQUklOVF9DTEFTU19UT19DU1NfSUNPTltyXS5jc3NJY29uOwogICAgICBpZiAobnVsbCAhPT0gKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkZ1bmN0aW9uUmVmZXJlbmNlIikpKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgKChzID0KICAgICAgICAgICAgbnVsbCAhPT0gKHMgPSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgIk1lbWJlclBhcmVudCIpKSAmJgogICAgICAgICAgICAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJLaXNtZXRNYXRoTGlicmFyeSIpKSwKICAgICAgICAgIChpID0gc2VhcmNoUHJvcFdpdGhOYW1lKGUudmFsdWUsICJNZW1iZXJOYW1lIikpLAogICAgICAgICAgcyAmJiAtMSAhPT0gaS52YWx1ZS5pbmRleE9mKCJNYWtlIikpCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuICJtYWtlLXN0cnVjdCI7CiAgICAgICAgaWYgKHMgJiYgLTEgIT09IGkudmFsdWUuaW5kZXhPZigiQnJlYWsiKSkgcmV0dXJuICJicmVhay1zdHJ1Y3QiOwogICAgICB9CiAgICAgIHJldHVybiBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiYklzUHVyZUZ1bmMiKSkgJiYKICAgICAgICAiVHJ1ZSIgPT09IGUudmFsdWUKICAgICAgICA/ICgocyA9IHRoaXMuZmluZEhlYWRlck5hbWUoKSksCiAgICAgICAgICAtMSAhPT0gWyJCcmVhayBIaXQgUmVzdWx0Il0uaW5kZXhPZihzKQogICAgICAgICAgICA/ICJicmVhay1zdHJ1Y3QiCiAgICAgICAgICAgIDogInB1cmUtZnVuY3Rpb24tY2FsbCIpCiAgICAgICAgOiAiZnVuY3Rpb24tY2FsbCI7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZmluZEljb25BZnRlck5vZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIGUsCiAgICAgICAgICB0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMub2JqZWN0RGVmaW5pdGlvbiwgIkNsYXNzIiksCiAgICAgICAgICBuID0gWwogICAgICAgICAgICAiSzJOb2RlX0xhdGVudE9ubGluZUNhbGwiLAogICAgICAgICAgICAiSzJOb2RlX0xhdGVudEdhbWVwbGF5VGFza0NhbGwiLAogICAgICAgICAgICAiSzJOb2RlX0FzeW5jQWN0aW9uIiwKICAgICAgICAgICAgIksyTm9kZV9BSU1vdmVUbyIsCiAgICAgICAgICAgICJLMk5vZGVfTGF0ZW50T25saW5lQ2FsbCIsCiAgICAgICAgICAgICJLMk5vZGVfUGxheU1vbnRhZ2UiLAogICAgICAgICAgXSwKICAgICAgICAgIHMgPSAwLAogICAgICAgICAgaSA9IG4ubGVuZ3RoOwogICAgICAgIHMgPCBpOwogICAgICAgICsrcwogICAgICApCiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgLTEgIT09IHQudmFsdWUuaW5kZXhPZihuW3NdKSkgcmV0dXJuICJpY29uLWFzeW5jIjsKICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgLTEgIT09IHQudmFsdWUuaW5kZXhPZigiSzJOb2RlX0NhbGxEZWxlZ2F0ZSIpCiAgICAgICAgPyAiaWNvbi1tZXNzYWdlIgogICAgICAgIDogIlNldCBGb2N1cyBUbyBHYW1lIFZpZXdwb3J0IiA9PT0gKGUgPSB0aGlzLmZpbmRIZWFkZXJOYW1lKCkpCiAgICAgICAgPyAiaWNvbi1jbGllbnQtZXZlbnQiCiAgICAgICAgOiAiRXZlbnQgQW55RGFtYWdlIiA9PT0gZQogICAgICAgID8gImljb24tc2VydmVyLWV2ZW50IgogICAgICAgIDogIkNyZWF0ZSBTb3VuZDJEIiA9PT0gZSB8fCAiUGxheSBTb3VuZDJEIiA9PT0gZQogICAgICAgID8gImljb24tY2xpZW50LWV2ZW50IgogICAgICAgIDogIkRlbGF5IiA9PT0gZQogICAgICAgID8gImljb24tYXN5bmMiCiAgICAgICAgOiAiIjsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCA9IC0xLAogICAgICAgIG4gPSAiIiwKICAgICAgICBzID0gbnVsbCwKICAgICAgICBpID0gbnVsbCwKICAgICAgICByID0gbnVsbCwKICAgICAgICBvID0gbnVsbCwKICAgICAgICBhID0gbnVsbCwKICAgICAgICBsID0gITEsCiAgICAgICAgdSA9ICExLAogICAgICAgIGMgPSAhMSwKICAgICAgICBkID0gITEsCiAgICAgICAgcCA9IG51bGwsCiAgICAgICAgaCA9IG51bGwsCiAgICAgICAgZiA9IG51bGwsCiAgICAgICAgTiA9IG51bGwsCiAgICAgICAgbSA9IDAsCiAgICAgICAgQyA9IHRoaXMucGlucy5sZW5ndGgsCiAgICAgICAgZyA9IG51bGwsCiAgICAgICAgdiA9IG51bGwsCiAgICAgICAgUyA9IG51bGwsCiAgICAgICAgYiA9IG51bGwsCiAgICAgICAgXyA9ICIiLAogICAgICAgIE8gPSAiIiwKICAgICAgICBQID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMub2JqZWN0RGVmaW5pdGlvbiwgIkNsYXNzIik7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRXhlY3V0aW9uU2VxdWVuY2UiKSkgcmV0dXJuICJTZXF1ZW5jZSI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfVGltZWxpbmUiKSkKICAgICAgICByZXR1cm4gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJUaW1lbGluZU5hbWUiKS52YWx1ZTsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIi9TY3JpcHQvQUlHcmFwaC5LMk5vZGVfQUlNb3ZlVG8iKSkKICAgICAgICByZXR1cm4gIkFJIE1vdmVUbyI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCIvU2NyaXB0L0FuaW1HcmFwaC5LMk5vZGVfUGxheU1vbnRhZ2UiKSkKICAgICAgICByZXR1cm4gIlBsYXkgTW9udGFnZSI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCIvU2NyaXB0L0JsdWVwcmludEdyYXBoLksyTm9kZV9Gb3JtYXRUZXh0IikpCiAgICAgICAgcmV0dXJuICJGb3JtYXQgVGV4dCI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCIvU2NyaXB0L0JsdWVwcmludEdyYXBoLksyTm9kZV9NYWtlTWFwIikpCiAgICAgICAgcmV0dXJuICJNYWtlIE1hcCI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRnVuY3Rpb25SZXN1bHQiKSkgcmV0dXJuICJSZXR1cm4gTm9kZSI7CiAgICAgIGlmICgKICAgICAgICBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiRGVsZWdhdGVSZWZlcmVuY2UiKSkgJiYKICAgICAgICBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTWVtYmVyTmFtZSIpKQogICAgICApCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9DYWxsRGVsZWdhdGUiKQogICAgICAgICAgICA/IChPID0gIkNhbGwgIikKICAgICAgICAgICAgOiAtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfQWRkRGVsZWdhdGUiKQogICAgICAgICAgICA/IChPID0gIkJpbmQgRXZlbnQgdG8gIikKICAgICAgICAgICAgOiAtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfUmVtb3ZlRGVsZWdhdGUiKQogICAgICAgICAgICA/IChPID0gIlVuYmluZCBFdmVudCBmcm9tICIpCiAgICAgICAgICAgIDogLTEgIT09IFAudmFsdWUuaW5kZXhPZigiSzJOb2RlX0NsZWFyRGVsZWdhdGUiKSAmJgogICAgICAgICAgICAgIChPID0gIlVuYmluZCBhbGwgRXZlbnRzIGZyb20gIiksCiAgICAgICAgICBPICsgZS52YWx1ZQogICAgICAgICk7CiAgICAgIGlmIChudWxsICE9PSAoTyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiTWFjcm9HcmFwaFJlZmVyZW5jZSIpKSkKICAgICAgICByZXR1cm4gLTEgIT09CiAgICAgICAgICAocyA9IHNlYXJjaFByb3BXaXRoTmFtZShPLnZhbHVlLCAiTWFjcm9HcmFwaCIpKS52YWx1ZS5pbmRleE9mKAogICAgICAgICAgICAiU3RhbmRhcmRNYWNyb3M6RmxpcEZsb3AiCiAgICAgICAgICApCiAgICAgICAgICA/ICJGbGlwRmxvcCIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6UmV2ZXJzZUZvckVhY2hMb29wIikKICAgICAgICAgID8gIlJldmVyc2VGb3JFYWNoTG9vcCIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6R2F0ZSIpCiAgICAgICAgICA/ICJHYXRlIgogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpJc1ZhbGlkIikKICAgICAgICAgID8gIklzVmFsaWQiCiAgICAgICAgICA6IC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIlN0YW5kYXJkTWFjcm9zOkZvckVhY2hMb29wV2l0aEJyZWFrIikKICAgICAgICAgID8gIkZvckVhY2hMb29wV2l0aEJyZWFrIgogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpGb3JFYWNoTG9vcCIpCiAgICAgICAgICA/ICJGb3JFYWNoTG9vcCIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6Rm9yTG9vcFdpdGhCcmVhayIpCiAgICAgICAgICA/ICJGb3JMb29wV2l0aEJyZWFrIgogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpXaGlsZUxvb3AiKQogICAgICAgICAgPyAiV2hpbGVMb29wIgogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpGb3JMb29wV2l0aEJyZWFrIikKICAgICAgICAgID8gIkZvckxvb3BXaXRoQnJlYWsiCiAgICAgICAgICA6IC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIlN0YW5kYXJkTWFjcm9zOkZvckxvb3AiKQogICAgICAgICAgPyAiRm9yTG9vcCIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6V2hpbGVMb29wIikKICAgICAgICAgID8gIldoaWxlTG9vcCIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6RG8gTiIpCiAgICAgICAgICA/ICJEbyBOIgogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpEb09uY2UiKQogICAgICAgICAgPyAiRG8gT25jZSIKICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiU3dpdGNoIEhhcyBBdXRob3JpdHkiKQogICAgICAgICAgPyAiU3dpdGNoIEhhcyBBdXRob3JpdHkiCiAgICAgICAgICA6IC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIlN0YW5kYXJkTWFjcm9zOiIpCiAgICAgICAgICA/ICgodCA9IHMudmFsdWUuaW5kZXhPZigiU3RhbmRhcmRNYWNyb3M6IikpLAogICAgICAgICAgICAtMSAhPT0gKHQgPSAobiA9IHMudmFsdWUuc3Vic3RyaW5nKHQgKyAxNSkpLmluZGV4T2YoIiciKSkKICAgICAgICAgICAgICA/IG4uc3Vic3RyaW5nKDAsIHQpCiAgICAgICAgICAgICAgOiBuKQogICAgICAgICAgOiAwID09PSBzLnZhbHVlLmluZGV4T2YoIkVkR3JhcGgnIikKICAgICAgICAgID8gJyInID09PSAobiA9IHMudmFsdWUuc3Vic3RyaW5nKDgpKS5zdWJzdHJpbmcoMCwgMSkKICAgICAgICAgICAgPyBuLnN1YnN0cmluZygxLCBuLmxlbmd0aCAtIDIpCiAgICAgICAgICAgIDogbi5zdWJzdHJpbmcoMCwgbi5sZW5ndGggLSAxKQogICAgICAgICAgOiBzLnZhbHVlOwogICAgICBpZiAoLTEgIT09IFAudmFsdWUuaW5kZXhPZigiSzJOb2RlX1NlbGVjdCIpKSByZXR1cm4gIlNlbGVjdCI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfR2V0Q2xhc3NEZWZhdWx0cyIpKQogICAgICAgIHJldHVybiAiR2V0IENsYXNzIERlZmF1bHRzIjsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9MYXRlbnRPbmxpbmVDYWxsIikpCiAgICAgICAgcmV0dXJuIG51bGwgPT09CiAgICAgICAgICAoaSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiUHJveHlGYWN0b3J5RnVuY3Rpb25OYW1lIikpCiAgICAgICAgICA/ICJBc3luYyBUYXNrOiBNaXNzaW5nIEZ1bmN0aW9uIgogICAgICAgICAgOiBudWxsICE9PQogICAgICAgICAgICAgIChyID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJQcm94eUZhY3RvcnlDbGFzcyIpKSAmJgogICAgICAgICAgICAtMSAhPT0gci52YWx1ZS5pbmRleE9mKCIvU2NyaXB0L0hpdmVNUFNESy4iKQogICAgICAgICAgPyBuZXcgSGl2ZU1QKCkuZmluZEhlYWRlck5hbWVGb3JIaXZlTVBTREsoci52YWx1ZSkKICAgICAgICAgIDogIkFzeW5jIFRhc2s6ICIgKyB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUoaS52YWx1ZSk7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfQWRkQ29tcG9uZW50IikpCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChuID0gIiIpLAogICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlRlbXBsYXRlVHlwZSIpKSwKICAgICAgICAgIChhID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJUZW1wbGF0ZUJsdWVwcmludCIpKSwKICAgICAgICAgIG51bGwgIT09IG8KICAgICAgICAgICAgPyAoKG4gPSBvLnZhbHVlKSwKICAgICAgICAgICAgICAtMSAhPT0gKHQgPSBvLnZhbHVlLmxhc3RJbmRleE9mKCIuIikpICYmCiAgICAgICAgICAgICAgICAobiA9IG4uc3Vic3RyKHQgKyAxKS5yZXBsYWNlKCInIiwgIiIpKSkKICAgICAgICAgICAgOiBudWxsICE9PSBhICYmCiAgICAgICAgICAgICAgKChuID0gYS52YWx1ZSksCiAgICAgICAgICAgICAgLTEgIT09ICh0ID0gYS52YWx1ZS5sYXN0SW5kZXhPZigiLiIpKSAmJgogICAgICAgICAgICAgICAgKG4gPSBuLnN1YnN0cih0ICsgMSkucmVwbGFjZSgnIicsICIiKSkpLAogICAgICAgICAgIkFkZCBDb21wb25lbnQgIiArCiAgICAgICAgICAgIHRyYW5zZm9ybUludGVybmFsTmFtZShuLnJlcGxhY2UoIkNvbXBvbmVudCIsICIiKS5yZXBsYWNlKCciJywgIiIpKQogICAgICAgICk7CiAgICAgIGlmICgKICAgICAgICBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiRnVuY3Rpb25SZWZlcmVuY2UiKSkgJiYKICAgICAgICBudWxsICE9PSAoTyA9IHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTWVtYmVyTmFtZSIpKQogICAgICApCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICJOZWFybHkgRXF1YWwgVHJhbnNmb3JtIFRyYW5zZm9ybSIgPT09CiAgICAgICAgICAobiA9IHRyYW5zZm9ybUludGVybmFsTmFtZShPLnZhbHVlKSkKICAgICAgICAgICAgPyAobiA9ICJOZWFybHkgRXF1YWwgKHRyYW5zZm9ybSkiKQogICAgICAgICAgICA6ICJOZWFybHkgRXF1YWwgRmxvYXQgRmxvYXQiID09PSBuICYmIChuID0gIk5lYXJseSBFcXVhbCAoZmxvYXQpIiksCiAgICAgICAgICAtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfQ2FsbFBhcmVudEZ1bmN0aW9uIikKICAgICAgICAgICAgPyAiUGFyZW50OiIgKyBuCiAgICAgICAgICAgIDogKG51bGwgIT09CiAgICAgICAgICAgICAgICAocCA9CiAgICAgICAgICAgICAgICAgIG51bGwgPT09IChwID0gc2VhcmNoUHJvcFdpdGhOYW1lKGUudmFsdWUsICJNZW1iZXJQYXJlbnQiKSkKICAgICAgICAgICAgICAgICAgICA/IHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTWVtYmVyUGFyZW50Q2xhc3MiKQogICAgICAgICAgICAgICAgICAgIDogcCkgJiYKICAgICAgICAgICAgICAgICgobCA9IC0xICE9PSBwLnZhbHVlLmluZGV4T2YoIktpc21ldE1hdGhMaWJyYXJ5IikpLAogICAgICAgICAgICAgICAgKHUgPSAtMSAhPT0gcC52YWx1ZS5pbmRleE9mKCJLaXNtZXRTdHJpbmdMaWJyYXJ5IikpLAogICAgICAgICAgICAgICAgKGMgPSAtMSAhPT0gcC52YWx1ZS5pbmRleE9mKCJLaXNtZXRTeXN0ZW1MaWJyYXJ5IikpLAogICAgICAgICAgICAgICAgKGQgPSAtMSAhPT0gcC52YWx1ZS5pbmRleE9mKCJTY2VuZUNvbXBvbmVudCIpKSksCiAgICAgICAgICAgICAgLTEgIT09CiAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbiBSYW5nZSBGbG9hdCBGbG9hdCIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRiBDbGFtcCIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJMaW5lIFRyYWNlIE11bHRpIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTGluZSBUcmFjZSBTaW5nbGUgRm9yIE9iamVjdHMiID09PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmUgVHJhY2UgU2luZ2xlIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmUgVHJhY2UgU2luZ2xlIE5FVyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vcm1hbGl6ZWQgRGVsdGEgUm90YXRvciIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiR3JlYXRlciBHcmVhdGVyIFZlY3RvciBSb3RhdG9yIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkxlc3MgTGVzcyBWZWN0b3IgUm90YXRvciIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlYgTGVycCIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVCBMZXJwIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlIgTGVycCIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkYgVHJ1bmMiID09PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk11bHRpcGx5IE11bHRpcGx5IEZsb2F0IEZsb2F0IiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbmNhdCBTdHIgU3RyIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiViBTaXplIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb3JtYWwiID09PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIk5vcm1hbGl6ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiVmVjdG9yTGVuZ3RoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG4pICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJBcHBlbmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIlBvd2VyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJUcnVuY2F0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiTGVycCAoUm90YXRvcikiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIkxlcnAgKFRyYW5zZm9ybSkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG4pICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIkxlcnAgKFZlY3RvcikiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIlVucm90YXRlVmVjdG9yIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYgbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiUm90YXRlVmVjdG9yIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJiBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIkRlbHRhIChSb3RhdG9yKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJiBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiTGluZVRyYWNlQnlDaGFubmVsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYgYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiTGluZVRyYWNlQnlDaGFubmVsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSAmJiBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIkxpbmVUcmFjZUZvck9iamVjdHMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYgYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gIk11bHRpTGluZVRyYWNlQnlDaGFubmVsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYgbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiQ2xhbXAgKGZsb2F0KSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikgJiYgbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJJblJhbmdlIChmbG9hdCkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikuaW5kZXhPZigiR2V0Q29tcG9uZW50TG9jYXRpb24iKSAmJiBkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiR2V0V29ybGRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG4pLmluZGV4T2YoIkdldENvbXBvbmVudFJvdGF0aW9uIikgJiYgZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAiR2V0V29ybGRSb3RhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbikuaW5kZXhPZigiR2V0Q29tcG9uZW50VG9Xb3JsZCIpICYmIGQKICAgICAgICAgICAgICAgICAgICAgICAgPyAiR2V0V29ybGRUcmFuc2Zvcm0iCiAgICAgICAgICAgICAgICAgICAgICAgIDogbikuaW5kZXhPZigiR2V0Q29tcG9uZW50U2NhbGUiKSAmJiBkCiAgICAgICAgICAgICAgICAgICAgPyAiR2V0V29ybGRTY2FsZSIKICAgICAgICAgICAgICAgICAgICA6IG4pLmluZGV4T2YoIlNldFRpbWVyRGVsZWdhdGUiKSAmJiBjCiAgICAgICAgICAgICAgICA/ICJTZXQgVGltZXIgYnkgRXZlbnQiCiAgICAgICAgICAgICAgICA6IG4pCiAgICAgICAgKTsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9UdW5uZWwiKSkKICAgICAgICByZXR1cm4gbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJiQ2FuSGF2ZU91dHB1dHMiKQogICAgICAgICAgPyAiSW5wdXRzIgogICAgICAgICAgOiAiT3V0cHV0cyI7CiAgICAgIGlmICgKICAgICAgICAtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRnVuY3Rpb25FbnRyeSIpICYmCiAgICAgICAgbnVsbCAhPT0gKHMgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlNpZ25hdHVyZU5hbWUiKSkKICAgICAgKQogICAgICAgIHJldHVybiB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUocy52YWx1ZSk7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRnVuY3Rpb25SZXN1bHQiKSkgcmV0dXJuICJSZXR1cm4gTm9kZSI7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRHluYW1pY0Nhc3QiKSkKICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGggPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlRhcmdldFR5cGUiKSkKICAgICAgICAgID8gKChuID0gaC52YWx1ZSksCiAgICAgICAgICAgICJDYXN0IFRvICIgKwogICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgIC0xICE9PSAodCA9IGgudmFsdWUubGFzdEluZGV4T2YoIi4iKSkKICAgICAgICAgICAgICAgICAgPyBuLnN1YnN0cih0ICsgMSkucmVwbGFjZSgiJyIsICIiKQogICAgICAgICAgICAgICAgICA6IG4pLnJlcGxhY2UoJyInLCAiIikpCiAgICAgICAgICA6ICJCYWQgY2FzdCBub2RlIjsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9TcGF3bkFjdG9yRnJvbUNsYXNzIikpIHsKICAgICAgICBmb3IgKG4gPSAiTk9ORSI7IG0gPCBDOyArK20pCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICgoZiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnBpbnNbbV0ucHJvcHMsICJQaW5OYW1lIikpLAogICAgICAgICAgICAoTiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnBpbnNbbV0ucHJvcHMsICJEZWZhdWx0T2JqZWN0IikpLAogICAgICAgICAgICAiQ2xhc3MiID09PSBmLnZhbHVlICYmIG51bGwgIT09IE4pCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgIlNwYXduQWN0b3IgIiArCiAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgLTEgIT09ICh0ID0gKG4gPSBOLnZhbHVlKS5sYXN0SW5kZXhPZigiLiIpKQogICAgICAgICAgICAgICAgICA/IG4uc3Vic3RyaW5nKHQgKyAxKS5yZXBsYWNlKCciJywgIiIpCiAgICAgICAgICAgICAgICAgIDogbikKICAgICAgICAgICAgKTsKICAgICAgICByZXR1cm4gIlNwYXduQWN0b3IgIiArIG47CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9Td2l0Y2hFbnVtIikgJiYKICAgICAgICAtMSAhPT0KICAgICAgICAgICh0ID0gKGcgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkVudW0iKSkudmFsdWUubGFzdEluZGV4T2YoCiAgICAgICAgICAgICIuIgogICAgICAgICAgKSkKICAgICAgKQogICAgICAgIHJldHVybiAoCiAgICAgICAgICAiU3dpdGNoIG9uICIgKwogICAgICAgICAgKF8gPQogICAgICAgICAgICAnIicgPT09CiAgICAgICAgICAgIChfID0gZy52YWx1ZS5zdWJzdHIodCArIDEpLnJlcGxhY2UoIiciLCAiIikpLmNoYXJBdChfLmxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgPyBfLnN1YnN0cigwLCBfLmxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgOiBfKQogICAgICAgICk7CiAgICAgIGlmICgtMSAhPT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfU3dpdGNoTmFtZSIpKSByZXR1cm4gIlN3aXRjaCBvbiBOYW1lIjsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9Td2l0Y2hJbnRlZ2VyIikpCiAgICAgICAgcmV0dXJuICJTd2l0Y2ggb24gSW50IjsKICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9Td2l0Y2hTdHJpbmciKSkKICAgICAgICByZXR1cm4gIlN3aXRjaCBvbiBTdHJpbmciOwogICAgICBpZiAoLTEgIT09IFAudmFsdWUuaW5kZXhPZigiSzJOb2RlX0NyZWF0ZVdpZGdldCIpKSB7CiAgICAgICAgZm9yIChtID0gMDsgbSA8IEM7ICsrbSkKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKChmID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucGluc1ttXS5wcm9wcywgIlBpbk5hbWUiKSksCiAgICAgICAgICAgIChOID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucGluc1ttXS5wcm9wcywgIkRlZmF1bHRPYmplY3QiKSksCiAgICAgICAgICAgICJDbGFzcyIgPT09IGYudmFsdWUpCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKG51bGwgPT09IE4pIHJldHVybiAiQ29uc3RydWN0IE5PTkUiOwogICAgICAgICAgICBpZiAoLTEgIT09ICh0ID0gTi52YWx1ZS5sYXN0SW5kZXhPZigiLiIpKSkKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKG4gPSBOLnZhbHVlLnN1YnN0cmluZyh0ICsgMSkucmVwbGFjZSgnIicsICIiKSksCiAgICAgICAgICAgICAgICAiQ3JlYXRlICIgKyB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUobikgKyAiIFdpZGdldCIKICAgICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIHJldHVybiAiQ3JlYXRlIFdpZGdldCI7CiAgICAgIH0KICAgICAgaWYgKC0xICE9PSBQLnZhbHVlLmluZGV4T2YoIksyTm9kZV9HZW5lcmljQ3JlYXRlT2JqZWN0IikpIHsKICAgICAgICBmb3IgKG0gPSAwOyBtIDwgQzsgKyttKQogICAgICAgICAgaWYgKAogICAgICAgICAgICAoKGYgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5waW5zW21dLnByb3BzLCAiUGluTmFtZSIpKSwKICAgICAgICAgICAgKHYgPSB0aGlzLnBpbnNbbV0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeU9iamVjdCIpKSwKICAgICAgICAgICAgIlJldHVyblZhbHVlIiA9PT0gZi52YWx1ZSkKICAgICAgICAgICkgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gdikgcmV0dXJuICJDb25zdHJ1Y3QgTk9ORSI7CiAgICAgICAgICAgIGlmICgtMSAhPT0gKHQgPSB2LnZhbHVlLmxhc3RJbmRleE9mKCIuIikpKQogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAnIicgPT09CiAgICAgICAgICAgICAgICAgIChuID0gdi52YWx1ZS5zdWJzdHJpbmcodCArIDEpLnJlcGxhY2UoIiciLCAiIikpLmNoYXJBdCgKICAgICAgICAgICAgICAgICAgICBuLmxlbmd0aCAtIDEKICAgICAgICAgICAgICAgICAgKSAmJiAobiA9IG4uc3Vic3RyKDAsIG4ubGVuZ3RoIC0gMSkpLAogICAgICAgICAgICAgICAgIkNyZWF0ZSAiICsgdHJhbnNmb3JtSW50ZXJuYWxOYW1lKG4pCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICByZXR1cm4gIkNyZWF0ZSBXaWRnZXQiOwogICAgICB9CiAgICAgIGlmICgtMSA9PT0gUC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfQnJlYWtTdHJ1Y3QiKSkKICAgICAgICByZXR1cm4gLTEgIT09IFAudmFsdWUuaW5kZXhPZigiSzJOb2RlX1NldEZpZWxkc0luU3RydWN0IikKICAgICAgICAgID8gKChuID0gIk5PTkUiKSwKICAgICAgICAgICAgIlNldCBtZW1iZXJzIGluICIgKwogICAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICAgIG51bGwgIT09IChTID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJTdHJ1Y3RUeXBlIikpICYmCiAgICAgICAgICAgICAgICAtMSAhPT0gKHQgPSAobiA9IFMudmFsdWUpLmxhc3RJbmRleE9mKCIuIikpCiAgICAgICAgICAgICAgICAgID8gbi5zdWJzdHIoKHQgKz0gMSkpLnJlcGxhY2UoIiciLCAiIikKICAgICAgICAgICAgICAgICAgOiBuKSkKICAgICAgICAgIDogLTEgIT09IFAudmFsdWUuaW5kZXhPZigiSzJOb2RlX0FzeW5jQWN0aW9uIikgJiYKICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAoaSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiUHJveHlGYWN0b3J5RnVuY3Rpb25OYW1lIikpCiAgICAgICAgICA/ICJBc3luYyBUYXNrOiAiICsgaS52YWx1ZQogICAgICAgICAgOiAtMSAhPT0KICAgICAgICAgICAgKGIgPQogICAgICAgICAgICAgICJLMk5vZGVfIiA9PT0gKGIgPSBQLnZhbHVlKS5zdWJzdHIoMCwgNykKICAgICAgICAgICAgICAgID8gYi5zdWJzdHIoNykKICAgICAgICAgICAgICAgIDogYikuaW5kZXhPZigiSzJOb2RlX01ha2VBcnJheSIpCiAgICAgICAgICA/ICJNYWtlIEFycmF5IgogICAgICAgICAgOiAtMSAhPT0gYi5pbmRleE9mKCJLMk5vZGVfTWFrZVN0cnVjdCIpCiAgICAgICAgICA/ICgobiA9ICJOT05FIiksCiAgICAgICAgICAgICJNYWtlIFN0cnVjdCAiICsKICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICBudWxsICE9PSAoUyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiU3RydWN0VHlwZSIpKSAmJgogICAgICAgICAgICAgICAgLTEgIT09ICh0ID0gKG4gPSBTLnZhbHVlKS5sYXN0SW5kZXhPZigiLiIpKQogICAgICAgICAgICAgICAgICA/IChuID0gbi5zdWJzdHJpbmcodCArIDEpKS5sYXN0SW5kZXhPZigiXCInIikgKyAyID09PSBuLmxlbmd0aAogICAgICAgICAgICAgICAgICAgID8gbi5zdWJzdHJpbmcoMCwgbi5sZW5ndGggLSAyKQogICAgICAgICAgICAgICAgICAgIDogbi5zdWJzdHJpbmcoMCwgbi5sZW5ndGggLSAxKQogICAgICAgICAgICAgICAgICA6IG4pKQogICAgICAgICAgOiB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUoYik7CiAgICAgIGZvciAobSA9IDA7IG0gPCBDOyArK20pCiAgICAgICAgaWYgKHRoaXMucGluc1ttXS5pc0lucHV0KCkpIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdm9pZCAwID09PSB0aGlzLnBpbnNbbV0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeU9iamVjdCIpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAiQnJlYWsgPHVua25vd24gc3RydWN0PiI7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAodCA9IHRoaXMucGluc1ttXQogICAgICAgICAgICAgIC5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5T2JqZWN0IikKICAgICAgICAgICAgICAudmFsdWUubGFzdEluZGV4T2YoIi4iKSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAiQnJlYWsgIiArCiAgICAgICAgICAgICAgKG4gPSB0aGlzLnBpbnNbbV0KICAgICAgICAgICAgICAgIC5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5T2JqZWN0IikKICAgICAgICAgICAgICAgIC52YWx1ZS5zdWJzdHJpbmcodCArIDEpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgiJyIsICIiKSkKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIHJldHVybiAiQ3JlYXRlIFdpZGdldCI7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZmluZEhlYWRlclN1Ym5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IFsKICAgICAgICB7CiAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgY2xhc3NlczogWyJib2R5Il0sCiAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgY2xhc3NlczogWyJsZWZ0LWNvbCJdLAogICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zSW5wdXQoKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgY2xhc3NlczogWyJyaWdodC1jb2wiXSwKICAgICAgICAgICAgICBjaGlsZHM6IHRoaXMuZ2VuZXJhdGVIVE1MUGluc091dHB1dCgpLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICBdOwogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuaGFzQWR2YW5jZWRQaW5EaXNwbGF5KCkgJiYKICAgICAgICAgICh0aGlzLmlzQWR2YW5jZWRQaW5EaXNwbGF5RXhwYW5kZWQoKQogICAgICAgICAgICA/IGUucHVzaCh7CiAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgY2xhc3NlczogWyJsZXNzIl0sCiAgICAgICAgICAgICAgICBjaGlsZHM6IFt7IHRhZzogInNwYW4iIH1dLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDogZS5wdXNoKHsKICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbIm1vcmUiXSwKICAgICAgICAgICAgICAgIGNoaWxkczogW3sgdGFnOiAic3BhbiIgfV0sCiAgICAgICAgICAgICAgfSkpLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxQaW5EZWxlZ2F0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMCwgbiA9IHRoaXMucGlucy5sZW5ndGg7IHQgPCBuOyArK3QpCiAgICAgICAgdGhpcy5waW5zW3RdLmlzRGVsZWdhdGVPdXRwdXQoKSAmJgogICAgICAgICAgZS5wdXNoKHRoaXMucGluc1t0XS5nZW5lcmF0ZUhUTUwoITAsIHRoaXMpKTsKICAgICAgcmV0dXJuIGU7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MUGluc0lucHV0ID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlID0gW10sCiAgICAgICAgICB0ID0gdGhpcy5pc0FkdmFuY2VkUGluRGlzcGxheUV4cGFuZGVkKCksCiAgICAgICAgICBuID0gMCwKICAgICAgICAgIHMgPSB0aGlzLnBpbnMubGVuZ3RoOwogICAgICAgIG4gPCBzOwogICAgICAgICsrbgogICAgICApCiAgICAgICAgdGhpcy5waW5zW25dLmlzSW5wdXQoKSAmJiBlLnB1c2godGhpcy5waW5zW25dLmdlbmVyYXRlSFRNTCh0LCB0aGlzKSk7CiAgICAgIHJldHVybiBlOwogICAgfSksCiAgICAoVU5vZGUucHJvdG90eXBlLmdlbmVyYXRlSFRNTFBpbnNPdXRwdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIGUgPSBbXSwKICAgICAgICAgIHQgPSB0aGlzLmlzQWR2YW5jZWRQaW5EaXNwbGF5RXhwYW5kZWQoKSwKICAgICAgICAgIG4gPSAwLAogICAgICAgICAgcyA9IHRoaXMucGlucy5sZW5ndGg7CiAgICAgICAgbiA8IHM7CiAgICAgICAgKytuCiAgICAgICkKICAgICAgICB0aGlzLnBpbnNbbl0uaXNPdXRwdXQoKSAmJgogICAgICAgICAgITEgPT09IHRoaXMucGluc1tuXS5pc0RlbGVnYXRlT3V0cHV0KCkgJiYKICAgICAgICAgIGUucHVzaCh0aGlzLnBpbnNbbl0uZ2VuZXJhdGVIVE1MKHQsIHRoaXMpKTsKICAgICAgcmV0dXJuIGU7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuaGFzQWR2YW5jZWRQaW5EaXNwbGF5ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJBZHZhbmNlZFBpbkRpc3BsYXkiKTsKICAgIH0pLAogICAgKFVOb2RlLnByb3RvdHlwZS5pc0FkdmFuY2VkUGluRGlzcGxheUV4cGFuZGVkID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiQWR2YW5jZWRQaW5EaXNwbGF5Iik7CiAgICAgIHJldHVybiBlICYmICJTaG93biIgPT09IGUudmFsdWU7CiAgICB9KSwKICAgIChVTm9kZS5wcm90b3R5cGUuY2FsbGJhY2tJbnNwZWN0Tm9kZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gMCwKICAgICAgICBzID0gMDsKICAgICAgaWYgKCExICE9PSB0aGlzLmNvbnRhaW5zVmlzdWFsTm9kZXMgJiYgMCAhPT0gdGhpcy5ub2Rlcy5sZW5ndGgpCiAgICAgICAgaWYgKDEgPT09IHRoaXMubm9kZXMubGVuZ3RoKQogICAgICAgICAgZm9yICgKICAgICAgICAgICAgdGhpcy5ub2Rlc1swXS5jb250YWluc1Zpc3VhbE5vZGVzID0gITAsCiAgICAgICAgICAgICAgdGhpcy5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uID0gdCwKICAgICAgICAgICAgICBzID0gdGhpcy5ub2Rlc1swXS5ub2Rlcy5sZW5ndGg7CiAgICAgICAgICAgIG4gPCBzOwogICAgICAgICAgICArK24KICAgICAgICAgICkKICAgICAgICAgICAgKHRoaXMubm9kZXNbMF0ubm9kZXNbbl0ub2JqZWN0RGVmaW5pdGlvbiA9CiAgICAgICAgICAgICAgZS5ub2Rlc1swXS5ub2Rlc1tuXS5vYmplY3REZWZpbml0aW9uKSwKICAgICAgICAgICAgICB0aGlzLm5vZGVzWzBdLm5vZGVzW25dLmNvbnRhaW5zVmlzdWFsTm9kZXMgJiYKICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbbl0uY2FsbGJhY2tJbnNwZWN0Tm9kZSgKICAgICAgICAgICAgICAgICAgZS5ub2Rlc1swXS5ub2Rlc1tuXSwKICAgICAgICAgICAgICAgICAgZS5ub2Rlc1swXS5ub2Rlc1tuXS5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uCiAgICAgICAgICAgICAgICApOwogICAgICAgIGVsc2UgaWYgKDIgPT09IHRoaXMubm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICBmb3IgKAogICAgICAgICAgICAwIDwgKHMgPSB0aGlzLm5vZGVzWzFdLm5vZGVzLmxlbmd0aCkgJiYKICAgICAgICAgICAgITEgPT09IHRoaXMubm9kZXNbMV0uY29udGFpbnNWaXN1YWxOb2RlcyAmJgogICAgICAgICAgICAoKHRoaXMubm9kZXNbMV0uY29udGFpbnNWaXN1YWxOb2RlcyA9ICEwKSwKICAgICAgICAgICAgKHRoaXMubm9kZXNbMV0ub2JqZWN0RGVmaW5pdGlvbiA9IHRoaXMubm9kZXNbMF0ub2JqZWN0RGVmaW5pdGlvbikpOwogICAgICAgICAgICBuIDwgczsKICAgICAgICAgICAgKytuCiAgICAgICAgICApCiAgICAgICAgICAgICh0aGlzLm5vZGVzWzFdLm5vZGVzW25dLm9iamVjdERlZmluaXRpb24gPQogICAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbbl0ub2JqZWN0RGVmaW5pdGlvbiksCiAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1tuXS5jb250YWluc1Zpc3VhbE5vZGVzICYmCiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzWzFdLm5vZGVzW25dLmNhbGxiYWNrSW5zcGVjdE5vZGUoCiAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbbl0sCiAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbbl0ubm9kZXNbMF0ub2JqZWN0RGVmaW5pdGlvbgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgIHRoaXMubm9kZXMgPSBbdGhpcy5ub2Rlc1sxXV07CiAgICAgICAgfQogICAgfSk7CiAgZnVuY3Rpb24gQmFzaWNPYmplY3QoKSB7CiAgICAodGhpcy5vYmplY3REZWZpbml0aW9uID0gW10pLAogICAgICAodGhpcy5wcm9wcyA9IFtdKSwKICAgICAgKHRoaXMucGlucyA9IFtdKSwKICAgICAgKHRoaXMuY29udGFpbnNWaXN1YWxOb2RlcyA9ICExKSwKICAgICAgKHRoaXMuaXNCZWxvdzUyVmVyc2lvbiA9ICExKTsKICB9CiAgKEJhc2ljT2JqZWN0LnByb3RvdHlwZS50cmVhdCA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgZSwKICAgICAgaSA9IDA7CiAgICBpZiAoIkJlZ2luIE9iamVjdCIgPT09IHQuc3Vic3RyaW5nKDAsIDEyKSkKICAgICAgdGhpcy5vYmplY3REZWZpbml0aW9uID0gZXh0cmFjdE9iamVjdERlZmluaXRpb24odCk7CiAgICBlbHNlIGlmICgKICAgICAgKHRoaXMuaXNCZWxvdzUyVmVyc2lvbiB8fAogICAgICAgICciJyAhPT0gdC5zdWJzdHJpbmcoMCwgMSkgfHwKICAgICAgICAodCA9IHQucmVwbGFjZSgnIicsICIiKS5yZXBsYWNlKCciJywgIiIpKSwKICAgICAgKGUgPSBjb252ZXJ0VGV4dFRvUHJvcHModCkpLAogICAgICBBcnJheS5pc0FycmF5KGUpKQogICAgKQogICAgICBmb3IgKGkgPSAwOyBpIDwgZS5sZW5ndGg7ICsraSkgdGhpcy5wcm9wcy5wdXNoKGVbaV0pOwogICAgZWxzZSB0aGlzLnByb3BzLnB1c2goZSk7CiAgfSksCiAgICAoQmFzaWNPYmplY3QucHJvdG90eXBlLmdlbmVyYXRlVGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSAiIjsKICAgICAgcmV0dXJuICgKICAgICAgICAodCArPSAiQmVnaW4gIiArIHRoaXMuZ2VuZXJhdGVUZXh0T2JqZWN0RGVmaW5pdGlvbigpKSArCiAgICAgICAgdGhpcy5nZW5lcmF0ZVRleHRQcm9wcygpICsKICAgICAgICAoIkVuZCAiICsgdGhpcy5vYmplY3REZWZpbml0aW9uWzBdLnZhbHVlKQogICAgICApOwogICAgfSksCiAgICAoQmFzaWNPYmplY3QucHJvdG90eXBlLmdlbmVyYXRlVGV4dE9iamVjdERlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIHQsIGUgPSBbXSwgaSA9IDAsIG4gPSB0aGlzLm9iamVjdERlZmluaXRpb24ubGVuZ3RoLCBvID0gIiIsIHMgPSAiIjsKICAgICAgICBpIDwgbjsKICAgICAgICArK2kKICAgICAgKQogICAgICAgICh0ID0gdGhpcy5vYmplY3REZWZpbml0aW9uW2ldLnZhbHVlKSwKICAgICAgICAgIChvID0gIiIpLAogICAgICAgICAgdGhpcy5vYmplY3REZWZpbml0aW9uW2ldLnVzZURlbGltaXRlciAmJiAobyA9ICciJyksCiAgICAgICAgICAocyA9ICIiKSwKICAgICAgICAgIHRoaXMub2JqZWN0RGVmaW5pdGlvbltpXS5uYW1lICYmCiAgICAgICAgICAgIChzID0gdGhpcy5vYmplY3REZWZpbml0aW9uW2ldLm5hbWUgKyAiPSIpLAogICAgICAgICAgZS5wdXNoKHMgKyBvICsgdCArIG8pOwogICAgICByZXR1cm4gZS5qb2luKCIgIikgKyAiXG4iOwogICAgfSksCiAgICAoQmFzaWNPYmplY3QucHJvdG90eXBlLmdlbmVyYXRlVGV4dFByb3BzID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciB0LCBlLCBpID0gW10sIG4gPSAwLCBvID0gdGhpcy5wcm9wcy5sZW5ndGgsIHMgPSAiIiwgciA9ICIiLCBjID0gLTE7CiAgICAgICAgbiA8IG87CiAgICAgICAgKytuCiAgICAgICkKICAgICAgICAociA9IGNvbnZlcnRQcm9wc1RvVGV4dCh0aGlzLnByb3BzW25dKSksCiAgICAgICAgICB0aGlzLmlzQmVsb3c1MlZlcnNpb24gfHwKICAgICAgICAgICAgKCh0ID0gci5pbmRleE9mKCI9IikpLAogICAgICAgICAgICAtMSAhPT0gKGUgPSByLmluZGV4T2YoIigiKSkgJiYgZSA8IHQKICAgICAgICAgICAgICA/IChjID0gZSkKICAgICAgICAgICAgICA6IC0xICE9PSB0ICYmIChjID0gdCksCiAgICAgICAgICAgIChyID0gJyInICsgci5zdWJzdHJpbmcoMCwgYykgKyAnIicgKyByLnN1YnN0cmluZyhjKSkpLAogICAgICAgICAgaS5wdXNoKHIpOwogICAgICByZXR1cm4gMCA8IChzID0gaS5qb2luKCJcbiIpKS5sZW5ndGggJiYgKHMgKz0gIlxuIiksIHM7CiAgICB9KSwKICAgIChCYXNpY09iamVjdC5wcm90b3R5cGUuY2FsbGJhY2tJbnNwZWN0Tm9kZSA9IGZ1bmN0aW9uICgpIHt9KTsKICBmdW5jdGlvbiBOQW5pbVN0YXRlKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKSwgKHRoaXMuY29udGFpbnNWaXN1YWxOb2RlcyA9ICEwKTsKICB9CiAgKE5BbmltU3RhdGUucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOQW5pbVN0YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5BbmltU3RhdGUpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbIm5vZGUiLCAibl9hbmltX3N0YXRlIiwgIm5fYW5pbV9zdGF0ZV9yZXNldF9ib2R5IiwgInBhZDEwIl0sCiAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgIHsgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdGhpcy5ndWlkIH0sCiAgICAgICAgICBdLAogICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgIGNsYXNzZXM6IFsiYm9keSJdLAogICAgICAgICAgICAgIGNoaWxkczogW10sCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5maW5kSGVhZGVyTmFtZSgpLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImxlZnQtY29sIl0sCiAgICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbInJpZ2h0LWNvbCJdLAogICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH07CiAgICAgIH0pLAogICAgKE5BbmltU3RhdGUucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9ICIiLAogICAgICAgIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkJvdW5kR3JhcGgiKTsKICAgICAgcmV0dXJuIG51bGwgPT09IGUKICAgICAgICA/ICJ1bmRlZmluZWQiCiAgICAgICAgOiAnIicgPT09ICh0ID0gZS52YWx1ZS5zdWJzdHJpbmcoMjApKS5zdWJzdHJpbmcoMCwgMSkKICAgICAgICA/IHQuc3Vic3RyaW5nKDEsIHQubGVuZ3RoIC0gMikKICAgICAgICA6IHQuc3Vic3RyaW5nKDAsIHQubGVuZ3RoIC0gMSk7CiAgICB9KSwKICAgIChOQW5pbVN0YXRlLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRGb3JVbnJlYWwgPSBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gIiI7CiAgICB9KTsKICBmdW5jdGlvbiBOQW5pbVN0YXRlRW50cnkoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTkFuaW1TdGF0ZUVudHJ5LnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTkFuaW1TdGF0ZUVudHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5BbmltU3RhdGVFbnRyeSkucHJvdG90eXBlLmdlbmVyYXRlSFRNTCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJuX2FuaW1fc3RhdGUiXSwKICAgICAgICBhdHRyczogWwogICAgICAgICAgeyBuYW1lOiAic3R5bGUiLCB2YWx1ZTogdGhpcy5nZW5lcmF0ZUNzc05vZGVTdHlsZSgpLmpvaW4oIjsiKSB9LAogICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICBdLAogICAgICAgIGNoaWxkczogWwogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsicmlnaHQtY29sIl0sCiAgICAgICAgICAgICAgICBjaGlsZHM6IHRoaXMuZ2VuZXJhdGVIVE1MUGluc091dHB1dCgpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH07CiAgICB9KTsKICBmdW5jdGlvbiBOQW5pbVN0YXRlVHJhbnNpdGlvbigpIHsKICAgIFVOb2RlLmNhbGwodGhpcyksICh0aGlzLmNvbnRhaW5zVmlzdWFsTm9kZXMgPSAhMCk7CiAgfQogIChOQW5pbVN0YXRlVHJhbnNpdGlvbi5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5BbmltU3RhdGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5BbmltU3RhdGVUcmFuc2l0aW9uKS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gKAogICAgICAgICh0aGlzLnBpbnNbMF0ucHJvcHMuYkhpZGRlbiA9ICExKSwKICAgICAgICAodGhpcy5waW5zWzFdLnByb3BzLmJIaWRkZW4gPSAhMSksCiAgICAgICAgewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsKICAgICAgICAgICAgIm5vZGUiLAogICAgICAgICAgICAibl9hbmltX3N0YXRlIiwKICAgICAgICAgICAgIm5fYW5pbV9zdGF0ZV9yZXNldF9ib2R5IiwKICAgICAgICAgICAgIndoaXRlX2JvZHkiLAogICAgICAgICAgICAicm91bmQiLAogICAgICAgICAgXSwKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgY2xhc3NlczogWyJib2R5Il0sCiAgICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbIm5fYW5pbV90cmFuc2l0aW9uIl0gfV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0KICAgICAgKTsKICAgIH0pLAogICAgKE5BbmltU3RhdGVUcmFuc2l0aW9uLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSAiIiwKICAgICAgICBuID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJCb3VuZEdyYXBoIik7CiAgICAgIHJldHVybiBudWxsID09PSBuCiAgICAgICAgPyAidW5kZWZpbmVkIgogICAgICAgIDogJyInID09PSAodCA9IG4udmFsdWUuc3Vic3RyaW5nKDI1KSkuc3Vic3RyaW5nKDAsIDEpCiAgICAgICAgPyB0LnN1YnN0cmluZygxLCB0Lmxlbmd0aCAtIDIpCiAgICAgICAgOiB0LnN1YnN0cmluZygwLCB0Lmxlbmd0aCAtIDEpOwogICAgfSksCiAgICAoTkFuaW1TdGF0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmdlbmVyYXRlVGV4dEZvclVucmVhbCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0pOwogIGZ1bmN0aW9uIE5BcnJheSgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOQXJyYXkucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOQXJyYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTkFycmF5KS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICB0aGlzLmRpc2FibGVUZXh0T25QaW5zKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJuYXJyYXkiXSwKICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxUb29sVGlwKCksIHRoaXMuZ2VuZXJhdGVIVE1MQm9keSgpXSwKICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9KSwKICAgIChOQXJyYXkucHJvdG90eXBlLmdlbmVyYXRlSFRNTEJvZHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0ID0gW10sCiAgICAgICAgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpLAogICAgICAgIHIgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkZ1bmN0aW9uUmVmZXJlbmNlIiksCiAgICAgICAgaSA9ICIiLAogICAgICAgIHMgPSAxMzA7CiAgICAgIHJldHVybiAoCiAgICAgICAgbnVsbCA9PT0gcgogICAgICAgICAgPyBudWxsICE9PSBlICYmCiAgICAgICAgICAgIC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIksyTm9kZV9HZXRBcnJheUl0ZW0iKSAmJgogICAgICAgICAgICAoaSA9ICJHRVQiKQogICAgICAgICAgOiBudWxsICE9PSAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZShyLnZhbHVlLCAiTWVtYmVyTmFtZSIpKSAmJgogICAgICAgICAgICAoaSA9IGdldEFycmF5VGV4dChlLnZhbHVlKSksCiAgICAgICAgIkxhc3RJbmRleCIgPT09IGkgJiYKICAgICAgICAgICgoaSA9ICIiKSwKICAgICAgICAgICh0ID0gW3sgdGV4dDogIkxhc3QiIH0sIHsgdGFnOiAiYnIiIH0sIHsgdGV4dDogIkluZGV4IiB9XSksCiAgICAgICAgICAocyA9IDE1MCkpLAogICAgICAgICJJc1ZhbGlkSW5kZXgiID09PSBpICYmCiAgICAgICAgICAoKGkgPSAiIiksCiAgICAgICAgICAodCA9IFt7IHRleHQ6ICJJcyBWYWxpZCIgfSwgeyB0YWc6ICJiciIgfSwgeyB0ZXh0OiAiSW5kZXgiIH1dKSwKICAgICAgICAgIChzID0gMTg1KSksCiAgICAgICAgIlJlbW92ZSIgPT09IGkgJiYKICAgICAgICAgICgoaSA9ICIiKSwKICAgICAgICAgICh0ID0gW3sgdGV4dDogIlJlbW92ZSIgfSwgeyB0YWc6ICJiciIgfSwgeyB0ZXh0OiAiSW5kZXgiIH1dKSwKICAgICAgICAgIChzID0gMTg1KSksCiAgICAgICAgIklzTm90RW1wdHkiID09PSBpICYmCiAgICAgICAgICAoKGkgPSAiIiksCiAgICAgICAgICAodCA9IFt7IHRleHQ6ICJJcyBOb3QiIH0sIHsgdGFnOiAiYnIiIH0sIHsgdGV4dDogIkVtcHR5IiB9XSksCiAgICAgICAgICAocyA9IDE4NSkpLAogICAgICAgICJSZW1vdmVJdGVtIiA9PT0gaSAmJiAoKGkgPSAiUmVtb3ZlIiksIChzID0gMTg1KSksCiAgICAgICAgIkxlbmd0aCIgPT09IGkKICAgICAgICAgID8gKHMgPSAxODApCiAgICAgICAgICA6ICJBZGRVbmlxdWUiID09PSBpCiAgICAgICAgICA/IChzID0gMjI1KQogICAgICAgICAgOiAiQXBwZW5kIiA9PT0gaQogICAgICAgICAgPyAocyA9IDE4MCkKICAgICAgICAgIDogIkNsZWFyIiA9PT0gaQogICAgICAgICAgPyAocyA9IDE1MCkKICAgICAgICAgIDogIkNvbnRhaW5zIiA9PT0gaQogICAgICAgICAgPyAocyA9IDIwMCkKICAgICAgICAgIDogIlNodWZmbGUiID09PSBpCiAgICAgICAgICA/IChzID0gMTgwKQogICAgICAgICAgOiAiUmVzaXplIiA9PT0gaSAmJiAocyA9IDE1MCksCiAgICAgICAgewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsiYm9keSJdLAogICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiAibWluLXdpZHRoOiIgKyBzICsgInB4IiB9XSwKICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImNlbnRlci10ZXh0Il0sCiAgICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJzcGFuIiwgdGV4dDogaSwgY2hpbGRzOiB0IH1dLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImNlbnRlci10ZXh0Il0sCiAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiaW1nLWFycmF5IiwgdGhpcy5maW5kQ3NzQ2xhc3NBcnJheSgpXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbInJvdW5kLWJnIl0gfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgY2xhc3NlczogWyJsZWZ0LWNvbCJdLAogICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zSW5wdXQoKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgY2xhc3NlczogWyJyaWdodC1jb2wiXSwKICAgICAgICAgICAgICBjaGlsZHM6IHRoaXMuZ2VuZXJhdGVIVE1MUGluc091dHB1dCgpLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9CiAgICAgICk7CiAgICB9KSwKICAgIChOQXJyYXkucHJvdG90eXBlLmRpc2FibGVUZXh0T25QaW5zID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciB0LCBlID0gMCwgciA9IHRoaXMucGlucy5sZW5ndGg7IGUgPCByOyArK2UpCiAgICAgICAgdGhpcy5waW5zW2VdLmRpc2FibGVUZXh0KCksCiAgICAgICAgICBudWxsICE9PSAodCA9IHRoaXMucGluc1tlXS5nZXRQcm9wRnJvbVBpblR5cGUoIlBpbkNhdGVnb3J5IikpICYmCiAgICAgICAgICAgICciaW50IicgIT09IHQudmFsdWUgJiYKICAgICAgICAgICAgdGhpcy5waW5zW2VdLmRpc2FibGVJbnB1dCgpOwogICAgfSksCiAgICAoTkFycmF5LnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NBcnJheSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgdCwKICAgICAgICAgIGUgPSBudWxsLAogICAgICAgICAgciA9IG51bGwsCiAgICAgICAgICBpID0gbnVsbCwKICAgICAgICAgIHMgPSAiIiwKICAgICAgICAgIGEgPSAwLAogICAgICAgICAgbiA9IHRoaXMucGlucy5sZW5ndGg7CiAgICAgICAgYSA8IG47CiAgICAgICAgKythCiAgICAgICkKICAgICAgICB0aGlzLnBpbnNbYV0uaXNJbnB1dCgpICYmCiAgICAgICAgICBudWxsICE9PSAodCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnBpbnNbYV0ucHJvcHMsICJQaW5OYW1lIikpICYmCiAgICAgICAgICAoIlRhcmdldEFycmF5IiA9PT0gdC52YWx1ZSAmJgogICAgICAgICAgICAic3RydWN0IiA9PT0KICAgICAgICAgICAgICAoZSA9IHRoaXMucGluc1thXS5nZXRQcm9wRnJvbVBpblR5cGUoIlBpbkNhdGVnb3J5IikudmFsdWUpICYmCiAgICAgICAgICAgIChpID0gdGhpcy5waW5zW2FdLmdldFByb3BGcm9tUGluVHlwZSgiUGluU3ViQ2F0ZWdvcnlPYmplY3QiKSksCiAgICAgICAgICAiQXJyYXkiID09PSB0LnZhbHVlICYmCiAgICAgICAgICAgICJzdHJ1Y3QiID09PQogICAgICAgICAgICAgIChyID0gdGhpcy5waW5zW2FdLmdldFByb3BGcm9tUGluVHlwZSgiUGluQ2F0ZWdvcnkiKS52YWx1ZSkgJiYKICAgICAgICAgICAgKGkgPSB0aGlzLnBpbnNbYV0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeU9iamVjdCIpKSk7CiAgICAgIHJldHVybiAoCiAgICAgICAgbnVsbCAhPT0gZSA/IChzID0gZSkgOiBudWxsICE9PSByICYmIChzID0gciksCiAgICAgICAgInN0cnVjdCIgPT09IHMgJiYKICAgICAgICAgIG51bGwgIT09IGkgJiYKICAgICAgICAgICgiL1NjcmlwdC9Db3JlVU9iamVjdC5TY3JpcHRTdHJ1Y3QnIiA9PT0gaS52YWx1ZS5zdWJzdHJpbmcoMCwgMzMpICYmCiAgICAgICAgICAgIChpLnZhbHVlID0gaS52YWx1ZS5zdWJzdHJpbmcoMjApKSwKICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5WZWN0b3InIiA9PT0gaS52YWx1ZSB8fAogICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yXCInIiA9PT0gaS52YWx1ZSB8fAogICAgICAgICAgIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjNmJyIgPT09IGkudmFsdWUgfHwKICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjNmXCInIiA9PT0gaS52YWx1ZQogICAgICAgICAgICA/IChzID0gInZlY3RvciIpCiAgICAgICAgICAgIDogIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlJvdGF0b3InIiA9PT0gaS52YWx1ZSB8fAogICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlJvdGF0b3JcIiciID09PSBpLnZhbHVlCiAgICAgICAgICAgID8gKHMgPSAicm90YXRvciIpCiAgICAgICAgICAgIDogKCJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5UcmFuc2Zvcm0nIiAhPT0gaS52YWx1ZSAmJgogICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVHJhbnNmb3JtXCInIiAhPT0KICAgICAgICAgICAgICAgICAgaS52YWx1ZSkgfHwKICAgICAgICAgICAgICAocyA9ICJ0cmFuc2Zvcm0iKSksCiAgICAgICAgcwogICAgICApOwogICAgfSk7CiAgZnVuY3Rpb24gTkNvbW1lbnQoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpLCAodGhpcy5zaXplID0gWzQwMCwgOTZdKTsKICB9CiAgKE5Db21tZW50LnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTkNvbW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTkNvbW1lbnQpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbIm5vZGUiLCAibmNvbW1lbnQiXSwKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBjaGlsZHM6IFtudWxsLCB0aGlzLmdlbmVyYXRlSFRNTEhlYWRlcigpXSwKICAgICAgICB9OwogICAgICB9KSwKICAgIChOQ29tbWVudC5wcm90b3R5cGUuZ2VuZXJhdGVDc3NOb2RlU3R5bGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gVU5vZGUucHJvdG90eXBlLmdlbmVyYXRlQ3NzTm9kZVN0eWxlLmNhbGwodGhpcyk7CiAgICAgIHJldHVybiBlLnB1c2godGhpcy5hZGRCb2R5U3R5bGVDb2xvcigpKSwgZTsKICAgIH0pLAogICAgKE5Db21tZW50LnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLAogICAgICAgIHQgPSBbXSwKICAgICAgICBvID0gMCwKICAgICAgICByID0gewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsiaGVhZGVyIl0sCiAgICAgICAgICBhdHRyczogW3sgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuYWRkSGVhZGVyU3R5bGVDb2xvcigpIH1dLAogICAgICAgIH0sCiAgICAgICAgbiA9IHJlbW92ZVF1b3Rlcyh0aGlzLmNvbW1lbnQpCiAgICAgICAgICAucmVwbGFjZSgvXFwiL2csICciJykKICAgICAgICAgIC5yZXBsYWNlKC9cXCcvZywgIiciKQogICAgICAgICAgLnJlcGxhY2UoL1xcci9nLCAiIikKICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgIlxuIiksCiAgICAgICAgYSA9IG4uc3BsaXQoL1xuL2cpOwogICAgICBpZiAoMSA9PT0gYS5sZW5ndGgpIHIudGV4dCA9IG47CiAgICAgIGVsc2UgewogICAgICAgIGZvciAoZSA9IGEubGVuZ3RoOyBvIDwgZTsgKytvKQogICAgICAgICAgdC5wdXNoKHsgdGV4dDogYVtvXSB9KSwgbyArIDEgPCBhLmxlbmd0aCAmJiB0LnB1c2goeyB0YWc6ICJiciIgfSk7CiAgICAgICAgci5jaGlsZHMgPSB0OwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfSksCiAgICAoTkNvbW1lbnQucHJvdG90eXBlLmdldENvbG9yQ29tbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkNvbW1lbnRDb2xvciIpOwogICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBlLnNldFZhbHVlc0Zyb21Qcm9wcyh0LnZhbHVlKSwgZTsKICAgIH0pLAogICAgKE5Db21tZW50LnByb3RvdHlwZS5hZGRCb2R5U3R5bGVDb2xvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSB0aGlzLmdldENvbG9yQ29tbWVudCgpOwogICAgICByZXR1cm4gKGUuYWxwaGEgPSAwLjEpLCAiYmFja2dyb3VuZC1jb2xvcjoiICsgZS5nZW5lcmF0ZUNzcygpOwogICAgfSksCiAgICAoTkNvbW1lbnQucHJvdG90eXBlLmFkZEhlYWRlclN0eWxlQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gdGhpcy5nZXRDb2xvckNvbW1lbnQoKTsKICAgICAgcmV0dXJuIChlLmFscGhhID0gMC41KSwgImJhY2tncm91bmQtY29sb3I6IiArIGUuZ2VuZXJhdGVDc3MoKTsKICAgIH0pOwogIGZ1bmN0aW9uIGdldFRleHREZWNsYXJhdGlvbkZvclVucmVhbChlLCB0KSB7CiAgICBmb3IgKAogICAgICB2YXIgbiwgbywgaSA9ICIiLCByID0gZ2V0SW5kZW50Rm9ybWF0KHQpLCBzID0gMCwgYSA9IGUubGVuZ3RoLCBkID0gMDsKICAgICAgcyA8IGE7CiAgICAgICsrcwogICAgKSB7CiAgICAgIGlmICgKICAgICAgICAoKGkgKz0gciArICJCZWdpbiAiICsgZVtzXS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uKCkpLAogICAgICAgIDAgPCBlW3NdLm5vZGVzLmxlbmd0aCAmJgogICAgICAgICAgKGkgKz0gZ2V0VGV4dERlY2xhcmF0aW9uRm9yVW5yZWFsKGVbc10ubm9kZXMsIHQgKyAxKSksCiAgICAgICAgZVtzXS5pc0JlbG93NDEzVmVyc2lvbikKICAgICAgKQogICAgICAgIGZvciAoCiAgICAgICAgICBuID0gZ2V0SW5kZW50Rm9ybWF0KHQgKyAxKSwgZCA9IDAsIG8gPSBlW3NdLnBpbnMubGVuZ3RoOwogICAgICAgICAgZCA8IG87CiAgICAgICAgICArK2QKICAgICAgICApCiAgICAgICAgICBpID0KICAgICAgICAgICAgaSArCiAgICAgICAgICAgIChuICsgJ0JlZ2luIE9iamVjdCBDbGFzcz1FZEdyYXBoUGluIE5hbWU9IicgKyBlW3NdLnBpbnNbZF0uaWQpICsKICAgICAgICAgICAgJyJcbicgKwogICAgICAgICAgICBuICsKICAgICAgICAgICAgIkVuZCBPYmplY3RcbiI7CiAgICAgIGkgKz0gciArICJFbmQgIiArIGVbc10ub2JqZWN0RGVmaW5pdGlvblswXS52YWx1ZSArICJcbiI7CiAgICB9CiAgICByZXR1cm4gaTsKICB9CiAgZnVuY3Rpb24gZ2V0VGV4dERlc2NyaXB0aW9uRm9yVW5yZWFsKGUsIHQpIHsKICAgIGZvciAodmFyIG4gPSAiIiwgbyA9IGdldEluZGVudEZvcm1hdCh0KSwgaSA9IDAsIHIgPSBlLmxlbmd0aDsgaSA8IHI7ICsraSkKICAgICAgKG4gKz0gbyArICJCZWdpbiBPYmplY3QiICsgZVtpXS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uTmFtZU9ubHkoKSksCiAgICAgICAgMCA8IGVbaV0ubm9kZXMubGVuZ3RoICYmCiAgICAgICAgICAobiArPSBnZXRUZXh0RGVzY3JpcHRpb25Gb3JVbnJlYWwoZVtpXS5ub2RlcywgdCArIDEpKSwKICAgICAgICAobiA9IG4gKyBlW2ldLmdlbmVyYXRlVGV4dFByb3BzKHQgKyAxKSArIChvICsgIkVuZCBPYmplY3RcbiIpKTsKICAgIHJldHVybiBuOwogIH0KICBmdW5jdGlvbiBOQ29tcG9zaXRlKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKSwgKHRoaXMuY29udGFpbnNWaXN1YWxOb2RlcyA9ICEwKTsKICB9CiAgKE5Db21wb3NpdGUucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOQ29tcG9zaXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5Db21wb3NpdGUpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbImhlYWRlciJdLAogICAgICAgIGNoaWxkczogWwogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgY2xhc3NlczogWyJuYW1lIl0sCiAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgIHsgdGV4dDogdGhpcy5maW5kSGVhZGVyTmFtZSgpIH0sCiAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICB7IHRhZzogInNwYW4iLCBjbGFzc2VzOiBbInN1Ym5hbWUiXSwgdGV4dDogIkNvbGxhcHNlZCBHcmFwaCIgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgIH0pLAogICAgKE5Db21wb3NpdGUucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9ICIiLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkJvdW5kR3JhcGgiKTsKICAgICAgcmV0dXJuIG51bGwgPT09IHQKICAgICAgICA/ICJ1bmRlZmluZWQiCiAgICAgICAgOiAnIicgPT09IChlID0gdC52YWx1ZS5zdWJzdHJpbmcoOCkpLnN1YnN0cmluZygwLCAxKQogICAgICAgID8gZS5zdWJzdHJpbmcoMSwgZS5sZW5ndGggLSAyKQogICAgICAgIDogZS5zdWJzdHJpbmcoMCwgZS5sZW5ndGggLSAxKTsKICAgIH0pLAogICAgKE5Db21wb3NpdGUucHJvdG90eXBlLmdlbmVyYXRlVGV4dEZvclVucmVhbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpcy5ub2Rlcy5sZW5ndGgsCiAgICAgICAgbiA9IDAsCiAgICAgICAgbyA9ICIiLAogICAgICAgIGkgPSBnZXRJbmRlbnRGb3JtYXQoZSk7CiAgICAgIGZvciAobyArPSAiQmVnaW4gIiArIHRoaXMuZ2VuZXJhdGVUZXh0T2JqZWN0RGVmaW5pdGlvbigpOyBuIDwgdDsgKytuKQogICAgICAgIG8gPQogICAgICAgICAgKG8gPQogICAgICAgICAgICAobyA9CiAgICAgICAgICAgICAgKG8gPQogICAgICAgICAgICAgICAgKG8gPQogICAgICAgICAgICAgICAgICAobyArPQogICAgICAgICAgICAgICAgICAgIGkgKwogICAgICAgICAgICAgICAgICAgICJCZWdpbiAiICsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzW25dLmdlbmVyYXRlVGV4dE9iamVjdERlZmluaXRpb24oKSkgKwogICAgICAgICAgICAgICAgICBnZXRUZXh0RGVjbGFyYXRpb25Gb3JVbnJlYWwodGhpcy5ub2Rlc1tuXS5ub2RlcywgZSArIDEpKSArCiAgICAgICAgICAgICAgICBpICsKICAgICAgICAgICAgICAgICJFbmQgIiArCiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzW25dLm9iamVjdERlZmluaXRpb25bMF0udmFsdWUgKwogICAgICAgICAgICAgICAgIlxuIikgKwogICAgICAgICAgICAgIGkgKwogICAgICAgICAgICAgICJCZWdpbiBPYmplY3QgIiArCiAgICAgICAgICAgICAgdGhpcy5ub2Rlc1tuXS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uTmFtZU9ubHkoKSkgKwogICAgICAgICAgICBnZXRUZXh0RGVzY3JpcHRpb25Gb3JVbnJlYWwodGhpcy5ub2Rlc1tuXS5ub2RlcywgZSArIDEpKSArCiAgICAgICAgICB0aGlzLm5vZGVzW25dLmdlbmVyYXRlVGV4dFByb3BzKGUgKyAxKSArCiAgICAgICAgICBpICsKICAgICAgICAgICJFbmQgT2JqZWN0XG4iOwogICAgICByZXR1cm4gKG8gPQogICAgICAgIChvICs9IHRoaXMuZ2VuZXJhdGVUZXh0UHJvcHMoZSkpICsKICAgICAgICAoIkVuZCAiICsgdGhpcy5vYmplY3REZWZpbml0aW9uWzBdLnZhbHVlKSk7CiAgICB9KSwKICAgIChOQ29tcG9zaXRlLnByb3RvdHlwZS5pc1JlYWxDb21wb3NpdGVOb2RlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiTmFtZSIpOwogICAgICByZXR1cm4gbnVsbCAhPT0gZQogICAgICAgID8gLTEgIT09IGUudmFsdWUuaW5kZXhPZigiSzJOb2RlX0NvbXBvc2l0ZSIpCiAgICAgICAgOiBudWxsID09PSB0IHx8IC0xICE9PSB0LnZhbHVlLmluZGV4T2YoIksyTm9kZV9Db21wb3NpdGUiKTsKICAgIH0pOwogIGZ1bmN0aW9uIE5Db252KCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5Db252LnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTkNvbnYucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTkNvbnYpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuZGlzYWJsZVRleHRPblBpbnMoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJub2RlIiwgIm5jb252Il0sCiAgICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgICAgeyBuYW1lOiAic3R5bGUiLCB2YWx1ZTogdGhpcy5nZW5lcmF0ZUNzc05vZGVTdHlsZSgpLmpvaW4oIjsiKSB9LAogICAgICAgICAgICAgIHsgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdGhpcy5ndWlkIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNoaWxkczogW3RoaXMuZ2VuZXJhdGVIVE1MVG9vbFRpcCgpLCB0aGlzLmdlbmVyYXRlSFRNTEJvZHkoKV0sCiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfSksCiAgICAoTkNvbnYucHJvdG90eXBlLmdlbmVyYXRlSFRNTEJvZHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJyb3VuZC1iZyJdIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsibGVmdC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJyaWdodC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNPdXRwdXQoKSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgIH0pLAogICAgKE5Db252LnByb3RvdHlwZS5kaXNhYmxlVGV4dE9uUGlucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgdCA9IDAsIGUgPSB0aGlzLnBpbnMubGVuZ3RoOyB0IDwgZTsgKyt0KQogICAgICAgIHRoaXMucGluc1t0XS5kaXNhYmxlVGV4dCgpOwogICAgfSk7CiAgZnVuY3Rpb24gTkRlbGVnYXRlKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5EZWxlZ2F0ZS5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5EZWxlZ2F0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPQogICAgICBORGVsZWdhdGUpLnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAicHVyZS1mdW5jdGlvbi1jYWxsIjsKICAgIH0pLAogICAgKE5EZWxlZ2F0ZS5wcm90b3R5cGUuZmluZENzc0NsYXNzTm9kZUljb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiYmx1ZXByaW50LW5vZGUiOwogICAgfSksCiAgICAoTkRlbGVnYXRlLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJDcmVhdGUgRXZlbnQiOwogICAgfSksCiAgICAoTkRlbGVnYXRlLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxQaW5EZWxlZ2F0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfSksCiAgICAoTkRlbGVnYXRlLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0ID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciBlID0gW10sCiAgICAgICAgICB0ID0gMCwKICAgICAgICAgIG4gPSB0aGlzLmlzQWR2YW5jZWRQaW5EaXNwbGF5RXhwYW5kZWQoKSwKICAgICAgICAgIGEgPSB0aGlzLnBpbnMubGVuZ3RoOwogICAgICAgIHQgPCBhOwogICAgICAgICsrdAogICAgICApCiAgICAgICAgdGhpcy5waW5zW3RdLmlzT3V0cHV0KCkgJiYgZS5wdXNoKHRoaXMucGluc1t0XS5nZW5lcmF0ZUhUTUwobiwgdGhpcykpOwogICAgICByZXR1cm4gZTsKICAgIH0pLAogICAgKE5EZWxlZ2F0ZS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MQm9keSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsiYm9keSJdLAogICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgY2xhc3NlczogWyJsZWZ0LWNvbCJdLAogICAgICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsicmlnaHQtY29sIl0sCiAgICAgICAgICAgICAgICBjaGlsZHM6IHRoaXMuZ2VuZXJhdGVIVE1MUGluc091dHB1dCgpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgdCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiU2VsZWN0ZWRGdW5jdGlvbk5hbWUiKTsKICAgICAgcmV0dXJuICgKICAgICAgICBudWxsICE9PSB0ICYmCiAgICAgICAgICBlLnB1c2goewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiAicGFkZGluZzo1cHgiIH1dLAogICAgICAgICAgICAgICAgdGV4dDogIlNpZ25hdHVyZTogKCkiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAic3R5bGUiLCB2YWx1ZTogInBhZGRpbmc6NXB4IiB9XSwKICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGFnOiAic2VsZWN0IiwKICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImRpc2FibGVkIiwgdmFsdWU6ICJkaXNhYmxlZCIgfV0sCiAgICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJvcHRpb24iLCB0ZXh0OiB0LnZhbHVlICsgIigpIiB9XSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0pLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pOwogIGZ1bmN0aW9uIE5Eb3QoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTkRvdC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5Eb3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTkRvdCkucHJvdG90eXBlLmdlbmVyYXRlSFRNTCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLmRpc2FibGVUZXh0T25QaW5zKCksCiAgICAgICAgewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJuZG90Il0sCiAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgIHsgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdGhpcy5ndWlkIH0sCiAgICAgICAgICBdLAogICAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxUb29sVGlwKCksIHRoaXMuZ2VuZXJhdGVIVE1MQm9keSgpXSwKICAgICAgICB9CiAgICAgICk7CiAgICB9KSwKICAgIChORG90LnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gewogICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgY2xhc3NlczogWyJib2R5Il0sCiAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicm91bmQtYmciXSB9LAogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbImxlZnQtY29sIl0sCiAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zSW5wdXQoKSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsicmlnaHQtY29sIl0sCiAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH07CiAgICB9KSwKICAgIChORG90LnByb3RvdHlwZS5kaXNhYmxlVGV4dE9uUGlucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgdCA9IDAsIGUgPSB0aGlzLnBpbnMubGVuZ3RoOyB0IDwgZTsgKyt0KQogICAgICAgIHRoaXMucGluc1t0XS5kaXNhYmxlVGV4dCgpOwogICAgfSk7CiAgZnVuY3Rpb24gTkVuaGFuY2VkSW5wdXRBY3Rpb24oKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTkVuaGFuY2VkSW5wdXRBY3Rpb24ucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChORW5oYW5jZWRJbnB1dEFjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPQogICAgICBORW5oYW5jZWRJbnB1dEFjdGlvbikucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVDb2xvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJldmVudCI7CiAgICB9KSwKICAgIChORW5oYW5jZWRJbnB1dEFjdGlvbi5wcm90b3R5cGUuZmluZENzc0NsYXNzTm9kZUljb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiZXZlbnQiOwogICAgfSksCiAgICAoTkVuaGFuY2VkSW5wdXRBY3Rpb24ucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgbiwKICAgICAgICB0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJJbnB1dEFjdGlvbiIpLAogICAgICAgIGUgPSAiTm9uZSI7CiAgICAgIHJldHVybiAoCiAgICAgICAgIkVuaGFuY2VkSW5wdXRBY3Rpb24gIiArCiAgICAgICAgKGUgPQogICAgICAgICAgbnVsbCAhPT0gdCAmJiAtMSAhPT0gKG4gPSB0LnZhbHVlLmxhc3RJbmRleE9mKCIuIikpCiAgICAgICAgICAgID8gdC52YWx1ZQogICAgICAgICAgICAgICAgLnN1YnN0cmluZygobiArPSAxKSkKICAgICAgICAgICAgICAgIC5yZXBsYWNlKCInIiwgIiIpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgnIicsICIiKQogICAgICAgICAgICA6IGUpCiAgICAgICk7CiAgICB9KTsKICBmdW5jdGlvbiBORXZlbnQoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTkV2ZW50LnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTkV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5FdmVudCkucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVDb2xvciA9CiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gImV2ZW50IjsKICAgICAgfSksCiAgICAoTkV2ZW50LnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlSWNvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJldmVudCI7CiAgICB9KSwKICAgIChORXZlbnQucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICB0LAogICAgICAgIG4sCiAgICAgICAgciA9ICJFdmVudCIsCiAgICAgICAgbyA9IFsiRnVuY3Rpb25SZWZlcmVuY2UiLCAiRXZlbnRSZWZlcmVuY2UiLCAiRXZlbnRTaWduYXR1cmVOYW1lIl0sCiAgICAgICAgYSA9IDAsCiAgICAgICAgaSA9IG8ubGVuZ3RoLAogICAgICAgIHUgPSAiIiwKICAgICAgICBsID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMub2JqZWN0RGVmaW5pdGlvbiwgIkNsYXNzIiksCiAgICAgICAgcCA9IG51bGw7CiAgICAgIGlmICgKICAgICAgICBudWxsICE9PSBsICYmCiAgICAgICAgKC0xICE9PSBsLnZhbHVlLmluZGV4T2YoIksyTm9kZV9Db21wb25lbnRCb3VuZEV2ZW50IikgfHwKICAgICAgICAgIC0xICE9PSBsLnZhbHVlLmluZGV4T2YoIksyTm9kZV9BY3RvckJvdW5kRXZlbnQiKSkKICAgICAgKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgKCh1ID0KICAgICAgICAgICAgbnVsbCA9PT0KICAgICAgICAgICAgKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkNvbXBvbmVudFByb3BlcnR5TmFtZSIpKQogICAgICAgICAgICAgID8gIk5vbmUiCiAgICAgICAgICAgICAgOiBlLnZhbHVlKSwKICAgICAgICAgIChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWxlZ2F0ZVByb3BlcnR5TmFtZSIpKSwKICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWxlZ2F0ZVByb3BlcnR5RGlzcGxheU5hbWUiKSkpCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIGZvcm1hdFRleHRMMTFuRnJvbVByb3AodCkgKyAiICgiICsgdSArICIpIjsKICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIGUudmFsdWUgKyAiICgiICsgdSArICIpIjsKICAgICAgfQogICAgICBpZiAobnVsbCAhPT0gbCAmJiAtMSAhPT0gbC52YWx1ZS5pbmRleE9mKCJLMk5vZGVfSW5wdXRBeGlzRXZlbnQiKSkKICAgICAgICByZXR1cm4gKAogICAgICAgICAgIklucHV0QXhpcyAiICsgc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJJbnB1dEF4aXNOYW1lIikudmFsdWUKICAgICAgICApOwogICAgICBmb3IgKDsgYSA8IGk7ICsrYSkKICAgICAgICBpZiAobnVsbCAhPT0gKG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgb1thXSkpKQogICAgICAgICAgcmV0dXJuIG51bGwgPT09IChwID0gc2VhcmNoUHJvcFdpdGhOYW1lKG4udmFsdWUsICJNZW1iZXJOYW1lIikpCiAgICAgICAgICAgID8gbi52YWx1ZQogICAgICAgICAgICA6IC0xICE9PSBwLnZhbHVlLmluZGV4T2YoIlJlY2VpdmUiKQogICAgICAgICAgICA/IHIgKyAiICIgKyBwLnZhbHVlLnN1YnN0cmluZyg3KQogICAgICAgICAgICA6IHIgKyAiICIgKyBwLnZhbHVlOwogICAgICByZXR1cm4gcjsKICAgIH0pOwogIGZ1bmN0aW9uIE5FdmVudEN1c3RvbSgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChORXZlbnRDdXN0b20ucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChORXZlbnRDdXN0b20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0KICAgICAgTkV2ZW50Q3VzdG9tKS5wcm90b3R5cGUuZmluZENzc0NsYXNzTm9kZUNvbG9yID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gImV2ZW50IjsKICAgIH0pLAogICAgKE5FdmVudEN1c3RvbS5wcm90b3R5cGUuZmluZENzc0NsYXNzTm9kZUljb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiZXZlbnQtY3VzdG9tIjsKICAgIH0pLAogICAgKE5FdmVudEN1c3RvbS5wcm90b3R5cGUuZmluZEhlYWRlck5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJDdXN0b21GdW5jdGlvbk5hbWUiKTsKICAgICAgcmV0dXJuIG51bGwgPT09IHQgPyAiIiA6IHQudmFsdWU7CiAgICB9KSwKICAgIChORXZlbnRDdXN0b20ucHJvdG90eXBlLmZpbmRIZWFkZXJTdWJuYW1lID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gIkN1c3RvbUV2ZW50IjsKICAgIH0pOwogIGZ1bmN0aW9uIE5JZlRoZW5FbHNlKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5JZlRoZW5FbHNlLnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTklmVGhlbkVsc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0KICAgICAgTklmVGhlbkVsc2UpLnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiZXhlYy1icmFuY2giOwogICAgfSksCiAgICAoTklmVGhlbkVsc2UucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVJY29uID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gImV4ZWMtYnJhbmNoIjsKICAgIH0pLAogICAgKE5JZlRoZW5FbHNlLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJCcmFuY2giOwogICAgfSk7CiAgZnVuY3Rpb24gTklucHV0QWN0aW9uKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5JbnB1dEFjdGlvbi5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5JbnB1dEFjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPQogICAgICBOSW5wdXRBY3Rpb24pLnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlQ29sb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiZXZlbnQiOwogICAgfSksCiAgICAoTklucHV0QWN0aW9uLnByb3RvdHlwZS5maW5kQ3NzQ2xhc3NOb2RlSWNvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJldmVudCI7CiAgICB9KSwKICAgIChOSW5wdXRBY3Rpb24ucHJvdG90eXBlLmZpbmRIZWFkZXJOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gKAogICAgICAgICJJbnB1dEFjdGlvbiAiICsgc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJJbnB1dEFjdGlvbk5hbWUiKS52YWx1ZQogICAgICApOwogICAgfSk7CiAgdmFyIHByb3BzQ29udmVydGlvbiA9IHsKICAgIEV4Y2xhbWF0aW9uOiAiISIsCiAgICBRdW90ZTogJyInLAogICAgTGVmdFBhcmFudGhlc2VzOiAiKCIsCiAgICBSaWdodFBhcmFudGhlc2VzOiAiKSIsCiAgICBMZWZ0QnJhY2tldDogIlsiLAogICAgUmlnaHRCcmFja2V0OiAiXSIsCiAgICBTZWN0aW9uOiAiwqciLAogICAgU2xhc2g6ICIvIiwKICAgIEJhY2tzbGFzaDogIlxcIiwKICAgIEFtcGVyc2FuZDogIiYiLAogICAgVGlsZGU6ICJgIiwKICAgIENhcmV0OiAiXiIsCiAgICBFcXVhbHM6ICI9IiwKICAgIERvbGxhcjogIiQiLAogICAgWmVybzogIjAiLAogICAgT25lOiAiMSIsCiAgICBUd286ICIyIiwKICAgIFRocmVlOiAiMyIsCiAgICBGb3VyOiAiNCIsCiAgICBGaXZlOiAiNSIsCiAgICBTaXg6ICI2IiwKICAgIFNldmVuOiAiNyIsCiAgICBFaWdodDogIjgiLAogICAgTmluZTogIjkiLAogICAgQV9BY2NlbnRHcmF2ZTogIsOgIiwKICAgIEFueUtleTogIkFueSBLZXkiLAogICAgQ19DZWRpbGxlOiAiw6ciLAogICAgQ2Fwc0xvY2s6ICJDYXBzIExvY2siLAogICAgRV9BY2NlbnRBaWd1OiAiw6kiLAogICAgRV9BY2NlbnRHcmF2ZTogIsOoIiwKICAgIExlZnRBbHQ6ICJMZWZ0IEFsdCIsCiAgICBMZWZ0Q29tbWFuZDogIkxlZnQgQ21kIiwKICAgIExlZnRDb250cm9sOiAiTGVmdCBDdHJsIiwKICAgIExlZnRTaGlmdDogIkxlZnQgU2hpZnQiLAogICAgU3VidHJhY3Q6ICJOdW0gLSIsCiAgICBEZWNpbWFsOiAiTnVtIC4iLAogICAgTXVsdGlwbHk6ICJOdW0gKiIsCiAgICBEaXZpZGU6ICJOdW0gLyIsCiAgICBBZGQ6ICJOdW0gKyIsCiAgICBOdW1QYWRaZXJvOiAiTnVtIDAiLAogICAgTnVtUGFkT25lOiAiTnVtIDEiLAogICAgTnVtUGFkVHdvOiAiTnVtIDIiLAogICAgTnVtUGFkVGhyZWU6ICJOdW0gMyIsCiAgICBOdW1QYWRGb3VyOiAiTnVtIDQiLAogICAgTnVtUGFkRml2ZTogIk51bSA1IiwKICAgIE51bVBhZFNpeDogIk51bSA2IiwKICAgIE51bVBhZFNldmVuOiAiTnVtIDciLAogICAgTnVtUGFkRWlnaHQ6ICJOdW0gOCIsCiAgICBOdW1QYWROaW5lOiAiTnVtIDkiLAogICAgTnVtTG9jazogIk51bSBMb2NrIiwKICAgIFBhZ2VEb3duOiAiUGFnZSBEb3duIiwKICAgIFBhZ2VVcDogIlBhZ2UgVXAiLAogICAgUmlnaHRBbHQ6ICJSaWdodCBBbHQiLAogICAgUmlnaHRDb21tYW5kOiAiUmlnaHQgQ21kIiwKICAgIFJpZ2h0Q29udHJvbDogIlJpZ2h0IEN0cmwiLAogICAgUmlnaHRTaGlmdDogIlJpZ2h0IFNoaWZ0IiwKICAgIFNjcm9sbExvY2s6ICJTY3JvbGwgTG9jayIsCiAgICBTcGFjZUJhcjogIlNwYWNlIEJhciIsCiAgfTsKICBmdW5jdGlvbiBOSW5wdXRLZXkoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTklucHV0S2V5LnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTklucHV0S2V5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5JbnB1dEtleSkucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVDb2xvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJldmVudCI7CiAgICB9KSwKICAgIChOSW5wdXRLZXkucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVJY29uID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiSW5wdXRLZXkiKSwKICAgICAgICB0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJBeGlzS2V5IiksCiAgICAgICAgbiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpOwogICAgICBpZiAobnVsbCAhPT0gZSkgewogICAgICAgIGlmICgwID09PSBlLnZhbHVlLmluZGV4T2YoIkdhbWVwYWRfIikpIHJldHVybiAiaW5wdXQtZ2FtZXBhZCI7CiAgICAgICAgaWYgKDAgPT09IGUudmFsdWUuaW5kZXhPZigiTW90aW9uQ29udHJvbGxlcl8iKSkgcmV0dXJuICJpbnB1dC1nYW1lcGFkIjsKICAgICAgICBpZiAoMCA9PT0gZS52YWx1ZS5pbmRleE9mKCJPY3VsdXMiKSkgcmV0dXJuICJpbnB1dC1nYW1lcGFkIjsKICAgICAgICBpZiAoMCA9PT0gZS52YWx1ZS5pbmRleE9mKCJTdGVhbSIpKSByZXR1cm4gImlucHV0LWdhbWVwYWQiOwogICAgICAgIGlmICgtMSAhPT0gZS52YWx1ZS5pbmRleE9mKCJNb3VzZSIpKSByZXR1cm4gImlucHV0LW1vdXNlIjsKICAgICAgICBpZiAoMCA9PT0gZS52YWx1ZS5pbmRleE9mKCJUb3VjaCIpKSByZXR1cm4gImlucHV0LXRvdWNoIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAtMSAhPT0gbi52YWx1ZS5pbmRleE9mKCJLMk5vZGVfSW5wdXRUb3VjaCIpKQogICAgICAgICAgcmV0dXJuICJpbnB1dC10b3VjaCI7CiAgICAgICAgaWYgKAogICAgICAgICAgbnVsbCAhPT0gbiAmJgogICAgICAgICAgLTEgIT09IG4udmFsdWUuaW5kZXhPZigiSzJOb2RlX0lucHV0QXhpc0tleUV2ZW50IikgJiYKICAgICAgICAgIG51bGwgIT09IHQudmFsdWUKICAgICAgICApIHsKICAgICAgICAgIGlmICgtMSAhPT0gdC52YWx1ZS5pbmRleE9mKCJNb3VzZSIpKSByZXR1cm4gImlucHV0LW1vdXNlIjsKICAgICAgICAgIGlmICgwID09PSB0LnZhbHVlLmluZGV4T2YoIkdhbWVwYWRfIikpIHJldHVybiAiaW5wdXQtZ2FtZXBhZCI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAiaW5wdXQta2V5IjsKICAgIH0pLAogICAgKE5JbnB1dEtleS5wcm90b3R5cGUuZmluZEhlYWRlck5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gIiIsCiAgICAgICAgdCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiSW5wdXRLZXkiKSwKICAgICAgICBuID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJBeGlzS2V5IiksCiAgICAgICAgdSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpOwogICAgICBpZiAobnVsbCAhPT0gdCkgZSA9IHQudmFsdWU7CiAgICAgIGVsc2UgewogICAgICAgIGlmIChudWxsICE9PSB1ICYmIC0xICE9PSB1LnZhbHVlLmluZGV4T2YoIksyTm9kZV9JbnB1dFRvdWNoIikpCiAgICAgICAgICByZXR1cm4gIklucHV0VG91Y2giOwogICAgICAgIG51bGwgIT09IHUgJiYKICAgICAgICAgIC0xICE9PSB1LnZhbHVlLmluZGV4T2YoIksyTm9kZV9JbnB1dEF4aXNLZXlFdmVudCIpICYmCiAgICAgICAgICBudWxsICE9PSBuICYmCiAgICAgICAgICAoZSA9IG4udmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiAoCiAgICAgICAgKGUgPQogICAgICAgICAgdm9pZCAwID09PSBwcm9wc0NvbnZlcnRpb25bZV0KICAgICAgICAgICAgPyB0cmFuc2Zvcm1JbnRlcm5hbE5hbWUoZSkKICAgICAgICAgICAgOiBwcm9wc0NvbnZlcnRpb25bZV0pLAogICAgICAgIChlID0KICAgICAgICAgIG51bGwgIT09IHUgJiYgLTEgIT09IHUudmFsdWUuaW5kZXhPZigiSzJOb2RlX0lucHV0RGVidWdLZXkiKQogICAgICAgICAgICA/ICJEZWJ1ZyBLZXkgIiArIGUKICAgICAgICAgICAgOiBlKQogICAgICApOwogICAgfSksCiAgICAoTklucHV0S2V5LnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbInJpZ2h0LWNvbCJdLAogICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9KTsKICBmdW5jdGlvbiBOS2lzbWV0TWF0aCgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOS2lzbWV0TWF0aC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5LaXNtZXRNYXRoLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5LaXNtZXRNYXRoKS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICB0aGlzLmRpc2FibGVUZXh0T25QaW5zKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJua2lzbWV0bWF0aCJdLAogICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgICB7IG5hbWU6ICJkYXRhLWlkIiwgdmFsdWU6IHRoaXMuZ3VpZCB9LAogICAgICAgICAgICBdLAogICAgICAgICAgICBjaGlsZHM6IFt0aGlzLmdlbmVyYXRlSFRNTFRvb2xUaXAoKSwgdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCldLAogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0pLAogICAgKE5LaXNtZXRNYXRoLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9ICIiLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIk1hY3JvR3JhcGhSZWZlcmVuY2UiKSwKICAgICAgICBhID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMub2JqZWN0RGVmaW5pdGlvbiwgIkNsYXNzIiksCiAgICAgICAgcyA9IG51bGw7CiAgICAgIHJldHVybiAoCiAgICAgICAgbnVsbCAhPT0gYSAmJiAtMSAhPT0gYS52YWx1ZS5pbmRleE9mKCJLMk5vZGVfRW51bUVxdWFsaXR5IikKICAgICAgICAgID8gKGUgPSAiPT0iKQogICAgICAgICAgOiBudWxsICE9PSBhICYmIC0xICE9PSBhLnZhbHVlLmluZGV4T2YoIksyTm9kZV9FbnVtSW5lcXVhbGl0eSIpCiAgICAgICAgICA/IChlID0gIiE9IikKICAgICAgICAgIDogbnVsbCA9PT0gdAogICAgICAgICAgPyAoKGEgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkZ1bmN0aW9uUmVmZXJlbmNlIikpLAogICAgICAgICAgICAoYSA9IHNlYXJjaFByb3BXaXRoTmFtZShhLnZhbHVlLCAiTWVtYmVyTmFtZSIpKSwKICAgICAgICAgICAgKGUgPSBnZXRLaXNtZXRNYXRoVGV4dChhLnZhbHVlKSkpCiAgICAgICAgICA6IC0xICE9PQogICAgICAgICAgICAocyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0LnZhbHVlLCAiTWFjcm9HcmFwaCIpKS52YWx1ZS5pbmRleE9mKAogICAgICAgICAgICAgICJTdGFuZGFyZE1hY3JvczpJbmNyZW1lbnQiCiAgICAgICAgICAgICkKICAgICAgICAgID8gKGUgPSAiKysiKQogICAgICAgICAgOiAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJTdGFuZGFyZE1hY3JvczpEZWNyZW1lbnQiKSAmJiAoZSA9ICItLSIpLAogICAgICAgIHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImNlbnRlci10ZXh0Il0sCiAgICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJzcGFuIiwgdGV4dDogZSwgY2hpbGRzOiBlIH1dLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicm91bmQtYmciXSB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImxlZnQtY29sIl0sCiAgICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbInJpZ2h0LWNvbCJdLAogICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0KICAgICAgKTsKICAgIH0pLAogICAgKE5LaXNtZXRNYXRoLnByb3RvdHlwZS5kaXNhYmxlVGV4dE9uUGlucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgZSA9IDAsIHQgPSB0aGlzLnBpbnMubGVuZ3RoOyBlIDwgdDsgKytlKQogICAgICAgIG51bGwgPT09IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnBpbnNbZV0ucHJvcHMsICJQaW5GcmllbmRseU5hbWUiKSAmJgogICAgICAgICAgdGhpcy5waW5zW2VdLmRpc2FibGVUZXh0KCk7CiAgICB9KTsKICBmdW5jdGlvbiBOS25vdCgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOS25vdC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5Lbm90LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5Lbm90KS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0LAogICAgICAgICAgZSA9IHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJub2RlIiwgImtub3QiXSwKICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxUb29sVGlwKCldLAogICAgICAgICAgfSwKICAgICAgICAgIG4gPSAwLAogICAgICAgICAgcyA9IHRoaXMuZ2VuZXJhdGVIVE1MQm9keSgpOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHMpKQogICAgICAgICAgZm9yICh0ID0gcy5sZW5ndGg7IG4gPCB0OyArK24pIGUuY2hpbGRzLnB1c2goc1tuXSk7CiAgICAgICAgZWxzZSBlLmNoaWxkcy5wdXNoKHMpOwogICAgICAgIHJldHVybiBlOwogICAgICB9KSwKICAgIChOS25vdC5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MUGluc0lucHV0ID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciB0ID0gW10sCiAgICAgICAgICBlID0gdGhpcy5pc0FkdmFuY2VkUGluRGlzcGxheUV4cGFuZGVkKCksCiAgICAgICAgICBuID0gMCwKICAgICAgICAgIHMgPSB0aGlzLnBpbnMubGVuZ3RoOwogICAgICAgIG4gPCBzOwogICAgICAgICsrbgogICAgICApCiAgICAgICAgdGhpcy5waW5zW25dLmlzSW5wdXQoKSAmJgogICAgICAgICAgKHRoaXMucGluc1tuXS5kaXNhYmxlVGV4dEFuZElucHV0KCksCiAgICAgICAgICB0LnB1c2godGhpcy5waW5zW25dLmdlbmVyYXRlSFRNTChlLCB0aGlzKSkpOwogICAgICByZXR1cm4gdDsKICAgIH0pLAogICAgKE5Lbm90LnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0ID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKAogICAgICAgIHZhciB0ID0gW10sCiAgICAgICAgICBlID0gdGhpcy5pc0FkdmFuY2VkUGluRGlzcGxheUV4cGFuZGVkKCksCiAgICAgICAgICBuID0gMCwKICAgICAgICAgIHMgPSB0aGlzLnBpbnMubGVuZ3RoOwogICAgICAgIG4gPCBzOwogICAgICAgICsrbgogICAgICApCiAgICAgICAgdGhpcy5waW5zW25dLmlzT3V0cHV0KCkgJiYKICAgICAgICAgICh0aGlzLnBpbnNbbl0uZGlzYWJsZVRleHRBbmRJbnB1dCgpLAogICAgICAgICAgdC5wdXNoKHRoaXMucGluc1tuXS5nZW5lcmF0ZUhUTUwoZSwgdGhpcykpKTsKICAgICAgcmV0dXJuIHQ7CiAgICB9KTsKICBmdW5jdGlvbiBOTWF0ZXJpYWxHcmFwaE5vZGUoKSB7CiAgICBVTm9kZS5jYWxsKHRoaXMpOwogIH0KICAoTk1hdGVyaWFsR3JhcGhOb2RlLnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTk1hdGVyaWFsR3JhcGhOb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5NYXRlcmlhbEdyYXBoTm9kZSkucHJvdG90eXBlLmdlbmVyYXRlSFRNTEhlYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgZSA9IDAsIG4gPSB0aGlzLnBpbnMubGVuZ3RoOyBlIDwgbjsgKytlKQogICAgICAgIHRoaXMucGluc1tlXS5kaXNhYmxlSW5wdXQoKSwKICAgICAgICAgICh0aGlzLnBpbnNbZV0ub3ZlcnJpZGUuY29ubmVjdG9yVHlwZSA9IHsKICAgICAgICAgICAgY29ubmVjdG9yOiAiY29ubmVjdG9yIiwKICAgICAgICAgICAgdHlwZTogIm1hdGVyaWFsaW5wdXQiLAogICAgICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbCiAgICAgICAgICAiaGVhZGVyIiwKICAgICAgICAgICJub2RlLWNvbG9yIiwKICAgICAgICAgIHRoaXMuZmluZENzc0NsYXNzTm9kZUNvbG9yKCksCiAgICAgICAgICAiZ3JhZGllbnQiLAogICAgICAgIF0sCiAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICB7IHRhZzogInNwYW4iLCBjbGFzc2VzOiBbIm5hbWUiXSwgdGV4dDogdGhpcy5nZXRNYXRlcmlhbE5hbWUoKSB9LAogICAgICAgIF0sCiAgICAgIH07CiAgICB9KSwKICAgIChOTWF0ZXJpYWxHcmFwaE5vZGUucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVDb2xvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKTsKICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYKICAgICAgICAtMSAhPT0gZS52YWx1ZS5pbmRleE9mKCJNYXRlcmlhbEV4cHJlc3Npb25NYXRlcmlhbEZ1bmN0aW9uQ2FsbCIpCiAgICAgICAgPyAiZnVuY3Rpb24tY2FsbCIKICAgICAgICA6IG51bGwgIT09IGUgJiYKICAgICAgICAgIC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk1hdGVyaWFsRXhwcmVzc2lvbkNvbnN0YW50VmVjdG9yIikKICAgICAgICA/ICJtYXRlcmlhbC1jb25zdGFudCIKICAgICAgICA6IChudWxsICE9PSBlICYmCiAgICAgICAgICAgIC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk1hdGVyaWFsRXhwcmVzc2lvbkNvbnN0YW50IikpIHx8CiAgICAgICAgICAobnVsbCAhPT0gZSAmJiAtMSAhPT0gZS52YWx1ZS5pbmRleE9mKCJNYXRlcmlhbEV4cHJlc3Npb24iKSkKICAgICAgICA/ICJwdXJlLWZ1bmN0aW9uLWNhbGwiCiAgICAgICAgOiAiIjsKICAgIH0pLAogICAgKE5NYXRlcmlhbEdyYXBoTm9kZS5wcm90b3R5cGUuZ2V0TWF0ZXJpYWxOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICBuLAogICAgICAgIHQgPSAiIiwKICAgICAgICBhID0gLTEsCiAgICAgICAgaSA9ICJMZXJwIiwKICAgICAgICByID0gWyIwIiwgIjEiLCAiMC41Il0sCiAgICAgICAgbCA9IG51bGwsCiAgICAgICAgbyA9IDAsCiAgICAgICAgcyA9IG51bGwsCiAgICAgICAgdSA9IG51bGwsCiAgICAgICAgcCA9IG51bGwsCiAgICAgICAgZCA9IG51bGwsCiAgICAgICAgaCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm5vZGVzWzBdLm9iamVjdERlZmluaXRpb24sICJDbGFzcyIpLAogICAgICAgIGMgPSBudWxsLAogICAgICAgIGYgPSBudWxsLAogICAgICAgIHYgPSBudWxsOwogICAgICBpZiAobnVsbCA9PT0gaCkgcmV0dXJuICIiOwogICAgICBpZiAoLTEgIT09IGgudmFsdWUuaW5kZXhPZigiTWF0ZXJpYWxFeHByZXNzaW9uTWF0ZXJpYWxGdW5jdGlvbkNhbGwiKSkgewogICAgICAgIGlmICgKICAgICAgICAgIG51bGwgPT09CiAgICAgICAgICAoYyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm5vZGVzWzFdLnByb3BzLCAiTWF0ZXJpYWxGdW5jdGlvbiIpKQogICAgICAgICkKICAgICAgICAgIHJldHVybiAiVW5zcGVjaWZpZWQgRnVuY3Rpb24iOwogICAgICAgIGlmICgKICAgICAgICAgIC0xICE9PSAoYSA9IGMudmFsdWUuaW5kZXhPZigiLiIpKSAmJgogICAgICAgICAgLTEgIT09IChjID0gKHQgPSBjLnZhbHVlLnN1YnN0cmluZygoYSArPSAxKSkpLmluZGV4T2YoIiciKSkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gdC5zdWJzdHIoMCwgYykucmVwbGFjZSgnIicsICIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoLTEgIT09IGgudmFsdWUuaW5kZXhPZigiTWF0ZXJpYWxFeHByZXNzaW9uTGluZWFySW50ZXJwb2xhdGUiKSkKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHRoaXMucGluc1swXS5pc0xpbmtlZFRvKCkgJiYgKHJbMF0gPSAiIiksCiAgICAgICAgICAgIHRoaXMucGluc1sxXS5pc0xpbmtlZFRvKCkgJiYgKHJbMV0gPSAiIiksCiAgICAgICAgICAgIHRoaXMucGluc1syXS5pc0xpbmtlZFRvKCkgJiYgKHJbMl0gPSAiIiksCiAgICAgICAgICAgICIsLCIgIT09ICh0ID0gci5qb2luKCIsIikpICYmIChpICs9ICIoIiArIHQgKyAiKSIpLAogICAgICAgICAgICBpCiAgICAgICAgICApOwogICAgICAgIGlmICgtMSAhPT0gaC52YWx1ZS5pbmRleE9mKCJNYXRlcmlhbEV4cHJlc3Npb25Db25zdGFudCIpKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIG51bGwgPT09IChsID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMubm9kZXNbMV0ucHJvcHMsICJDb25zdGFudCIpKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChmID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMubm9kZXNbMV0ucHJvcHMsICJSIikpLAogICAgICAgICAgICAgICh2ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMubm9kZXNbMV0ucHJvcHMsICJHIikpLAogICAgICAgICAgICAgIG51bGwgIT09IGYgJiYgbnVsbCAhPT0gdgogICAgICAgICAgICAgICAgPyBmLnZhbHVlLnJlcGxhY2UoLyhcLlxkKz8pMCtcYi8sICIkMSIpICsKICAgICAgICAgICAgICAgICAgIiwiICsKICAgICAgICAgICAgICAgICAgdi52YWx1ZS5yZXBsYWNlKC8oXC5cZCs/KTArXGIvLCAiJDEiKQogICAgICAgICAgICAgICAgOiBudWxsICE9PSBmCiAgICAgICAgICAgICAgICA/IGYudmFsdWUucmVwbGFjZSgvKFwuXGQrPykwK1xiLywgIiQxIikKICAgICAgICAgICAgICAgIDogIjAiCiAgICAgICAgICAgICk7CiAgICAgICAgICBmb3IgKGUgPSBsLnZhbHVlLmxlbmd0aDsgbyA8IGU7ICsrbykKICAgICAgICAgICAgKG4gPSBsLnZhbHVlW29dLnZhbHVlLnJlcGxhY2UoLyhcLlxkKz8pMCtcYi8sICIkMSIpKSwKICAgICAgICAgICAgICAiUiIgPT09IGwudmFsdWVbb10ubmFtZSAmJiAocyA9IG4pLAogICAgICAgICAgICAgICJHIiA9PT0gbC52YWx1ZVtvXS5uYW1lICYmICh1ID0gbiksCiAgICAgICAgICAgICAgIkIiID09PSBsLnZhbHVlW29dLm5hbWUgJiYgKHAgPSBuKSwKICAgICAgICAgICAgICAiQSIgPT09IGwudmFsdWVbb10ubmFtZSAmJiAoZCA9IG4pOwogICAgICAgICAgcmV0dXJuIC0xICE9PSBoLnZhbHVlLmluZGV4T2YoIkNvbnN0YW50NFZlY3RvciIpCiAgICAgICAgICAgID8gcyArICIsIiArIHUgKyAiLCIgKyBwICsgIiwiICsgZAogICAgICAgICAgICA6IHMgKyAiLCIgKyB1ICsgIiwiICsgcDsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgLTEgIT09IGgudmFsdWUuaW5kZXhPZigiTWF0ZXJpYWxFeHByZXNzaW9uIikgJiYKICAgICAgICAgIC0xICE9PSAoYSA9IGgudmFsdWUuaW5kZXhPZigiTWF0ZXJpYWxFeHByZXNzaW9uIikpCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIGgudmFsdWUuc3Vic3RyKChhICs9IDE4KSk7CiAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfSksCiAgICAoTk1hdGVyaWFsR3JhcGhOb2RlLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRGb3JVbnJlYWwgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgbiA9ICIiLAogICAgICAgIHQgPSAwLAogICAgICAgIGEgPSB0aGlzLm5vZGVzLmxlbmd0aDsKICAgICAgZm9yIChuICs9ICJCZWdpbiAiICsgdGhpcy5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uKCk7IHQgPCBhOyArK3QpCiAgICAgICAgdm9pZCAwICE9PSB0aGlzLm5vZGVzW3RdLmdlbmVyYXRlVGV4dAogICAgICAgICAgPyAobiArPSB0aGlzLm5vZGVzW3RdLmdlbmVyYXRlVGV4dCgpICsgIlxuIikKICAgICAgICAgIDogdm9pZCAwICE9PSB0aGlzLm5vZGVzW3RdLmdlbmVyYXRlVGV4dEZvclVucmVhbCAmJgogICAgICAgICAgICAobiArPSB0aGlzLm5vZGVzW3RdLmdlbmVyYXRlVGV4dEZvclVucmVhbChlICsgMSkgKyAiXG4iKTsKICAgICAgcmV0dXJuIChuID0KICAgICAgICAobiArPSB0aGlzLmdlbmVyYXRlVGV4dFByb3BzKGUpKSArCiAgICAgICAgKCJFbmQgIiArIHRoaXMub2JqZWN0RGVmaW5pdGlvblswXS52YWx1ZSkpOwogICAgfSk7CiAgZnVuY3Rpb24gTk1hdGVyaWFsR3JhcGhOb2RlQ29tbWVudCgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyksICh0aGlzLnNpemUgPSBbNDAwLCA5Nl0pOwogIH0KICAoTk1hdGVyaWFsR3JhcGhOb2RlQ29tbWVudC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5NYXRlcmlhbEdyYXBoTm9kZUNvbW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0KICAgICAgTk1hdGVyaWFsR3JhcGhOb2RlQ29tbWVudCkucHJvdG90eXBlLmdlbmVyYXRlSFRNTCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJuY29tbWVudCJdLAogICAgICAgIGF0dHJzOiBbCiAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICB7IG5hbWU6ICJkYXRhLWlkIiwgdmFsdWU6IHRoaXMuZ3VpZCB9LAogICAgICAgIF0sCiAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxIZWFkZXIoKV0sCiAgICAgIH07CiAgICB9KSwKICAgIChOTWF0ZXJpYWxHcmFwaE5vZGVDb21tZW50LnByb3RvdHlwZS5nZW5lcmF0ZUNzc05vZGVTdHlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVDc3NOb2RlU3R5bGUuY2FsbCh0aGlzKTsKICAgICAgcmV0dXJuIGUucHVzaCh0aGlzLmFkZEJvZHlTdHlsZUNvbG9yKCkpLCBlOwogICAgfSksCiAgICAoTk1hdGVyaWFsR3JhcGhOb2RlQ29tbWVudC5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MSGVhZGVyID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICB0ID0gW10sCiAgICAgICAgbyA9IDAsCiAgICAgICAgciA9IHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbImhlYWRlciJdLAogICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmFkZEhlYWRlclN0eWxlQ29sb3IoKSB9XSwKICAgICAgICB9LAogICAgICAgIGEgPSByZW1vdmVRdW90ZXModGhpcy5jb21tZW50KQogICAgICAgICAgLnJlcGxhY2UoL1xcIi9nLCAnIicpCiAgICAgICAgICAucmVwbGFjZSgvXFwnL2csICInIikKICAgICAgICAgIC5yZXBsYWNlKC9cXHIvZywgIiIpCiAgICAgICAgICAucmVwbGFjZSgvXFxuL2csICJcbiIpLAogICAgICAgIG4gPSBhLnNwbGl0KC9cbi9nKTsKICAgICAgaWYgKDEgPT09IG4ubGVuZ3RoKSByLnRleHQgPSBhOwogICAgICBlbHNlIHsKICAgICAgICBmb3IgKGUgPSBuLmxlbmd0aDsgbyA8IGU7ICsrbykKICAgICAgICAgIHQucHVzaCh7IHRleHQ6IG5bb10gfSksIG8gKyAxIDwgbi5sZW5ndGggJiYgdC5wdXNoKHsgdGFnOiAiYnIiIH0pOwogICAgICAgIHIuY2hpbGRzID0gdDsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0pLAogICAgKE5NYXRlcmlhbEdyYXBoTm9kZUNvbW1lbnQucHJvdG90eXBlLmdldENvbG9yQ29tbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpLAogICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkNvbW1lbnRDb2xvciIpOwogICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBlLnNldFZhbHVlc0Zyb21Qcm9wcyh0LnZhbHVlKSwgZTsKICAgIH0pLAogICAgKE5NYXRlcmlhbEdyYXBoTm9kZUNvbW1lbnQucHJvdG90eXBlLmFkZEJvZHlTdHlsZUNvbG9yID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMuZ2V0Q29sb3JDb21tZW50KCk7CiAgICAgIHJldHVybiAoZS5hbHBoYSA9IDAuMSksICJiYWNrZ3JvdW5kLWNvbG9yOiIgKyBlLmdlbmVyYXRlQ3NzKCk7CiAgICB9KSwKICAgIChOTWF0ZXJpYWxHcmFwaE5vZGVDb21tZW50LnByb3RvdHlwZS5hZGRIZWFkZXJTdHlsZUNvbG9yID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMuZ2V0Q29sb3JDb21tZW50KCk7CiAgICAgIHJldHVybiAoZS5hbHBoYSA9IDAuNSksICJiYWNrZ3JvdW5kLWNvbG9yOiIgKyBlLmdlbmVyYXRlQ3NzKCk7CiAgICB9KTsKICBmdW5jdGlvbiBOTWF0ZXJpYWxHcmFwaE5vZGVSb290KCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5NYXRlcmlhbEdyYXBoTm9kZVJvb3QucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOTWF0ZXJpYWxHcmFwaE5vZGVSb290LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9CiAgICAgIE5NYXRlcmlhbEdyYXBoTm9kZVJvb3QpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGUgPSAwLCB0ID0gdGhpcy5waW5zLmxlbmd0aDsgZSA8IHQ7ICsrZSkKICAgICAgICB0aGlzLnBpbnNbZV0uZGlzYWJsZUlucHV0KCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbImhlYWRlciIsICJub2RlLWNvbG9yIiwgIm1hdGVyaWFsLWdyYXBoLXJvb3QiLCAiZ3JhZGllbnQiXSwKICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgIHsgdGFnOiAic3BhbiIsIGNsYXNzZXM6IFsibmFtZSJdLCB0ZXh0OiB0aGlzLmdldE1hdGVyaWFsTmFtZSgpIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgIH0pLAogICAgKE5NYXRlcmlhbEdyYXBoTm9kZVJvb3QucHJvdG90eXBlLmdldE1hdGVyaWFsTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiTWF0ZXJpYWwiKSwKICAgICAgICBhID0gdC52YWx1ZS5pbmRleE9mKCIuIik7CiAgICAgIGlmICgtMSAhPT0gYSkKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGUgPSB0LnZhbHVlLmluZGV4T2YoIiciLCAoYSArPSAxKSkpLAogICAgICAgICAgdC52YWx1ZS5zdWJzdHIoYSwgZSAtIGEpLnJlcGxhY2UoJyInLCAiIikKICAgICAgICApOwogICAgfSk7CiAgdmFyIEVOVU1fTUVUQVNPVU5EID0gewogICAgQklRVUFEX0ZJTFRFUl9UWVBFOiBbCiAgICAgIHsgbmFtZTogIkxvdyBQYXNzIiwgdmFsdWU6ICIwIiB9LAogICAgICB7IG5hbWU6ICJIaWdoIFBhc3MiLCB2YWx1ZTogIjEiIH0sCiAgICAgIHsgbmFtZTogIkJhbmQgUGFzcyIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiTm90Y2giLCB2YWx1ZTogIjMiIH0sCiAgICAgIHsgbmFtZTogIlBhcmFtZXRyaWMgRVEiLCB2YWx1ZTogIjQiIH0sCiAgICAgIHsgbmFtZTogIkxvdyBTaGVsZiIsIHZhbHVlOiAiNSIgfSwKICAgICAgeyBuYW1lOiAiSGlnaCBTaGVsZiIsIHZhbHVlOiAiNiIgfSwKICAgICAgeyBuYW1lOiAiQWxsIFBhc3MiLCB2YWx1ZTogIjciIH0sCiAgICAgIHsgbmFtZTogIkJ1dHRlcndvcnRoIExvdyBQYXNzIiwgdmFsdWU6ICI4IiB9LAogICAgICB7IG5hbWU6ICJCdXR0ZXJ3b3J0aCBIaWdoIFBhc3MiLCB2YWx1ZTogIjkiIH0sCiAgICBdLAogICAgQlVGRkVSX1RSSUdHRVJfVFlQRTogWwogICAgICB7IG5hbWU6ICJSaXNpbmcgRWRnZSIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiRmFsbGluZyBFZGdlIiwgdmFsdWU6ICIxIiB9LAogICAgICB7IG5hbWU6ICJBYnMgVGhyZXNob2xkIiwgdmFsdWU6ICIyIiB9LAogICAgXSwKICAgIERZTkFNSUNfRklMVEVSX1RZUEU6IFsKICAgICAgeyBuYW1lOiAiQmVsbCIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiTG93IFNoZWxmIiwgdmFsdWU6ICIxIiB9LAogICAgICB7IG5hbWU6ICJIaWdoIFNoZWxmIiwgdmFsdWU6ICIyIiB9LAogICAgXSwKICAgIEVOVkVMT1BFX1BFQUtfTU9ERTogWwogICAgICB7IG5hbWU6ICJNUyIsIHZhbHVlOiAiMSIgfSwKICAgICAgeyBuYW1lOiAiUk1TIiwgdmFsdWU6ICIyIiB9LAogICAgICB7IG5hbWU6ICJQZWFrIiwgdmFsdWU6ICIwIiB9LAogICAgXSwKICAgIEZJTFRFUl9PUkRFUjogWwogICAgICB7IG5hbWU6ICJUd28gUG9sZSIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiRm91ciBQb2xlIiwgdmFsdWU6ICIxIiB9LAogICAgICB7IG5hbWU6ICJTaXggUG9sZSIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiRWlnaHQgUG9sZSIsIHZhbHVlOiAiMyIgfSwKICAgIF0sCiAgICBHUkFJTl9ERUxBWV9FTlZFTE9QRTogWwogICAgICB7IG5hbWU6ICJHYXVzc2lhbiIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiVHJpYW5nbGUiLCB2YWx1ZTogIjEiIH0sCiAgICAgIHsgbmFtZTogIkRvd253YXJkIFRyaWFuZ2xlIiwgdmFsdWU6ICIyIiB9LAogICAgICB7IG5hbWU6ICJVcHdhcmQgVHJpYW5nbGUiLCB2YWx1ZTogIjMiIH0sCiAgICAgIHsgbmFtZTogIkV4cG9uZW50aWFsIERlY2F5IiwgdmFsdWU6ICI0IiB9LAogICAgICB7IG5hbWU6ICJFeHBvbmVudGlhbCBBdHRhY2siLCB2YWx1ZTogIjUiIH0sCiAgICBdLAogICAgS05FRV9NT0RFOiBbCiAgICAgIHsgbmFtZTogIkhhcmQiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIlNvZnQiLCB2YWx1ZTogIjEiIH0sCiAgICBdLAogICAgTEZPX1dBVkVTSEFQRV9UWVBFOiBbCiAgICAgIHsgbmFtZTogIlNpbmUiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIlNhdyIsIHZhbHVlOiAiMSIgfSwKICAgICAgeyBuYW1lOiAiVHJpYW5nbGUiLCB2YWx1ZTogIjIiIH0sCiAgICAgIHsgbmFtZTogIlNxdWFyZSIsIHZhbHVlOiAiMyIgfSwKICAgIF0sCiAgICBNVVNJQ0FMX1NDQUxFOiBbCiAgICAgIHsgbmFtZTogIk1ham9yIFNjYWxlIiwgdmFsdWU6ICIwIiB9LAogICAgICB7IG5hbWU6ICJNaW5vciAoRG9yaWFuKSIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiUGhyeWdpYW4iLCB2YWx1ZTogIjI3IiB9LAogICAgICB7IG5hbWU6ICJMeWRpYW4iLCB2YWx1ZTogIjYiIH0sCiAgICAgIHsgbmFtZTogIkRvbWluYW50IDd0aCAoTWl4b2x5ZGlhbikiLCB2YWx1ZTogIjEiIH0sCiAgICAgIHsgbmFtZTogIk5hdHVyYWwgTWlub3IgKEFlb2xpYW4pIiwgdmFsdWU6ICIyOCIgfSwKICAgICAgeyBuYW1lOiAiSGFsZiBEaW1pbmlzaGVkIChMb2NyaWFuKSIsIHZhbHVlOiAiMyIgfSwKICAgICAgeyBuYW1lOiAiRGltaW5pc2hlZCIsIHZhbHVlOiAiNCIgfSwKICAgICAgeyBuYW1lOiAiQ2hyb21hdGljIiwgdmFsdWU6ICIxOSIgfSwKICAgICAgeyBuYW1lOiAiV2hvbGUtVG9uZSIsIHZhbHVlOiAiMTgiIH0sCiAgICAgIHsgbmFtZTogIkRpbWluaXNoZWQgV2hvbGUtVG9uZSIsIHZhbHVlOiAiMjAiIH0sCiAgICAgIHsgbmFtZTogIk1ham9yIFBlbnRhdG9uaWMiLCB2YWx1ZTogIjUiIH0sCiAgICAgIHsgbmFtZTogIk1pbm9yIFBlbnRhdG9uaWMiLCB2YWx1ZTogIjIxIiB9LAogICAgICB7IG5hbWU6ICJCbHVlcyIsIHZhbHVlOiAiMTMiIH0sCiAgICAgIHsgbmFtZTogIkJlYm9wIChNYWpvcikiLCB2YWx1ZTogIjciIH0sCiAgICAgIHsgbmFtZTogIkJlYm9wIChNaW5vcikiLCB2YWx1ZTogIjIyIiB9LAogICAgICB7IG5hbWU6ICJCZWJvcCAoTWlub3IpICMyIiwgdmFsdWU6ICIyNCIgfSwKICAgICAgeyBuYW1lOiAiQmVib3AgKERvbWluYW50KSIsIHZhbHVlOiAiMTQiIH0sCiAgICAgIHsgbmFtZTogIkhhcm1vbmljIE1ham9yIiwgdmFsdWU6ICI4IiB9LAogICAgICB7IG5hbWU6ICJIYXJtb25pYyBNaW5vciIsIHZhbHVlOiAiMjUiIH0sCiAgICAgIHsgbmFtZTogIk1lbG9kaWMgTWlub3IiLCB2YWx1ZTogIjIzIiB9LAogICAgICB7IG5hbWU6ICJTaXh0aCBNb2RlIG9mIEhhcm1vbmljIE1pbm9yIiwgdmFsdWU6ICIxMSIgfSwKICAgICAgeyBuYW1lOiAiTHlkaWFuIEF1Z21lbnRlZCIsIHZhbHVlOiAiOSIgfSwKICAgICAgeyBuYW1lOiAiTHlkaWFuIERvbWluYW50IiwgdmFsdWU6ICIxNiIgfSwKICAgICAgeyBuYW1lOiAiQXVnbWVudGVkIiwgdmFsdWU6ICIxMCIgfSwKICAgICAgeyBuYW1lOiAiRGltaW5pc2hlZCAoQmVnaW4gV2l0aCBIYWxmLVN0ZXApIiwgdmFsdWU6ICIxMiIgfSwKICAgICAgeyBuYW1lOiAiRGltaW5pc2hlZCAoQmVnaW4gV2l0aCBXaG9sZS1TdGVwKSIsIHZhbHVlOiAiMjYiIH0sCiAgICAgIHsgbmFtZTogIkhhbGYtRGltaW5pc2hlZCAoTG9jcmlhbiAjMikiLCB2YWx1ZTogIjI5IiB9LAogICAgICB7IG5hbWU6ICJTcGFuaXNoIG9yIEpld2lzaCBTY2FsZSIsIHZhbHVlOiAiMTUiIH0sCiAgICAgIHsgbmFtZTogIkhpbmR1IiwgdmFsdWU6ICIxNyIgfSwKICAgIF0sCiAgICBOT0lTRV9UWVBFOiBbCiAgICAgIHsgbmFtZTogIlBpbmsgTm9pc2UiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIldoaXRlIE5vaXNlIiwgdmFsdWU6ICIxIiB9LAogICAgXSwKICAgIFBBTk5JTkdfTEFXOiBbCiAgICAgIHsgbmFtZTogIkVxdWFsIFBvd2VyIiwgdmFsdWU6ICIwIiB9LAogICAgICB7IG5hbWU6ICJMaW5lYXIiLCB2YWx1ZTogIjEiIH0sCiAgICBdLAogICAgU0FXX0dFTkVSQVRJT05fVFlQRTogWwogICAgICB7IG5hbWU6ICJQb2x5IFNtb290aCIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiVHJpdmlhbCIsIHZhbHVlOiAiMSIgfSwKICAgIF0sCiAgICBTSU5FX0dFTkVSQVRJT05fVFlQRTogWwogICAgICB7IG5hbWU6ICIyRCBSb3RhdGlvbiIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiUHVyZSBNYXRoIiwgdmFsdWU6ICIxIiB9LAogICAgICB7IG5hbWU6ICJCaGFza2FyYSIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiV2F2ZXRhYmxlIiwgdmFsdWU6ICIzIiB9LAogICAgXSwKICAgIFNRVUFSRV9HRU5FUkFUSU9OX1RZUEU6IFsKICAgICAgeyBuYW1lOiAiUG9seSBTbW9vdGgiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIlRyaXZpYWwiLCB2YWx1ZTogIjEiIH0sCiAgICBdLAogICAgU1RFUkVPX0RFTEFZX01PREU6IFsKICAgICAgeyBuYW1lOiAiTm9ybWFsIiwgdmFsdWU6ICIwIiB9LAogICAgICB7IG5hbWU6ICJDcm9zcyIsIHZhbHVlOiAiMSIgfSwKICAgICAgeyBuYW1lOiAiUGluZyBQb25nIiwgdmFsdWU6ICIyIiB9LAogICAgXSwKICAgIFRSSUFOR0xFX0dFTkVSQVRJT05fVFlQRTogWwogICAgICB7IG5hbWU6ICJQb2x5IFNtb290aCIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiVHJpdmlhbCIsIHZhbHVlOiAiMSIgfSwKICAgIF0sCiAgICBUUklHR0VSX0NPTVBBUklTT05fVFlQRTogWwogICAgICB7IG5hbWU6ICJFcXVhbHMiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIk5vdCBFcXVhbHMiLCB2YWx1ZTogIjEiIH0sCiAgICAgIHsgbmFtZTogIkxlc3MgVGhhbiIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiR3JlYXRlciBUaGFuIiwgdmFsdWU6ICIzIiB9LAogICAgICB7IG5hbWU6ICJMZXNzIFRoYW4gT3IgRXF1YWxzIiwgdmFsdWU6ICI0IiB9LAogICAgICB7IG5hbWU6ICJHcmVhdGVyIFRoYW4gT3IgRXF1YWxzIiwgdmFsdWU6ICI1IiB9LAogICAgXSwKICAgIFdBVkVfU0hBUEVSX1RZUEU6IFsKICAgICAgeyBuYW1lOiAiU2luZSIsIHZhbHVlOiAiMCIgfSwKICAgICAgeyBuYW1lOiAiSW52ZXJzZSBUYW5nZW50IiwgdmFsdWU6ICIxIiB9LAogICAgICB7IG5hbWU6ICJIeXBlcmJvbGljIFRhbmdlbnQiLCB2YWx1ZTogIjIiIH0sCiAgICAgIHsgbmFtZTogIkN1YmljIFBvbHlub21pYWwiLCB2YWx1ZTogIjMiIH0sCiAgICAgIHsgbmFtZTogIkhhcmQgQ2xpcCIsIHZhbHVlOiAiNCIgfSwKICAgIF0sCiAgICBXQVZFX1RBQkxFX0VOVkVMT1BFX01PREU6IFsKICAgICAgeyBuYW1lOiAiTG9vcCIsIHZhbHVlOiAiMyIgfSwKICAgICAgeyBuYW1lOiAiSG9sZCIsIHZhbHVlOiAiMiIgfSwKICAgICAgeyBuYW1lOiAiVW5pdCIsIHZhbHVlOiAiMSIgfSwKICAgICAgeyBuYW1lOiAiWmVybyIsIHZhbHVlOiAiMCIgfSwKICAgIF0sCiAgICBXQVZFX1RBQkxFX0lOVEVSUE9MQVRJT046IFsKICAgICAgeyBuYW1lOiAiTm9uZSAoU3RlcCkiLCB2YWx1ZTogIjAiIH0sCiAgICAgIHsgbmFtZTogIkxpbmVhciIsIHZhbHVlOiAiMSIgfSwKICAgICAgeyBuYW1lOiAiQ3ViaWMiLCB2YWx1ZTogIjIiIH0sCiAgICBdLAogIH07CiAgZnVuY3Rpb24gTk1ldGFzb3VuZCgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOTWV0YXNvdW5kLnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTk1ldGFzb3VuZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOTWV0YXNvdW5kKS5wcm90b3R5cGUuZmluZEhlYWRlck5hbWUgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSBudWxsLAogICAgICAgICAgYSA9ICIiLAogICAgICAgICAgbiA9IG51bGwsCiAgICAgICAgICBsID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJDbGFzc05hbWUiKSwKICAgICAgICAgIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgImJJc0NsYXNzTmF0aXZlIiksCiAgICAgICAgICBpID0gewogICAgICAgICAgICBEeW5hbWljRmlsdGVyOiAiRHluYW1pYyBGaWx0ZXIiLAogICAgICAgICAgICAiTXVzaWNhbCBTY2FsZSBUbyBOb3RlIEFycmF5IjogIlNjYWxlIFRvIE5vdGUgQXJyYXkiLAogICAgICAgICAgICBUcmlnZ2VyT25UaHJlc2hvbGQ6ICJUcmlnZ2VyIE9uIFRocmVzaG9sZCIsCiAgICAgICAgICAgICJXYXZlIEJQTVRvU2Vjb25kcyI6ICJCUE0gVG8gU2Vjb25kcyIsCiAgICAgICAgICAgIEdyYWluRGVsYXlOb2RlOiAiR3JhaW4gRGVsYXkiLAogICAgICAgICAgICBXYXZlVGFibGVFbnZlbG9wZTogIldhdmVUYWJsZSBFbnZlbG9wZSIsCiAgICAgICAgICAgIFdhdmVUYWJsZU9zY2lsbGF0b3I6ICJXYXZlVGFibGUgT3NjaWxsYXRvciIsCiAgICAgICAgICAgICJDb252ZXJ0IEZpbHRlciBRIFRvIEJhbmR3aWR0aCI6ICJGaWx0ZXIgUSBUbyBCYW5kd2lkdGgiLAogICAgICAgICAgICBNZXRhc291bmRXYXZlVGFibGVHZXQ6ICJHZXQgV2F2ZVRhYmxlIEZyb20gQmFuayIsCiAgICAgICAgICB9OwogICAgICAgIGlmIChudWxsICE9PSBsKQogICAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgIkZhbHNlIiA9PT0gdC52YWx1ZQogICAgICAgICAgICA/ICJNZXRhU291bmRTb3VyY2UiCiAgICAgICAgICAgIDogKCh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKGwudmFsdWUsICJOYW1lc3BhY2UiKSksCiAgICAgICAgICAgICAgKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUobC52YWx1ZSwgIk5hbWUiKSksCiAgICAgICAgICAgICAgKGwgPSBzZWFyY2hQcm9wV2l0aE5hbWUobC52YWx1ZSwgIlZhcmlhbnQiKSksCiAgICAgICAgICAgICAgbnVsbCAhPT0gdCAmJgogICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAiQXJyYXkiLAogICAgICAgICAgICAgICAgICAiUHJpbnQgTG9nIiwKICAgICAgICAgICAgICAgICAgIkFEIEVudmVsb3BlIiwKICAgICAgICAgICAgICAgICAgIkFEU1IgRW52ZWxvcGUiLAogICAgICAgICAgICAgICAgICAiQ3Jvc3NmYWRlIiwKICAgICAgICAgICAgICAgICAgIk1hcFJhbmdlIiwKICAgICAgICAgICAgICAgICAgIkNsYW1wIiwKICAgICAgICAgICAgICAgICAgIk1heCIsCiAgICAgICAgICAgICAgICAgICJNaW4iLAogICAgICAgICAgICAgICAgICAiVHJpZ2dlckNvbXBhcmUiLAogICAgICAgICAgICAgICAgICAiVHJpZ2dlclJvdXRlIiwKICAgICAgICAgICAgICAgIF0uaW5kZXhPZih0LnZhbHVlKQogICAgICAgICAgICAgICAgPyAiQ3Jvc3NmYWRlIiA9PT0gdC52YWx1ZQogICAgICAgICAgICAgICAgICA/ICJDcm9zc2ZhZGUgIiArIGUudmFsdWUuc3Vic3RyaW5nKDEzKQogICAgICAgICAgICAgICAgICA6ICJUcmlnZ2VyUm91dGUiID09PSB0LnZhbHVlCiAgICAgICAgICAgICAgICAgID8gZS52YWx1ZQogICAgICAgICAgICAgICAgICA6ICgoYSA9IGUudmFsdWUpLAogICAgICAgICAgICAgICAgICAgICJDb25jYXQiID09PSBlLnZhbHVlICYmIChhID0gIkNvbmNhdGVuYXRlIiksCiAgICAgICAgICAgICAgICAgICAgIk1hcFJhbmdlIiA9PT0gdC52YWx1ZSAmJiAoYSA9ICJNYXAgUmFuZ2UiKSwKICAgICAgICAgICAgICAgICAgICAoYSA9ICJUcmlnZ2VyQ29tcGFyZSIgPT09IHQudmFsdWUgPyAiVHJpZ2dlciBDb21wYXJlIiA6IGEpICsKICAgICAgICAgICAgICAgICAgICAgICIgKCIgKwogICAgICAgICAgICAgICAgICAgICAgbC52YWx1ZSArCiAgICAgICAgICAgICAgICAgICAgICAiKSIpCiAgICAgICAgICAgICAgICA6ICJXYXZlIFBsYXllciIgPT09IGUudmFsdWUKICAgICAgICAgICAgICAgID8gIjVkb3QxIiA9PT0gbC52YWx1ZQogICAgICAgICAgICAgICAgICA/ICJXYXZlIFBsYXllciAoNS4xKSIKICAgICAgICAgICAgICAgICAgOiAiN2RvdDEiID09PSBsLnZhbHVlCiAgICAgICAgICAgICAgICAgID8gIldhdmUgUGxheWVyICg3LjEpIgogICAgICAgICAgICAgICAgICA6ICJXYXZlIFBsYXllciAoIiArIGwudmFsdWUgKyAiKSIKICAgICAgICAgICAgICAgIDogIldhdmVXcml0ZXIiID09PSAodCA9IGUudmFsdWUuc3Vic3RyaW5nKDAsIDEwKSkKICAgICAgICAgICAgICAgID8gIldhdmUgV3JpdGVyIChNb25vKSIKICAgICAgICAgICAgICAgIDogIkJhbmQgU3BsaXQiID09PSB0CiAgICAgICAgICAgICAgICA/IGUudmFsdWUuc3Vic3RyaW5nKAogICAgICAgICAgICAgICAgICAgIGUudmFsdWUuaW5kZXhPZigiKCIpICsgMSwKICAgICAgICAgICAgICAgICAgICBlLnZhbHVlLmluZGV4T2YoIiwiKQogICAgICAgICAgICAgICAgICApICsKICAgICAgICAgICAgICAgICAgIiBCYW5kIFNwbGl0dGVyICgiICsKICAgICAgICAgICAgICAgICAgZS52YWx1ZS5zdWJzdHJpbmcoZS52YWx1ZS5sZW5ndGggLSAyLCBlLnZhbHVlLmxlbmd0aCAtIDEpICsKICAgICAgICAgICAgICAgICAgIikiCiAgICAgICAgICAgICAgICA6ICJBdWRpbyBNaXhlIiA9PT0gdAogICAgICAgICAgICAgICAgPyBlLnZhbHVlLnN1YnN0cmluZygKICAgICAgICAgICAgICAgICAgICBlLnZhbHVlLmluZGV4T2YoIigiKSArIDEsCiAgICAgICAgICAgICAgICAgICAgZS52YWx1ZS5pbmRleE9mKCIsIikKICAgICAgICAgICAgICAgICAgKSArCiAgICAgICAgICAgICAgICAgICIgTWl4ZXIgKCIgKwogICAgICAgICAgICAgICAgICBlLnZhbHVlLnN1YnN0cmluZyhlLnZhbHVlLmxlbmd0aCAtIDIsIGUudmFsdWUubGVuZ3RoIC0gMSkgKwogICAgICAgICAgICAgICAgICAiKSIKICAgICAgICAgICAgICAgIDogdm9pZCAwICE9PSBpW2UudmFsdWVdCiAgICAgICAgICAgICAgICA/IGlbZS52YWx1ZV0KICAgICAgICAgICAgICAgIDogLTEgIT09CiAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAiTUlESSBUbyBGcmVxdWVuY3kiLAogICAgICAgICAgICAgICAgICAgICJUcmlnZ2VyIE9uIFZhbHVlIENoYW5nZSIsCiAgICAgICAgICAgICAgICAgICAgIlZhbHVlIiwKICAgICAgICAgICAgICAgICAgXS5pbmRleE9mKGUudmFsdWUpCiAgICAgICAgICAgICAgICA/IGUudmFsdWUgKyAiICgiICsgbC52YWx1ZSArICIpIgogICAgICAgICAgICAgICAgOiBlLnZhbHVlKTsKICAgICAgICBpZiAobnVsbCAhPT0gKG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKSkpIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgLTEgIT09CiAgICAgICAgICAgIG4udmFsdWUuaW5kZXhPZigKICAgICAgICAgICAgICAiL1NjcmlwdC9NZXRhc291bmRFZGl0b3IuTWV0YXNvdW5kRWRpdG9yR3JhcGhJbnB1dE5vZGUiCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICJJbnB1dCI7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICBuLnZhbHVlLmluZGV4T2YoCiAgICAgICAgICAgICAgIi9TY3JpcHQvTWV0YXNvdW5kRWRpdG9yLk1ldGFzb3VuZEVkaXRvckdyYXBoT3V0cHV0Tm9kZSIKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gIk91dHB1dCI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBVTm9kZS5wcm90b3R5cGUuZmluZEhlYWRlck5hbWUuY2FsbCh0aGlzKTsKICAgICAgfSksCiAgICAoTk1ldGFzb3VuZC5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICBhID0gewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsibm9kZSIsICJubWV0YXNvdW5kIiwgdGhpcy5maW5kQ3NzQ2xhc3NOb2RlSWNvbigpXSwKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBjaGlsZHM6IFt0aGlzLmdlbmVyYXRlSFRNTFRvb2xUaXAoKSwgdGhpcy5nZW5lcmF0ZUhUTUxIZWFkZXIoKV0sCiAgICAgICAgfSwKICAgICAgICBuID0gbnVsbCwKICAgICAgICBsID0gMCwKICAgICAgICB0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJDbGFzc05hbWUiKSwKICAgICAgICBpID0gITE7CiAgICAgIGlmICgKICAgICAgICAobnVsbCA9PT0gdCB8fAogICAgICAgICAgbnVsbCA9PT0gKHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodC52YWx1ZSwgIk5hbWVzcGFjZSIpKSB8fAogICAgICAgICAgKCJWYXJpYWJsZU11dGF0b3IiICE9PSB0LnZhbHVlICYmCiAgICAgICAgICAgICJWYXJpYWJsZUFjY2Vzc29yIiAhPT0gdC52YWx1ZSAmJgogICAgICAgICAgICAiVmFyaWFibGVEZWZlcnJlZEFjY2Vzc29yIiAhPT0gdC52YWx1ZSkgfHwKICAgICAgICAgICgoaSA9ICEwKSwgYS5jbGFzc2VzLnB1c2goInZhcmlhYmxlIikpLAogICAgICAgIHRoaXMuZGV0ZWN0SW5wdXRTZWxlY3RUb0NyZWF0ZSgpLAogICAgICAgIChuID0gdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCkpLAogICAgICAgIEFycmF5LmlzQXJyYXkobikpCiAgICAgICkKICAgICAgICBmb3IgKAogICAgICAgICAgaSAmJgogICAgICAgICAgICBuWzBdLmNoaWxkcy51bnNoaWZ0KHsKICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY2xhc3MiLCB2YWx1ZTogInJvdW5kLWJnIiB9XSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUgPSBuLmxlbmd0aDsKICAgICAgICAgIGwgPCBlOwogICAgICAgICAgKytsCiAgICAgICAgKQogICAgICAgICAgYS5jaGlsZHMucHVzaChuW2xdKTsKICAgICAgZWxzZQogICAgICAgIG4uY2hpbGRzLnVuc2hpZnQoewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY2xhc3MiLCB2YWx1ZTogInJvdW5kLWJnIiB9XSwKICAgICAgICB9KSwKICAgICAgICAgIGEuY2hpbGRzLnB1c2gobik7CiAgICAgIHJldHVybiAoCiAgICAgICAgIiIgIT09ICh0ID0gdGhpcy5nZXRJY29uQ2VudGVyQ2xhc3MoKSkgJiYKICAgICAgICAgIChhLmNsYXNzZXMucHVzaCgiaWNvbi1jZW50ZXIiKSwgYS5jbGFzc2VzLnB1c2godCkpLAogICAgICAgIGEKICAgICAgKTsKICAgIH0pLAogICAgKE5NZXRhc291bmQucHJvdG90eXBlLmdldEljb25DZW50ZXJDbGFzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkNsYXNzTmFtZSIpLAogICAgICAgIGEgPSAiIiwKICAgICAgICBuID0gIiI7CiAgICAgIGlmIChudWxsICE9PSBlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgbnVsbCAhPT0gKGEgPSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgIk5hbWVzcGFjZSIpKSAmJgogICAgICAgICAgImNvbnZlcnQiID09PSBhLnZhbHVlLnRvTG93ZXJDYXNlKCkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gImNvbnYiOwogICAgICAgIGlmIChudWxsICE9PSAobiA9IHNlYXJjaFByb3BXaXRoTmFtZShlLnZhbHVlLCAiTmFtZSIpKSkgewogICAgICAgICAgaWYgKCJjb252ZXJzaW9uIiA9PT0gbi52YWx1ZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygwLCAxMCkpCiAgICAgICAgICAgIHJldHVybiAiY29udiI7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICBbCiAgICAgICAgICAgICAgImFkZCIsCiAgICAgICAgICAgICAgImRpdmlkZSIsCiAgICAgICAgICAgICAgImxvZ2FyaXRobSIsCiAgICAgICAgICAgICAgIm1vZHVsbyIsCiAgICAgICAgICAgICAgIm11bHRpcGx5IiwKICAgICAgICAgICAgICAicG93ZXIiLAogICAgICAgICAgICAgICJzdWJ0cmFjdCIsCiAgICAgICAgICAgIF0uaW5kZXhPZihuLnZhbHVlLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAibWF0aC0iICsgbi52YWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9KSwKICAgIChOTWV0YXNvdW5kLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLAogICAgICAgIGEgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkNsYXNzTmFtZSIpLAogICAgICAgIG4gPSAiIiwKICAgICAgICBsID0gbnVsbCwKICAgICAgICB0ID0gdGhpcy5nZW5lcmF0ZUhUTUxQaW5EZWxlZ2F0ZSgpLAogICAgICAgIGkgPSAwLAogICAgICAgIHMgPSB0Lmxlbmd0aDsKICAgICAgaWYgKG51bGwgIT09IGEpIHsKICAgICAgICBpZiAobnVsbCAhPT0gKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUoYS52YWx1ZSwgIk5hbWVzcGFjZSIpKSkgewogICAgICAgICAgaWYgKCJDb252ZXJ0IiA9PT0gZS52YWx1ZSkgcmV0dXJuIHRoaXMuZGlzYWJsZVRleHRPblBpbnMoKSwgbDsKICAgICAgICAgIGlmICgiVmFyaWFibGVNdXRhdG9yIiA9PT0gZS52YWx1ZSB8fCAiVmFyaWFibGVBY2Nlc3NvciIgPT09IGUudmFsdWUpCiAgICAgICAgICAgIHJldHVybiBsOwogICAgICAgICAgaWYgKCJWYXJpYWJsZURlZmVycmVkQWNjZXNzb3IiID09PSBlLnZhbHVlKQogICAgICAgICAgICByZXR1cm4geyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbImhlYWRlciIsICJpY29uLWFzeW5jIl0gfTsKICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgIT09IChuID0gc2VhcmNoUHJvcFdpdGhOYW1lKGEudmFsdWUsICJOYW1lIikpKSB7CiAgICAgICAgICBpZiAoIkNvbnZlcnNpb24iID09PSBuLnZhbHVlLnN1YnN0cmluZygwLCAxMCkpCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVUZXh0T25QaW5zKCksIGw7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICBbCiAgICAgICAgICAgICAgImFkZCIsCiAgICAgICAgICAgICAgImRpdmlkZSIsCiAgICAgICAgICAgICAgImxvZ2FyaXRobSIsCiAgICAgICAgICAgICAgIm1vZHVsbyIsCiAgICAgICAgICAgICAgIm11bHRpcGx5IiwKICAgICAgICAgICAgICAicG93ZXIiLAogICAgICAgICAgICAgICJzdWJ0cmFjdCIsCiAgICAgICAgICAgIF0uaW5kZXhPZihuLnZhbHVlLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVUZXh0T25QaW5zKCksIGw7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZvciAoCiAgICAgICAgbCA9IHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbCiAgICAgICAgICAgICJoZWFkZXIiLAogICAgICAgICAgICAibm9kZS1jb2xvciIsCiAgICAgICAgICAgIHRoaXMuZmluZENzc0NsYXNzTm9kZUNvbG9yKCksCiAgICAgICAgICAgICJncmFkaWVudCIsCiAgICAgICAgICBdLAogICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImhhcy1pY29uIiwgIm5hbWUiXSwKICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJpY29uIiwgdGhpcy5maW5kQ3NzQ2xhc3NOb2RlSWNvbigpXSwKICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5maW5kSGVhZGVyTmFtZSgpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9OwogICAgICAgIGkgPCBzOwogICAgICAgICsraQogICAgICApCiAgICAgICAgbC5jaGlsZHMucHVzaCh0W2ldKTsKICAgICAgcmV0dXJuIGw7CiAgICB9KSwKICAgIChOTWV0YXNvdW5kLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMuZmluZENzc0NsYXNzTm9kZUljb24oKSwKICAgICAgICBhID0gWwogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsibGVmdC1jb2wiXSwKICAgICAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zSW5wdXQoKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbInJpZ2h0LWNvbCJdLAogICAgICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNPdXRwdXQoKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICByZXR1cm4gKAogICAgICAgICJpbnB1dCIgPT09IGUgJiYgKGFbMF0uY2hpbGRzID0gW2FbMF0uY2hpbGRzWzFdXSksCiAgICAgICAgIm91dHB1dCIgPT09IGUgJiYgKGFbMF0uY2hpbGRzID0gW2FbMF0uY2hpbGRzWzBdXSksCiAgICAgICAgdGhpcy5oYXNBZHZhbmNlZFBpbkRpc3BsYXkoKSAmJgogICAgICAgICAgKHRoaXMuaXNBZHZhbmNlZFBpbkRpc3BsYXlFeHBhbmRlZCgpCiAgICAgICAgICAgID8gYS5wdXNoKHsKICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImxlc3MiXSwKICAgICAgICAgICAgICAgIGNoaWxkczogW3sgdGFnOiAic3BhbiIgfV0sCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgOiBhLnB1c2goewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsibW9yZSJdLAogICAgICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJzcGFuIiB9XSwKICAgICAgICAgICAgICB9KSksCiAgICAgICAgYQogICAgICApOwogICAgfSksCiAgICAoTk1ldGFzb3VuZC5wcm90b3R5cGUuZmluZENzc0NsYXNzTm9kZUljb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMub2JqZWN0RGVmaW5pdGlvbiwgIkNsYXNzIiksCiAgICAgICAgYSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiYklzQ2xhc3NOYXRpdmUiKTsKICAgICAgaWYgKG51bGwgIT09IGEgJiYgIkZhbHNlIiA9PT0gYS52YWx1ZSkgcmV0dXJuICJncmFwaCI7CiAgICAgIGlmIChudWxsICE9PSBlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgLTEgIT09CiAgICAgICAgICBlLnZhbHVlLmluZGV4T2YoCiAgICAgICAgICAgICIvU2NyaXB0L01ldGFzb3VuZEVkaXRvci5NZXRhc291bmRFZGl0b3JHcmFwaElucHV0Tm9kZSIKICAgICAgICAgICkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gImlucHV0IjsKICAgICAgICBpZiAoCiAgICAgICAgICAtMSAhPT0KICAgICAgICAgIGUudmFsdWUuaW5kZXhPZigKICAgICAgICAgICAgIi9TY3JpcHQvTWV0YXNvdW5kRWRpdG9yLk1ldGFzb3VuZEVkaXRvckdyYXBoT3V0cHV0Tm9kZSIKICAgICAgICAgICkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gIm91dHB1dCI7CiAgICAgIH0KICAgICAgcmV0dXJuICJuYXRpdmUiOwogICAgfSksCiAgICAoTk1ldGFzb3VuZC5wcm90b3R5cGUuZGlzYWJsZVRleHRPblBpbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGUgPSAwLCBhID0gdGhpcy5waW5zLmxlbmd0aDsgZSA8IGE7ICsrZSkKICAgICAgICB0aGlzLnBpbnNbZV0uZGlzYWJsZVRleHQoKTsKICAgIH0pLAogICAgKE5NZXRhc291bmQucHJvdG90eXBlLmRldGVjdElucHV0U2VsZWN0VG9DcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gewogICAgICAgICAgIlN0ZXJlbyBEZWxheSI6IFsiU1RFUkVPX0RFTEFZX01PREUiLCAiRGVsYXkgTW9kZSJdLAogICAgICAgICAgQ29tcHJlc3NvcjogWyJFTlZFTE9QRV9QRUFLX01PREUiLCAiRW52ZWxvcGUgTW9kZSJdLAogICAgICAgICAgTGltaXRlcjogWyJLTkVFX01PREUiLCAiS25lZSJdLAogICAgICAgICAgIkJpcXVhZCBGaWx0ZXIiOiBbIkJJUVVBRF9GSUxURVJfVFlQRSIsICJUeXBlIl0sCiAgICAgICAgICBMRk86IFsiTEZPX1dBVkVTSEFQRV9UWVBFIiwgIlNoYXBlIl0sCiAgICAgICAgICBTcXVhcmU6IFsiU1FVQVJFX0dFTkVSQVRJT05fVFlQRSIsICJUeXBlIl0sCiAgICAgICAgICBOb2lzZTogWyJOT0lTRV9UWVBFIiwgIlR5cGUiXSwKICAgICAgICAgIFNpbmU6IFsiU0lORV9HRU5FUkFUSU9OX1RZUEUiLCAiVHlwZSJdLAogICAgICAgICAgU2F3OiBbIlNBV19HRU5FUkFUSU9OX1RZUEUiLCAiVHlwZSJdLAogICAgICAgICAgVHJpYW5nbGU6IFsiVFJJQU5HTEVfR0VORVJBVElPTl9UWVBFIiwgIlR5cGUiXSwKICAgICAgICAgICJNdXNpY2FsIFNjYWxlIFRvIE5vdGUgQXJyYXkiOiBbIk1VU0lDQUxfU0NBTEUiLCAiU2NhbGUgRGVncmVlcyJdLAogICAgICAgICAgIlN0ZXJlbyBQYW5uZXIiOiBbIlBBTk5JTkdfTEFXIiwgIlBhbm5pbmcgTGF3Il0sCiAgICAgICAgICBUcmlnZ2VyT25UaHJlc2hvbGQ6IFsiQlVGRkVSX1RSSUdHRVJfVFlQRSIsICJUeXBlIl0sCiAgICAgICAgICAiRW52ZWxvcGUgRm9sbG93ZXIiOiBbIkVOVkVMT1BFX1BFQUtfTU9ERSIsICJQZWFrIE1vZGUiXSwKICAgICAgICAgIFdhdmVTaGFwZXI6IFsiV0FWRV9TSEFQRVJfVFlQRSIsICJUeXBlIl0sCiAgICAgICAgICBHcmFpbkRlbGF5Tm9kZTogWyJHUkFJTl9ERUxBWV9FTlZFTE9QRSIsICJHcmFpbiBFbnZlbG9wZSJdLAogICAgICAgIH0sCiAgICAgICAgYSA9ICIiLAogICAgICAgIG4gPSAiIiwKICAgICAgICBsID0gIiIsCiAgICAgICAgdCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiQ2xhc3NOYW1lIiksCiAgICAgICAgaSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiYklzQ2xhc3NOYXRpdmUiKTsKICAgICAgaWYgKG51bGwgIT09IHQpIHsKICAgICAgICBpZiAobnVsbCAhPT0gaSAmJiAiRmFsc2UiID09PSBpLnZhbHVlKSByZXR1cm4gIk1ldGFTb3VuZFNvdXJjZSI7CiAgICAgICAgaWYgKAogICAgICAgICAgKChpID0gc2VhcmNoUHJvcFdpdGhOYW1lKHQudmFsdWUsICJOYW1lc3BhY2UiKSksCiAgICAgICAgICAoYSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0LnZhbHVlLCAiTmFtZSIpKSwKICAgICAgICAgIChuID0gc2VhcmNoUHJvcFdpdGhOYW1lKHQudmFsdWUsICJWYXJpYW50IikpLAogICAgICAgICAgdm9pZCAwICE9PSBlW2EudmFsdWVdKQogICAgICAgICkKICAgICAgICAgIHRoaXMuc2V0SW5wdXRTZWxlY3RWYWx1ZXNUb1BpbihlW2EudmFsdWVdWzBdLCBlW2EudmFsdWVdWzFdKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIkNvbnZlcnQiID09PSBpLnZhbHVlICYmCiAgICAgICAgICAgIG51bGwgIT09IG4gJiYKICAgICAgICAgICAgIkVudW06IiA9PT0gbi52YWx1ZS5zdWJzdHJpbmcoMCwgNSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAobCA9IG4udmFsdWUKICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoNSkKICAgICAgICAgICAgICAgIC5yZXBsYWNlKCIgIiwgIiIpCiAgICAgICAgICAgICAgICAuc3BsaXQoLyg/PVtBLVpdKS8pCiAgICAgICAgICAgICAgICAuam9pbigiXyIpCiAgICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKSksCiAgICAgICAgICAgICAgdm9pZCB0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4obCwgbi52YWx1ZSkKICAgICAgICAgICAgKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIlZhcmlhYmxlTXV0YXRvciIgPT09IGkudmFsdWUgJiYKICAgICAgICAgICAgIkVudW06IiA9PT0gYS52YWx1ZS5zdWJzdHJpbmcoMCwgNSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAobCA9IGEudmFsdWUKICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoNSkKICAgICAgICAgICAgICAgIC5yZXBsYWNlKCIgIiwgIiIpCiAgICAgICAgICAgICAgICAuc3BsaXQoLyg/PVtBLVpdKS8pCiAgICAgICAgICAgICAgICAuam9pbigiXyIpCiAgICAgICAgICAgICAgICAudG9VcHBlckNhc2UoKSksCiAgICAgICAgICAgICAgdm9pZCB0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4obCwgIlZhbHVlIikKICAgICAgICAgICAgKTsKICAgICAgICAgIGlmICgiVHJpZ2dlckNvbXBhcmUiID09PSBpLnZhbHVlKQogICAgICAgICAgICB0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4oIlRSSUdHRVJfQ09NUEFSSVNPTl9UWVBFIiwgIlR5cGUiKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoIkJhbmQgU3BsaXR0ZXIiICE9PSBhLnZhbHVlLnN1YnN0cmluZygwLCAxMykpCiAgICAgICAgICAgICAgcmV0dXJuICJEeW5hbWljRmlsdGVyIiA9PT0gYS52YWx1ZQogICAgICAgICAgICAgICAgPyAodGhpcy5zZXRJbnB1dFNlbGVjdFZhbHVlc1RvUGluKAogICAgICAgICAgICAgICAgICAgICJEWU5BTUlDX0ZJTFRFUl9UWVBFIiwKICAgICAgICAgICAgICAgICAgICAiRmlsdGVyVHlwZSIKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4oCiAgICAgICAgICAgICAgICAgICAgIkVOVkVMT1BFX1BFQUtfTU9ERSIsCiAgICAgICAgICAgICAgICAgICAgIkVudmVsb3BlTW9kZSIKICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIDogdm9pZCAoCiAgICAgICAgICAgICAgICAgICAgIldhdmVUYWJsZUVudmVsb3BlIiA9PT0gYS52YWx1ZSAmJgogICAgICAgICAgICAgICAgICAgICh0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4oCiAgICAgICAgICAgICAgICAgICAgICAiV0FWRV9UQUJMRV9FTlZFTE9QRV9NT0RFIiwKICAgICAgICAgICAgICAgICAgICAgICJNb2RlIgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFNlbGVjdFZhbHVlc1RvUGluKAogICAgICAgICAgICAgICAgICAgICAgIldBVkVfVEFCTEVfSU5URVJQT0xBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAiSW50ZXJwb2xhdGlvbiIKICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4oIkZJTFRFUl9PUkRFUiIsICJGaWx0ZXIgT3JkZXIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pLAogICAgKE5NZXRhc291bmQucHJvdG90eXBlLnNldElucHV0U2VsZWN0VmFsdWVzVG9QaW4gPSBmdW5jdGlvbiAoZSwgYSwgbikgewogICAgICBmb3IgKHZhciBsLCB0ID0gMCwgaSA9IHRoaXMucGlucy5sZW5ndGgsIHMgPSBuIHx8IDA7IHQgPCBpOyArK3QpCiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5waW5zW3RdLmlzSW5wdXQoKSAmJgogICAgICAgICAgbnVsbCAhPT0gKGwgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5waW5zW3RdLnByb3BzLCAiUGluTmFtZSIpKSAmJgogICAgICAgICAgbC52YWx1ZSA9PT0gYQogICAgICAgICkKICAgICAgICAgIHJldHVybiB2b2lkIHRoaXMucGluc1t0XS5zZXRJbnB1dFNlbGVjdFZhbHVlcyhFTlVNX01FVEFTT1VORFtlXSwgcyk7CiAgICB9KTsKICB2YXIgRU5VTV9OSUFHQVJBID0gewogICAgRUNvbGxpc2lvbkNoYW5uZWw6IFsKICAgICAgeyBuYW1lOiAiV29ybGQgU3RhdGljIiwgdmFsdWU6ICJFQ0NfV29ybGRTdGF0aWMiIH0sCiAgICAgIHsgbmFtZTogIldvcmxkIER5bmFtaWMiLCB2YWx1ZTogIkVDQ19Xb3JsZER5bmFtaWMiIH0sCiAgICAgIHsgbmFtZTogIlBhd24iLCB2YWx1ZTogIkVDQ19QYXduIiB9LAogICAgICB7IG5hbWU6ICJWaXNpYmlsaXR5IiwgdmFsdWU6ICJFQ0NfVmlzaWJpbGl0eSIgfSwKICAgICAgeyBuYW1lOiAiQ2FtZXJhIiwgdmFsdWU6ICJFQ0NfQ2FtZXJhIiB9LAogICAgICB7IG5hbWU6ICJQaHlzaWNzQm9keSIsIHZhbHVlOiAiRUNDX1BoeXNpY3NCb2R5IiB9LAogICAgICB7IG5hbWU6ICJWZWhpY3VsZSIsIHZhbHVlOiAiRUNDX1ZlaGljbGUiIH0sCiAgICAgIHsgbmFtZTogIkRlc3RydWN0aWJsZSIsIHZhbHVlOiAiRUNDX0Rlc3RydWN0aWJsZSIgfSwKICAgIF0sCiAgICBFRmllbGRJbnRlZ2VyVHlwZTogWwogICAgICB7IG5hbWU6ICJEeW5hbWljIFN0YXRlIiwgdmFsdWU6ICJJbnRlZ2VyX0R5bmFtaWNTdGF0ZSIgfSwKICAgICAgeyBuYW1lOiAiQWN0aXZhdGUgRGlzYWJsZWQiLCB2YWx1ZTogIkludGVnZXJfQWN0aXZhdGVEaXNhYmxlZCIgfSwKICAgICAgeyBuYW1lOiAiQ29sbGlzaW9uIEdyb3VwIiwgdmFsdWU6ICJJbnRlZ2VyX0NvbGxpc2lvbkdyb3VwIiB9LAogICAgXSwKICAgIEVGaWVsZFNjYWxhclR5cGU6IFsKICAgICAgeyBuYW1lOiAiRXh0ZXJuYWwgU3RyYWluIiwgdmFsdWU6ICJTY2FsYXJfRXh0ZXJuYWxDbHVzdGVyU3RyYWluIiB9LAogICAgICB7IG5hbWU6ICJLaWxsIFBhcnRpY2xlIiwgdmFsdWU6ICJTY2FsYXJfS2lsbCIgfSwKICAgICAgeyBuYW1lOiAiRGlzYWJsZSBUaHJlc2hvbGQiLCB2YWx1ZTogIlNjYWxhcl9EaXNhYmxlVGhyZXNob2xkIiB9LAogICAgICB7IG5hbWU6ICJTbGVlcGluZyBUaHJlc2hvbGQiLCB2YWx1ZTogIlNjYWxhcl9TbGVlcGluZ1RocmVzaG9sZCIgfSwKICAgICAgeyBuYW1lOiAiSW50ZXJuYWwgU3RyYWluIiwgdmFsdWU6ICJTY2FsYXJfSW50ZXJuYWxDbHVzdGVyU3RyYWluIiB9LAogICAgXSwKICAgIEVGaWVsZFZlY3RvclR5cGU6IFsKICAgICAgeyBuYW1lOiAiTGluZWFyIEZvcmNlIiwgdmFsdWU6ICJWZWN0b3JfTGluZWFyRm9yY2UiIH0sCiAgICAgIHsgbmFtZTogIkxpbmVhciBWZWxvY2l0eSIsIHZhbHVlOiAiVmVjdG9yX0xpbmVhclZlbG9jaXR5IiB9LAogICAgICB7IG5hbWU6ICJBbmd1bGFyIFZlbG9jaXR5IiwgdmFsdWU6ICJWZWN0b3JfQW5ndWxhclZlbG9jaXR5IiB9LAogICAgICB7IG5hbWU6ICJBbmd1bGFyIFRvcnF1ZSIsIHZhbHVlOiAiVmVjdG9yX0FuZ3VsYXJUb3JxdWUiIH0sCiAgICBdLAogICAgRU5pYWdhcmFfQW5nbGVJbnB1dDogWwogICAgICB7IG5hbWU6ICJEZWdyZWVzIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMCIgfSwKICAgICAgeyBuYW1lOiAiTm9ybWFsaXplZCBBbmdsZSAoMC0xKSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEiIH0sCiAgICAgIHsgbmFtZTogIlJhZGlhbnMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IyIiB9LAogICAgXSwKICAgIEVOaWFnYXJhX0NQVUNvbGxpc2lvblR5cGU6IFsKICAgICAgeyBuYW1lOiAiUmF5IFRyYWNlZCIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEiIH0sCiAgICAgIHsgbmFtZTogIkFuYWx5dGljYWwgUGxhbmVzIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMyIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYV9GbG9hdDRDaGFubmVsOiBbCiAgICAgIHsgbmFtZTogIlIiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IwIiB9LAogICAgICB7IG5hbWU6ICJHIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgICAgeyBuYW1lOiAiQiIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjIiIH0sCiAgICAgIHsgbmFtZTogIkEiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IzIiB9LAogICAgXSwKICAgIEVOaWFnYXJhX0dQVUNvbGxpc2lvblR5cGU6IFsKICAgICAgeyBuYW1lOiAiR1BVIERlcHRoIEJ1ZmZlciIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEiIH0sCiAgICAgIHsgbmFtZTogIkdQVSBEaXN0YW5jZSBGaWVsZHMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IyIiB9LAogICAgICB7IG5hbWU6ICJHUFUgUmF5IFRyYWNlcyAoRXhwZXJpbWVudGFsKSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjQiIH0sCiAgICAgIHsgbmFtZTogIkFuYWx5dGljcyBQbGFuZXMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IzIiB9LAogICAgXSwKICAgIEVOaWFnYXJhX1dhdmVmb3JtczogWwogICAgICB7IG5hbWU6ICJTaW5lIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMCIgfSwKICAgICAgeyBuYW1lOiAiQ29zaW5lIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgICAgeyBuYW1lOiAiQ29tcG91bmQgU2luL0NvcyIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjIiIH0sCiAgICAgIHsgbmFtZTogIlBlbmR1bHVtIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMyIgfSwKICAgICAgeyBuYW1lOiAiU3F1YXJlIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yNCIgfSwKICAgICAgeyBuYW1lOiAiUHVsc2UiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3I1IiB9LAogICAgICB7IG5hbWU6ICJUcmlhbmdsZSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjYiIH0sCiAgICAgIHsgbmFtZTogIlNhd3Rvb3RoIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yNyIgfSwKICAgICAgeyBuYW1lOiAiUmFuZG9tIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yOCIgfSwKICAgICAgeyBuYW1lOiAiUmFuZG9tIEJsZW5kIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yOSIgfSwKICAgICAgeyBuYW1lOiAiUmFuZG9tIFNwbGluZSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEwIiB9LAogICAgICB7IG5hbWU6ICJSYW5kb20gU3BsaW5lIFNtb290aCIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEyIiB9LAogICAgICB7IG5hbWU6ICJSYW5kb20gU3BsaW5lIFNlZ21lbnRlZCIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjEzIiB9LAogICAgXSwKICAgIEVOaWFnYXJhQ2FsY3VsYXRlUmFkaXVzT3B0aW9uczogWwogICAgICB7IG5hbWU6ICJCb3VuZHMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IwIiB9LAogICAgICB7IG5hbWU6ICJNaW5pbXVtIEF4aXMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IxIiB9LAogICAgICB7IG5hbWU6ICJNYXhpbXVtIEF4aXMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IyIiB9LAogICAgXSwKICAgIEVOaWFnYXJhQ29tcGlsZVVzYWdlU3RhdGljU3dpdGNoOiBbCiAgICAgIHsgbmFtZTogIlNwYXduIiwgdmFsdWU6ICJTcGF3biIgfSwKICAgICAgeyBuYW1lOiAiVXBkYXRlIiwgdmFsdWU6ICJVcGRhdGUiIH0sCiAgICAgIHsgbmFtZTogIkV2ZW50IiwgdmFsdWU6ICJFdmVudCIgfSwKICAgICAgeyBuYW1lOiAiU2ltdWxhdGlvbiBTdGFnZSIsIHZhbHVlOiAiU2ltdWxhdGlvblN0YWdlIiB9LAogICAgICB7IG5hbWU6ICJEZWZhdWx0IiwgdmFsdWU6ICJEZWZhdWx0IiB9LAogICAgXSwKICAgIEVOaWFnYXJhQ29vcmRpbmF0ZVNwYWNlOiBbCiAgICAgIHsgbmFtZTogIlNpbXVsYXRpb24iLCB2YWx1ZTogIlNpbXVsYXRpb24iIH0sCiAgICAgIHsgbmFtZTogIldvcmxkIiwgdmFsdWU6ICJXb3JsZCIgfSwKICAgICAgeyBuYW1lOiAiTG9jYWwiLCB2YWx1ZTogIkxvY2FsIiB9LAogICAgXSwKICAgIEVOaWFnYXJhRXhlY3V0aW9uU3RhdGU6IFsKICAgICAgeyBuYW1lOiAiQWN0aXZlIiwgdmFsdWU6ICJBY3RpdmUiIH0sCiAgICAgIHsgbmFtZTogIkluYWN0aXZlIiwgdmFsdWU6ICJJbmFjdGl2ZSIgfSwKICAgICAgeyBuYW1lOiAiSW5hY3RpdmUgQ2xlYXIiLCB2YWx1ZTogIkluYWN0aXZlQ2xlYXIiIH0sCiAgICAgIHsgbmFtZTogIkNvbXBsZXRlIiwgdmFsdWU6ICJDb21wbGV0ZSIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYUV4ZWN1dGlvblN0YXRlU291cmNlOiBbCiAgICAgIHsgbmFtZTogIlNjYWxhYmlsaXR5IiwgdmFsdWU6ICJTY2FsYWJpbGl0eSIgfSwKICAgICAgeyBuYW1lOiAiSW50ZXJuYWwiLCB2YWx1ZTogIkludGVybmFsIiB9LAogICAgICB7IG5hbWU6ICJPd25lciIsIHZhbHVlOiAiT3duZXIiIH0sCiAgICAgIHsgbmFtZTogIkludGVybmFsIENvbXBsZXRpb24iLCB2YWx1ZTogIkludGVybmFsQ29tcGxldGlvbiIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYUZyaWN0aW9uTWVyZ2VUeXBlOiBbCiAgICAgIHsgbmFtZTogIklnbm9yZSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjAiIH0sCiAgICAgIHsgbmFtZTogIkF2ZXJhZ2UiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IxIiB9LAogICAgICB7IG5hbWU6ICJNaW4iLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IyIiB9LAogICAgICB7IG5hbWU6ICJNYXgiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IzIiB9LAogICAgXSwKICAgIEVOaWFnYXJhRnVuY3Rpb25EZWJ1Z1N0YXRlOiBbCiAgICAgIHsgbmFtZTogIk5vIERlYnVnIiwgdmFsdWU6ICJOb0RlYnVnIiB9LAogICAgICB7IG5hbWU6ICJCYXNpYyIsIHZhbHVlOiAiQmFzaWMiIH0sCiAgICBdLAogICAgRU5pYWdhcmFMZWdhY3lUcmFpbFdpZHRoTW9kZTogWwogICAgICB7IG5hbWU6ICJGcm9tIENlbnRyZSIsIHZhbHVlOiAiRnJvbUNlbnRyZSIgfSwKICAgICAgeyBuYW1lOiAiRnJvbSBGaXJzdCIsIHZhbHVlOiAiRnJvbUZpcnN0IiB9LAogICAgICB7IG5hbWU6ICJGcm9tIFNlY29uZCIsIHZhbHVlOiAiRnJvbVNlY29uZCIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYU9yaWVudGF0aW9uQXhpczogWwogICAgICB7IG5hbWU6ICJYIEF4aXMiLCB2YWx1ZTogIlhBeGlzIiB9LAogICAgICB7IG5hbWU6ICJZIEF4aXMiLCB2YWx1ZTogIllBeGlzIiB9LAogICAgICB7IG5hbWU6ICJaIEF4aXMiLCB2YWx1ZTogIlpBeGlzIiB9LAogICAgXSwKICAgIEVOaWFnYXJhUmFuZG9tbmVzc0V2YWx1YXRpb246IFsKICAgICAgeyBuYW1lOiAiU3Bhd24gT25seSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjAiIH0sCiAgICAgIHsgbmFtZTogIkV2ZXJ5IEZyYW1lIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYVJhbmRvbW5lc3NNb2RlOiBbCiAgICAgIHsgbmFtZTogIlNpbXVsYXRpb24gRGVmYXVsdHMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IwIiB9LAogICAgICB7IG5hbWU6ICJEZXRlcm1pbmlzdGljIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgICAgeyBuYW1lOiAiTm9uLURldGVybWluaXN0aWMiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IyIiB9LAogICAgXSwKICAgIEVOaWFnYXJhU2NyaXB0Q29udGV4dFN0YXRpY1N3aXRjaDogWwogICAgICB7IG5hbWU6ICJTeXN0ZW0iLCB2YWx1ZTogIlN5c3RlbSIgfSwKICAgICAgeyBuYW1lOiAiRW1pdHRlciIsIHZhbHVlOiAiRW1pdHRlciIgfSwKICAgICAgeyBuYW1lOiAiUGFydGljbGUiLCB2YWx1ZTogIlBhcnRpY2xlIiB9LAogICAgXSwKICAgIEVOaWFnYXJhU2ltVGFyZ2V0OiBbCiAgICAgIHsgbmFtZTogIkNQVVNpbSIsIHZhbHVlOiAiQ1BVU2ltIiB9LAogICAgICB7IG5hbWU6ICJHUFVDb21wdXRlU2ltIiwgdmFsdWU6ICJHUFVDb21wdXRlU2ltIiB9LAogICAgXSwKICAgIEVOaWFnYXJhUmVzdGl0dXRpb25NZXJnZVR5cGU6IFsKICAgICAgeyBuYW1lOiAiSWdub3JlIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMyIgfSwKICAgICAgeyBuYW1lOiAiTWluIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMCIgfSwKICAgICAgeyBuYW1lOiAiTWF4IiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgICAgeyBuYW1lOiAiQXZlcmFnZSIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjIiIH0sCiAgICBdLAogICAgRU5pYWdhcmFWZWN0b3IyX0NoYW5uZWxzOiBbCiAgICAgIHsgbmFtZTogIlgiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IwIiB9LAogICAgICB7IG5hbWU6ICJZIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMSIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYVZlY3RvcjNfQ2hhbm5lbHM6IFsKICAgICAgeyBuYW1lOiAiWCIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjAiIH0sCiAgICAgIHsgbmFtZTogIlkiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IxIiB9LAogICAgICB7IG5hbWU6ICJaIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMiIgfSwKICAgIF0sCiAgICBFTmlhZ2FyYVZlY3RvcjRfQ2hhbm5lbHM6IFsKICAgICAgeyBuYW1lOiAiWCIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjAiIH0sCiAgICAgIHsgbmFtZTogIlkiLCB2YWx1ZTogIk5ld0VudW1lcmF0b3IxIiB9LAogICAgICB7IG5hbWU6ICJaIiwgdmFsdWU6ICJOZXdFbnVtZXJhdG9yMiIgfSwKICAgICAgeyBuYW1lOiAiVyIsIHZhbHVlOiAiTmV3RW51bWVyYXRvcjMiIH0sCiAgICBdLAogIH07CiAgZnVuY3Rpb24gY29udmVydEhsc2woZSkgewogICAgZm9yICgKICAgICAgdmFyIGEsCiAgICAgICAgbiA9IFtdLAogICAgICAgIHQgPSAwLAogICAgICAgIHIgPSAoYSA9IGUKICAgICAgICAgIC5yZXBsYWNlQWxsKCJcXHQiLCAiICAgICIpCiAgICAgICAgICAucmVwbGFjZUFsbCgnXFwiJywgJyInKQogICAgICAgICAgLnNwbGl0KCJcXHJcXG4iKSkubGVuZ3RoOwogICAgICB0IDwgcjsKICAgICAgKyt0CiAgICApCiAgICAgIG4ucHVzaCh7IHRleHQ6IGFbdF0gfSksIHQgKyAxIDwgYS5sZW5ndGggJiYgbi5wdXNoKHsgdGFnOiAiYnIiIH0pOwogICAgcmV0dXJuIG47CiAgfQogIGZ1bmN0aW9uIE5OaWFnYXJhKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKSwgKHRoaXMuaW5wdXRPYmplY3QgPSAiIiksICh0aGlzLmRhdGFzZXRPYmplY3QgPSAiIik7CiAgfQogIChOTmlhZ2FyYS5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5OaWFnYXJhLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5OaWFnYXJhKS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlLAogICAgICAgICAgYSA9IG51bGw7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuZGV0ZWN0SW5wdXRTZWxlY3RUb0NyZWF0ZSgpLAogICAgICAgICAgKGEgPSBVTm9kZS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MLmNhbGwodGhpcykpLAogICAgICAgICAgbnVsbCAhPT0gKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkN1c3RvbUhsc2wiKSkgJiYKICAgICAgICAgICAgYS5jaGlsZHMucHVzaCh7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImJvdHRvbSJdLAogICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiaGxzbCJdLAogICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgIGNoaWxkczogY29udmVydEhsc2woZS52YWx1ZSksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgYQogICAgICAgICk7CiAgICAgIH0pLAogICAgKE5OaWFnYXJhLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSAiL1NjcmlwdC9OaWFnYXJhRWRpdG9yLiIsCiAgICAgICAgYSA9IG51bGwsCiAgICAgICAgbiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiRnVuY3Rpb25EaXNwbGF5TmFtZSIpOwogICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRyYW5zZm9ybUludGVybmFsTmFtZShuLnZhbHVlKTsKICAgICAgaWYgKG51bGwgIT09IChuID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJPcE5hbWUiKSkpCiAgICAgICAgcmV0dXJuICJNdWwiID09PSAobiA9IHRyYW5zZm9ybUludGVybmFsTmFtZShuLnZhbHVlKS5zcGxpdCgiOjoiKSlbMV0KICAgICAgICAgID8gIk11bHRpcGx5IgogICAgICAgICAgOiAiQ21wIExUIiA9PT0gblsxXQogICAgICAgICAgPyAiTGVzcyBUaGFuIgogICAgICAgICAgOiAiQ21wIExFIiA9PT0gblsxXQogICAgICAgICAgPyAiTGVzcyBUaGFuIE9yIEVxdWFsIgogICAgICAgICAgOiBuWzFdOwogICAgICBpZiAobnVsbCAhPT0gKGEgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKSkpIHsKICAgICAgICBpZiAoLTEgIT09IGEudmFsdWUuaW5kZXhPZihlICsgIk5pYWdhcmFOb2RlUGFyYW1ldGVyTWFwU2V0IikpCiAgICAgICAgICByZXR1cm4gIk1hcCBTZXQiOwogICAgICAgIGlmICgtMSAhPT0gYS52YWx1ZS5pbmRleE9mKGUgKyAiTmlhZ2FyYU5vZGVQYXJhbWV0ZXJNYXBHZXQiKSkKICAgICAgICAgIHJldHVybiAiTWFwIEdldCI7CiAgICAgICAgaWYgKC0xICE9PSBhLnZhbHVlLmluZGV4T2YoZSArICJOaWFnYXJhTm9kZVBhcmFtZXRlck1hcEZvciIpKQogICAgICAgICAgcmV0dXJuICJNYXAgRm9yIjsKICAgICAgICBpZiAoLTEgIT09IGEudmFsdWUuaW5kZXhPZihlICsgIk5pYWdhcmFOb2RlQ3VzdG9tSGxzbCIpKQogICAgICAgICAgcmV0dXJuICJDdXN0b21IbHNsIjsKICAgICAgICBpZiAoLTEgIT09IGEudmFsdWUuaW5kZXhPZihlICsgIk5pYWdhcmFOb2RlU3RhdGljU3dpdGNoIikpCiAgICAgICAgICByZXR1cm4gbnVsbCA9PT0KICAgICAgICAgICAgKG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIklucHV0UGFyYW1ldGVyTmFtZSIpKQogICAgICAgICAgICA/ICJTdGF0aWMgU3dpdGNoIChVbmRlZmluZWQgcGFyYW1ldGVyIG5hbWUpIgogICAgICAgICAgICA6ICJTdGF0aWMgU3dpdGNoICgiICsgbi52YWx1ZSArICIpIjsKICAgICAgICBpZiAoLTEgIT09IGEudmFsdWUuaW5kZXhPZihlICsgIk5pYWdhcmFOb2RlSWYiKSkgcmV0dXJuICJJZiI7CiAgICAgICAgaWYgKC0xICE9PSBhLnZhbHVlLmluZGV4T2YoZSArICJOaWFnYXJhTm9kZUlucHV0IikpCiAgICAgICAgICByZXR1cm4gdGhpcy5pbnB1dE9iamVjdC5yZXBsYWNlQWxsKCdcXCInLCAnIicpLnJlcGxhY2VBbGwoIlxcJyIsICInIik7CiAgICAgICAgaWYgKC0xICE9PSBhLnZhbHVlLmluZGV4T2YoZSArICJOaWFnYXJhTm9kZUNvbnZlcnQiKSkgcmV0dXJuICJDb252ZXJ0IjsKICAgICAgICBpZiAoLTEgIT09IGEudmFsdWUuaW5kZXhPZihlICsgIk5pYWdhcmFOb2RlUmVhZERhdGFTZXQiKSkKICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFzZXRPYmplY3QgKyAiIFJlYWQiOwogICAgICAgIGlmICgtMSAhPT0gYS52YWx1ZS5pbmRleE9mKGUgKyAiTmlhZ2FyYU5vZGVXcml0ZURhdGFTZXQiKSkKICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFzZXRPYmplY3QgKyAiIFJlYWQiOwogICAgICB9CiAgICAgIHJldHVybiBVTm9kZS5wcm90b3R5cGUuZmluZEhlYWRlck5hbWUuY2FsbCh0aGlzKTsKICAgIH0pLAogICAgKE5OaWFnYXJhLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxIZWFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIGUgPSB0aGlzLmdlbmVyYXRlSFRNTFBpbkRlbGVnYXRlKCksCiAgICAgICAgICBhID0gMCwKICAgICAgICAgIG4gPSBlLmxlbmd0aCwKICAgICAgICAgIHQgPSB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsKICAgICAgICAgICAgICAiaGVhZGVyIiwKICAgICAgICAgICAgICAibm9kZS1jb2xvciIsCiAgICAgICAgICAgICAgdGhpcy5maW5kQ3NzQ2xhc3NOb2RlQ29sb3IoKSwKICAgICAgICAgICAgICAiZ3JhZGllbnQiLAogICAgICAgICAgICAgIHRoaXMuZmluZEljb25BZnRlck5vZGUoKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbIm5hbWUiXSwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZmluZEhlYWRlck5hbWUoKSwKICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJzdWJuYW1lIl0sCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5maW5kSGVhZGVyU3VibmFtZSgpLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdLAogICAgICAgICAgfTsKICAgICAgICBhIDwgbjsKICAgICAgICArK2EKICAgICAgKQogICAgICAgIHQuY2hpbGRzLnB1c2goZVthXSk7CiAgICAgIHJldHVybiB0OwogICAgfSksCiAgICAoTk5pYWdhcmEucHJvdG90eXBlLmZpbmRDc3NDbGFzc05vZGVDb2xvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKTsKICAgICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgICBpZiAoLTEgIT09IGUudmFsdWUuaW5kZXhPZigiTmlhZ2FyYU5vZGVDdXN0b21IbHNsIikpIHJldHVybiAic3dpdGNoIjsKICAgICAgICBpZiAoLTEgIT09IGUudmFsdWUuaW5kZXhPZigiTmlhZ2FyYU5vZGVTdGF0aWNTd2l0Y2giKSkgcmV0dXJuICJldmVudCI7CiAgICAgICAgaWYgKC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk5pYWdhcmFOb2RlRnVuY3Rpb25DYWxsIikpCiAgICAgICAgICByZXR1cm4gImJyZWFrLXN0cnVjdCI7CiAgICAgICAgaWYgKC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk5pYWdhcmFOb2RlSW5wdXQiKSkKICAgICAgICAgIHJldHVybiBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlVzYWdlIiksICJldmVudCI7CiAgICAgICAgaWYgKC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk5pYWdhcmFOb2RlUmVhZERhdGFTZXQiKSkgcmV0dXJuICJldmVudCI7CiAgICAgICAgaWYgKC0xICE9PSBlLnZhbHVlLmluZGV4T2YoIk5pYWdhcmFOb2RlV3JpdGVEYXRhU2V0IikpIHJldHVybiAiZXZlbnQiOwogICAgICB9CiAgICAgIHJldHVybiAiZnVuY3Rpb24tY2FsbCI7CiAgICB9KSwKICAgIChOTmlhZ2FyYS5wcm90b3R5cGUuY2FsbGJhY2tJbnNwZWN0Tm9kZSA9IGZ1bmN0aW9uIChlLCBhKSB7CiAgICAgIHZhciBuOwogICAgICBudWxsICE9PSAobiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiSW5wdXQiKSkgJiYKICAgICAgICAodGhpcy5pbnB1dE9iamVjdCA9IHNlYXJjaFByb3BXaXRoTmFtZShuLnZhbHVlLCAiTmFtZSIpLnZhbHVlKSwKICAgICAgICBudWxsICE9PSAobiA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiRGF0YVNldCIpKSAmJgogICAgICAgICAgKHRoaXMuZGF0YXNldE9iamVjdCA9IHNlYXJjaFByb3BXaXRoTmFtZShuLnZhbHVlLCAiTmFtZSIpLnZhbHVlKTsKICAgIH0pLAogICAgKE5OaWFnYXJhLnByb3RvdHlwZS5kZXRlY3RJbnB1dFNlbGVjdFRvQ3JlYXRlID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBlLCBhLCBuID0gMCwgdCA9IHRoaXMucGlucy5sZW5ndGgsIHIgPSBudWxsLCBsID0gIiI7IG4gPCB0OyArK24pCiAgICAgICAgbnVsbCA9PT0gKGEgPSB0aGlzLnBpbnNbbl0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5DYXRlZ29yeSIpKSB8fAogICAgICAgICAgKCJFbnVtIiAhPT0gYS52YWx1ZSAmJiAiU3RhdGljRW51bSIgIT09IGEudmFsdWUpIHx8CiAgICAgICAgICAobnVsbCAhPT0KICAgICAgICAgICAgKHIgPSB0aGlzLnBpbnNbbl0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeU9iamVjdCIpKSAmJgogICAgICAgICAgICAoKGEgPSByLnZhbHVlCiAgICAgICAgICAgICAgLnN1YnN0cihyLnZhbHVlLmxhc3RJbmRleE9mKCIuIikgKyAxKQogICAgICAgICAgICAgIC5yZXBsYWNlKCciJywgIiIpCiAgICAgICAgICAgICAgLnJlcGxhY2UoIiciLCAiIikpLAogICAgICAgICAgICB2b2lkIDAgIT09IEVOVU1fTklBR0FSQVthXSAmJgogICAgICAgICAgICAgICgobCA9ICIiKSwKICAgICAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAgICAgKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5waW5zW25dLnByb3BzLCAiRGVmYXVsdFZhbHVlIikpICYmCiAgICAgICAgICAgICAgICAobCA9IGUudmFsdWUpLAogICAgICAgICAgICAgIHRoaXMucGluc1tuXS5zZXRJbnB1dFNlbGVjdFZhbHVlcyhFTlVNX05JQUdBUkFbYV0sIGwpKSkpOwogICAgfSk7CiAgZnVuY3Rpb24gTk5pYWdhcmFDbGlwYm9hcmRDb250ZW50KCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5OaWFnYXJhQ2xpcGJvYXJkQ29udGVudC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5OaWFnYXJhQ2xpcGJvYXJkQ29udGVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPQogICAgICBOTmlhZ2FyYUNsaXBib2FyZENvbnRlbnQpLnByb3RvdHlwZS5nZXRFeHBvcnRlZE5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgbyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiRXhwb3J0ZWROb2RlcyIpOwogICAgICByZXR1cm4gbnVsbCA9PT0gbyA/ICIiIDogYXRvYihvLnZhbHVlKTsKICAgIH0pOwogIGZ1bmN0aW9uIE5QQ0coKSB7CiAgICAodGhpcy5oZWFkZXJOYW1lID0gIiIpLCAodGhpcy5pc0tub3QgPSAhMSksIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOUENHLnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTlBDRy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOUENHKS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSwKICAgICAgICB0LAogICAgICAgIG4gPSAwLAogICAgICAgIG8gPSB0aGlzLnBpbnMubGVuZ3RoLAogICAgICAgIHIgPSBudWxsLAogICAgICAgIGEgPSAwLAogICAgICAgIGkgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKSwKICAgICAgICBzID0gWyJub2RlIiwgIm5wY2ciXTsKICAgICAgZm9yICgKICAgICAgICBudWxsICE9PSBpICYmCiAgICAgICAgLTEgIT09IGkudmFsdWUuaW5kZXhPZigiUENHRWRpdG9yR3JhcGhOb2RlUmVyb3V0ZSIpICYmCiAgICAgICAgKCh0aGlzLmlzS25vdCA9ICEwKSwgcy5wdXNoKCJrbm90IikpOwogICAgICAgIG4gPCBvOwogICAgICAgICsrbgogICAgICApCiAgICAgICAgdGhpcy5waW5zW25dLmRpc2FibGVJbnB1dCgpOwogICAgICBpZiAoCiAgICAgICAgKChyID0gewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IHMsCiAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgIHsgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdGhpcy5ndWlkIH0sCiAgICAgICAgICBdLAogICAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxUb29sVGlwKCksIHRoaXMuZ2VuZXJhdGVIVE1MSGVhZGVyKCldLAogICAgICAgIH0pLAogICAgICAgIHRoaXMub3ZlcnJpZGVDb25uZWN0b3JUeXBlRm9yUGlucygpLAogICAgICAgIChlID0gdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCkpLAogICAgICAgIEFycmF5LmlzQXJyYXkoZSkpCiAgICAgICkKICAgICAgICBmb3IgKHQgPSBlLmxlbmd0aDsgYSA8IHQ7ICsrYSkgci5jaGlsZHMucHVzaChlW2FdKTsKICAgICAgZWxzZSByLmNoaWxkcy5wdXNoKGUpOwogICAgICByZXR1cm4gcjsKICAgIH0pLAogICAgKE5QQ0cucHJvdG90eXBlLmdlbmVyYXRlQ3NzTm9kZUhlYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCA9IG51bGwsCiAgICAgICAgbiA9IHRoaXMubm9kZXNbMF0ub2JqZWN0RGVmaW5pdGlvblsyXS52YWx1ZSwKICAgICAgICBvID0gWwogICAgICAgICAgIk1vZGlmaWVyIiwKICAgICAgICAgICJDcmVhdGVTcGxpbmUiLAogICAgICAgICAgIkRpZmZlcmVuY2UiLAogICAgICAgICAgIkRpc3RhbmNlIiwKICAgICAgICAgICJEYXRhIiwKICAgICAgICAgICJHYXRoZXIiLAogICAgICAgICAgIlByb2plY3Rpb24iLAogICAgICAgICAgIk5vcm1hbFRvRGVuc2l0eSIsCiAgICAgICAgICAiVHJhbnNmb3JtUG9pbnRzIiwKICAgICAgICAgICJCb3VuZHMiLAogICAgICAgICAgIlVuaW9uIiwKICAgICAgICAgICJNZXJnZSIsCiAgICAgICAgICAiSW50ZXJzZWN0aW9uIiwKICAgICAgICAgICJEZWJ1ZyIsCiAgICAgICAgICAiVG9Qb2ludCIsCiAgICAgICAgICAiUXVlcnkiLAogICAgICAgIF0sCiAgICAgICAgciA9IDAsCiAgICAgICAgYSA9IG8ubGVuZ3RoOwogICAgICBpZiAoIkV4ZWN1dGVCbHVlcHJpbnRfIiA9PT0gbi5zdWJzdHJpbmcoMCwgMTcpKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5ub2Rlc1swXSAmJgogICAgICAgICAgdGhpcy5ub2Rlc1swXS5ub2Rlc1sxXSAmJgogICAgICAgICAgdGhpcy5ub2Rlc1swXS5ub2Rlc1sxXS5ub2Rlc1swXSAmJgogICAgICAgICAgdGhpcy5ub2Rlc1swXS5ub2Rlc1sxXS5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uWzFdCiAgICAgICAgKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICB0aGlzLm5vZGVzWzBdLm5vZGVzWzFdLm5vZGVzWzBdLm9iamVjdERlZmluaXRpb25bMl0udmFsdWUuaW5kZXhPZigKICAgICAgICAgICAgICAiRGVidWciCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICJwY2ctZGVmYXVsdCI7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICB0aGlzLm5vZGVzWzBdLm5vZGVzWzFdLm5vZGVzWzBdLm9iamVjdERlZmluaXRpb25bMl0udmFsdWUuaW5kZXhPZigKICAgICAgICAgICAgICAiQXBwZW5kQXR0cmlidXRlU2V0IgogICAgICAgICAgICApCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAicGNnLXBhcmFtcyI7CiAgICAgICAgfQogICAgICAgIHJldHVybiAicGNnLWV4ZWN1dGUtYnAiOwogICAgICB9CiAgICAgIGlmICgtMSAhPT0gbi5pbmRleE9mKCJBdHRyaWJ1dGUiKSkgcmV0dXJuICJwY2ctYXR0cmlidXRlIjsKICAgICAgaWYgKC0xICE9PSBuLmluZGV4T2YoIlNwYXduIikpIHJldHVybiAicGNnLXNwYXduIjsKICAgICAgaWYgKAogICAgICAgICJTdWJncmFwaCIgPT09IChuID0gLTEgIT09IChlID0gbi5pbmRleE9mKCJfIikpID8gbi5zdWJzdHJpbmcoMCwgZSkgOiBuKQogICAgICApCiAgICAgICAgcmV0dXJuICJwY2ctaW5wdXQiOwogICAgICBpZiAoCiAgICAgICAgbnVsbCAhPT0gKHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5vYmplY3REZWZpbml0aW9uLCAiQ2xhc3MiKSkgJiYKICAgICAgICAoLTEgIT09IHQudmFsdWUuaW5kZXhPZigiUENHRWRpdG9yR3JhcGhOb2RlT3V0cHV0IikgfHwKICAgICAgICAgIC0xICE9PSB0LnZhbHVlLmluZGV4T2YoIlBDR0VkaXRvckdyYXBoTm9kZUlucHV0IikpCiAgICAgICkKICAgICAgICByZXR1cm4gInBjZy1pbnB1dCI7CiAgICAgIGZvciAoOyByIDwgYTsgKytyKSBpZiAoLTEgIT09IG4uaW5kZXhPZihvW3JdKSkgcmV0dXJuICJwY2ctc3BhdGlhbCI7CiAgICAgIHJldHVybiAiRGVuc2l0eU5vaXNlIiA9PT0gbiB8fCAiRGVuc2l0eVJlbWFwIiA9PT0gbgogICAgICAgID8gInBjZy1kZW5zaXR5IgogICAgICAgIDogIkdldEFjdG9yUHJvcGVydHkiID09PSBuCiAgICAgICAgPyAicGNnLXBhcmFtcyIKICAgICAgICA6IC0xICE9PSBuLmluZGV4T2YoIkZpbHRlciIpIHx8IC0xICE9PSBuLmluZGV4T2YoIlNlbGZQcnVuaW5nIikKICAgICAgICA/ICJwY2ctZmlsdGVyIgogICAgICAgIDogLTEgIT09IG4uaW5kZXhPZigiUG9pbnRNYXRjaEFuZFNldCIpCiAgICAgICAgPyAicGNnLWF0dHJpYnV0ZSIKICAgICAgICA6ICJwY2ctZGVmYXVsdCI7CiAgICB9KSwKICAgIChOUENHLnByb3RvdHlwZS5maW5kSGVhZGVyTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgdCwKICAgICAgICBuID0gbnVsbCwKICAgICAgICBvID0gbnVsbCwKICAgICAgICByID0gLTEsCiAgICAgICAgYSA9IHRoaXMubm9kZXNbMF0ub2JqZWN0RGVmaW5pdGlvblsyXS52YWx1ZSwKICAgICAgICBpID0gMDsKICAgICAgaWYgKHRoaXMubm9kZXMubGVuZ3RoIDwgMikgcmV0dXJuICIiOwogICAgICBpZiAobnVsbCAhPT0gKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5ub2Rlc1sxXS5wcm9wcywgIk5vZGVUaXRsZSIpKSkKICAgICAgICByZXR1cm4gZS52YWx1ZTsKICAgICAgaWYgKCJFeGVjdXRlQmx1ZXByaW50XyIgPT09IGEuc3Vic3RyaW5nKDAsIDE3KSkgewogICAgICAgIGlmICgKICAgICAgICAgICgoYSA9ICJFeGVjdXRlIEJsdWVwcmludCIpLAogICAgICAgICAgdGhpcy5ub2Rlc1swXSAmJgogICAgICAgICAgICB0aGlzLm5vZGVzWzBdLm5vZGVzWzFdICYmCiAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbMV0ubm9kZXNbMF0gJiYKICAgICAgICAgICAgdGhpcy5ub2Rlc1swXS5ub2Rlc1sxXS5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uWzFdKQogICAgICAgICkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICAiQlBfRWxlbWVudF9NZXNoVG9Qb2ludHNXaXRoQ29sb3JzIiA9PT0KICAgICAgICAgICAgKGEgPQogICAgICAgICAgICAgIHRoaXMubm9kZXNbMF0ubm9kZXNbMV0ubm9kZXNbMF0ub2JqZWN0RGVmaW5pdGlvblsyXQogICAgICAgICAgICAgICAgLnZhbHVlKS5zdWJzdHJpbmcoMCwgMzMpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAiQlBfRWxlbWVudF9NZXNoVG9Qb2ludHNXaXRoQ29sb3JzIjsKICAgICAgICAgIGEgPSBhLnN1YnN0cmluZygwLCBhLmluZGV4T2YoIl8iKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAiSW50ZXJzZWN0V2l0aFRhZ2dlZEFjdG9yR2VvIiA9PT0gYQogICAgICAgICAgPyAiSW50ZXJzZWN0V2l0aFRhZ2dlZEFjdG9yR2VvbWV0cnkiCiAgICAgICAgICA6IGE7CiAgICAgIH0KICAgICAgaWYgKCJEZWZhdWx0SW5wdXROb2RlIiA9PT0gYSkgcmV0dXJuICJJbnB1dCI7CiAgICAgIGlmICgiRGVmYXVsdE91dHB1dE5vZGUiID09PSBhKSByZXR1cm4gIk91dHB1dCI7CiAgICAgIGlmICgKICAgICAgICAiU3ViZ3JhcGgiICE9PSAoYSA9IC0xICE9PSAoZSA9IGEuaW5kZXhPZigiXyIpKSA/IGEuc3Vic3RyaW5nKDAsIGUpIDogYSkKICAgICAgKQogICAgICAgIHJldHVybiAoCiAgICAgICAgICAiRmlsdGVyQnlUYWciID09PSBhICYmCiAgICAgICAgICAgIChudWxsICE9PQogICAgICAgICAgICAgIChvID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1sxXS5wcm9wcywKICAgICAgICAgICAgICAgICJPcGVyYXRpb24iCiAgICAgICAgICAgICAgKSkgJiYgIlJlbW92ZVRhZ2dlZCIgPT09IG8udmFsdWUKICAgICAgICAgICAgICA/IChhICs9ICIoUmVtb3ZlKSIpCiAgICAgICAgICAgICAgOiAoYSArPSAiKEtlZXApIiksCiAgICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzWzFdLm5vZGVzWzFdLnByb3BzLAogICAgICAgICAgICAgICAgIlNlbGVjdGVkVGFncyIKICAgICAgICAgICAgICApKSAmJiAoYSArPSAiOiAiICsgby52YWx1ZSkpLAogICAgICAgICAgIkFkZEF0dHJpYnV0ZSIgPT09IGEgfHwgIkNyZWF0ZUF0dHJpYnV0ZSIgPT09IGEKICAgICAgICAgICAgPyAoKGEgPSAiTm9uZTogMC4wMCIpLAogICAgICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICAgICAobyA9IHNlYXJjaFByb3BXaXRoTmFtZSgKICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1sxXS5wcm9wcywKICAgICAgICAgICAgICAgICAgIk91dHB1dEF0dHJpYnV0ZU5hbWUiCiAgICAgICAgICAgICAgICApKSAmJiAoYSA9IG8udmFsdWUpLAogICAgICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzWzFdLm5vZGVzWzFdLnByb3BzLAogICAgICAgICAgICAgICAgIkF0dHJpYnV0ZVR5cGVzIgogICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICA/IGEgKyAiOiAiICsgdGhpcy5nZXRBdHRyaWJ1dGVWYWx1ZShvKQogICAgICAgICAgICAgICAgOiBhICsgIjogMC4wMCIpCiAgICAgICAgICAgIDogKCJGaWx0ZXJBdHRyaWJ1dGUiID09PSBhICYmCiAgICAgICAgICAgICAgICAobnVsbCAhPT0KICAgICAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1sxXS5wcm9wcywKICAgICAgICAgICAgICAgICAgICAiT3BlcmF0aW9uIgogICAgICAgICAgICAgICAgICApKSAmJiAiRGVsZXRlU2VsZWN0ZWRBdHRyaWJ1dGVzIiA9PT0gby52YWx1ZQogICAgICAgICAgICAgICAgICA/IChhICs9ICIoRGVsZXRlKSIpCiAgICAgICAgICAgICAgICAgIDogKGEgKz0gIihLZWVwKSIpLAogICAgICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1sxXS5wcm9wcywKICAgICAgICAgICAgICAgICAgICAiU2VsZWN0ZWRBdHRyaWJ1dGVzIgogICAgICAgICAgICAgICAgICApKSAmJiAoYSArPSAiOiAiICsgby52YWx1ZSkpLAogICAgICAgICAgICAgICJBdHRyaWJ1dGVCaXR3aXNlT3AiID09PSBhCiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0T3BlcmF0aW9uTmFtZSgiQml0d2lzZSIsICJBbmQiKQogICAgICAgICAgICAgICAgOiAiQXR0cmlidXRlQm9vbGVhbk9wIiA9PT0gYQogICAgICAgICAgICAgICAgPyB0aGlzLmdldE9wZXJhdGlvbk5hbWUoIkJvb2xlYW4iLCAiQW5kIikKICAgICAgICAgICAgICAgIDogIkF0dHJpYnV0ZUNvbXBhcmVPcCIgPT09IGEKICAgICAgICAgICAgICAgID8gdGhpcy5nZXRPcGVyYXRpb25OYW1lKCJDb21wYXJlIiwgIkVxdWFsIikKICAgICAgICAgICAgICAgIDogIkF0dHJpYnV0ZU1hdGhzT3AiID09PSBhCiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0T3BlcmF0aW9uTmFtZSgiTWF0aHMiLCAiQWRkIikKICAgICAgICAgICAgICAgIDogIkF0dHJpYnV0ZVJvdGF0b3JPcCIgPT09IGEKICAgICAgICAgICAgICAgID8gdGhpcy5nZXRPcGVyYXRpb25OYW1lKCJSb3RhdG9yIiwgIkNvbWJpbmUiKQogICAgICAgICAgICAgICAgOiAiQXR0cmlidXRlVHJhbnNmb3JtT3AiID09PSBhCiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0T3BlcmF0aW9uTmFtZSgiVHJhbnNmb3JtIiwgIkNvbXBvc2UiKQogICAgICAgICAgICAgICAgOiAiQXR0cmlidXRlVHJpZ09wIiA9PT0gYQogICAgICAgICAgICAgICAgPyB0aGlzLmdldE9wZXJhdGlvbk5hbWUoIlRyaWciLCAiQWNvcyIpCiAgICAgICAgICAgICAgICA6ICJBdHRyaWJ1dGVWZWN0b3JPcCIgPT09IGEKICAgICAgICAgICAgICAgID8gdGhpcy5nZXRPcGVyYXRpb25OYW1lKCJWZWN0b3IiLCAiQ3Jvc3MiKQogICAgICAgICAgICAgICAgOiAiQXR0cmlidXRlUmVkdWNlIiA9PT0gYQogICAgICAgICAgICAgICAgPyAoKGEgPSAiUmVkdWNlIExhc3RBdHRyaWJ1dGUiKSwKICAgICAgICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAgICAgICAobyA9IHNlYXJjaFByb3BXaXRoTmFtZSgKICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMV0ubm9kZXNbMV0ucHJvcHMsCiAgICAgICAgICAgICAgICAgICAgICAiT3V0cHV0QXR0cmlidXRlTmFtZSIKICAgICAgICAgICAgICAgICAgICApKSAmJiAoYSArPSAiIHRvICIgKyBvLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPcGVyYXRpb25OYW1lKGEsICJBdmVyYWdlIikpCiAgICAgICAgICAgICAgICA6ICJBdHRyaWJ1dGVTZWxlY3QiID09PSBhCiAgICAgICAgICAgICAgICA/ICgoYSA9IHRoaXMuZ2V0T3BlcmF0aW9uTmFtZSgiU2VsZWN0IExhc3RBdHRyaWJ1dGUiLCAiTWluIikpLAogICAgICAgICAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAgICAgICAobyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLm5vZGVzWzFdLm5vZGVzWzFdLnByb3BzLCAiQXhpcyIpKQogICAgICAgICAgICAgICAgICAgID8gIkN1c3RvbUF4aXMiID09PSBvLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICA/IG51bGwgIT09CiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMV0ubm9kZXNbMV0ucHJvcHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIkN1c3RvbUF4aXMiCiAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgICAgID8gYSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiBvbiAoIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShvLnZhbHVlWzBdLnZhbHVlKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiwgIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShvLnZhbHVlWzFdLnZhbHVlKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiwgIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShvLnZhbHVlWzJdLnZhbHVlKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiwgIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShvLnZhbHVlWzNdLnZhbHVlKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIikiCiAgICAgICAgICAgICAgICAgICAgICAgIDogYSArICIgb24gKDAuMDAsIDAuMDAsIDAuMDAsIDAuMDApIgogICAgICAgICAgICAgICAgICAgICAgOiBhICsgIiBvbiAiICsgby52YWx1ZQogICAgICAgICAgICAgICAgICAgIDogYSArICIgb24gWCIpCiAgICAgICAgICAgICAgICA6ICgiVHJhbnNmZXJBdHRyaWJ1dGUiID09PSBhICYmCiAgICAgICAgICAgICAgICAgICAgKChhICs9CiAgICAgICAgICAgICAgICAgICAgICBudWxsID09PQogICAgICAgICAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMV0ubm9kZXNbMV0ucHJvcHMsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb3VyY2VBdHRyaWJ1dGVOYW1lIgogICAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgICAgICAgICAgPyAiIE5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIDogIiAiICsgby52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAgICAgICAgIChvID0gc2VhcmNoUHJvcFdpdGhOYW1lKAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzWzFdLm5vZGVzWzFdLnByb3BzLAogICAgICAgICAgICAgICAgICAgICAgICAiVGFyZ2V0QXR0cmlidXRlTmFtZSIKICAgICAgICAgICAgICAgICAgICAgICkpICYmIChhICs9ICIgdG8gIiArIG8udmFsdWUpKSwKICAgICAgICAgICAgICAgICAgIkRhdGFUYWJsZVJvd1RvQXR0cmlidXRlU2V0IiA9PT0gYSAmJgogICAgICAgICAgICAgICAgICAgICgoYSA9CiAgICAgICAgICAgICAgICAgICAgICBudWxsID09PQogICAgICAgICAgICAgICAgICAgICAgKG8gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbMV0ubm9kZXNbMV0ucHJvcHMsCiAgICAgICAgICAgICAgICAgICAgICAgICJEYXRhVGFibGUiCiAgICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgICAgICAgICA/ICIgTm9uZSIKICAgICAgICAgICAgICAgICAgICAgICAgOiAtMSA9PT0gKHIgPSBvLnZhbHVlLmxhc3RJbmRleE9mKCIuIikpCiAgICAgICAgICAgICAgICAgICAgICAgID8gIiAiICsgby52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICA6ICIgIiArIG8udmFsdWUuc3Vic3RyaW5nKHIgKyAxKSksCiAgICAgICAgICAgICAgICAgICAgKGEgKz0KICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09CiAgICAgICAgICAgICAgICAgICAgICAobyA9IHNlYXJjaFByb3BXaXRoTmFtZSgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1sxXS5ub2Rlc1sxXS5wcm9wcywKICAgICAgICAgICAgICAgICAgICAgICAgIlJvd05hbWUiCiAgICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgICAgICAgICA/ICJbIE5vbmUgXSIKICAgICAgICAgICAgICAgICAgICAgICAgOiAiWyAiICsgby52YWx1ZSArICIgXSIpKSwKICAgICAgICAgICAgICAgICAgYSkpCiAgICAgICAgKTsKICAgICAgZm9yIChpID0gMCwgdCA9IHRoaXMubm9kZXNbMV0ubm9kZXMubGVuZ3RoOyBpIDwgdDsgKytpKQogICAgICAgIDAgPCB0aGlzLm5vZGVzWzFdLm5vZGVzW2ldLm5vZGVzLmxlbmd0aCAmJgogICAgICAgICAgKG4gPSBzZWFyY2hQcm9wV2l0aE5hbWUoCiAgICAgICAgICAgIHRoaXMubm9kZXNbMV0ubm9kZXNbaV0ubm9kZXNbMF0ucHJvcHMsCiAgICAgICAgICAgICJHcmFwaCIKICAgICAgICAgICkpOwogICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiAtMSAhPT0gKHIgPSBuLnZhbHVlLmxhc3RJbmRleE9mKCIuIikpCiAgICAgICAgPyBuLnZhbHVlCiAgICAgICAgICAgIC5zdWJzdHJpbmcoKHIgKz0gMSkpCiAgICAgICAgICAgIC5yZXBsYWNlKCInIiwgIiIpCiAgICAgICAgICAgIC5yZXBsYWNlKCciJywgIiIpCiAgICAgICAgOiAiaW52YWxpZCBzdWJncmFwaCI7CiAgICB9KSwKICAgIChOUENHLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVWYWx1ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gWwogICAgICAgICAgeyBuYW1lOiAiRmxvYXQiLCB2YWx1ZTogIkZsb2F0VmFsdWUiLCBkZWZhdWx0VmFsdWU6ICIwLjAwIiB9LAogICAgICAgICAgeyBuYW1lOiAiSW50ZWdlcjMyIiwgdmFsdWU6ICJJbnQzMlZhbHVlIiwgZGVmYXVsdFZhbHVlOiAiMCIgfSwKICAgICAgICAgIHsgbmFtZTogIkludGVnZXI2NCIsIHZhbHVlOiAiSW50VmFsdWUiLCBkZWZhdWx0VmFsdWU6ICIwIiB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiVmVjdG9yMiIsCiAgICAgICAgICAgIHZhbHVlOiAiVmVjdG9yMlZhbHVlIiwKICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiVigwLjAwLCAwLjAwKSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiVmVjdG9yIiwKICAgICAgICAgICAgdmFsdWU6ICJWZWN0b3JWYWx1ZSIsCiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogIlYoMC4wMCwgMC4wMCwgMC4wMCkiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIlZlY3RvcjQiLAogICAgICAgICAgICB2YWx1ZTogIlZlY3RvcjRWYWx1ZSIsCiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogIlYoMC4wMCwgMC4wMCwgMC4wMCwgMC4wMCkiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIlF1YXRlcm5pb24iLAogICAgICAgICAgICB2YWx1ZTogIlF1YXRWYWx1ZSIsCiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogIlEoMC4wMCwgMC4wMCwgMC4wMCwgMS4wMCkiLAogICAgICAgICAgfSwKICAgICAgICAgIHsgbmFtZTogIlRyYW5zZm9ybSIsIHZhbHVlOiAiLSIsIGRlZmF1bHRWYWx1ZTogIlRyYW5zZm9ybSIgfSwKICAgICAgICAgIHsgbmFtZTogIlN0cmluZyIsIHZhbHVlOiAiU3RyaW5nVmFsdWUiLCBkZWZhdWx0VmFsdWU6ICciIicgfSwKICAgICAgICAgIHsgbmFtZTogIkJvb2xlYW4iLCB2YWx1ZTogIkJvb2xWYWx1ZSIsIGRlZmF1bHRWYWx1ZTogIkZhbHNlIiB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAiUm90YXRvciIsCiAgICAgICAgICAgIHZhbHVlOiAiUm90YXRvclZhbHVlIiwKICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiUigwLjAwLCAwLjAwLCAwLjAwKSIsCiAgICAgICAgICB9LAogICAgICAgICAgeyBuYW1lOiAiTmFtZSIsIHZhbHVlOiAiTmFtZVZhbHVlIiwgZGVmYXVsdFZhbHVlOiAnTigiTm9uZSIpJyB9LAogICAgICAgIF0sCiAgICAgICAgbiA9IDAsCiAgICAgICAgbyA9IHQubGVuZ3RoLAogICAgICAgIHIgPSBudWxsLAogICAgICAgIGEgPSAiIiwKICAgICAgICBpID0gW107CiAgICAgIGlmIChudWxsID09PSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgIlR5cGUiKSkKICAgICAgICByZXR1cm4gbnVsbCA9PT0gKHIgPSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgIkRvdWJsZVZhbHVlIikpCiAgICAgICAgICA/ICIwLjAwIgogICAgICAgICAgOiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KHIudmFsdWUpOwogICAgICBmb3IgKDsgbiA8IG87ICsrbikKICAgICAgICBpZiAoZS52YWx1ZVswXS52YWx1ZSA9PT0gdFtuXS5uYW1lKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gKHIgPSBzZWFyY2hQcm9wV2l0aE5hbWUoZS52YWx1ZSwgdFtuXS52YWx1ZSkpKQogICAgICAgICAgICByZXR1cm4gdFtuXS5kZWZhdWx0VmFsdWU7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICJWZWN0IiAhPT0gKGEgPSB0W25dLm5hbWUuc3Vic3RyaW5nKDAsIDQpKSAmJgogICAgICAgICAgICAiUXVhdCIgIT09IGEgJiYKICAgICAgICAgICAgIlJvdGEiICE9PSBhCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAiTmFtZSIgPT09IGEKICAgICAgICAgICAgICA/ICJOKCIgKyByLnZhbHVlICsgIikiCiAgICAgICAgICAgICAgOiAiRmxvYSIgPT09IGEKICAgICAgICAgICAgICA/IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoci52YWx1ZSkKICAgICAgICAgICAgICA6IHIudmFsdWU7CiAgICAgICAgICBmb3IgKG4gPSAwLCBvID0gci52YWx1ZS5sZW5ndGg7IG4gPCBvOyArK24pCiAgICAgICAgICAgIGkucHVzaChmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KHIudmFsdWVbbl0udmFsdWUpKTsKICAgICAgICAgIHJldHVybiBhLnN1YnN0cmluZygwLCAxKSArICIoIiArIGkuam9pbigiLCIpICsgIikiOwogICAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfSksCiAgICAoTlBDRy5wcm90b3R5cGUuZ2V0T3BlcmF0aW9uTmFtZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMubm9kZXNbMV0ubm9kZXNbMV0ucHJvcHMsICJPcGVyYXRpb24iKTsKICAgICAgcmV0dXJuIG51bGwgIT09IG4gPyBlICsgIjogIiArIG4udmFsdWUgOiBlICsgIjogIiArIHQ7CiAgICB9KSwKICAgIChOUENHLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRGb3JVbnJlYWwgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9ICIiLAogICAgICAgIG4gPSBnZXRJbmRlbnRGb3JtYXQoZSk7CiAgICAgIHJldHVybiAoCiAgICAgICAgKHQgKz0gIkJlZ2luICIgKyB0aGlzLmdlbmVyYXRlVGV4dE9iamVjdERlZmluaXRpb24oKSkgKwogICAgICAgIChuICsgIkJlZ2luICIgKyB0aGlzLm5vZGVzWzBdLmdlbmVyYXRlVGV4dE9iamVjdERlZmluaXRpb24oKSkgKwogICAgICAgIGdldFRleHREZWNsYXJhdGlvbkZvclVucmVhbCh0aGlzLm5vZGVzWzBdLm5vZGVzLCBlICsgMSkgKwogICAgICAgIChuICsgIkVuZCAiICsgdGhpcy5ub2Rlc1swXS5vYmplY3REZWZpbml0aW9uWzBdLnZhbHVlICsgIlxuIikgKwogICAgICAgIChuICsgIkJlZ2luICIgKyB0aGlzLm5vZGVzWzFdLmdlbmVyYXRlVGV4dE9iamVjdERlZmluaXRpb24oKSkgKwogICAgICAgIHRoaXMuZ2V0VGV4dERlc2NyaXB0aW9uRm9yVW5yZWFsKHRoaXMubm9kZXNbMV0ubm9kZXMsIGUgKyAxKSArCiAgICAgICAgdGhpcy5ub2Rlc1sxXS5nZW5lcmF0ZVRleHRQcm9wcyhlICsgMSkgKwogICAgICAgIChuICsgIkVuZCBPYmplY3RcbiIpICsKICAgICAgICB0aGlzLmdlbmVyYXRlVGV4dFByb3BzKGUpICsKICAgICAgICAoIkVuZCAiICsgdGhpcy5vYmplY3REZWZpbml0aW9uWzBdLnZhbHVlKQogICAgICApOwogICAgfSksCiAgICAoTlBDRy5wcm90b3R5cGUuZ2V0VGV4dERlc2NyaXB0aW9uRm9yVW5yZWFsID0KICAgICAgZnVuY3Rpb24gZ2V0VGV4dERlc2NyaXB0aW9uRm9yVW5yZWFsKGUsIHQpIHsKICAgICAgICBmb3IgKAogICAgICAgICAgdmFyIG4gPSAiIiwgbyA9IGdldEluZGVudEZvcm1hdCh0KSwgciA9IDAsIGEgPSBlLmxlbmd0aDsKICAgICAgICAgIHIgPCBhOwogICAgICAgICAgKytyCiAgICAgICAgKQogICAgICAgICAgKG4gKz0gbyArICJCZWdpbiAiICsgZVtyXS5nZW5lcmF0ZVRleHRPYmplY3REZWZpbml0aW9uKCkpLAogICAgICAgICAgICAwIDwgZVtyXS5ub2Rlcy5sZW5ndGggJiYKICAgICAgICAgICAgICAobiArPSBnZXRUZXh0RGVzY3JpcHRpb25Gb3JVbnJlYWwoZVtyXS5ub2RlcywgdCArIDEpKSwKICAgICAgICAgICAgKG4gPSBuICsgZVtyXS5nZW5lcmF0ZVRleHRQcm9wcyh0ICsgMSkgKyAobyArICJFbmQgT2JqZWN0XG4iKSk7CiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0pLAogICAgKE5QQ0cucHJvdG90eXBlLmdlbmVyYXRlSFRNTEhlYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNLbm90CiAgICAgICAgPyB7fQogICAgICAgIDogKCh0aGlzLmhlYWRlck5hbWUgPSB0aGlzLmZpbmRIZWFkZXJOYW1lKCkpLAogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbCiAgICAgICAgICAgICAgImhlYWRlciIsCiAgICAgICAgICAgICAgIm5vZGUtY29sb3IiLAogICAgICAgICAgICAgICJncmFkaWVudCIsCiAgICAgICAgICAgICAgInBjZyIsCiAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNzc05vZGVIZWFkZXIoKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJzcGFuIiwgY2xhc3NlczogWyJuYW1lIl0sIHRleHQ6IHRoaXMuaGVhZGVyTmFtZSB9XSwKICAgICAgICAgIH0pOwogICAgfSksCiAgICAoTlBDRy5wcm90b3R5cGUub3ZlcnJpZGVDb25uZWN0b3JUeXBlRm9yUGlucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSwKICAgICAgICAgIHQsCiAgICAgICAgICBuLAogICAgICAgICAgbywKICAgICAgICAgIHIgPSAwLAogICAgICAgICAgYSA9IHRoaXMucGlucy5sZW5ndGgsCiAgICAgICAgICBpID0gbnVsbCwKICAgICAgICAgIHMgPSBudWxsLAogICAgICAgICAgbCA9IDAsCiAgICAgICAgICB1ID0gITEsCiAgICAgICAgICBwID0gLTEsCiAgICAgICAgICBkID0gImNvbm5lY3RvciIsCiAgICAgICAgICBjID0gImV4ZWMiLAogICAgICAgICAgaCA9IDAsCiAgICAgICAgICBnID0gMCwKICAgICAgICAgIGYgPSAiIiwKICAgICAgICAgIG0gPSAhMCwKICAgICAgICAgIHYgPSAhMCwKICAgICAgICAgIE4gPSBbXTsKICAgICAgICByIDwgYTsKICAgICAgICArK3IKICAgICAgKQogICAgICAgIGlmICgKICAgICAgICAgICgoZSA9IHRoaXMucGluc1tyXS5nZXRQcm9wRnJvbVBpblR5cGUoIlBpbkNhdGVnb3J5IikpLAogICAgICAgICAgKGkgPSB0aGlzLnBpbnNbcl0uZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeSIpKSwKICAgICAgICAgIChzID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucGluc1tyXS5wcm9wcywgIlBpbk5hbWUiKSksCiAgICAgICAgICB0aGlzLmlzS25vdCkKICAgICAgICApCiAgICAgICAgICAodGhpcy5waW5zW3JdLm92ZXJyaWRlLmNvbm5lY3RvclR5cGUgPSB7CiAgICAgICAgICAgIGNvbm5lY3RvcjogImNvbm5lY3RvciIsCiAgICAgICAgICAgIHR5cGU6ICJwY2ctYW55LWRhdGEiLAogICAgICAgICAgfSksCiAgICAgICAgICAgIGkgJiYKICAgICAgICAgICAgICAiIiAhPT0gaS52YWx1ZSAmJgogICAgICAgICAgICAgICh0aGlzLnBpbnNbcl0ub3ZlcnJpZGUuY29ubmVjdG9yVHlwZS50eXBlID0KICAgICAgICAgICAgICAgICJwY2ctIiArIGkudmFsdWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIi0iKSk7CiAgICAgICAgZWxzZSBpZiAobnVsbCAhPT0gZSAmJiAiQXR0cmlidXRlIFNldCIgPT09IGUudmFsdWUpCiAgICAgICAgICB0aGlzLnBpbnNbcl0ub3ZlcnJpZGUuY29ubmVjdG9yVHlwZSA9IHsKICAgICAgICAgICAgY29ubmVjdG9yOiAiY29ubmVjdG9yLXBjZy1hdHRyaWJ1dGUtc2V0IiwKICAgICAgICAgICAgdHlwZTogInBjZy1hdHRyaWJ1dGUtc2V0IiwKICAgICAgICAgIH07CiAgICAgICAgZWxzZSBpZiAobnVsbCAhPT0gZSAmJiAiU3BhdGlhbCBEYXRhIiA9PT0gZS52YWx1ZSkKICAgICAgICAgIHRoaXMucGluc1tyXS5vdmVycmlkZS5jb25uZWN0b3JUeXBlID0gewogICAgICAgICAgICBjb25uZWN0b3I6ICJjb25uZWN0b3ItcGNnLXNwYXRpYWwtZGF0YSIsCiAgICAgICAgICAgIHR5cGU6ICJwY2ctc3BhdGlhbC1kYXRhIiwKICAgICAgICAgIH07CiAgICAgICAgZWxzZSBpZiAoCiAgICAgICAgICBudWxsID09PSAocyA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnBpbnNbcl0ucHJvcHMsICJQaW5OYW1lIikpCiAgICAgICAgKQogICAgICAgICAgdGhpcy5waW5zW3JdLm92ZXJyaWRlLmNvbm5lY3RvclR5cGUgPSB7CiAgICAgICAgICAgIGNvbm5lY3RvcjogImNvbm5lY3RvciIsCiAgICAgICAgICAgIHR5cGU6ICJleGVjIiwKICAgICAgICAgIH07CiAgICAgICAgZWxzZSBpZiAoMiAhPT0gdGhpcy5ub2Rlcy5sZW5ndGgpCiAgICAgICAgICB0aGlzLnBpbnNbcl0ub3ZlcnJpZGUuY29ubmVjdG9yVHlwZSA9IHsKICAgICAgICAgICAgY29ubmVjdG9yOiAiY29ubmVjdG9yIiwKICAgICAgICAgICAgdHlwZTogImV4ZWMiLAogICAgICAgICAgfTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGZvciAodSA9ICExLCBsID0gMCwgdCA9IHRoaXMubm9kZXNbMV0ubm9kZXMubGVuZ3RoOyBsIDwgdDsgKytsKQogICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5ub2Rlc1sxXS5ub2Rlc1tsXS5wcm9wcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgcCA9IC0xLCBoID0gMCwgbiA9IHRoaXMubm9kZXNbMV0ubm9kZXNbbF0ucHJvcHMubGVuZ3RoOwogICAgICAgICAgICAgICAgaCA8IG47CiAgICAgICAgICAgICAgICArK2gKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiAoIlByb3BlcnRpZXMiID09PSB0aGlzLm5vZGVzWzFdLm5vZGVzW2xdLnByb3BzW2hdLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgcCA9IGg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgtMSAhPT0gcCkgewogICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgdiA9IG0gPSAhKGYgPSAiIiksCiAgICAgICAgICAgICAgICAgICAgZyA9IDAsCiAgICAgICAgICAgICAgICAgICAgbyA9IChOID0gdGhpcy5ub2Rlc1sxXS5ub2Rlc1tsXS5wcm9wc1twXS52YWx1ZSkubGVuZ3RoOwogICAgICAgICAgICAgICAgICBnIDwgbzsKICAgICAgICAgICAgICAgICAgKytnCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICJMYWJlbCIgPT09IE5bZ10ubmFtZSAmJiAoZiA9IE5bZ10udmFsdWUudG9Mb3dlckNhc2UoKSksCiAgICAgICAgICAgICAgICAgICAgImJBbGxvd011bHRpcGxlRGF0YSIgPT09IE5bZ10ubmFtZSAmJgogICAgICAgICAgICAgICAgICAgICAgIkZhbHNlIiA9PT0gTltnXS52YWx1ZSAmJgogICAgICAgICAgICAgICAgICAgICAgKG0gPSAhMSksCiAgICAgICAgICAgICAgICAgICAgImJBbGxvd011bHRpcGxlQ29ubmVjdGlvbnMiID09PSBOW2ddLm5hbWUgJiYKICAgICAgICAgICAgICAgICAgICAgICJGYWxzZSIgPT09IE5bZ10udmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAgICh2ID0gITEpOwogICAgICAgICAgICAgICAgaWYgKGYgPT09IHMudmFsdWUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAoZCA9ICJjb25uZWN0b3IiKSwKICAgICAgICAgICAgICAgICAgICBtICYmIHYKICAgICAgICAgICAgICAgICAgICAgID8gKGQgPSAiY29ubmVjdG9yLXBjZy1tdWx0aXBsZS1kYXRhLW11bHRpcGxlLWNvbm5lY3Rpb24iKQogICAgICAgICAgICAgICAgICAgICAgOiBtICYmCiAgICAgICAgICAgICAgICAgICAgICAgICF2ICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChkID0gImNvbm5lY3Rvci1wY2ctbXVsdGlwbGUtZGF0YS1zaW5nbGUtY29ubmVjdGlvbiIpLAogICAgICAgICAgICAgICAgICAgIChjID0gImV4ZWMiKSA9PT0KICAgICAgICAgICAgICAgICAgICAgIChjID0KICAgICAgICAgICAgICAgICAgICAgICAgIiIgIT09IGkudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICA/ICJwY2ctIiArIGkudmFsdWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIi0iKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogYykgJiYKICAgICAgICAgICAgICAgICAgICAgICgoYyA9ICJwY2ctYW55LWRhdGEiKSwKICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbmNyZXRlIERhdGEiID09PSBlLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICIiID09PSBpLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChjID0gInBjZy1jb25jcmV0ZS1kYXRhIikpLAogICAgICAgICAgICAgICAgICAgICh0aGlzLnBpbnNbcl0ub3ZlcnJpZGUuY29ubmVjdG9yVHlwZSA9IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RvcjogZCwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGMsCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKHUgPSAhMCk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgdSB8fAogICAgICAgICAgICAodGhpcy5waW5zW3JdLm92ZXJyaWRlLmNvbm5lY3RvclR5cGUgPSB7CiAgICAgICAgICAgICAgY29ubmVjdG9yOiAiY29ubmVjdG9yIiwKICAgICAgICAgICAgICB0eXBlOiAiZXhlYyIsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pOwogIGZ1bmN0aW9uIE5TZWxmKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5TZWxmLnByb3RvdHlwZSA9IG5ldyBVTm9kZSgpKSwKICAgICgoTlNlbGYucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTlNlbGYpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSB0aGlzLmdldFZhcmlhYmxlVHlwZSgpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgY2xhc3NlczogWyJub2RlIiwgIm52YXJpYWJsZWdldCIsIGUuY29ubmVjdG9yLCBlLnR5cGVdLAogICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgeyBuYW1lOiAic3R5bGUiLCB2YWx1ZTogdGhpcy5nZW5lcmF0ZUNzc05vZGVTdHlsZSgpLmpvaW4oIjsiKSB9LAogICAgICAgICAgICB7IG5hbWU6ICJkYXRhLWlkIiwgdmFsdWU6IHRoaXMuZ3VpZCB9LAogICAgICAgICAgXSwKICAgICAgICAgIGNoaWxkczogW3RoaXMuZ2VuZXJhdGVIVE1MVG9vbFRpcCgpLCB0aGlzLmdlbmVyYXRlSFRNTEJvZHkoKV0sCiAgICAgICAgfTsKICAgICAgfSksCiAgICAoTlNlbGYucHJvdG90eXBlLmdlbmVyYXRlSFRNTEJvZHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJyb3VuZC1iZyJdIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsicmlnaHQtY29sIl0sCiAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH07CiAgICB9KSwKICAgIChOU2VsZi5wcm90b3R5cGUuZ2V0VmFyaWFibGVUeXBlID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBlID0gMCwgdCA9IHRoaXMucGlucy5sZW5ndGg7IGUgPCB0OyArK2UpCiAgICAgICAgaWYgKHRoaXMucGluc1tlXS5pc091dHB1dCgpICYmICExID09PSB0aGlzLnBpbnNbZV0uaXNEZWxlZ2F0ZU91dHB1dCgpKQogICAgICAgICAgcmV0dXJuIHRoaXMucGluc1tlXS5nZXRDb25uZWN0b3JUeXBlKCk7CiAgICAgIHJldHVybiB7IGNvbm5lY3RvcjogImNvbm5lY3RvciIsIHR5cGU6ICJvYmplY3QiIH07CiAgICB9KTsKICBmdW5jdGlvbiBOU3Vic3lzdGVtKCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5TdWJzeXN0ZW0ucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOU3Vic3lzdGVtLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5TdWJzeXN0ZW0pLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPQogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuZGlzYWJsZVRleHRPblBpbnMoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJub2RlIiwgIm5zdWJzeXN0ZW0iXSwKICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICB7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiB0aGlzLmdlbmVyYXRlQ3NzTm9kZVN0eWxlKCkuam9pbigiOyIpIH0sCiAgICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hpbGRzOiBbdGhpcy5nZW5lcmF0ZUhUTUxUb29sVGlwKCksIHRoaXMuZ2VuZXJhdGVIVE1MQm9keSgpXSwKICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9KSwKICAgIChOU3Vic3lzdGVtLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCwKICAgICAgICBlLAogICAgICAgIHMgPSAiIiwKICAgICAgICBhID0gMCwKICAgICAgICBpID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJDdXN0b21DbGFzcyIpLAogICAgICAgIG4gPSBbXSwKICAgICAgICBsID0gMDsKICAgICAgaWYgKG51bGwgIT09IGkgJiYgKChzID0gaS52YWx1ZSksIC0xICE9PSAoaSA9IGkudmFsdWUubGFzdEluZGV4T2YoIi4iKSkpKQogICAgICAgIGlmICgKICAgICAgICAgICJEYXRhRHJpdmVuQ1ZhckVuZ2luZVN1YnN5c3RlbSIgPT09CiAgICAgICAgICAocyA9IHMuc3Vic3RyKGkgKyAxKS5yZXBsYWNlKCInIiwgIiIpKQogICAgICAgICkKICAgICAgICAgIG4gPSBbeyB0ZXh0OiAiRGF0YURyaXZlbkNWYXJzIiB9XTsKICAgICAgICBlbHNlIGlmICgiUXVhcnR6U3Vic3lzdGVtIiA9PT0gcykgbiA9IFt7IHRleHQ6ICJRdWFydHoiIH1dOwogICAgICAgIGVsc2UgaWYgKCJHZW9tZXRyeUNvbGxlY3Rpb25JU01Qb29sU3ViU3lzdGVtIiA9PT0gcykKICAgICAgICAgIG4gPSBbCiAgICAgICAgICAgIHsgdGV4dDogIkdlb21ldHJ5IiB9LAogICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICB7IHRleHQ6ICJDb2xsZWN0aW9uIiB9LAogICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICB7IHRleHQ6ICJJU01Qb29sIiB9LAogICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICB7IHRleHQ6ICJTdWIgU3lzdGVtIiB9LAogICAgICAgICAgXTsKICAgICAgICBlbHNlIGlmICgiUFBNQ2hhaW5HcmFwaFdvcmxkU3Vic3lzdGVtIiA9PT0gcykKICAgICAgICAgIG4gPSBbCiAgICAgICAgICAgIHsgdGV4dDogIlBQTUNoYWluIiB9LAogICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICB7IHRleHQ6ICJHcmFwaCIgfSwKICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgeyB0ZXh0OiAiV29ybGQiIH0sCiAgICAgICAgICAgIHsgdGFnOiAiYnIiIH0sCiAgICAgICAgICAgIHsgdGV4dDogIlN1YnN5c3RlbSIgfSwKICAgICAgICAgIF07CiAgICAgICAgZWxzZQogICAgICAgICAgZm9yICgKICAgICAgICAgICAgZSA9ICh0ID0gcy5tYXRjaCgvW0EtWl0/W2Etel0rfFswLTldK3xbQS1aXSsoPyFbYS16XSkvZykpLmxlbmd0aDsKICAgICAgICAgICAgYSA8IGU7CiAgICAgICAgICAgICsrYQogICAgICAgICAgKQogICAgICAgICAgICBuLnB1c2goeyB0ZXh0OiB0W2FdIH0pLAogICAgICAgICAgICAgIChsICs9IHRbYV0ubGVuZ3RoKSwKICAgICAgICAgICAgICAiSExPRCIgIT09IHRbYV0gJiYKICAgICAgICAgICAgICAgICJJU00iICE9PSB0W2FdICYmCiAgICAgICAgICAgICAgICAiUENHIiAhPT0gdFthXSAmJgogICAgICAgICAgICAgICAgYSArIDEgPCBlICYmCiAgICAgICAgICAgICAgICAobCArIHRbYSArIDFdLmxlbmd0aCA8IDExCiAgICAgICAgICAgICAgICAgID8gKG4ucHVzaCh7IHRleHQ6ICIgIiB9KSwgKGwgKz0gdFthICsgMV0ubGVuZ3RoKSkKICAgICAgICAgICAgICAgICAgOiAobi5wdXNoKHsgdGFnOiAiYnIiIH0pLCAobCA9IDApKSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbImJvZHkiXSwKICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJyb3VuZC1iZyJdIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsibGVmdC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJsZWZ0LXRleHQiXSwKICAgICAgICAgICAgY2hpbGRzOiBbeyB0YWc6ICJzcGFuIiwgY2hpbGRzOiBuIH1dLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJyaWdodC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNPdXRwdXQoKSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgIH0pLAogICAgKE5TdWJzeXN0ZW0ucHJvdG90eXBlLmRpc2FibGVUZXh0T25QaW5zID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciB0ID0gMCwgZSA9IHRoaXMucGlucy5sZW5ndGg7IHQgPCBlOyArK3QpCiAgICAgICAgbnVsbCA9PT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucGluc1t0XS5wcm9wcywgIlBpbkZyaWVuZGx5TmFtZSIpICYmCiAgICAgICAgICB0aGlzLnBpbnNbdF0uZGlzYWJsZVRleHQoKTsKICAgIH0pOwogIGZ1bmN0aW9uIE5WYXJpYWJsZUdldCgpIHsKICAgIFVOb2RlLmNhbGwodGhpcyk7CiAgfQogIChOVmFyaWFibGVHZXQucHJvdG90eXBlID0gbmV3IFVOb2RlKCkpLAogICAgKChOVmFyaWFibGVHZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0KICAgICAgTlZhcmlhYmxlR2V0KS5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMuZ2V0VmFyaWFibGVUeXBlKCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICBjbGFzc2VzOiBbIm5vZGUiLCAibnZhcmlhYmxlZ2V0IiwgZS5jb25uZWN0b3IsIGUudHlwZV0sCiAgICAgICAgYXR0cnM6IFsKICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgIHsgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdGhpcy5ndWlkIH0sCiAgICAgICAgXSwKICAgICAgICBjaGlsZHM6IFt0aGlzLmdlbmVyYXRlSFRNTFRvb2xUaXAoKSwgdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCldLAogICAgICB9OwogICAgfSksCiAgICAoTlZhcmlhYmxlR2V0LnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxCb2R5ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gewogICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgY2xhc3NlczogWyJib2R5Il0sCiAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicm91bmQtYmciXSB9LAogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICBjbGFzc2VzOiBbImxlZnQtY29sIl0sCiAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zSW5wdXQoKSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsicmlnaHQtY29sIl0sCiAgICAgICAgICAgIGNoaWxkczogdGhpcy5nZW5lcmF0ZUhUTUxQaW5zT3V0cHV0KCksCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH07CiAgICB9KSwKICAgIChOVmFyaWFibGVHZXQucHJvdG90eXBlLmdldFZhcmlhYmxlVHlwZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgZSA9IDAsIHQgPSB0aGlzLnBpbnMubGVuZ3RoOyBlIDwgdDsgKytlKQogICAgICAgIGlmICh0aGlzLnBpbnNbZV0uaXNPdXRwdXQoKSAmJiAhMSA9PT0gdGhpcy5waW5zW2VdLmlzRGVsZWdhdGVPdXRwdXQoKSkKICAgICAgICAgIHJldHVybiB0aGlzLnBpbnNbZV0uZ2V0Q29ubmVjdG9yVHlwZSgpOwogICAgICByZXR1cm4geyBjb25uZWN0b3I6ICJjb25uZWN0b3IiLCB0eXBlOiAib2JqZWN0IiB9OwogICAgfSk7CiAgZnVuY3Rpb24gTlZhcmlhYmxlU2V0KCkgewogICAgVU5vZGUuY2FsbCh0aGlzKTsKICB9CiAgKE5WYXJpYWJsZVNldC5wcm90b3R5cGUgPSBuZXcgVU5vZGUoKSksCiAgICAoKE5WYXJpYWJsZVNldC5wcm90b3R5cGUuY29uc3RydWN0b3IgPQogICAgICBOVmFyaWFibGVTZXQpLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlOwogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuZGlzYWJsZVRleHRPblBpbnMoKSwKICAgICAgICB7CiAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgY2xhc3NlczogWwogICAgICAgICAgICAibm9kZSIsCiAgICAgICAgICAgICJudmFyaWFibGVzZXQiLAogICAgICAgICAgICAoZSA9IHRoaXMuZ2V0VmFyaWFibGVUeXBlKCkpLmNvbm5lY3RvciwKICAgICAgICAgICAgZS50eXBlLAogICAgICAgICAgXSwKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsgbmFtZTogInN0eWxlIiwgdmFsdWU6IHRoaXMuZ2VuZXJhdGVDc3NOb2RlU3R5bGUoKS5qb2luKCI7IikgfSwKICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0aGlzLmd1aWQgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBjaGlsZHM6IFt0aGlzLmdlbmVyYXRlSFRNTFRvb2xUaXAoKSwgdGhpcy5nZW5lcmF0ZUhUTUxCb2R5KCldLAogICAgICAgIH0KICAgICAgKTsKICAgIH0pLAogICAgKE5WYXJpYWJsZVNldC5wcm90b3R5cGUuZ2VuZXJhdGVIVE1MQm9keSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSB0aGlzLmdldFZhcmlhYmxlVHlwZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgY2xhc3NlczogWyJib2R5Il0sCiAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicm91bmQtYmctY29sb3IiLCBlLmNvbm5lY3RvciwgZS50eXBlXSB9LAogICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbInJvdW5kLWJnIl0sIHRleHQ6ICJTRVQiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsibGVmdC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNJbnB1dCgpLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJyaWdodC1jb2wiXSwKICAgICAgICAgICAgY2hpbGRzOiB0aGlzLmdlbmVyYXRlSFRNTFBpbnNPdXRwdXQoKSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfTsKICAgIH0pLAogICAgKE5WYXJpYWJsZVNldC5wcm90b3R5cGUuZ2V0VmFyaWFibGVUeXBlID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBlID0gMCwgdCA9IHRoaXMucGlucy5sZW5ndGg7IGUgPCB0OyArK2UpCiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5waW5zW2VdLmlzT3V0cHV0KCkgJiYKICAgICAgICAgICExID09PSB0aGlzLnBpbnNbZV0uaXNEZWxlZ2F0ZU91dHB1dCgpICYmCiAgICAgICAgICAiZXhlYyIgIT09IHRoaXMucGluc1tlXS5nZXRQcm9wRnJvbVBpblR5cGUoIlBpbkNhdGVnb3J5IikudmFsdWUKICAgICAgICApCiAgICAgICAgICByZXR1cm4gdGhpcy5waW5zW2VdLmdldENvbm5lY3RvclR5cGUoKTsKICAgICAgcmV0dXJuIHsgY29ubmVjdG9yOiAiY29ubmVjdG9yIiwgdHlwZTogIm9iamVjdCIgfTsKICAgIH0pLAogICAgKE5WYXJpYWJsZVNldC5wcm90b3R5cGUuZGlzYWJsZVRleHRPblBpbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGUgPSAwLCB0ID0gdGhpcy5waW5zLmxlbmd0aDsgZSA8IHQ7ICsrZSkKICAgICAgICB0aGlzLnBpbnNbZV0uaXNPdXRwdXQoKSAmJgogICAgICAgICAgbnVsbCA9PT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucGluc1tlXS5wcm9wcywgIlBpbkZyaWVuZGx5TmFtZSIpICYmCiAgICAgICAgICB0aGlzLnBpbnNbZV0uZGlzYWJsZVRleHQoKTsKICAgIH0pOwogIGZ1bmN0aW9uIFBpbigpIHsKICAgICh0aGlzLnByb3BzID0gW10pLAogICAgICAodGhpcy5oYXNUb0dlbmVyYXRlVGV4dCA9ICEwKSwKICAgICAgKHRoaXMuaGFzVG9HZW5lcmF0ZUlucHV0ID0gITApLAogICAgICAodGhpcy5vdmVycmlkZSA9IHsgY29ubmVjdG9yVHlwZTogbnVsbCB9KSwKICAgICAgKHRoaXMuaXNCZWxvdzQxM1ZlcnNpb24gPSAhMSksCiAgICAgICh0aGlzLmlkID0gbnVsbCksCiAgICAgICh0aGlzLmlucHV0U2VsZWN0VmFsdWVzID0gW10pLAogICAgICAodGhpcy5pbnB1dFNlbGVjdERlZmF1bHRWYWx1ZSA9IDApOwogIH0KICAoUGluLnByb3RvdHlwZS5kaXNhYmxlVGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaGFzVG9HZW5lcmF0ZVRleHQgPSAhMTsKICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmVuYWJsZVRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuaGFzVG9HZW5lcmF0ZVRleHQgPSAhMDsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuZGlzYWJsZUlucHV0ID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmhhc1RvR2VuZXJhdGVJbnB1dCA9ICExOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5lbmFibGVJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5oYXNUb0dlbmVyYXRlSW5wdXQgPSAhMDsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuZGlzYWJsZVRleHRBbmRJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgKHRoaXMuaGFzVG9HZW5lcmF0ZVRleHQgPSAhMSksICh0aGlzLmhhc1RvR2VuZXJhdGVJbnB1dCA9ICExKTsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuZW5hYmxlVGV4dEFuZElucHV0ID0gZnVuY3Rpb24gKCkgewogICAgICAodGhpcy5oYXNUb0dlbmVyYXRlVGV4dCA9ICEwKSwgKHRoaXMuaGFzVG9HZW5lcmF0ZUlucHV0ID0gITApOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5hZGRQcm9wID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGUsCiAgICAgICAgYSA9IDA7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKQogICAgICAgIGZvciAoZSA9IHQubGVuZ3RoOyBhIDwgZTsgKythKQogICAgICAgICAgdFthXS5uYW1lICYmICJQaW5JZCIgPT09IHRbYV0ubmFtZSAmJiAodGhpcy5pZCA9IHRbYV0udmFsdWUpLAogICAgICAgICAgICB0aGlzLnByb3BzLnB1c2godFthXSk7CiAgICAgIGVsc2UKICAgICAgICB0Lm5hbWUgJiYgIlBpbklkIiA9PT0gdC5uYW1lICYmICh0aGlzLmlkID0gdC52YWx1ZSksIHRoaXMucHJvcHMucHVzaCh0KTsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuZ2V0TGlua3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0LAogICAgICAgIGUgPSBbXSwKICAgICAgICBhID0gMCwKICAgICAgICByID0gMDsKICAgICAgaWYgKHRoaXMuaXNCZWxvdzQxM1ZlcnNpb24pCiAgICAgICAgZm9yIChyID0gdGhpcy5wcm9wcy5sZW5ndGg7IGEgPCByOyArK2EpCiAgICAgICAgICAiTGlua2VkVG8oIiA9PT0gdGhpcy5wcm9wc1thXS5uYW1lLnN1YnN0cmluZygwLCA5KSAmJgogICAgICAgICAgICBlLnB1c2godGhpcy5wcm9wc1thXS52YWx1ZSk7CiAgICAgIGVsc2UgaWYgKAogICAgICAgIG51bGwgIT09ICh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJMaW5rZWRUbyIpKSAmJgogICAgICAgIEFycmF5LmlzQXJyYXkodC52YWx1ZSkKICAgICAgKQogICAgICAgIGZvciAociA9IHQudmFsdWUubGVuZ3RoOyBhIDwgcjsgKythKSBlLnB1c2godC52YWx1ZVthXS52YWx1ZSk7CiAgICAgIHJldHVybiBlOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5nZW5lcmF0ZVRleHRGb3JVbnJlYWwgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSwKICAgICAgICBhID0gW10sCiAgICAgICAgciA9IGdldEluZGVudEZvcm1hdCh0KSwKICAgICAgICBzID0gMCwKICAgICAgICBpID0gdGhpcy5wcm9wcy5sZW5ndGgsCiAgICAgICAgbiA9IFtdOwogICAgICBpZiAodGhpcy5pc0JlbG93NDEzVmVyc2lvbikgewogICAgICAgIGZvciAoCiAgICAgICAgICBlID0gZ2V0SW5kZW50Rm9ybWF0KHQgKyAxKSwKICAgICAgICAgICAgYS5wdXNoKHIgKyAnQmVnaW4gT2JqZWN0IE5hbWU9IicgKyB0aGlzLmlkICsgJyInKTsKICAgICAgICAgIHMgPCBpOwogICAgICAgICAgKytzCiAgICAgICAgKQogICAgICAgICAgYS5wdXNoKGUgKyBjb252ZXJ0UHJvcHNUb1RleHQodGhpcy5wcm9wc1tzXSkpOwogICAgICAgIGEucHVzaChyICsgIkVuZCBPYmplY3QiKSwgKGEgPSBhLmpvaW4oIlxuIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoYS5wdXNoKCJDdXN0b21Qcm9wZXJ0aWVzIFBpbiAoIik7IHMgPCBpOyArK3MpCiAgICAgICAgICBuLnB1c2goY29udmVydFByb3BzVG9UZXh0KHRoaXMucHJvcHNbc10pKTsKICAgICAgICBhLnB1c2gobi5qb2luKCIsIikpLCBhLnB1c2goIikiKSwgKGEgPSByICsgYS5qb2luKCIiKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGE7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmdlbmVyYXRlSFRNTCA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHZhciBhLAogICAgICAgIHIgPSAiIiwKICAgICAgICBzID0ge30sCiAgICAgICAgaSA9ICIiLAogICAgICAgIG4gPSAiIiwKICAgICAgICBsID0gbnVsbCwKICAgICAgICB1ID0gWyJsYWJlbC10ZXh0Il0sCiAgICAgICAgbyA9IG51bGwsCiAgICAgICAgYyA9IFtdLAogICAgICAgIHAgPSBudWxsLAogICAgICAgIGggPSBudWxsLAogICAgICAgIHYgPSBudWxsLAogICAgICAgIGcgPSAiIiwKICAgICAgICBmID0gIiIsCiAgICAgICAgeCA9IG51bGwsCiAgICAgICAgZCA9IG51bGwsCiAgICAgICAgbSA9IFtdLAogICAgICAgIFMgPSAwLAogICAgICAgIGIgPSBudWxsOwogICAgICBpZiAodGhpcy5pc0hpZGRlbigpKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKAogICAgICAgICh0aGlzLmhhc1RvSGlkZVBpbih0KSAmJiAociA9ICJoaWRkZW4iKSwKICAgICAgICAocyA9IHRoaXMuZ2V0Q29ubmVjdG9yVHlwZSgpKSwKICAgICAgICAiTktub3QiID09PSBlLmNvbnN0cnVjdG9yLm5hbWUgJiYgKHMuY29ubmVjdG9yID0gImNvbm5lY3RvciIpLAogICAgICAgIHRoaXMuaXNMaW5rZWRUbygpICYmIChpID0gImZpbGxlZCIpLAogICAgICAgICIiICE9PSBzLnR5cGUgJiYgKG4gPSBzLnR5cGUpLAogICAgICAgICh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKGUub2JqZWN0RGVmaW5pdGlvbiwgIk5hbWUiKSksCiAgICAgICAgdGhpcy5pc0RlbGVnYXRlT3V0cHV0KCkpCiAgICAgICkKICAgICAgICBsID0gewogICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgIGNsYXNzZXM6IFsicGluIiwgcl0sCiAgICAgICAgICBhdHRyczogW3sgbmFtZTogImRhdGEtaWQiLCB2YWx1ZTogdC52YWx1ZSArICIgIiArIHRoaXMuaWQgfV0sCiAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgIk5EZWxlZ2F0ZSIgPT09IGUuY29uc3RydWN0b3IubmFtZSAmJiB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbdV0sCiAgICAgICAgICAgICAgdGV4dDogIkV2ZW50IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbImNsaW5rIiwgcy5jb25uZWN0b3IsIHMudHlwZSwgaV0gfSwKICAgICAgICAgIF0sCiAgICAgICAgfTsKICAgICAgZWxzZSBpZiAodGhpcy5pc0lucHV0KCkpCiAgICAgICAgaWYgKAogICAgICAgICAgKG51bGwgIT09IChvID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5IikpICYmCiAgICAgICAgICAgICJEeW5hbWljQWRkUGluIiA9PT0gby52YWx1ZSAmJgogICAgICAgICAgICAoKHRoaXMuaGFzVG9HZW5lcmF0ZUlucHV0ID0gITEpLCB1LnB1c2goImljb24tcGx1cyIpKSwKICAgICAgICAgIG51bGwgIT09IChlID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIlBpbkNhdGVnb3J5IikpICYmCiAgICAgICAgICAgICJXYXZlVGFibGUiID09PSBlLnZhbHVlICYmCiAgICAgICAgICAgICh0aGlzLmhhc1RvR2VuZXJhdGVJbnB1dCA9ICExKSwKICAgICAgICAgIChjID0gW10pLAogICAgICAgICAgImNvbm5lY3Rvci1tYXAiID09PSBzLmNvbm5lY3RvciAmJgogICAgICAgICAgICAoKHYgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluVmFsdWVUeXBlIikpLAogICAgICAgICAgICAocCA9IHNlYXJjaFByb3BXaXRoTmFtZSh2LnZhbHVlLCAiVGVybWluYWxTdWJDYXRlZ29yeU9iamVjdCIpKSwKICAgICAgICAgICAgKGggPSB2LnZhbHVlWzBdLnZhbHVlKSwKICAgICAgICAgICAgbnVsbCAhPT0gcCAmJgogICAgICAgICAgICAgICgiL1NjcmlwdC9Db3JlVU9iamVjdC5TY3JpcHRTdHJ1Y3QnIiA9PT0KICAgICAgICAgICAgICAgIHAudmFsdWUuc3Vic3RyaW5nKDAsIDMzKSAmJiAocC52YWx1ZSA9IHAudmFsdWUuc3Vic3RyaW5nKDIwKSksCiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvciciID09PSBwLnZhbHVlIHx8CiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yXCInIiA9PT0gcC52YWx1ZSB8fAogICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5WZWN0b3IzZiciID09PSBwLnZhbHVlIHx8CiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yM2ZcIiciID09PSBwLnZhbHVlCiAgICAgICAgICAgICAgICA/IChoID0gInZlY3RvciIpCiAgICAgICAgICAgICAgICA6ICJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5Sb3RhdG9yJyIgPT09IHAudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvclwiJyIgPT09IHAudmFsdWUKICAgICAgICAgICAgICAgID8gKGggPSAicm90YXRvciIpCiAgICAgICAgICAgICAgICA6ICgiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuVHJhbnNmb3JtJyIgIT09IHAudmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9Db3JlVU9iamVjdC5UcmFuc2Zvcm1cIiciICE9PQogICAgICAgICAgICAgICAgICAgICAgcC52YWx1ZSkgfHwKICAgICAgICAgICAgICAgICAgKGggPSAidHJhbnNmb3JtIikpLAogICAgICAgICAgICAoYyA9IFsKICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsia2V5Iiwgcy50eXBlXSB9LAogICAgICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJ2YWx1ZSIsIGhdIH0sCiAgICAgICAgICAgIF0pKSwKICAgICAgICAgIChmID0gIiIpLAogICAgICAgICAgKHggPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiYklzUmVmZXJlbmNlIikpLAogICAgICAgICAgKGQgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiYklzQ29uc3QiKSksCiAgICAgICAgICBudWxsICE9PSB4ICYmCiAgICAgICAgICAgICJUcnVlIiA9PT0geC52YWx1ZSAmJgogICAgICAgICAgICBudWxsICE9PSBkICYmCiAgICAgICAgICAgICJGYWxzZSIgPT09IGQudmFsdWUgJiYKICAgICAgICAgICAgImRlbGVnYXRlIiAhPT0gcy50eXBlICYmCiAgICAgICAgICAgIChmID0gInJlZiIpLAogICAgICAgICAgKG0gPSB0aGlzLmdlbmVyYXRlSFRNTElucHV0KCkpLAogICAgICAgICAgKCJjb25uZWN0b3ItbWFwIiAhPT0gcy5jb25uZWN0b3IgJiYgInRyYW5zZm9ybSIgIT09IHMudHlwZSkgfHwKICAgICAgICAgICAgKG0gPSBbXSksCiAgICAgICAgICAoZSA9IHRoaXMuZmluZFRleHQoKSksCiAgICAgICAgICAobCA9IHsKICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgY2xhc3NlczogWyJwaW4iLCByXSwKICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJkYXRhLWlkIiwgdmFsdWU6IHQudmFsdWUgKyAiICIgKyB0aGlzLmlkIH1dLAogICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgY2xhc3NlczogWyJkaXYtaW5zaWRlIiwgbl0sCiAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJjbGluayIsIGYsIHMuY29ubmVjdG9yLCBzLnR5cGUsIGldLAogICAgICAgICAgICAgICAgICAgIGNoaWxkczogYywKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiB1LCB0ZXh0OiBlIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9KSwKICAgICAgICAgIHRoaXMuaGFzSW5wdXRTZWxlY3QoKSkKICAgICAgICApCiAgICAgICAgICAiIiAhPT0gZSAmJgogICAgICAgICAgICAobC5jaGlsZHNbMF0uY2hpbGRzWzFdLmNsYXNzZXMucHVzaCgic3BhY2UtaW5wdXQtc2VsZWN0IiksCiAgICAgICAgICAgIGwuY2hpbGRzWzBdLmNoaWxkcy5wdXNoKHsgdGFnOiAiYnIiIH0pKSwKICAgICAgICAgICAgbC5jaGlsZHNbMF0uY2hpbGRzLnB1c2godGhpcy5nZW5lcmF0ZUlucHV0U2VsZWN0KCkpOwogICAgICAgIGVsc2UgZm9yIChhID0gbS5sZW5ndGg7IFMgPCBhOyArK1MpIGwuY2hpbGRzWzBdLmNoaWxkcy5wdXNoKG1bU10pOwogICAgICBlbHNlCiAgICAgICAgdGhpcy5pc0V4ZWNPdXRwdXQoKSAmJiAoZyA9ICJuby1tYXJnaW4tYm90dG9tIiksCiAgICAgICAgICBudWxsICE9PSAobyA9IHRoaXMuZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5TdWJDYXRlZ29yeSIpKSAmJgogICAgICAgICAgICAiRHluYW1pY0FkZFBpbiIgPT09IG8udmFsdWUgJiYKICAgICAgICAgICAgKCh0aGlzLmhhc1RvR2VuZXJhdGVJbnB1dCA9ICExKSwgdS5wdXNoKCJpY29uLXBsdXMiKSksCiAgICAgICAgICAoYiA9IG51bGwpLAogICAgICAgICAgKGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlBpbkZyaWVuZGx5TmFtZSIpKSwKICAgICAgICAgIChiID0KICAgICAgICAgICAgKDAgPCBnLmxlbmd0aCAmJiBudWxsID09PSBlICYmIHRoaXMuZmluZFRleHQoKS5sZW5ndGgsCiAgICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogdSwgdGV4dDogdGhpcy5maW5kVGV4dCgpIH0pKSwKICAgICAgICAgIChjID0gW10pLAogICAgICAgICAgImNvbm5lY3Rvci1tYXAiID09PSBzLmNvbm5lY3RvciAmJgogICAgICAgICAgICAoKHYgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluVmFsdWVUeXBlIikpLAogICAgICAgICAgICAocCA9IHNlYXJjaFByb3BXaXRoTmFtZSh2LnZhbHVlLCAiVGVybWluYWxTdWJDYXRlZ29yeU9iamVjdCIpKSwKICAgICAgICAgICAgKGggPSB2LnZhbHVlWzBdLnZhbHVlKSwKICAgICAgICAgICAgbnVsbCAhPT0gcCAmJgogICAgICAgICAgICAgICgiL1NjcmlwdC9Db3JlVU9iamVjdC5TY3JpcHRTdHJ1Y3QnIiA9PT0KICAgICAgICAgICAgICAgIHAudmFsdWUuc3Vic3RyaW5nKDAsIDMzKSAmJiAocC52YWx1ZSA9IHAudmFsdWUuc3Vic3RyaW5nKDIwKSksCiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvciciID09PSBwLnZhbHVlIHx8CiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yXCInIiA9PT0gcC52YWx1ZSB8fAogICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5WZWN0b3IzZiciID09PSBwLnZhbHVlIHx8CiAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yM2ZcIiciID09PSBwLnZhbHVlCiAgICAgICAgICAgICAgICA/IChoID0gInZlY3RvciIpCiAgICAgICAgICAgICAgICA6ICJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5Sb3RhdG9yJyIgPT09IHAudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvclwiJyIgPT09IHAudmFsdWUKICAgICAgICAgICAgICAgID8gKGggPSAicm90YXRvciIpCiAgICAgICAgICAgICAgICA6ICgiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuVHJhbnNmb3JtJyIgIT09IHAudmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9Db3JlVU9iamVjdC5UcmFuc2Zvcm1cIiciICE9PQogICAgICAgICAgICAgICAgICAgICAgcC52YWx1ZSkgfHwKICAgICAgICAgICAgICAgICAgKGggPSAidHJhbnNmb3JtIikpLAogICAgICAgICAgICAoYyA9IFsKICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsia2V5Iiwgcy50eXBlXSB9LAogICAgICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJ2YWx1ZSIsIGhdIH0sCiAgICAgICAgICAgIF0pKSwKICAgICAgICAgIChmID0gIiIpLAogICAgICAgICAgKHggPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiYklzUmVmZXJlbmNlIikpLAogICAgICAgICAgKGQgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiYklzQ29uc3QiKSksCiAgICAgICAgICBudWxsICE9PSB4ICYmCiAgICAgICAgICAgICJUcnVlIiA9PT0geC52YWx1ZSAmJgogICAgICAgICAgICBudWxsICE9PSBkICYmCiAgICAgICAgICAgICJGYWxzZSIgPT09IGQudmFsdWUgJiYKICAgICAgICAgICAgImRlbGVnYXRlIiAhPT0gcy50eXBlICYmCiAgICAgICAgICAgIChmID0gInJlZiIpLAogICAgICAgICAgKGwgPSB7CiAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsicGluIiwgciwgZ10sCiAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiZGF0YS1pZCIsIHZhbHVlOiB0LnZhbHVlICsgIiAiICsgdGhpcy5pZCB9XSwKICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZGl2LWluc2lkZSIsIG5dLAogICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgIGIsCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiY2xpbmsiLCBmLCBzLmNvbm5lY3Rvciwgcy50eXBlLCBpXSwKICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IGMsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9KTsKICAgICAgcmV0dXJuIGw7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmdldENvbm5lY3RvclR5cGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0LAogICAgICAgIGUsCiAgICAgICAgYSA9ICJjb25uZWN0b3IiLAogICAgICAgIHIgPSBudWxsLAogICAgICAgIHMgPSBudWxsLAogICAgICAgIGkgPSAiIjsKICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMub3ZlcnJpZGUuY29ubmVjdG9yVHlwZQogICAgICAgID8gdGhpcy5vdmVycmlkZS5jb25uZWN0b3JUeXBlCiAgICAgICAgOiAoKHIgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluQ2F0ZWdvcnkiKSksCiAgICAgICAgICAodCA9IHRoaXMuZ2V0UHJvcEZyb21QaW5UeXBlKCJiSXNBcnJheSIpKSwKICAgICAgICAgIChzID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5T2JqZWN0IikpLAogICAgICAgICAgKGUgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiQ29udGFpbmVyVHlwZSIpKSwKICAgICAgICAgIG51bGwgPT09IHIKICAgICAgICAgICAgPyB7IGNvbm5lY3RvcjogYSwgdHlwZTogIiIgfQogICAgICAgICAgICA6ICgociA9IHIudmFsdWUudG9Mb3dlckNhc2UoKSksCiAgICAgICAgICAgICAgLTEgIT09IFsiZXhlYyJdLmluZGV4T2YoKGkgPSByKSkKICAgICAgICAgICAgICAgID8gKGEgPSAiY29ubmVjdG9yLWltYWdlIikKICAgICAgICAgICAgICAgIDogbnVsbCAhPT0gdCAmJiAiVHJ1ZSIgPT09IHQudmFsdWUKICAgICAgICAgICAgICAgID8gKGEgPSAiY29ubmVjdG9yLWFycmF5IikKICAgICAgICAgICAgICAgIDogbnVsbCAhPT0gZSAmJiAiU2V0IiA9PT0gZS52YWx1ZQogICAgICAgICAgICAgICAgPyAoYSA9ICJjb25uZWN0b3Itc2V0IikKICAgICAgICAgICAgICAgIDogbnVsbCAhPT0gZSAmJiAiTWFwIiA9PT0gZS52YWx1ZQogICAgICAgICAgICAgICAgPyAoYSA9ICJjb25uZWN0b3ItbWFwIikKICAgICAgICAgICAgICAgIDogbnVsbCAhPT0gZSAmJiAiQXJyYXkiID09PSBlLnZhbHVlCiAgICAgICAgICAgICAgICA/IChhID0gImNvbm5lY3Rvci1hcnJheSIpCiAgICAgICAgICAgICAgICA6ICJ0cmlnZ2VyIiA9PT0gaSAmJiAoYSA9ICJjb25uZWN0b3ItdHJpZ2dlciIpLAogICAgICAgICAgICAgICJzdGF0aWN0eXBlIiA9PT0gaSAmJgogICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJgogICAgICAgICAgICAgICAgKC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIk5pYWdhcmEuTmlhZ2FyYUludDMyIikKICAgICAgICAgICAgICAgICAgPyAoaSArPSAiLWludCIpCiAgICAgICAgICAgICAgICAgIDogLTEgIT09IHMudmFsdWUuaW5kZXhPZigiTmlhZ2FyYS5OaWFnYXJhQm9vbCIpICYmCiAgICAgICAgICAgICAgICAgICAgKGkgKz0gIi1ib29sIikpLAogICAgICAgICAgICAgICJzdHJ1Y3QiID09PSByCiAgICAgICAgICAgICAgICA/IChudWxsICE9PSBzICYmCiAgICAgICAgICAgICAgICAgICAgKCIvU2NyaXB0L0NvcmVVT2JqZWN0LlNjcmlwdFN0cnVjdCciID09PQogICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZS5zdWJzdHJpbmcoMCwgMzMpICYmCiAgICAgICAgICAgICAgICAgICAgICAocy52YWx1ZSA9IHMudmFsdWUuc3Vic3RyaW5nKDIwKSksCiAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvciciID09PSBzLnZhbHVlIHx8CiAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yM2YnIiA9PT0gcy52YWx1ZSB8fAogICAgICAgICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjNmXCInIiA9PT0gcy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgPyAoaSA9ICJ2ZWN0b3IiKQogICAgICAgICAgICAgICAgICAgICAgOiAiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvciciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvclwiJyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgPyAoaSA9ICJyb3RhdG9yIikKICAgICAgICAgICAgICAgICAgICAgIDogKCJTY3JpcHRTdHJ1Y3QnL1NjcmlwdC9Db3JlVU9iamVjdC5UcmFuc2Zvcm0nIiAhPT0KICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVHJhbnNmb3JtXCInIiAhPT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIChpID0gInRyYW5zZm9ybSIpKSwKICAgICAgICAgICAgICAgICAgeyBjb25uZWN0b3I6IGEsIHR5cGU6IGkgfSkKICAgICAgICAgICAgICAgIDogInR5cGUiID09PSByCiAgICAgICAgICAgICAgICA/IChudWxsICE9PSBzICYmCiAgICAgICAgICAgICAgICAgICAgKCIvU2NyaXB0L0NvcmVVT2JqZWN0LlNjcmlwdFN0cnVjdCciID09PQogICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZS5zdWJzdHJpbmcoMCwgMzMpICYmCiAgICAgICAgICAgICAgICAgICAgICAocy52YWx1ZSA9IHMudmFsdWUuc3Vic3RyaW5nKDIwKSksCiAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvTmlhZ2FyYS5OaWFnYXJhUGFyYW1ldGVyTWFwXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICBzLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICA/ICgoYSA9ICJjb25uZWN0b3ItaW1hZ2UiKSwgKGkgPSAiZXhlYyIpKQogICAgICAgICAgICAgICAgICAgICAgOiAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9OaWFnYXJhLk5pYWdhcmFGbG9hdFwiJyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgID8gKGkgPSAiZmxvYXQiKQogICAgICAgICAgICAgICAgICAgICAgOiAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9OaWFnYXJhLk5pYWdhcmFOdW1lcmljXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgPyAoaSA9ICJzdHJ1Y3QiKQogICAgICAgICAgICAgICAgICAgICAgOiAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9Db3JlVU9iamVjdC5WZWN0b3JcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yMmZcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yM2ZcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgID8gKGkgPSAidmVjdG9yIikKICAgICAgICAgICAgICAgICAgICAgIDogIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvTmlhZ2FyYS5OaWFnYXJhSW50MzJcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICBzLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICA/IChpID0gImludCIpCiAgICAgICAgICAgICAgICAgICAgICA6ICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L05pYWdhcmEuTmlhZ2FyYU1hdHJpeFwiJyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgID8gKGkgPSAic3RydWN0IikKICAgICAgICAgICAgICAgICAgICAgIDogIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvTmlhZ2FyYS5OaWFnYXJhQm9vbFwiJyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgID8gKGkgPSAiYm9vbCIpCiAgICAgICAgICAgICAgICAgICAgICA6ICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjJEXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZhbHVlIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjRcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yNGZcIiciID09PQogICAgICAgICAgICAgICAgICAgICAgICAgIHMudmFsdWUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuUXVhdDRmXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICA/IChpID0gInN0cnVjdCIpCiAgICAgICAgICAgICAgICAgICAgICA6ICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L05pYWdhcmEuTmlhZ2FyYVBvc2l0aW9uXCInIiA9PT0KICAgICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgPyAoaSA9ICJwb3NpdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgICA6ICgiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9FbmdpbmUuVXNlckRlZmluZWRFbnVtXCInIiAhPT0KICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuTGluZWFyQ29sb3JcIiciICE9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSAiZW51bSIpKSwKICAgICAgICAgICAgICAgICAgeyBjb25uZWN0b3I6IGEsIHR5cGU6IGkgfSkKICAgICAgICAgICAgICAgIDogKCJjbGFzcyIgPT09IHIgJiYgKGkgPSAid2lsZGNhcmQiKSwKICAgICAgICAgICAgICAgICAgIm1pc2MiID09PSByICYmIChpID0gIndpbGRjYXJkIiksCiAgICAgICAgICAgICAgICAgICJhc3NldGNsYXNzIiA9PT0gciAmJiAoaSA9ICJhc3NldC1jbGFzcyIpLAogICAgICAgICAgICAgICAgICAic29mdGNsYXNzIiA9PT0gciAmJiAoaSA9ICJzb2Z0LWNsYXNzIiksCiAgICAgICAgICAgICAgICAgICJzb2Z0b2JqZWN0IiA9PT0gciAmJiAoaSA9ICJzb2Z0LW9iamVjdCIpLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yOiBhLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IChpID0gKGkgPQogICAgICAgICAgICAgICAgICAgICAgImludDMyIiA9PT0KICAgICAgICAgICAgICAgICAgICAgIChpID0KICAgICAgICAgICAgICAgICAgICAgICAgImZsb2F0IiA9PT0gKGkgPSAidGltZTphcnJheSIgPT09IHIgPyAidGltZSIgOiBpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5IikpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICJ0aW1lIiA9PT0gdC52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgID8gInRpbWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpKQogICAgICAgICAgICAgICAgICAgICAgICA/ICJpbnQiCiAgICAgICAgICAgICAgICAgICAgICAgIDogaSkucmVwbGFjZUFsbCgiICIsICItIikpLAogICAgICAgICAgICAgICAgICB9KSkpOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5pc0xpbmtlZFRvID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5pc0JlbG93NDEzVmVyc2lvbgogICAgICAgID8gbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJMaW5rZWRUbygwKSIpCiAgICAgICAgOiBudWxsICE9PSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkxpbmtlZFRvIik7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmZpbmRUZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCwKICAgICAgICBlLAogICAgICAgIGEgPSAiIiwKICAgICAgICByID0gbnVsbDsKICAgICAgaWYgKCExID09PSB0aGlzLmhhc1RvR2VuZXJhdGVUZXh0KSByZXR1cm4gYTsKICAgICAgaWYgKAogICAgICAgIG51bGwgIT09ICh0ID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIlBpblN1YkNhdGVnb3J5IikpICYmCiAgICAgICAgIkR5bmFtaWNBZGRQaW4iID09PSB0LnZhbHVlCiAgICAgICkKICAgICAgICByZXR1cm4gYTsKICAgICAgaWYgKAogICAgICAgICgociA9IHRoaXMuZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5DYXRlZ29yeSIpKSwKICAgICAgICAodCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiUGluRnJpZW5kbHlOYW1lIikpLAogICAgICAgIG51bGwgIT09IChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJQaW5OYW1lIikpICYmCiAgICAgICAgICBudWxsID09PSB0ICYmCiAgICAgICAgICAoInRoZW4iID09PSBlLnZhbHVlIHx8ICJleGVjdXRlIiA9PT0gZS52YWx1ZSB8fCAiZXhlYyIgPT09IGUudmFsdWUpKQogICAgICApCiAgICAgICAgcmV0dXJuIGE7CiAgICAgIGlmIChudWxsID09PSByKQogICAgICAgIHJldHVybiAoYSA9CiAgICAgICAgICBudWxsID09PSB0CiAgICAgICAgICAgID8gdHJhbnNmb3JtSW50ZXJuYWxOYW1lKGUudmFsdWUpCiAgICAgICAgICAgIDogZm9ybWF0VGV4dEwxMW5Gcm9tUHJvcCh0KSk7CiAgICAgIGlmIChudWxsICE9PSB0KSBhID0gZm9ybWF0VGV4dEwxMW5Gcm9tUHJvcCh0KTsKICAgICAgZWxzZSBpZiAobnVsbCAhPT0gZSkgewogICAgICAgIGlmICgidHJpZ2dlciIgPT09ICh0ID0gci52YWx1ZS50b0xvd2VyQ2FzZSgpKSkgewogICAgICAgICAgaWYgKCJVRS5Tb3VyY2UuT25QbGF5IiA9PT0gZS52YWx1ZSkgcmV0dXJuICJPbiBQbGF5IjsKICAgICAgICAgIGlmICgiVUUuU291cmNlLk9uZVNob3QuT25GaW5pc2hlZCIgPT09IGUudmFsdWUpIHJldHVybiAiT24gRmluaXNoZWQiOwogICAgICAgIH0KICAgICAgICBpZiAoImF1ZGlvIiA9PT0gdCAmJiAiVUUuT3V0cHV0Rm9ybWF0Lk1vbm8uQXVkaW86MCIgPT09IGUudmFsdWUpCiAgICAgICAgICByZXR1cm4gIk91dCBNb25vIjsKICAgICAgICAidGhlbiIgIT09IGUudmFsdWUgJiYKICAgICAgICAgICJleGVjdXRlIiAhPT0gZS52YWx1ZSAmJgogICAgICAgICAgKChhID0gZS52YWx1ZSksCiAgICAgICAgICAiYm9vbCIgPT09IHQgJiYgYS5tYXRjaCgvXltiXVtBLVpdLykgJiYgKGEgPSBhLnN1YnN0cmluZygxKSksCiAgICAgICAgICAoYSA9IHRyYW5zZm9ybUludGVybmFsTmFtZShhKSkpOwogICAgICB9CiAgICAgIHJldHVybiB1Y2ZpcnN0KGEpOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5nZW5lcmF0ZUhUTUxJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQsCiAgICAgICAgZSA9IFtdLAogICAgICAgIGEgPSBudWxsLAogICAgICAgIHIgPSBudWxsLAogICAgICAgIHMgPSBudWxsLAogICAgICAgIGkgPSAiIiwKICAgICAgICBuID0gWyJleGVjIiwgImRlbGVnYXRlIiwgInRyaWdnZXIiLCAiYXVkaW8iXSwKICAgICAgICBsID0gIkFzc2V0IiwKICAgICAgICB1ID0gIiIsCiAgICAgICAgbyA9IFtdLAogICAgICAgIGMgPSBbXSwKICAgICAgICBwID0gMCwKICAgICAgICBoID0gMDsKICAgICAgaWYgKCExID09PSB0aGlzLmhhc1RvR2VuZXJhdGVJbnB1dCkgcmV0dXJuIGU7CiAgICAgIGlmICh0aGlzLmlzTGlua2VkVG8oKSkgcmV0dXJuIGU7CiAgICAgIGlmICgKICAgICAgICAoKHIgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluQ2F0ZWdvcnkiKSksCiAgICAgICAgKHQgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluU3ViQ2F0ZWdvcnkiKSksCiAgICAgICAgbnVsbCAhPT0gKHMgPSB0aGlzLmdldFByb3BGcm9tUGluVHlwZSgiUGluU3ViQ2F0ZWdvcnlPYmplY3QiKSkgJiYKICAgICAgICAgICIvU2NyaXB0L0NvcmVVT2JqZWN0LlNjcmlwdFN0cnVjdCciID09PSBzLnZhbHVlLnN1YnN0cmluZygwLCAzMykgJiYKICAgICAgICAgIChzLnZhbHVlID0gcy52YWx1ZS5zdWJzdHJpbmcoMjApKSwKICAgICAgICAoaSA9ICIiKSwKICAgICAgICB0aGlzLmlzTGlua2VkVG8oKSAmJiAoaSA9ICJoaWRkZW4iKSwKICAgICAgICAociA9IHIudmFsdWUudG9Mb3dlckNhc2UoKSksCiAgICAgICAgLTEgIT09IG4uaW5kZXhPZihyKSkKICAgICAgKQogICAgICAgIHJldHVybiBlOwogICAgICBpZiAoLTEgIT09IChuID0gWyJkZWxlZ2F0ZSJdKS5pbmRleE9mKHIpKQogICAgICAgIHJldHVybiB7IHRhZzogInNwYW4iLCBjbGFzc2VzOiBbIm5vLWlucHV0Il0gfTsKICAgICAgaWYgKAogICAgICAgIG51bGwgIT09IChuID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoImJJc0FycmF5IikpICYmCiAgICAgICAgIlRydWUiID09PSBuLnZhbHVlCiAgICAgICkKICAgICAgICByZXR1cm4gW3sgdGFnOiAic3BhbiIsIGNsYXNzZXM6IFsibm8taW5wdXQiXSB9XTsKICAgICAgaWYgKAogICAgICAgIG51bGwgIT09IChuID0gdGhpcy5nZXRQcm9wRnJvbVBpblR5cGUoIkNvbnRhaW5lclR5cGUiKSkgJiYKICAgICAgICAiQXJyYXkiID09PSBuLnZhbHVlCiAgICAgICkKICAgICAgICBlID0gW3sgdGFnOiAic3BhbiIsIGNsYXNzZXM6IFsibm8taW5wdXQiXSB9XTsKICAgICAgZWxzZSBpZiAoImJvb2wiID09PSByKQogICAgICAgIChlID0gWwogICAgICAgICAgewogICAgICAgICAgICB0YWc6ICJpbnB1dCIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsiY2hlY2tib3giLCBpXSwKICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICB7IG5hbWU6ICJ0eXBlIiwgdmFsdWU6ICJjaGVja2JveCIgfSwKICAgICAgICAgICAgICB7IG5hbWU6ICJ2YWx1ZSIsIHZhbHVlOiAiMSIgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgXSksCiAgICAgICAgICAidHJ1ZSIgPT09IHRoaXMuZ2V0VmFsdWUoKSAmJgogICAgICAgICAgICBlWzBdLmF0dHJzLnB1c2goeyBuYW1lOiAiY2hlY2tlZCIsIHZhbHVlOiAiY2hlY2tlZCIgfSk7CiAgICAgIGVsc2UgaWYgKCJzdHJ1Y3QiID09PSByKQogICAgICAgIGlmICgKICAgICAgICAgIG51bGwgPT09IHMgfHwKICAgICAgICAgICgiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuTGluZWFyQ29sb3InIiAhPT0gcy52YWx1ZSAmJgogICAgICAgICAgICAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9Db3JlVU9iamVjdC5MaW5lYXJDb2xvclwiJyIgIT09IHMudmFsdWUpCiAgICAgICAgKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIG51bGwgIT09IHMgJiYKICAgICAgICAgICAgLTEgIT09IHMudmFsdWUuaW5kZXhPZigiL1NjcmlwdC9FbmhhbmNlZElucHV0Lk1vZGlmeUNvbnRleHRPcHRpb25zIikKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIFt7IHRhZzogInNwYW4iLCBjbGFzc2VzOiBbIm5vLWlucHV0Il0gfV07CiAgICAgICAgICBlID0KICAgICAgICAgICAgbnVsbCA9PT0gcyB8fAogICAgICAgICAgICAoIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjJEJyIgIT09IHMudmFsdWUgJiYKICAgICAgICAgICAgICAiU2NyaXB0U3RydWN0J1wiL1NjcmlwdC9Db3JlVU9iamVjdC5WZWN0b3IyRFwiJyIgIT09IHMudmFsdWUpCiAgICAgICAgICAgICAgPyBudWxsID09PSBzIHx8CiAgICAgICAgICAgICAgICAoIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvciciICE9PSBzLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICJTY3JpcHRTdHJ1Y3QnXCIvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvclwiJyIgIT09IHMudmFsdWUgJiYKICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCcvU2NyaXB0L0NvcmVVT2JqZWN0LlZlY3RvcjNmJyIgIT09IHMudmFsdWUgJiYKICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuVmVjdG9yM2ZcIiciICE9PSBzLnZhbHVlKQogICAgICAgICAgICAgICAgPyBudWxsID09PSBzIHx8CiAgICAgICAgICAgICAgICAgICgiU2NyaXB0U3RydWN0Jy9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvciciICE9PSBzLnZhbHVlICYmCiAgICAgICAgICAgICAgICAgICAgIlNjcmlwdFN0cnVjdCdcIi9TY3JpcHQvQ29yZVVPYmplY3QuUm90YXRvclwiJyIgIT09IHMudmFsdWUpCiAgICAgICAgICAgICAgICAgID8gWwogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRWYWx1ZSgpLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgIDogKCIiID09PSAoYSA9IHRoaXMuZ2V0VmFsdWUoKSkgJiYgKGEgPSAiMC4wLDAuMCwwLjAiKSwKICAgICAgICAgICAgICAgICAgICAwIDwgdGhpcy5maW5kVGV4dCgpLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsidHJpLWlucHV0LXdyYXBwZXIiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1YIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnNwbGl0KCIsIilbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1ZIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnNwbGl0KCIsIilbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1aIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnNwbGl0KCIsIilbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICA6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVkiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYS5zcGxpdCgiLCIpWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1aIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGEuc3BsaXQoIiwiKVsxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgIDogKCIiID09PSAoYSA9IHRoaXMuZ2V0VmFsdWUoKSkgJiYgKGEgPSAiMC4wLDAuMCwwLjAiKSwKICAgICAgICAgICAgICAgICAgMCA8IHRoaXMuZmluZFRleHQoKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICA/IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsidHJpLWlucHV0LXdyYXBwZXIiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWSIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWiIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIDogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1YIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYS5zcGxpdCgiLCIpWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWSIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGEuc3BsaXQoIiwiKVsxXSksCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVoiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMl0pLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICA6ICgoYSA9CiAgICAgICAgICAgICAgICAgICIiID09PSB0aGlzLmdldFZhbHVlKCkKICAgICAgICAgICAgICAgICAgICA/IFt7IHZhbHVlOiAiMC4wIiB9LCB7IHZhbHVlOiAiMC4wIiB9XQogICAgICAgICAgICAgICAgICAgIDogY29udmVydFRleHRUb1Byb3BzKHRoaXMuZ2V0VmFsdWUoKSkpLAogICAgICAgICAgICAgICAgMCA8IHRoaXMuZmluZFRleHQoKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJ0cmktaW5wdXQtd3JhcHBlciIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzBdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1ZIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGFbMV0udmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgOiBbCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVgiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGFbMF0udmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWSIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYVsxXS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgIH0gZWxzZQogICAgICAgICAgZSA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dC1jb2xvcnBpY2tlciIsIGldLAogICAgICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJzdHlsZSIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOgogICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yOiAiICsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRDb2xvclRvUmdiYUNzc0Zyb21WYWx1ZSgpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9LAogICAgICAgICAgXTsKICAgICAgZWxzZSBpZiAoIm9iamVjdCIgPT09IHIgfHwgImNsYXNzIiA9PT0gcikKICAgICAgICBlID0KICAgICAgICAgICExID09PSB0aGlzLmhhc1ZhbHVlKCkgJiYgITEgPT09IHRoaXMuaGFzT2JqZWN0KCkKICAgICAgICAgICAgPyBbeyB0YWc6ICJzcGFuIiwgY2xhc3NlczogWyJuby1pbnB1dCJdIH1dCiAgICAgICAgICAgIDogbnVsbCAhPT0gdCAmJiAic2VsZiIgPT09IHQudmFsdWUKICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCBpXSwKICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogImZhbHNlIiB9XSwKICAgICAgICAgICAgICAgICAgdGV4dDogInNlbGYiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdCiAgICAgICAgICAgIDogKChsID0gIkFzc2V0IiksCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dC1zZWxlY3QiLCBpXSwKICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiB0aGlzLmdldE9iamVjdCgobCA9ICJjbGFzcyIgPT09IHIgPyAiQ2xhc3MiIDogbCkpIH0sCiAgICAgICAgICAgICAgICAgICAgeyB0YWc6ICJzcGFuIiwgY2xhc3NlczogWyJkcm9wZG93biJdIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeyB0YWc6ICJzcGFuIiwgY2xhc3NlczogWyJhc3NldC1icm93c2VyIiwgaV0gfSwKICAgICAgICAgICAgICAgIHsgdGFnOiAic3BhbiIsIGNsYXNzZXM6IFsiYnJvd3NlIiwgaV0gfSwKICAgICAgICAgICAgICBdKTsKICAgICAgZWxzZSBpZiAoInR5cGUiID09PSByKSB7CiAgICAgICAgaWYgKG51bGwgIT09IHMpCiAgICAgICAgICBpZiAoLTEgIT09IHMudmFsdWUuaW5kZXhPZigiTmlhZ2FyYS5OaWFnYXJhQm9vbCIpKQogICAgICAgICAgICAoZSA9IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0YWc6ICJpbnB1dCIsCiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImNoZWNrYm94IiwgaV0sCiAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICB7IG5hbWU6ICJ0eXBlIiwgdmFsdWU6ICJjaGVja2JveCIgfSwKICAgICAgICAgICAgICAgICAgeyBuYW1lOiAidmFsdWUiLCB2YWx1ZTogIjEiIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICAgICJ0cnVlIiA9PT0gdGhpcy5nZXRWYWx1ZSgpICYmCiAgICAgICAgICAgICAgICBlWzBdLmF0dHJzLnB1c2goeyBuYW1lOiAiY2hlY2tlZCIsIHZhbHVlOiAiY2hlY2tlZCIgfSk7CiAgICAgICAgICBlbHNlIGlmICgKICAgICAgICAgICAgLTEgIT09IHMudmFsdWUuaW5kZXhPZigiVmVjdG9yM2YiKSB8fAogICAgICAgICAgICAtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJOaWFnYXJhUG9zaXRpb24iKQogICAgICAgICAgKQogICAgICAgICAgICAiIiA9PT0gKGEgPSB0aGlzLmdldFZhbHVlKCkpICYmIChhID0gIjAuMCwwLjAsMC4wIiksCiAgICAgICAgICAgICAgKGUgPQogICAgICAgICAgICAgICAgMCA8IHRoaXMuZmluZFRleHQoKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJ0cmktaW5wdXQtd3JhcHBlciIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVkiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYS5zcGxpdCgiLCIpWzFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1aIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGEuc3BsaXQoIiwiKVsyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICA6IFsKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYS5zcGxpdCgiLCIpWzBdKSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVkiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGEuc3BsaXQoIiwiKVsxXSksCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1aIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhLnNwbGl0KCIsIilbMl0pLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgIGVsc2UgaWYgKC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIlZlY3RvcjJmIikpCiAgICAgICAgICAgIChhID0KICAgICAgICAgICAgICAiIiA9PT0gdGhpcy5nZXRWYWx1ZSgpCiAgICAgICAgICAgICAgICA/IFt7IHZhbHVlOiAiMC4wIiB9LCB7IHZhbHVlOiAiMC4wIiB9XQogICAgICAgICAgICAgICAgOiBjb252ZXJ0VGV4dFRvUHJvcHMoCiAgICAgICAgICAgICAgICAgICAgIigiICsgdGhpcy5nZXRWYWx1ZSgpLnJlcGxhY2UoIiAiLCAiLCIpICsgIikiCiAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgIChlID0KICAgICAgICAgICAgICAgIDAgPCB0aGlzLmZpbmRUZXh0KCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgID8gWwogICAgICAgICAgICAgICAgICAgICAgeyB0YWc6ICJiciIgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsidHJpLWlucHV0LXdyYXBwZXIiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVgiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYVswXS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWSIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzFdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgIDogWwogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1YIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzBdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVkiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGFbMV0udmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgIGVsc2UgaWYgKC0xICE9PSBzLnZhbHVlLmluZGV4T2YoIlZlY3RvcjRmIikpCiAgICAgICAgICAgIChhID0KICAgICAgICAgICAgICAiIiA9PT0gdGhpcy5nZXRWYWx1ZSgpCiAgICAgICAgICAgICAgICA/IFsKICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAiMC4wIiB9LAogICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICIwLjAiIH0sCiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogIjAuMCIgfSwKICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAiMC4wIiB9LAogICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICA6IGNvbnZlcnRUZXh0VG9Qcm9wcygKICAgICAgICAgICAgICAgICAgICAiKCIgKyB0aGlzLmdldFZhbHVlKCkucmVwbGFjZSgiICIsICIsIikgKyAiKSIKICAgICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgKGUgPQogICAgICAgICAgICAgICAgMCA8IHRoaXMuZmluZFRleHQoKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICAgICAgICB7IHRhZzogImJyIiB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJ0cmktaW5wdXQtd3JhcHBlciIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWCIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzBdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1ZIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGFbMV0udmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVoiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYVsyXS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtVyIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzNdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgIDogWwogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1YIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzBdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCAiYXhpcyIsICJheGlzLVkiLCBpXSwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmb3JtYXRBeGlzVmFsdWVGb3JEaXNwbGF5KGFbMV0udmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsICJheGlzIiwgImF4aXMtWiIsIGldLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdEF4aXNWYWx1ZUZvckRpc3BsYXkoYVsyXS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0IiwgImF4aXMiLCAiYXhpcy1XIiwgaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiY29udGVudGVkaXRhYmxlIiwgdmFsdWU6ICJ0cnVlIiB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0QXhpc1ZhbHVlRm9yRGlzcGxheShhWzNdLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICBlbHNlIGlmICgtMSAhPT0gcy52YWx1ZS5pbmRleE9mKCJDb3JlVU9iamVjdC5MaW5lYXJDb2xvciIpKQogICAgICAgICAgICBlID0gWwogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgY2xhc3NlczogWyJmYWtlLWlucHV0LWNvbG9ycGlja2VyIiwgaV0sCiAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogInN0eWxlIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yOiAiICsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydENvbG9yVG9SZ2JhQ3NzRnJvbVZhbHVlKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF07CiAgICAgICAgICBlbHNlIGlmICgKICAgICAgICAgICAgLTEgPT09IHMudmFsdWUuaW5kZXhPZigiUXVhdDRmIikgJiYKICAgICAgICAgICAgLTEgPT09IHMudmFsdWUuaW5kZXhPZigiTmlhZ2FyYS5OaWFnYXJhTWF0cml4IikKICAgICAgICAgICkKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgodSA9IHRoaXMuZ2V0VmFsdWUoKSksCiAgICAgICAgICAgICAgLTEgPT09CiAgICAgICAgICAgICAgICAodSA9CiAgICAgICAgICAgICAgICAgIC0xID09PSBzLnZhbHVlLmluZGV4T2YoIk5pYWdhcmEuTmlhZ2FyYUludDMyIikgJiYKICAgICAgICAgICAgICAgICAgLTEgPT09IHMudmFsdWUuaW5kZXhPZigiTmlhZ2FyYS5OaWFnYXJhRmxvYXQiKQogICAgICAgICAgICAgICAgICAgID8gdQogICAgICAgICAgICAgICAgICAgIDogdS5yZXBsYWNlKC8oXC5cZCs/KTArXGIvLCAiJDEiKSkuaW5kZXhPZigiPGJyPiIpKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgZSA9IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsIGldLAogICAgICAgICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgICAgICAgIHRleHQ6IHUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF07CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGZvciAobyA9IFtdLCBoID0gKGMgPSB1LnNwbGl0KCI8YnI+IikpLmxlbmd0aDsgcCA8IGg7ICsrcCkKICAgICAgICAgICAgICAgIG8ucHVzaCh7IHRleHQ6IGNbcF0gfSksCiAgICAgICAgICAgICAgICAgIHAgKyAxIDwgYy5sZW5ndGggJiYgby5wdXNoKHsgdGFnOiAiYnIiIH0pOwogICAgICAgICAgICAgIGUgPSBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCBpXSwKICAgICAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICAgICAgICBjaGlsZHM6IG8sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF07CiAgICAgICAgICAgIH0KICAgICAgfSBlbHNlIGlmICgKICAgICAgICAoKHUgPSB0aGlzLmdldFZhbHVlKCkpLAogICAgICAgICIiID09PQogICAgICAgICAgKHUgPQogICAgICAgICAgICAiZmxvYXQiICE9PSByICYmCiAgICAgICAgICAgICJkb3VibGUiICE9PSByICYmCiAgICAgICAgICAgICJyZWFsIiAhPT0gciAmJgogICAgICAgICAgICAidGltZSIgIT09IHIgJiYKICAgICAgICAgICAgImludDMyIiAhPT0gcgogICAgICAgICAgICAgID8gdQogICAgICAgICAgICAgIDogdS5yZXBsYWNlKC8oXC5cZCs/KTArXGIvLCAiJDEiKSkgJiYKICAgICAgICAgICgiaW50MzIiID09PSByIHx8ICJpbnQiID09PSByCiAgICAgICAgICAgID8gKHUgPSAiMCIpCiAgICAgICAgICAgIDogKCJmbG9hdCIgIT09IHIgJiYKICAgICAgICAgICAgICAgICJkb3VibGUiICE9PSByICYmCiAgICAgICAgICAgICAgICAicmVhbCIgIT09IHIgJiYKICAgICAgICAgICAgICAgICJ0aW1lIiAhPT0gcikgfHwKICAgICAgICAgICAgICAodSA9ICIwLjAiKSksCiAgICAgICAgLTEgPT09IHUuaW5kZXhPZigiPGJyPiIpKQogICAgICApCiAgICAgICAgZSA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgIGNsYXNzZXM6IFsiZmFrZS1pbnB1dCIsIGldLAogICAgICAgICAgICBhdHRyczogW3sgbmFtZTogImNvbnRlbnRlZGl0YWJsZSIsIHZhbHVlOiAidHJ1ZSIgfV0sCiAgICAgICAgICAgIHRleHQ6IHUsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgIGVsc2UgewogICAgICAgIGZvciAobyA9IFtdLCBoID0gKGMgPSB1LnNwbGl0KCI8YnI+IikpLmxlbmd0aDsgcCA8IGg7ICsrcCkKICAgICAgICAgIG8ucHVzaCh7IHRleHQ6IGNbcF0gfSksIHAgKyAxIDwgYy5sZW5ndGggJiYgby5wdXNoKHsgdGFnOiAiYnIiIH0pOwogICAgICAgIGUgPSBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhZzogInNwYW4iLAogICAgICAgICAgICBjbGFzc2VzOiBbImZha2UtaW5wdXQiLCBpXSwKICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjb250ZW50ZWRpdGFibGUiLCB2YWx1ZTogInRydWUiIH1dLAogICAgICAgICAgICBjaGlsZHM6IG8sCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgIH0KICAgICAgcmV0dXJuIGU7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWZhdWx0VmFsdWUiKTsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuaGFzT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbnVsbCAhPT0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWZhdWx0T2JqZWN0Iik7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmdldE9iamVjdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWZhdWx0T2JqZWN0Iik7CiAgICAgIHJldHVybiBudWxsICE9PSBlID8gZ2V0TGFzdFBhcnRBc3NldChubDJicihlLnZhbHVlKSkgOiAiU2VsZWN0ICIgKyB0OwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSBudWxsLAogICAgICAgIGUgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkRlZmF1bHRWYWx1ZSIpOwogICAgICByZXR1cm4gbnVsbCAhPT0gZQogICAgICAgID8gbmwyYnIoZS52YWx1ZSkKICAgICAgICA6IG51bGwgIT09ICh0ID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJEZWZhdWx0VGV4dFZhbHVlIikpCiAgICAgICAgPyAiSU5WVEVYVCIgPT09IHQudmFsdWUKICAgICAgICAgID8gdC52YWx1ZS5zdWJzdHJpbmcoMTApLnN1YnN0cmluZygwLCB0LnZhbHVlLmxlbmd0aCAtIDEzKQogICAgICAgICAgOiBubDJicihmb3JtYXRUZXh0TDExbkZyb21Qcm9wKHQpKQogICAgICAgIDogIiI7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLmNvbnZlcnRDb2xvclRvUmdiYUNzc0Zyb21WYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQsCiAgICAgICAgZSwKICAgICAgICBhID0gdGhpcy5nZXRWYWx1ZSgpLAogICAgICAgIHIgPSBbXTsKICAgICAgcmV0dXJuIDAgPCBhLmxlbmd0aAogICAgICAgID8gKChhID0gKHIgPSBhLnNwbGl0KCIsIikpWzBdLnN1YnN0cigzKSksCiAgICAgICAgICAodCA9IHJbMV0uc3Vic3RyKDIpKSwKICAgICAgICAgIChlID0gclsyXS5zdWJzdHIoMikpLAogICAgICAgICAgKHIgPSByWzNdLnN1YnN0cigyLCByWzNdLmxlbmd0aCAtIDMpKSwKICAgICAgICAgICJyZ2JhKCIgKwogICAgICAgICAgICBmbG9hdDJkZWMoYSkgKwogICAgICAgICAgICAiLCIgKwogICAgICAgICAgICBmbG9hdDJkZWModCkgKwogICAgICAgICAgICAiLCIgKwogICAgICAgICAgICBmbG9hdDJkZWMoZSkgKwogICAgICAgICAgICAiLCIgKwogICAgICAgICAgICByICsKICAgICAgICAgICAgIikiKQogICAgICAgIDogInJnYmEoMCwwLDAsMSkiOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5pc0hpZGRlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgImJIaWRkZW4iKTsKICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgIlRydWUiID09PSB0LnZhbHVlOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5oYXNUb0hpZGVQaW4gPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZTsKICAgICAgcmV0dXJuICgKICAgICAgICAhdCAmJgogICAgICAgICgodCA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiYkFkdmFuY2VkVmlldyIpKSwKICAgICAgICAoZSA9IHNlYXJjaFByb3BXaXRoTmFtZSh0aGlzLnByb3BzLCAiTGlua2VkVG8iKSksCiAgICAgICAgbnVsbCAhPT0gdCAmJiAiVHJ1ZSIgPT09IHQudmFsdWUgJiYgbnVsbCA9PT0gZSkKICAgICAgKTsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuaXNJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkRpcmVjdGlvbiIpOwogICAgICByZXR1cm4gbnVsbCA9PT0gdCB8fCAiRUdQRF9PdXRwdXQiICE9PSB0LnZhbHVlOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5pc091dHB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIkRpcmVjdGlvbiIpOwogICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAiRUdQRF9PdXRwdXQiID09PSB0LnZhbHVlOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5pc0RlbGVnYXRlT3V0cHV0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9IHRoaXMuZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5DYXRlZ29yeSIpOwogICAgICByZXR1cm4gdGhpcy5pc091dHB1dCgpICYmIG51bGwgIT09IHQgJiYgImRlbGVnYXRlIiA9PT0gdC52YWx1ZTsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuaXNFeGVjT3V0cHV0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9IHRoaXMuZ2V0UHJvcEZyb21QaW5UeXBlKCJQaW5DYXRlZ29yeSIpOwogICAgICByZXR1cm4gdGhpcy5pc091dHB1dCgpICYmIG51bGwgIT09IHQgJiYgImV4ZWMiID09PSB0LnZhbHVlOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5nZXRQcm9wRnJvbVBpblR5cGUgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZTsKICAgICAgcmV0dXJuIHRoaXMuaXNCZWxvdzQxM1ZlcnNpb24KICAgICAgICA/IG51bGwgPT09IChlID0gc2VhcmNoUHJvcFdpdGhOYW1lKHRoaXMucHJvcHMsICJQaW5UeXBlIikpCiAgICAgICAgICA/IG51bGwKICAgICAgICAgIDogc2VhcmNoUHJvcFdpdGhOYW1lKGUudmFsdWUsIHQpCiAgICAgICAgOiBzZWFyY2hQcm9wV2l0aE5hbWUodGhpcy5wcm9wcywgIlBpblR5cGUuIiArIHQpOwogICAgfSksCiAgICAoUGluLnByb3RvdHlwZS5oYXNJbnB1dFNlbGVjdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIDAgPCB0aGlzLmlucHV0U2VsZWN0VmFsdWVzLmxlbmd0aDsKICAgIH0pLAogICAgKFBpbi5wcm90b3R5cGUuZ2VuZXJhdGVJbnB1dFNlbGVjdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSB7CiAgICAgICAgICB0YWc6ICJzZWxlY3QiLAogICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJjbGFzcyIsIHZhbHVlOiAibm1ldGFzb3VuZC1zZWxlY3QiIH1dLAogICAgICAgICAgY2hpbGRzOiBbXSwKICAgICAgICB9LAogICAgICAgIGUgPSAwLAogICAgICAgIGEgPSB0aGlzLmlucHV0U2VsZWN0VmFsdWVzLmxlbmd0aCwKICAgICAgICByID0gbnVsbCwKICAgICAgICBzID0gdGhpcy5nZXRWYWx1ZSgpOwogICAgICBmb3IgKCIiID09PSBzICYmIChzID0gdGhpcy5pbnB1dFNlbGVjdERlZmF1bHRWYWx1ZSk7IGUgPCBhOyArK2UpCiAgICAgICAgKHIgPSBbeyBuYW1lOiAidmFsdWUiLCB2YWx1ZTogdGhpcy5pbnB1dFNlbGVjdFZhbHVlc1tlXS52YWx1ZSB9XSksCiAgICAgICAgICB0aGlzLmlucHV0U2VsZWN0VmFsdWVzW2VdLnZhbHVlID09PSBzICYmCiAgICAgICAgICAgIHIucHVzaCh7IG5hbWU6ICJzZWxlY3RlZCIsIHZhbHVlOiAic2VsZWN0ZWQiIH0pLAogICAgICAgICAgdC5jaGlsZHMucHVzaCh7CiAgICAgICAgICAgIHRhZzogIm9wdGlvbiIsCiAgICAgICAgICAgIHRleHQ6IHRoaXMuaW5wdXRTZWxlY3RWYWx1ZXNbZV0ubmFtZSwKICAgICAgICAgICAgYXR0cnM6IHIsCiAgICAgICAgICB9KTsKICAgICAgcmV0dXJuIHQ7CiAgICB9KSwKICAgIChQaW4ucHJvdG90eXBlLnNldElucHV0U2VsZWN0VmFsdWVzID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgKHRoaXMuaW5wdXRTZWxlY3RWYWx1ZXMgPSB0KSwgKHRoaXMuaW5wdXRTZWxlY3REZWZhdWx0VmFsdWUgPSBlKTsKICAgIH0pOwogIGZ1bmN0aW9uIFVwZGF0ZXIodCwgZSkgewogICAgcmV0dXJuICJvYmplY3QiICE9IHR5cGVvZiB0CiAgICAgID8gbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJBcmd1bWVudCAnb3B0aW9ucycgaXMgaW5jb3JyZWN0LCBleHBlY3Qgb2JqZWN0LCBnZXQgIiArIHR5cGVvZiB0CiAgICAgICAgKQogICAgICA6IGUgaW5zdGFuY2VvZiBCdXMKICAgICAgPyAoKHRoaXMuZGF0YSA9IHsgb3B0aW9uczogdCB9KSwgdm9pZCAodGhpcy5idXMgPSBlKSkKICAgICAgOiBuZXcgVHlwZUVycm9yKCJCdXMgYXJndW1lbnQgbXVzdCBiZSBpbnN0YW5jZSBvZiBCdXMiKTsKICB9CiAgKFVwZGF0ZXIucHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbiAoKSB7fSksCiAgICAoVXBkYXRlci5wcm90b3R5cGUuYmx1ZXByaW50ID0gZnVuY3Rpb24gKCkge30pLAogICAgKFVwZGF0ZXIucHJvdG90eXBlLmNwcCA9IGZ1bmN0aW9uICgpIHt9KTsKICBmdW5jdGlvbiBpc0lFKCkgewogICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHJldHVybiAoCiAgICAgICh0LmlubmVySFRNTCA9ICJceDNjIS0tW2lmIGx0ZSBJRSA3XT4xPCFbZW5kaWZdLS1ceDNlIiksCiAgICAgICIxIiA9PT0gdC5pbm5lckhUTUwgfHwKICAgICAgICAtMSAhPT0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9VcHBlckNhc2UoKS5pbmRleE9mKCJUUklERU5UIikgfHwKICAgICAgICAtMSAhPT0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9VcHBlckNhc2UoKS5pbmRleE9mKCJNU0lFIikKICAgICk7CiAgfQogIGZ1bmN0aW9uIGNvcnJlY3Rpb25XaWR0aCh0KSB7CiAgICByZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoImNvbm5lY3Rvci1pbWFnZSIpID8gNSA6IDY7CiAgfQogIGZ1bmN0aW9uIGNvcnJlY3Rpb25IZWlnaHQodCkgewogICAgcmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJjb25uZWN0b3ItaW1hZ2UiKSA/IDcgOiA2OwogIH0KICBmdW5jdGlvbiBnZXRMaW5rQ29sb3IodCkgewogICAgZm9yICgKICAgICAgdmFyIGUgPSBbCiAgICAgICAgICB7IGNzczogImFzc2V0IiwgY29sb3I6ICI5NUZGRkYiIH0sCiAgICAgICAgICB7IGNzczogImFzc2V0LWNsYXNzIiwgY29sb3I6ICJGRjk1RkYiIH0sCiAgICAgICAgICB7IGNzczogImJvb2wiLCBjb2xvcjogIjk1MDAwMCIgfSwKICAgICAgICAgIHsgY3NzOiAiYnl0ZSIsIGNvbG9yOiAiMDA2RjY1IiB9LAogICAgICAgICAgeyBjc3M6ICJjbGFzcyIsIGNvbG9yOiAiNTkwMEJDIiB9LAogICAgICAgICAgeyBjc3M6ICJkZWZhdWx0IiwgY29sb3I6ICJFMUNDQUEiIH0sCiAgICAgICAgICB7IGNzczogImRlbGVnYXRlIiwgY29sb3I6ICJGRjM4MzgiIH0sCiAgICAgICAgICB7IGNzczogImV4ZWMiLCBjb2xvcjogIkZGRkZGRiIgfSwKICAgICAgICAgIHsgY3NzOiAiZmxvYXQiLCBjb2xvcjogIkExRkY0NSIgfSwKICAgICAgICAgIHsgY3NzOiAiaW5kZXgiLCBjb2xvcjogIjFFRTRBRiIgfSwKICAgICAgICAgIHsgY3NzOiAiaW50IiwgY29sb3I6ICIxRUU0QUYiIH0sCiAgICAgICAgICB7IGNzczogImludGVyZmFjZSIsIGNvbG9yOiAiRjFGRkFBIiB9LAogICAgICAgICAgeyBjc3M6ICJuYW1lIiwgY29sb3I6ICJDRDgyRkYiIH0sCiAgICAgICAgICB7IGNzczogIm9iamVjdCIsIGNvbG9yOiAiMDBBQUY1IiB9LAogICAgICAgICAgeyBjc3M6ICJyb3RhdG9yIiwgY29sb3I6ICJBMUI0RkYiIH0sCiAgICAgICAgICB7IGNzczogInN0cmluZyIsIGNvbG9yOiAiRkYwMEQ1IiB9LAogICAgICAgICAgeyBjc3M6ICJzdHJ1Y3QiLCBjb2xvcjogIjAwNTlDQyIgfSwKICAgICAgICAgIHsgY3NzOiAidGV4dCIsIGNvbG9yOiAiRTg3Q0FBIiB9LAogICAgICAgICAgeyBjc3M6ICJ0cmFuc2Zvcm0iLCBjb2xvcjogIkZGNzMwMCIgfSwKICAgICAgICAgIHsgY3NzOiAidmVjdG9yIiwgY29sb3I6ICJGRkNBMjIiIH0sCiAgICAgICAgICB7IGNzczogIndpbGRjYXJkIiwgY29sb3I6ICI4MTdBN0EiIH0sCiAgICAgICAgICB7IGNzczogImF1ZGlvIiwgY29sb3I6ICJGRDk0RkQiIH0sCiAgICAgICAgICB7IGNzczogInRpbWUiLCBjb2xvcjogIjk1RkVGRSIgfSwKICAgICAgICAgIHsgY3NzOiAid2F2ZXRhYmxlIiwgY29sb3I6ICJDODAwRUIiIH0sCiAgICAgICAgICB7IGNzczogInJlYWwiLCBjb2xvcjogIjM4RDUwMCIgfSwKICAgICAgICAgIHsgY3NzOiAicGNnLXNwYXRpYWwtZGF0YSIsIGNvbG9yOiAiRkZGRkZGIiB9LAogICAgICAgICAgeyBjc3M6ICJwY2ctYXR0cmlidXRlLXNldCIsIGNvbG9yOiAiQzg4MTFDIiB9LAogICAgICAgICAgeyBjc3M6ICJwY2ctcG9pbnQtZGF0YSIsIGNvbG9yOiAiM0Y4OUZGIiB9LAogICAgICAgICAgeyBjc3M6ICJwY2ctcG9seS1saW5lLWRhdGEiLCBjb2xvcjogIjNGRTFFQSIgfSwKICAgICAgICAgIHsgY3NzOiAicGNnLWxhbmRzY2FwZS1kYXRhIiwgY29sb3I6ICJENEQ0NEIiIH0sCiAgICAgICAgICB7IGNzczogInBjZy10ZXh0dXJlLWRhdGEiLCBjb2xvcjogIkU2NTAxOSIgfSwKICAgICAgICAgIHsgY3NzOiAicGNnLXJlbmRlci10YXJnZXQtZGF0YSIsIGNvbG9yOiAiRTc3NjYxIiB9LAogICAgICAgICAgeyBjc3M6ICJwY2ctc3VyZmFjZS1kYXRhIiwgY29sb3I6ICI0NUM0N0UiIH0sCiAgICAgICAgICB7IGNzczogInBjZy12b2x1bWUtZGF0YSIsIGNvbG9yOiAiRTY0NUJDIiB9LAogICAgICAgICAgeyBjc3M6ICJwY2ctcHJpbWl0aXZlLWRhdGEiLCBjb2xvcjogIjgxM0ZGRiIgfSwKICAgICAgICAgIHsgY3NzOiAicGNnLWNvbmNyZXRlLWRhdGEiLCBjb2xvcjogIkIzQTZGQSIgfSwKICAgICAgICAgIHsgY3NzOiAicGNnLWFueS1kYXRhIiwgY29sb3I6ICI5MzkzOTMiIH0sCiAgICAgICAgXSwKICAgICAgICBvID0gMCwKICAgICAgICBhID0gZS5sZW5ndGg7CiAgICAgIG8gPCBhOwogICAgICArK28KICAgICkKICAgICAgaWYgKHQuY2xhc3NMaXN0LmNvbnRhaW5zKGVbb10uY3NzKSkgcmV0dXJuIGVbb10uY29sb3I7CiAgICByZXR1cm4gIkZGRkZGRiI7CiAgfQogIGZ1bmN0aW9uIEVudmlyb25tZW50KHQsIGUsIG8pIHsKICAgICh0aGlzLmRvbSA9IHsgY2FudmFzOiBudWxsLCBmcmFtZTogbnVsbCwgb3ZlcmxheTogbnVsbCwgcm9vdDogdCB9KSwKICAgICAgKHRoaXMub3B0aW9ucyA9IGUpLAogICAgICAodGhpcy5idXMgPSBvKSwKICAgICAgKHRoaXMuZXZlbnRzQmluZGluZyA9IHsKICAgICAgICBkcmF3TmV3TGluazogdGhpcy5kcmF3TmV3TGluay5iaW5kKHRoaXMpLAogICAgICAgIG1vdmVMaW5rOiB0aGlzLm1vdmVMaW5rLmJpbmQodGhpcyksCiAgICAgICAgbmV3TGluazogdGhpcy5uZXdMaW5rLmJpbmQodGhpcyksCiAgICAgIH0pLAogICAgICB0aGlzLmJ1cy5saXN0ZW4oImRyYXdfbmV3X2xpbmsiLCB0aGlzLmRyYXdOZXdMaW5rLmJpbmQodGhpcykpLAogICAgICB0aGlzLmJ1cy5saXN0ZW4oIm1vdmVfbGluayIsIHRoaXMubW92ZUxpbmsuYmluZCh0aGlzKSksCiAgICAgIHRoaXMuYnVzLmxpc3RlbigibmV3X2xpbmsiLCB0aGlzLm5ld0xpbmsuYmluZCh0aGlzKSk7CiAgfQogIChFbnZpcm9ubWVudC5wcm90b3R5cGUuY3JlYXRlUGxheWdyb3VuZCA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgZSA9IFtdLAogICAgICBvID0gIkNSRUFURSBQTEFZR1JPVU5ELi4uIjsKICAgIHJldHVybiAoCiAgICAgIHRoaXMub3B0aW9ucy5oZWlnaHQgJiYgZS5wdXNoKCJoZWlnaHQ6IiArIHRoaXMub3B0aW9ucy5oZWlnaHQpLAogICAgICBpc0lFKCkgJiYKICAgICAgICAobyA9CiAgICAgICAgICAiVGhpcyB3ZWJzaXRlIHN0b3Agc3VwcG9ydGluZyBJbnRlcm5ldCBFeHBsb3JlciBmcm9tIHZlcnNpb24gNS41IHRvIDExLCBjb25zZXF1ZW50bHkgeW91IGhhdmUgdG8gdXNlIGEgbW9kZXJuIGJyb3dzZXIuIiksCiAgICAgIChlID0gY3JlYXRlRWxlbXMoWwogICAgICAgIHsKICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICBjbGFzc2VzOiBbImJ1ZS1yZW5kZXIiXSwKICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICBjbGFzc2VzOiBbImZyYW1lIl0sCiAgICAgICAgICAgICAgYXR0cnM6IFt7IG5hbWU6ICJzdHlsZSIsIHZhbHVlOiBlLmpvaW4oIjsiKSB9XSwKICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJsYXllciJdLAogICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicmVmZXJlbmNlIl0gfSwKICAgICAgICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsiY2FudmFzIl0gfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZnJhbWUtaGVhZGVyIl0sCiAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbImZyYW1lLWhlYWRlcl9fYnV0dG9ucyJdLAogICAgICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZnJhbWUtaGVhZGVyX19idXR0b25zLWZ1bGxzY3JlZW4iXSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiRnVsbHNjcmVlbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZnJhbWUtaGVhZGVyX19idXR0b25zLXJlc2V0Il0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIlJlc2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWIiXSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAic3BhbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJmcmFtZS1oZWFkZXJfX2JyZWFkY3J1bWItaXRlbSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbeyBuYW1lOiAiZGF0YS1ub2RlLWlkIiwgdmFsdWU6ICIiIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJHcmFwaCIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsiZnJhbWUtaGVhZGVyX19jdXJyZW50LXpvb20iXSwKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJab29tIDE6MSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsiYmx1ZXByaW50LXR5cGUiXSwgdGV4dDogdCB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbInBhbmVsIl0sCiAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJkYXRhLWZlYXR1cmUtcGFuZWwiLCB2YWx1ZTogImRlYnVnLWluZm9zIiB9LAogICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAibGFiZWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsicGFuZWxfX2J1dHRvbiJdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJpbnB1dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAidHlwZSIsIHZhbHVlOiAiY2hlY2tib3giIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRhdGEtZmVhdHVyZS1wYW5lbC1jaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiZGF0YS1mZWF0dXJlLXBhbmVsLW5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJkZWJ1Zy1pbmZvcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRleHQ6ICJTaG93IERlYnVnIEluZm9ybWF0aW9ucyIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicGFuZWxfX2luZm9zIl0gfSwKICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1mZWF0dXJlLXBhbmVsIiwgdmFsdWU6ICJyZWFkLXdyaXRlIiB9LAogICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAibGFiZWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsicGFuZWxfX2J1dHRvbiJdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJpbnB1dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAidHlwZSIsIHZhbHVlOiAiY2hlY2tib3giIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRhdGEtZmVhdHVyZS1wYW5lbC1jaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiZGF0YS1mZWF0dXJlLXBhbmVsLW5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJyZWFkLXdyaXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogIkVuYWJsZSBXcml0ZSBNb2RlIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdGFnOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogImRhdGEtZmVhdHVyZS1wYW5lbCIsIHZhbHVlOiAibXVsdGktdXNlcnMiIH0sCiAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJsYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWyJwYW5lbF9fYnV0dG9uIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogImlucHV0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJ0eXBlIiwgdmFsdWU6ICJjaGVja2JveCIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiZGF0YS1mZWF0dXJlLXBhbmVsLWNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJkYXRhLWZlYXR1cmUtcGFuZWwtbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm11bHRpLXVzZXJzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogIkVuYWJsZSBNdWx0aSBVc2VycyIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHRhZzogImRpdiIsIGNsYXNzZXM6IFsicGFuZWxfX2luZm9zIl0sIHRleHQ6ICJzb29uIiB9LAogICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRhZzogImRpdiIsCiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJkYXRhLWZlYXR1cmUtcGFuZWwiLCB2YWx1ZTogIm1hdGVyaWFsLXZpeiIgfSwKICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogImxhYmVsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbInBhbmVsX19idXR0b24iXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAiaW5wdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogInR5cGUiLCB2YWx1ZTogImNoZWNrYm94IiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJkYXRhLWZlYXR1cmUtcGFuZWwtY2hlY2tib3giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRhdGEtZmVhdHVyZS1wYW5lbC1uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAibWF0ZXJpYWwtdml6IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogIkVuYWJsZSBNYXRlcmlhbCBWaXoiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbInBhbmVsX19pbmZvcyJdLCB0ZXh0OiAic29vbiIgfSwKICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB0YWc6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiZGF0YS1mZWF0dXJlLXBhbmVsIiwgdmFsdWU6ICJhbm5vdGF0aW9ucyIgfSwKICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogImxhYmVsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbInBhbmVsX19idXR0b24iXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAiaW5wdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogInR5cGUiLCB2YWx1ZTogImNoZWNrYm94IiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJkYXRhLWZlYXR1cmUtcGFuZWwtY2hlY2tib3giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogImRhdGEtZmVhdHVyZS1wYW5lbC1uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiYW5ub3RhdGlvbnMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAiRW5hYmxlIEFubm90YXRpb25zIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdGFnOiAiZGl2IiwgY2xhc3NlczogWyJwYW5lbF9faW5mb3MiXSwgdGV4dDogInNvb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeyB0YWc6ICJkaXYiLCBjbGFzc2VzOiBbIm92ZXJsYXkiXSwgdGV4dDogbyB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgIF0pKSwKICAgICAgdGhpcy5kb20ucm9vdC5hcHBlbmRDaGlsZChlWzBdKSwKICAgICAgKHRoaXMuZG9tLmZyYW1lID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIuZnJhbWUiKSksCiAgICAgICh0aGlzLmRvbS5jYW52YXMgPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoIi5jYW52YXMiKSksCiAgICAgICh0aGlzLmRvbS5vdmVybGF5ID0gdGhpcy5kb20ucm9vdC5xdWVyeVNlbGVjdG9yKCIub3ZlcmxheSIpKSwKICAgICAgIWlzSUUoKQogICAgKTsKICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuY2xlYW5WaWV3cG9ydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgdCA9IHRoaXMuZG9tLmNhbnZhcy5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IDAgPD0gdDsgLS10KQogICAgICAgIHRoaXMuZG9tLmNhbnZhcy5jaGlsZE5vZGVzW3RdLnJlbW92ZSgpOwogICAgfSksCiAgICAoRW52aXJvbm1lbnQucHJvdG90eXBlLmRpc3BsYXlOb2Rlc0luVmlld3BvcnQgPSBmdW5jdGlvbiAoZSkgewogICAgICBmb3IgKAogICAgICAgIHZhciB0LCBvID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCBhID0gMCwgbiA9IGUubGVuZ3RoOwogICAgICAgIGEgPCBuOwogICAgICAgICsrYQogICAgICApCiAgICAgICAgdHJ5IHsKICAgICAgICAgICh0ID0gZVthXS5nZW5lcmF0ZUhUTUwoKSksIG8uYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbXMoW3RdKVswXSk7CiAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgdGhyb3cgKAogICAgICAgICAgICAoZVthXS5ndWlkCiAgICAgICAgICAgICAgPyAoKHQubWVzc2FnZSA9ICJOb2RlR1VJRCAiICsgZVthXS5ndWlkICsgIjogIiArIHQubWVzc2FnZSksCiAgICAgICAgICAgICAgICAodC5Ob2RlR1VJRCA9IGVbYV0uZ3VpZCkpCiAgICAgICAgICAgICAgOiAoKHQubWVzc2FnZSA9ICJOb2RlICMiICsgYSArICI6ICIgKyB0Lm1lc3NhZ2UpLAogICAgICAgICAgICAgICAgKHQuTm9kZUlkeCA9IGEpKSwKICAgICAgICAgICAgdCkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB0aGlzLmRvbS5jYW52YXMuYXBwZW5kQ2hpbGQobyk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuZ2V0Q2VudGVyQ2FudmFzID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9IHRoaXMuZG9tLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgcmV0dXJuIFsodC53aWR0aCAvIDIpID4+IDAsICh0LmhlaWdodCAvIDIpID4+IDBdOwogICAgfSksCiAgICAoRW52aXJvbm1lbnQucHJvdG90eXBlLmNvbXB1dGVTVkdMaW5rID0gZnVuY3Rpb24gKHQsIGUsIG8pIHsKICAgICAgdmFyIGEgPSBudWxsLAogICAgICAgIG4gPSBudWxsLAogICAgICAgIHMgPSAwLAogICAgICAgIGkgPSAwLAogICAgICAgIHIgPSB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGwgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGMgPSB0aGlzLmRvbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgciA9IHsgdG9wOiByLnRvcCArIHdpbmRvdy5zY3JvbGxZLCBsZWZ0OiByLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCB9LAogICAgICAgIGwgPSB7IHRvcDogbC50b3AgKyB3aW5kb3cuc2Nyb2xsWSwgbGVmdDogbC5sZWZ0ICsgd2luZG93LnNjcm9sbFggfSwKICAgICAgICBkID0gdGhpcy5kb20uY2FudmFzLm9mZnNldFRvcCwKICAgICAgICB1ID0gdGhpcy5kb20uY2FudmFzLm9mZnNldExlZnQsCiAgICAgICAgcCA9IGMudG9wICsgd2luZG93LnNjcm9sbFksCiAgICAgICAgYyA9IGMubGVmdCArIHdpbmRvdy5zY3JvbGxYOwogICAgICByZXR1cm4gKAogICAgICAgIChyLnRvcCAtPSBkICsgcCksCiAgICAgICAgKHIubGVmdCAtPSB1ICsgYyksCiAgICAgICAgKGwudG9wIC09IGQgKyBwKSwKICAgICAgICAobC5sZWZ0IC09IHUgKyBjKSwKICAgICAgICAoZCA9IGNvcnJlY3Rpb25XaWR0aCh0KSksCiAgICAgICAgKHAgPSBjb3JyZWN0aW9uSGVpZ2h0KHQpKSwKICAgICAgICAodSA9IE1hdGgubWluKHIubGVmdCwgbC5sZWZ0KSArIGQpLAogICAgICAgIChjID0gTWF0aC5taW4oci50b3AsIGwudG9wKSArIHApLAogICAgICAgIDAgPT09CiAgICAgICAgICAocyA9IChNYXRoLm1heChyLmxlZnQsIGwubGVmdCkgLSBNYXRoLm1pbihyLmxlZnQsIGwubGVmdCkpID4+IDApICYmCiAgICAgICAgICAocyA9IDIpLAogICAgICAgIDAgPT09IChpID0gKE1hdGgubWF4KHIudG9wLCBsLnRvcCkgLSBNYXRoLm1pbihyLnRvcCwgbC50b3ApKSA+PiAwKSAmJgogICAgICAgICAgKGkgPSAyKSwKICAgICAgICAoZCA9IGdldFN2Z1BhdGgociwgbCwgcywgaSkpLAogICAgICAgIChkID0gY29ycmVjdFN2Z1BhdGhGb3JLbm90KGQsIHQsIGUsIHIsIGwsIHMsIGkpKSwKICAgICAgICAoYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygKICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgICAgICAic3ZnIgogICAgICAgICkpLmNsYXNzTGlzdC5hZGQoImxpbmsiKSwKICAgICAgICBhLnNldEF0dHJpYnV0ZSgiZGF0YS1pZCIsIG8pLAogICAgICAgIGEuc2V0QXR0cmlidXRlKAogICAgICAgICAgInN0eWxlIiwKICAgICAgICAgICJ0cmFuc2Zvcm06IHRyYW5zbGF0ZSgiICsgdSArICJweCwgIiArIGMgKyAicHgpIgogICAgICAgICksCiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoIndpZHRoIiwgcyksCiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIGkpLAogICAgICAgIGEuc2V0QXR0cmlidXRlKCJwb2ludGVyLWV2ZW50cyIsICJub25lIiksCiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoInBvc2l0aW9uIiwgImFic29sdXRlIiksCiAgICAgICAgKG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoCiAgICAgICAgICAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICAgICAgInBhdGgiCiAgICAgICAgKSkuc2V0QXR0cmlidXRlKCJkIiwgZCksCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsICIiKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgicG9pbnRlci1ldmVudHMiLCAidmlzaWJsZVN0cm9rZSIpLAogICAgICAgIG4uc2V0QXR0cmlidXRlKCJmaWxsIiwgIm5vbmUiKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgic3Ryb2tlIiwgIiMiICsgZ2V0TGlua0NvbG9yKHQpKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiIiksCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoInN0cm9rZS13aWR0aCIsICIyIiksCiAgICAgICAgYS5hcHBlbmRDaGlsZChuKSwKICAgICAgICBhCiAgICAgICk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuZHJhd0xpbmtzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgZm9yICgKICAgICAgICB2YXIgZSwKICAgICAgICAgIG8sCiAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLAogICAgICAgICAgbiA9IHRoaXMuZG9tLmNhbnZhcy5xdWVyeVNlbGVjdG9yQWxsKCIucGluIC5jbGluay5maWxsZWQiKSwKICAgICAgICAgIHMgPSB7fSwKICAgICAgICAgIGkgPSAwLAogICAgICAgICAgciA9IG4ubGVuZ3RoLAogICAgICAgICAgbCA9IDAsCiAgICAgICAgICBjID0gdC5sZW5ndGg7CiAgICAgICAgaSA8IHI7CiAgICAgICAgKytpCiAgICAgICkKICAgICAgICBzW25baV0uY2xvc2VzdCgiLnBpbiIpLmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpXSA9IG5baV07CiAgICAgIGZvciAoOyBsIDwgYzsgKytsKQogICAgICAgIChlID0gc1sobyA9IHRbbF0uc3BsaXQoIiwiKSlbMF1dIHx8IG51bGwpLAogICAgICAgICAgKG8gPSBzW29bMV1dIHx8IG51bGwpLAogICAgICAgICAgbnVsbCAhPT0gZSAmJgogICAgICAgICAgICBudWxsICE9PSBvICYmCiAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQodGhpcy5jb21wdXRlU1ZHTGluayhlLCBvLCB0W2xdKSk7CiAgICAgIHRoaXMuZG9tLmNhbnZhcy5hcHBlbmRDaGlsZChhKTsKICAgIH0pLAogICAgKEVudmlyb25tZW50LnByb3RvdHlwZS5yZURyYXdMaW5rcyA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIG8sCiAgICAgICAgICBhLAogICAgICAgICAgbiwKICAgICAgICAgIHMsCiAgICAgICAgICBpID0gMCwKICAgICAgICAgIHIgPSB0Lmxlbmd0aCwKICAgICAgICAgIGwgPSBudWxsLAogICAgICAgICAgYyA9IG51bGwsCiAgICAgICAgICBkID0gbnVsbCwKICAgICAgICAgIHUgPSB0aGlzLmRvbS5mcmFtZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICAgIHAgPSB7fSwKICAgICAgICAgIG0gPSB7fSwKICAgICAgICAgIGggPSAwLAogICAgICAgICAgZyA9IDA7CiAgICAgICAgaSA8IHI7CiAgICAgICAgKytpCiAgICAgICkKICAgICAgICAoYSA9IHRbaV0uc3BsaXQoIiwiKSksCiAgICAgICAgICAobCA9IHRoaXMuZG9tLmNhbnZhcy5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAnLnBpbltkYXRhLWlkPSInICsgYVswXSArICciXSAuY2xpbmsnCiAgICAgICAgICApKSwKICAgICAgICAgIChjID0gdGhpcy5kb20uY2FudmFzLnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAgICcucGluW2RhdGEtaWQ9IicgKyBhWzFdICsgJyJdIC5jbGluaycKICAgICAgICAgICkpLAogICAgICAgICAgKGQgPSB0aGlzLmRvbS5jYW52YXMucXVlcnlTZWxlY3Rvcignc3ZnW2RhdGEtaWQ9IicgKyB0W2ldICsgJyJdJykpLAogICAgICAgICAgbnVsbCAhPT0gbCAmJgogICAgICAgICAgICBudWxsICE9PSBjICYmCiAgICAgICAgICAgIG51bGwgIT09IGQgJiYKICAgICAgICAgICAgKChhID0gewogICAgICAgICAgICAgIHRvcDogdGhpcy5kb20uY2FudmFzLm9mZnNldFRvcCwKICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmRvbS5jYW52YXMub2Zmc2V0TGVmdCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChzID0gbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksCiAgICAgICAgICAgIChvID0gYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksCiAgICAgICAgICAgIChuID0gewogICAgICAgICAgICAgIHRvcDogdS50b3AgKyB3aW5kb3cuc2Nyb2xsWSwKICAgICAgICAgICAgICBsZWZ0OiB1LmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChwID0gewogICAgICAgICAgICAgIHRvcDogcy50b3AgKyB3aW5kb3cuc2Nyb2xsWSwKICAgICAgICAgICAgICBsZWZ0OiBzLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChtID0gewogICAgICAgICAgICAgIHRvcDogby50b3AgKyB3aW5kb3cuc2Nyb2xsWSwKICAgICAgICAgICAgICBsZWZ0OiBvLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChwLnRvcCAtPSBhLnRvcCArIG4udG9wKSwKICAgICAgICAgICAgKHAubGVmdCAtPSBhLmxlZnQgKyBuLmxlZnQpLAogICAgICAgICAgICAobS50b3AgLT0gYS50b3AgKyBuLnRvcCksCiAgICAgICAgICAgIChtLmxlZnQgLT0gYS5sZWZ0ICsgbi5sZWZ0KSwKICAgICAgICAgICAgKHMgPSBjb3JyZWN0aW9uV2lkdGgobCkpLAogICAgICAgICAgICAobyA9IGNvcnJlY3Rpb25IZWlnaHQobCkpLAogICAgICAgICAgICAoYSA9IE1hdGgubWluKHAubGVmdCwgbS5sZWZ0KSArIHMpLAogICAgICAgICAgICAobiA9IE1hdGgubWluKHAudG9wLCBtLnRvcCkgKyBvKSwKICAgICAgICAgICAgMCA9PT0gKGggPSBNYXRoLm1heChwLmxlZnQsIG0ubGVmdCkgLSBNYXRoLm1pbihwLmxlZnQsIG0ubGVmdCkpICYmCiAgICAgICAgICAgICAgKGggPSAyKSwKICAgICAgICAgICAgMCA9PT0gKGcgPSBNYXRoLm1heChwLnRvcCwgbS50b3ApIC0gTWF0aC5taW4ocC50b3AsIG0udG9wKSkgJiYKICAgICAgICAgICAgICAoZyA9IDIpLAogICAgICAgICAgICAocyA9IGdldFN2Z1BhdGgocCwgbSwgaCwgZykpLAogICAgICAgICAgICAocyA9IGNvcnJlY3RTdmdQYXRoRm9yS25vdChzLCBsLCBjLCBwLCBtLCBoLCBnKSksCiAgICAgICAgICAgIGQucXVlcnlTZWxlY3RvcigicGF0aCIpLnNldEF0dHJpYnV0ZSgiZCIsIHMpLAogICAgICAgICAgICBkLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICAgICAic3R5bGUiLAogICAgICAgICAgICAgICJ0cmFuc2Zvcm06IHRyYW5zbGF0ZSgiICsgYSArICJweCwgIiArIG4gKyAicHgpIgogICAgICAgICAgICApLAogICAgICAgICAgICBkLnNldEF0dHJpYnV0ZSgid2lkdGgiLCBoKSwKICAgICAgICAgICAgZC5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIGcpKTsKICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiBlKCk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuY29tcHV0ZVNWR0xpbmtXaXRoTW91c2UgPSBmdW5jdGlvbiAodCwgZSwgbywgYSkgewogICAgICB2YXIgbiA9IG51bGwsCiAgICAgICAgcyA9IG51bGwsCiAgICAgICAgaSA9IDAsCiAgICAgICAgciA9IDAsCiAgICAgICAgbCA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgYyA9IHRoaXMuZG9tLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICBkID0gYy50b3AgKyB3aW5kb3cuc2Nyb2xsWSwKICAgICAgICBjID0gYy5sZWZ0ICsgd2luZG93LnNjcm9sbFgsCiAgICAgICAgbCA9IHsKICAgICAgICAgIHRvcDogKGwudG9wICsgd2luZG93LnNjcm9sbFkpIC8gYSwKICAgICAgICAgIGxlZnQ6IChsLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCkgLyBhLAogICAgICAgIH0sCiAgICAgICAgZSA9IHsgbGVmdDogZS5wYWdlWCAvIGEsIHRvcDogZS5wYWdlWSAvIGEgfTsKICAgICAgcmV0dXJuICgKICAgICAgICAobC50b3AgLT0gZCAvIGEpLAogICAgICAgIChsLmxlZnQgLT0gYyAvIGEpLAogICAgICAgIChlLnRvcCAtPSBkIC8gYSksCiAgICAgICAgKGUubGVmdCAtPSBjIC8gYSksCiAgICAgICAgKGQgPSBjb3JyZWN0aW9uV2lkdGgodCkpLAogICAgICAgIChjID0gY29ycmVjdGlvbkhlaWdodCh0KSksCiAgICAgICAgKGEgPSBNYXRoLm1pbihsLmxlZnQsIGUubGVmdCkgKyBkKSwKICAgICAgICAoZCA9IE1hdGgubWluKGwudG9wLCBlLnRvcCkgKyBjKSwKICAgICAgICAwID09PQogICAgICAgICAgKGkgPSAoTWF0aC5tYXgobC5sZWZ0LCBlLmxlZnQpIC0gTWF0aC5taW4obC5sZWZ0LCBlLmxlZnQpKSA+PiAwKSAmJgogICAgICAgICAgKGkgPSAyKSwKICAgICAgICAwID09PSAociA9IChNYXRoLm1heChsLnRvcCwgZS50b3ApIC0gTWF0aC5taW4obC50b3AsIGUudG9wKSkgPj4gMCkgJiYKICAgICAgICAgIChyID0gMiksCiAgICAgICAgKG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoCiAgICAgICAgICAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICAgICAgInN2ZyIKICAgICAgICApKS5jbGFzc0xpc3QuYWRkKCJsaW5rIiwgIm1vdmluZyIpLAogICAgICAgIG4uc2V0QXR0cmlidXRlKCJkYXRhLWlkIiwgbyksCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoCiAgICAgICAgICAic3R5bGUiLAogICAgICAgICAgInRyYW5zZm9ybTogdHJhbnNsYXRlKCIgKyBhICsgInB4LCAiICsgZCArICJweCkiCiAgICAgICAgKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgid2lkdGgiLCBpKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgciksCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKSwKICAgICAgICBuLnNldEF0dHJpYnV0ZSgicG9zaXRpb24iLCAiYWJzb2x1dGUiKSwKICAgICAgICAocyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygKICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgICAgICAicGF0aCIKICAgICAgICApKS5zZXRBdHRyaWJ1dGUoImQiLCBnZXRTdmdQYXRoKGwsIGUsIGksIHIpKSwKICAgICAgICBzLnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgIiIpLAogICAgICAgIHMuc2V0QXR0cmlidXRlKCJwb2ludGVyLWV2ZW50cyIsICJ2aXNpYmxlU3Ryb2tlIiksCiAgICAgICAgcy5zZXRBdHRyaWJ1dGUoImZpbGwiLCAibm9uZSIpLAogICAgICAgIHMuc2V0QXR0cmlidXRlKCJzdHJva2UiLCAiIyIgKyBnZXRMaW5rQ29sb3IodCkpLAogICAgICAgIHMuc2V0QXR0cmlidXRlKCJzdHlsZSIsICIiKSwKICAgICAgICBzLnNldEF0dHJpYnV0ZSgic3Ryb2tlLXdpZHRoIiwgIjIiKSwKICAgICAgICBuLmFwcGVuZENoaWxkKHMpLAogICAgICAgIG4KICAgICAgKTsKICAgIH0pLAogICAgKEVudmlyb25tZW50LnByb3RvdHlwZS5kcmF3TmV3TGluayA9IGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgICh0ID0gdC5xdWVyeVNlbGVjdG9yKCIuY2xpbmsiKSksCiAgICAgICAgKHQgPSB0aGlzLmNvbXB1dGVTVkdMaW5rV2l0aE1vdXNlKHQsIGUsICJtb3ZpbmciLCBvKSk7CiAgICAgIHRoaXMuZG9tLmNhbnZhcy5hcHBlbmRDaGlsZCh0KTsKICAgIH0pLAogICAgKEVudmlyb25tZW50LnByb3RvdHlwZS5tb3ZlTGluayA9IGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgIHRoaXMuZG9tLmNhbnZhcy5xdWVyeVNlbGVjdG9yKCJzdmcubW92aW5nIikucmVtb3ZlKCksCiAgICAgICAgKHQgPSB0LnF1ZXJ5U2VsZWN0b3IoIi5jbGluayIpKSwKICAgICAgICAodCA9IHRoaXMuY29tcHV0ZVNWR0xpbmtXaXRoTW91c2UodCwgZSwgIm1vdmluZyIsIG8pKSwKICAgICAgICB0aGlzLmRvbS5jYW52YXMuYXBwZW5kQ2hpbGQodCk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUubmV3TGluayA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHRoaXMuZG9tLmNhbnZhcy5hcHBlbmRDaGlsZCh0aGlzLmNvbXB1dGVTVkdMaW5rKHQsIGUsICIiKSk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUudXBkYXRlTG9hZGluZyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHRoaXMuZG9tLm92ZXJsYXkudGV4dENvbnRlbnQgPSB0OwogICAgfSksCiAgICAoRW52aXJvbm1lbnQucHJvdG90eXBlLnJlbW92ZUxvYWRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZG9tLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0pLAogICAgKEVudmlyb25tZW50LnByb3RvdHlwZS5zaG93TG9hZGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5kb20ub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuYWRkRGF0YVRpbWVySW5QbGF5Z3JvdW5kID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdGhpcy5kb20uZnJhbWUuc2V0QXR0cmlidXRlKAogICAgICAgICJkYXRhLXBhcnNlX2JsdWVwcmludCIsCiAgICAgICAgKHQucGFyc2VCbHVlcHJpbnQgPj4gMCkudG9TdHJpbmcoKQogICAgICApLAogICAgICAgIHRoaXMuZG9tLmZyYW1lLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICJkYXRhLWNyZWF0ZV9wbGF5Z3JvdW5kIiwKICAgICAgICAgICh0LmNyZWF0ZVBsYXlncm91bmQgPj4gMCkudG9TdHJpbmcoKQogICAgICAgICksCiAgICAgICAgdGhpcy5kb20uZnJhbWUuc2V0QXR0cmlidXRlKAogICAgICAgICAgImRhdGEtZGlzcGxheV9ub2RlcyIsCiAgICAgICAgICAodC5kaXNwbGF5Tm9kZXNJblZpZXdwb3J0ID4+IDApLnRvU3RyaW5nKCkKICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLmZyYW1lLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICJkYXRhLWRyYXdfbGlua3MiLAogICAgICAgICAgKHQuZHJhd0xpbmtzID4+IDApLnRvU3RyaW5nKCkKICAgICAgICApLAogICAgICAgIHRoaXMuZG9tLmZyYW1lLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICJkYXRhLWludGVyYWN0aW9ucyIsCiAgICAgICAgICAodC5zdGFydEFsbEJpbmRpbmcgPj4gMCkudG9TdHJpbmcoKQogICAgICAgICksCiAgICAgICAgdGhpcy5kb20uZnJhbWUuc2V0QXR0cmlidXRlKAogICAgICAgICAgImRhdGEtc3VtIiwKICAgICAgICAgICgKICAgICAgICAgICAgKHQucGFyc2VCbHVlcHJpbnQgKwogICAgICAgICAgICAgIHQuY3JlYXRlUGxheWdyb3VuZCArCiAgICAgICAgICAgICAgdC5kaXNwbGF5Tm9kZXNJblZpZXdwb3J0ICsKICAgICAgICAgICAgICB0LmRyYXdMaW5rcyArCiAgICAgICAgICAgICAgdC5zdGFydEFsbEJpbmRpbmcpID4+CiAgICAgICAgICAgIDAKICAgICAgICAgICkudG9TdHJpbmcoKQogICAgICAgICk7CiAgICB9KSwKICAgIChFbnZpcm9ubWVudC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSBudWxsOwogICAgICBmb3IgKAogICAgICAgIHRoaXMuZG9tLmNhbnZhcyA9IG51bGwsCiAgICAgICAgICB0aGlzLmRvbS5mcmFtZSA9IG51bGwsCiAgICAgICAgICB0aGlzLmRvbS5vdmVybGF5ID0gbnVsbCwKICAgICAgICAgIHQgPSB0aGlzLmRvbS5yb290Lmxhc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgdDsKCiAgICAgICkKICAgICAgICB0aGlzLmRvbS5yb290LnJlbW92ZUNoaWxkKHQpLCAodCA9IHRoaXMuZG9tLnJvb3QubGFzdEVsZW1lbnRDaGlsZCk7CiAgICAgIHRoaXMuZG9tLnJvb3QgPSBudWxsOwogICAgfSk7CiAgZnVuY3Rpb24gTWFpbih0LCBlLCBuKSB7CiAgICB2YXIgciA9IHt9LAogICAgICBpID0gbnVsbDsKICAgIHJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgdAogICAgICA/IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50ICd0ZXh0JywgZXhwZWN0IHN0cmluZywgZ2V0ICIgKyB0eXBlb2YgdCkKICAgICAgOiBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQKICAgICAgPyAoKHIgPSB7IGh0bWxFbGVtZW50OiBlLCBvcHRpb25zOiBuIHx8IHt9LCB0ZXh0OiB0IH0pLAogICAgICAgICh0aGlzLnN0YXJ0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIGkgJiYgKGkuc3RvcCgpLCAoaSA9IG51bGwpKSwKICAgICAgICAgICAgKGkgPSBuZXcgRWRpdG9yKHIudGV4dCwgci5odG1sRWxlbWVudCwgci5vcHRpb25zLCBuZXcgQnVzKCkpKS5zdGFydCgKICAgICAgICAgICAgICB0CiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKHRoaXMudXBkYXRlQmx1ZXByaW50VGV4dCA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHQpCiAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKAogICAgICAgICAgICAgICJBcmd1bWVudCAnbmV3Qmx1ZXByaW50VGV4dCcsIGV4cGVjdCBzdHJpbmcsIGdldCAiICsgdHlwZW9mIHQKICAgICAgICAgICAgKTsKICAgICAgICAgIChyLnRleHQgPSB0KSwgaSAmJiBpLnVwZGF0ZUJsdWVwcmludFRleHQodCwgZSk7CiAgICAgICAgfSksCiAgICAgICAgKHRoaXMuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGkgJiYgKGkuc3RvcCgpLCAoaSA9IG51bGwpKTsKICAgICAgICB9KSwKICAgICAgICAodGhpcy5nZXRCbHVlcHJpbnREYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGkuZ2V0Qmx1ZXByaW50RGF0YSgpOwogICAgICAgIH0pLAogICAgICAgIHZvaWQgKHRoaXMubW92ZVRvID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgIGkubW92ZVRvKHQsIGUsIG4pOwogICAgICAgIH0pKQogICAgICA6IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiQXJndW1lbnQgJ2h0bWxFbGVtZW50JywgZXhwZWN0IEhUTUxFbGVtZW50LCBnZXQgIiArIHR5cGVvZiBlCiAgICAgICAgKTsKICB9CiAgT2JqZWN0LmZyZWV6ZShNYWluLnByb3RvdHlwZSksCiAgICBPYmplY3QuZnJlZXplKE1haW4pLAogICAgKHdpbmRvdy5ibHVlcHJpbnRVRS5yZW5kZXIuTWFpbiA9IE1haW4pOwp9KSgpOwo=`;
  script1.textContent = atob(textContent.trim());

  console.log("script1:"+ script1.textContent);
  document.body.appendChild(script1);

//   document.body.appendChild(script1);
//   script1.onload = () => initializeBlueprintRenderer();
};

function initializeBlueprintRenderer() {
  if (window.blueprintUE && window.blueprintUE.render) {
    console.log("Rendering Blueprint initial state");
  } else {
    console.log("failed to render Blueprint initial state");
  }
}

class BlueprintRendereWidget extends api.NoteContextAwareWidget {
  get position() {
    return 100;
  }


  get parentWidget() {
    return 'center-pane';
  }

  isEnabled() {
    return (
      super.isEnabled() &&
      this.note.type === "text" &&
      this.note.hasLabel("blueprint")
    );
  }

  doRender() {
    this.$widget = $(TPL);
    loadEmbeddedScript();
    return this.$widget;
  }

  async refreshWithNote() {
    const { content } = await this.note.getNoteComplement();

    const regex = /<pre><code class="language-text-x-haskell">([^<]+)<\/code><\/pre>/g;
    let match;
    let matchIndex = 0;

    while ((match = regex.exec(content)) !== null) {
      const codecontent = match[1];
      console.log("Code content:", codecontent);
      if (window.blueprintUE && window.blueprintUE.render) {
        setTimeout(() => {
          const dynamicDivId = "blueprint-render-playground-" + new Date().getTime() + "-" + matchIndex;

          const preElements = document.querySelectorAll("pre > code.language-text-x-haskell");
          const preElement = preElements[matchIndex].parentNode; // Ensure correct preElement is selected
          matchIndex++; // Increment matchIndex for next loop

          const newDiv = document.createElement("div");
          newDiv.id = dynamicDivId;
          newDiv.style.border = "1px solid var(--main-border-color)";
          newDiv.style.height = "643px";
          newDiv.style.marginTop = "10px";

          if (preElement && preElement.parentNode) {
            preElement.parentNode.insertBefore(newDiv, preElement.nextSibling);
          }

          new window.blueprintUE.render.Main(
            codecontent,
            document.getElementById(dynamicDivId),
            { height: "643px" }
          ).start();
        }, 1000);
      } else {
        console.log("Failed to render Blueprint initial state");
      }
    }
  }

  async entitiesReloadedEvent({loadResults}) {
    if (loadResults.isNoteContentReloaded(this.noteId)) {
      this.refresh();
    }
  }
}

module.exports = new BlueprintRendereWidget();